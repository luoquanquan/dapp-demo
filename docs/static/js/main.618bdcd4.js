/*! For license information please see main.618bdcd4.js.LICENSE.txt */
(()=>{var e={91928:(e,t,n)=>{"use strict";n.d(t,{A:()=>Mn});var r=n(13960),i=n(93525),o=n(61433),a=n(92423),s=n(42340),f=n(19644),c=n(55439),l=n(51233),u=n(63977),d=n.n(u),h=n(30385),p=n.n(h);const g=(0,r.createContext)({});var b=n(64399);const y="0x1E0049783F008A0085193E00003D00cd54003c71",m="0xfe8dc6394501a35ad1c4833f40f382e55dada4f3",v=function(){return{1:"0x458c761053bc46bc044bd7c9c68e58c5d44da45f",137:"0xd422e603cad822de9ff2ec61a8491164f748585a",66:"0xd422e603cad822de9ff2ec61a8491164f748585a"}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:1]},w=function(){return{1:"0x300b6acb1851acd39104b99bbe540e02ed6eeec1",137:"0xeb0647bfd3def182e7cbc5bc266cc81ceb83862d"}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:1]},_=function(){return{1:"0x411be70a215df02311d62f9a8cd201b38ae4effd",137:"0xde05fdad44c27365e4fbb91978dd778b4abd0575"}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:1]};var E=n(98036),C=n(54342);const O=["1","137","11155111","314"],x={1:["0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48","0x6b175474e89094c44da98b954eedeac495271d0f","0xdac17f958d2ee523a2206206994597c13d831ec7","0x1f9840a85d5af5bf1d1762f925bdaddc4201f984","0x95ad61b0a150d79219dcf64e1e6cc01f0b64c4ce","0x75231f58b43240c9718dd58b4967c5114342a86c"],137:["0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x3c499c542cef5e3811e1192ce70d8cc03d5c3359","0xac51c4c48dc3116487ed4bc16542e27b5694da1b","0x0000000000000000000000000000000000001010","0x53e0bca35ec356bd5dddfebbd1fc0fd03fabad39","0x1bfd67037b42cf73acf2047067bd4f2c47d9bfd6","0x2c89bbc92bd86f8075d1decc58c7f4e0107f286b"],11155111:["0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x3c499c542cef5e3811e1192ce70d8cc03d5c3359","0xac51c4c48dc3116487ed4bc16542e27b5694da1b","0x0000000000000000000000000000000000001010","0x53e0bca35ec356bd5dddfebbd1fc0fd03fabad39","0x1bfd67037b42cf73acf2047067bd4f2c47d9bfd6","0x2c89bbc92bd86f8075d1decc58c7f4e0107f286b"],314:["0x7b90337f65faa2b2b8ed583ba1ba6eb0c9d7ea44","0x8460766edc62b525fc1fa4d628fc79229dc73031","0xba5cd7ef1414c33e3a250fb89ad7c8f49844762d","0x005e02a4a934142d8dd476f192d0dd9c381b16b4","0xaaef78eaf86dcf34f275288752e892424dda9341","0x44f0f7c774c42dba388fff55c8057a71d5952044","0x8ed1137f81bf8108731735902c9428511347de16","0x4f180e118e8b20eeb87899ce6a497d05dc8319b6","0x422849b355039bc58f2780cc4854919fc9cfaf94"]};const S=function(e){let{chainId:t}=e;const n=v(t),i=_(t),{account:o,provider:s}=(0,r.useContext)(g),[f,u]=(0,r.useState)(!1),p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0x68b3465833fb72A70ecDF485E0e4C7bD8665Fc45";return async()=>{try{u(!0);const n={types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Permit:[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}]},domain:{name:"USD Coin",version:"2",verifyingContract:(0,h.sample)(x[t]),chainId:t},primaryType:"Permit",message:{owner:(0,h.sample)(x[t]),spender:e,value:"25000000",nonce:5,deadline:`${d()().add(2,"day").unix()}`}},r=await s.request({method:"eth_signTypedData_v4",params:[o,JSON.stringify(n)]});C.log(r),(0,b.t)()}catch(n){C.log(n),(0,b.i)()}finally{u(!1)}}},[y,w]=(0,r.useState)(!1),S=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0xef1c6e67703c7bd7107eed8303fbe6ec2554bf6b";return async()=>{try{w(!0);const n={types:{PermitSingle:[{name:"details",type:"PermitDetails"},{name:"spender",type:"address"},{name:"sigDeadline",type:"uint256"}],PermitDetails:[{name:"token",type:"address"},{name:"amount",type:"uint160"},{name:"expiration",type:"uint48"},{name:"nonce",type:"uint48"}],EIP712Domain:[{name:"name",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}]},domain:{name:"Permit2",chainId:t,verifyingContract:(0,h.sample)(x[t])},primaryType:"PermitSingle",message:{details:{token:(0,h.sample)(x[t]),amount:"1461501637330902918203684832716283019655932542975",expiration:`${d()().add(2,"day").unix()}`,nonce:"0"},spender:e,sigDeadline:`${d()().add(3,"day").unix()}`}},r=await s.request({method:"eth_signTypedData_v4",params:[o,JSON.stringify(n)]});C.log(r),(0,b.t)()}catch(n){C.log(n),(0,b.i)()}finally{w(!1)}}},[k,T]=(0,r.useState)(!1),R=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0xef1c6e67703c7bd7107eed8303fbe6ec2554bf6b";return async()=>{try{T(!0);const n={types:{PermitBatch:[{name:"details",type:"PermitDetails[]"},{name:"spender",type:"address"},{name:"sigDeadline",type:"uint256"}],PermitDetails:[{name:"token",type:"address"},{name:"amount",type:"uint160"},{name:"expiration",type:"uint48"},{name:"nonce",type:"uint48"}],EIP712Domain:[{name:"name",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}]},domain:{name:"Permit2",chainId:t,verifyingContract:(0,h.sample)(x[t])},primaryType:"PermitBatch",message:{details:[{token:(0,h.sample)(x[t]),amount:"1461501637330902918203684832716283019655932542975",expiration:`${d()().add(2,"day").unix()}`,nonce:"0"},{token:(0,h.sample)(x[t]),amount:"1461501637330902918203684832716283019655932542975",expiration:`${d()().add(2,"day").unix()}`,nonce:"0"},{token:(0,h.sample)(x[t]),amount:"1461501637330902918203684832716283019655932542975",expiration:`${d()().add(2,"day").unix()}`,nonce:"0"},{token:(0,h.sample)(x[t]),amount:"1461501637330902918203684832716283019655932542975",expiration:`${d()().add(2,"day").unix()}`,nonce:"0"}],spender:e,sigDeadline:`${d()().add(2,"day").unix()}`}},r=await s.request({method:"eth_signTypedData_v4",params:[o,JSON.stringify(n)]});C.log(r),(0,b.t)()}catch(n){C.log(n),(0,b.i)()}finally{T(!1)}}};return(0,E.jsx)(l.A,{xs:24,lg:12,children:(0,E.jsx)(a.Zp,{direction:"vertical",title:"Permit & Permit2 & Permit2 Batch",children:O.includes(`${t}`)?(0,E.jsxs)(c.A,{gutter:8,children:[(0,E.jsxs)(l.A,{xs:24,lg:8,children:[(0,E.jsx)(a.$n,{block:!0,disabled:!o,onClick:p(),loading:f,style:{marginBottom:8},children:"Permit"}),!!n&&(0,E.jsx)(a.$n,{block:!0,color:"danger",disabled:!o,onClick:p(n),loading:f,style:{marginBottom:8},children:"Black"}),!!i&&(0,E.jsx)(a.$n,{block:!0,color:"danger",disabled:!o,onClick:p(i),loading:f,style:{marginBottom:8},children:"StrongBlack"}),(0,E.jsx)(a.$n,{block:!0,disabled:!o,onClick:p(m),loading:f,style:{marginBottom:8},children:"EOA"})]}),(0,E.jsxs)(l.A,{xs:24,lg:8,children:[(0,E.jsx)(a.$n,{block:!0,disabled:!o,onClick:S(),loading:y,style:{marginBottom:8},children:"Permit2"}),!!n&&(0,E.jsx)(a.$n,{block:!0,color:"danger",disabled:!o,onClick:S(n),loading:y,style:{marginBottom:8},children:"Black"}),!!i&&(0,E.jsx)(a.$n,{block:!0,color:"danger",disabled:!o,onClick:p(i),loading:y,style:{marginBottom:8},children:"StrongBlack"}),(0,E.jsx)(a.$n,{block:!0,disabled:!o,loading:y,onClick:S(m),style:{marginBottom:8},children:"EOA"})]}),(0,E.jsxs)(l.A,{xs:24,lg:8,children:[(0,E.jsx)(a.$n,{block:!0,disabled:!o,onClick:R(),loading:k,style:{marginBottom:8},children:"Permit2 Batch"}),!!n&&(0,E.jsx)(a.$n,{block:!0,color:"danger",disabled:!o,onClick:R(n),loading:k,style:{marginBottom:8},children:"Black"}),!!i&&(0,E.jsx)(a.$n,{block:!0,color:"danger",disabled:!o,onClick:p(i),loading:k,style:{marginBottom:8},children:"StrongBlack"}),(0,E.jsx)(a.$n,{block:!0,disabled:!o,onClick:R(m),loading:k,style:{marginBottom:8},children:"EOA"})]})]}):(0,E.jsx)(a.$n,{block:!0,disabled:!o,onClick:()=>{s.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x1"}]})},children:"\u6682\u4e0d\u652f\u6301\u8be5\u7f51\u7edc - \u5207\u6362\u5230 eth \u4e3b\u7f51"})})})};var k=n(54843),T=n(54342);const R=function(){const{account:e,chainId:t,provider:n}=(0,r.useContext)(g),[i,o]=(0,r.useState)(!1),s=function(){let{verifyingContract:r="0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC",fakeMsg:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async()=>{const a={domain:{chainId:t.toString(),name:"Ether Mail",verifyingContract:r,version:"1"},message:i?{"\u2062target\uff02:\uff02THIS IS THE FAKE TARGET\uff02,\uff02message":"THIS IS THE FAKE MESSAGE\uff02\u2062}\u2062 }\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}:{contents:"Hello, Bob!",from:{name:"Cow",wallets:["0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826","0xDeaDbeefdEAdbeefdEadbEEFdeadbeEFdEaDbeeF"]},to:[{name:"Bob",wallets:["0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826","0xDeaDbeefdEAdbeefdEadbEEFdeadbeEFdEaDbeeF"]}]},primaryType:"Mail",types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Group:[{name:"name",type:"string"},{name:"members",type:"Person[]"}],Mail:[{name:"from",type:"Person"},{name:"to",type:"Person[]"},{name:"contents",type:"string"}],Person:[{name:"name",type:"string"},{name:"wallets",type:"address[]"}]}};try{o(!0);const t=await n.request({method:"eth_signTypedData_v4",params:[e,JSON.stringify(a)]});T.log(t),(0,b.t)()}catch(s){T.log(s),(0,b.i)()}finally{o(!1)}}};return(0,E.jsx)(l.A,{xs:24,lg:6,children:(0,E.jsx)(a.Zp,{direction:"vertical",title:"Sign Typed Data V4",children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(a.$n,{block:!0,disabled:!e,onClick:s(),loading:i,children:"eth_signTypedData_v4"}),(0,E.jsx)(a.$n,{block:!0,disabled:!e,onClick:s({verifyingContract:"34567890ihdauhfljadfja"}),loading:i,children:"eip712NotStandard"}),(0,E.jsx)(a.$n,{block:!0,disabled:!e,onClick:s({fakeMsg:!0}),loading:i,children:"longSignText"}),(0,E.jsx)(k.A,{content:"eip712NotStandard & longSignText",children:(0,E.jsx)(a.$n,{block:!0,disabled:!e,onClick:s({verifyingContract:"34567890ihdauhfljadfja",fakeMsg:!0}),loading:i,children:"both"})}),(0,E.jsx)(a.$n,{block:!0,disabled:!e,onClick:async()=>{const r={types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],OrderComponents:[{name:"offerer",type:"address"},{name:"zone",type:"address"},{name:"offer",type:"OfferItem[]"},{name:"consideration",type:"ConsiderationItem[]"},{name:"orderType",type:"uint8"},{name:"startTime",type:"uint256"},{name:"endTime",type:"uint256"},{name:"zoneHash",type:"bytes32"},{name:"salt",type:"uint256"},{name:"conduitKey",type:"bytes32"},{name:"counter",type:"uint256"}],OfferItem:[{name:"itemType",type:"uint8"},{name:"token",type:"address"},{name:"identifierOrCriteria",type:"uint256"},{name:"startAmount",type:"uint256"},{name:"endAmount",type:"uint256"}],ConsiderationItem:[{name:"itemType",type:"uint8"},{name:"token",type:"address"},{name:"identifierOrCriteria",type:"uint256"},{name:"startAmount",type:"uint256"},{name:"endAmount",type:"uint256"},{name:"recipient",type:"address"}]},primaryType:"OrderComponents",domain:{name:"Seaport",version:"1.1",chainId:t.toString(10),verifyingContract:"0x00000000006c3852cbEf3e08E8dF289169EdE581"},message:{offerer:"0x6c8ee01f1f8b62e987b3d18f6f28b22a0ada755f",offer:[{itemType:"2",token:"0xBC4CA0EdA7647A8aB7C2061c2E118A18a936f13D",identifierOrCriteria:"5547",startAmount:"1",endAmount:"1"},{itemType:"2",token:"0x5Af0D9827E0c53E4799BB226655A1de152A425a5",identifierOrCriteria:"5547",startAmount:"1",endAmount:"1"}],consideration:[{itemType:"0",token:"0x0000000000000000000000000000000000000000",identifierOrCriteria:"0",startAmount:"1",endAmount:"1",recipient:"0x6c8ee01f1f8b62e987b3d18f6f28b22a0ada755f"},{itemType:"0",token:"0x0000000000000000000000000000000000000000",identifierOrCriteria:"0",startAmount:"2475000000000000000",endAmount:"2475000000000000000",recipient:"0x0000a26b00c1F0DF003000390027140000fAa719"},{itemType:"0",token:"0x0000000000000000000000000000000000000000",identifierOrCriteria:"0",startAmount:"2475000000000000000",endAmount:"2475000000000000000",recipient:"0xA858DDc0445d8131daC4d1DE01f834ffcbA52Ef1"}],startTime:"1664436437",endTime:"1667028437",orderType:"2",zone:"0x004C00500000aD104D7DBd00e3ae0A5C00560C00",zoneHash:"0x0000000000000000000000000000000000000000000000000000000000000000",salt:"24446860302761739304752683030156737591518664810215442929818054330004503495628",conduitKey:"0x0000007b02230091a7ed01230072f7006a004d60a8d4e71d599b8104250f0000",totalOriginalConsiderationItems:"3",counter:"53"}};try{o(!0);const t=await n.request({method:"eth_signTypedData_v4",params:[e,JSON.stringify(r)]});T.log(t),(0,b.t)()}catch(i){T.log(i),(0,b.i)()}finally{o(!1)}},loading:i,children:"0 \u5143\u8d2d"})]})})})};var A=n(54342);const I=function(){const{account:e,chainId:t,provider:n}=(0,r.useContext)(g),[i,o]=(0,r.useState)(!1),[s,f]=(0,r.useState)(!1),u=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Example `personal_sign` message";return async()=>{try{f(!0);const r=await n.request({method:"personal_sign",params:[t,e,"Example password"]});A.log(r),(0,b.t)()}catch(r){A.log(r),(0,b.i)()}finally{f(!1)}}},[d,h]=(0,r.useState)(!1),p=[{type:"string",name:"Name",value:"Luo Quan Quan"},{type:"uint32",name:"age",value:"18"},{type:"string",name:"Hobby",value:"sing dance rap basketball"}],[y,m]=(0,r.useState)(!1);return(0,E.jsx)(a.Zp,{title:"signMessage",children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsxs)(c.A,{gutter:16,children:[(0,E.jsx)(l.A,{xs:24,lg:8,children:(0,E.jsx)(a.Zp,{direction:"vertical",title:"Eth Sign",children:(0,E.jsx)(a.$x,{direction:"vertical",style:{width:"100%"},children:(0,E.jsx)(a.$n,{loading:i,disabled:!e,block:!0,onClick:async()=>{try{o(!0);const t="0x879a053d4800c6354e76c7985a865d2922c82fb5b3f4577b2fe08b998954f2e0",r=await n.request({method:"eth_sign",params:[e,t]});A.log(r),(0,b.t)()}catch(t){A.log(t),(0,b.i)()}finally{o(!1)}},children:"eth_sign"})})})}),(0,E.jsx)(l.A,{xs:24,lg:8,children:(0,E.jsx)(a.Zp,{direction:"vertical",title:"Personal Sign",children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(a.$n,{block:!0,disabled:!e,onClick:u(),loading:s,children:"personal_sign"}),(0,E.jsx)(a.$n,{block:!0,disabled:!e,onClick:u("0x010000000f1088000000000055f7428300000001fe0065d1d2ad2105ff003cff5c3c80db8b05601f46c35b79f5c6ff3ef6f703fc"),loading:s,children:"personal_sign_with_Garbled"}),(0,E.jsx)(a.$n,{block:!0,disabled:!e,onClick:u("\u6211\u53eb\u7f57\u5708\u5708"),loading:s,children:"personal_sign_with_Chinese_char"})]})})}),(0,E.jsx)(l.A,{xs:24,lg:8,children:(0,E.jsx)(a.Zp,{direction:"vertical",title:"Sign Typed Data",children:(0,E.jsx)(a.$x,{direction:"vertical",style:{width:"100%"},children:(0,E.jsx)(a.$n,{block:!0,disabled:!e,loading:d,onClick:async()=>{try{h(!0);const t=await n.request({method:"eth_signTypedData",params:[p,e]});A.log(t),(0,b.t)()}catch(t){A.log(t),(0,b.i)()}finally{h(!1)}},children:"eth_signTypedData_v1"})})})})]}),(0,E.jsxs)(c.A,{gutter:8,children:[(0,E.jsx)(l.A,{xs:24,lg:6,children:(0,E.jsx)(a.Zp,{direction:"vertical",title:"Sign Typed Data V3",children:(0,E.jsx)(a.$x,{direction:"vertical",style:{width:"100%"},children:(0,E.jsx)(a.$n,{block:!0,disabled:!e,onClick:async()=>{const r={types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Person:[{name:"name",type:"string"},{name:"wallet",type:"address"}],Mail:[{name:"from",type:"Person"},{name:"to",type:"Person"},{name:"contents",type:"string"}]},primaryType:"Mail",domain:{name:"Ether Mail",version:"1",chainId:t,verifyingContract:"0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC"},message:{from:{name:"Cow",test:"0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826"},to:{name:"Bob",wallet:"0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB"},contents:"Hello, Bob!"}};try{m(!1);const t=await n.request({method:"eth_signTypedData_v3",params:[e,JSON.stringify(r)]});A.log(t),(0,b.t)()}catch(i){A.log(i),(0,b.i)()}finally{m(!1)}},loading:y,children:"eth_signTypedData_v3"})})})}),(0,E.jsx)(R,{account:e}),(0,E.jsx)(S,{chainId:t})]})]})})};function N(){const{chainId:e}=(0,r.useContext)(g);return(0,E.jsxs)(a.Zp,{title:"Network",children:["ChainId:",e]})}var P=n(52297);function D(e){let{loading:t,handleConnect:n,account:r,children:i,handleDisconnect:o=()=>P.Ay.error("not supported ~")}=e;return(0,E.jsx)(a.Zp,{title:"Connect status",children:(0,E.jsxs)(a.$x,{wrap:!0,children:[(0,E.jsx)(a.$n,{color:"primary",loading:t,disabled:!!r,onClick:n,children:"Connect Wallet"}),i,(0,E.jsx)(a.$n,{color:"danger",loading:t,disabled:!r,onClick:o,children:"Disconnect"})]})})}var B=n(54342);const M={4e3:"\u540c\u4e00\u4e2a DApp \u5df2\u7ecf\u53d1\u8d77\u4e86\u8fde\u63a5\u7f51\u7ad9\u8bf7\u6c42",4001:"\u7528\u6237\u62d2\u7edd\u8fde\u63a5"};function K(e){let{account:t,children:n}=e;return(0,E.jsx)(a.Zp,{title:"Current connected account",children:(0,E.jsxs)(a.$x,{direction:"vertical",children:[t||"--",n]})})}var L=n(14141),U=n(84478),j=n(16868);const W=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"numberOfTokens",type:"uint256"}],name:"mintNFTs",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],H=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mintBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"newuri",type:"string"}],name:"setURI",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenid",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],$=[{chain:"Polygon",chainId:"0x89",address:"0xbfc5224DF96f01ad37D874E5a477aAFb92a5E970"}];const q=function(){const{account:e,provider:t,chainId:n}=(0,r.useContext)(g),i=v(n),o=_(n),[s,f]=(0,r.useState)({}),[u,d]=(0,r.useState)(!1),h=(0,r.useRef)();(0,r.useEffect)((()=>{(async()=>{const n=new URLSearchParams(window.location.search).get("nftAddress");if(e&&n){var r;null===(r=h.current)||void 0===r||r.scrollIntoView({behavior:"smooth"});const e=$.find((e=>{let{address:t}=e;return t===n}));e&&await t.request({method:"wallet_switchEthereumChain",params:[{chainId:e.chainId}]});const i=new L.NZ(n,W,new U.j(t,"any").getSigner());f(i)}})()}),[e,t]);const[p,b]=(0,r.useState)(!1),[w,C]=(0,r.useState)("1"),[O,x]=(0,r.useState)(!1),[S,k]=(0,r.useState)("3"),T=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;return async()=>{try{x(!0);const n=await s.approve(t,S,{from:e});await n.wait(),P.Ay.success("\u6388\u6743\u6210\u529f")}catch(n){P.Ay.error("\u6388\u6743\u5931\u8d25")}finally{x(!1)}}},[R,A]=(0,r.useState)(!1),I=function(){let{spender:e=y,isApprove:t=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async()=>{try{A(!0);const n=await s.setApprovalForAll(e,t);await n.wait(),P.Ay.success("\u6388\u6743\u6210\u529f")}catch(n){P.Ay.error("\u6388\u6743\u5931\u8d25")}finally{A(!1)}}},[N,D]=(0,r.useState)("3"),[B,M]=(0,r.useState)(!1),[K,H]=(0,r.useState)(!1),q=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return async()=>{try{H(!0);const n=await s.transferFrom(e,t,N||"1",{from:e});await n.wait(),P.Ay.success("\u8f6c\u79fb\u6210\u529f")}catch(n){P.Ay.error("\u8f6c\u79fb\u5931\u8d25")}finally{H(!1)}}},X=s.address&&e;return(0,E.jsx)("div",{ref:h,children:(0,E.jsx)(a.Zp,{direction:"vertical",title:"ERC721",children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(j.A,{type:"info",message:"\u5408\u96c6\u5730\u5740",description:s.address}),(0,E.jsx)(a.$n,{block:!0,loading:u,onClick:async()=>{try{d(!0);const e=new L.PM(W,"0x60806040523480156200001157600080fd5b506040518060400160405280600c81526020017f54657374446170704e46547300000000000000000000000000000000000000008152506040518060400160405280600381526020017f54444e000000000000000000000000000000000000000000000000000000000081525081600090816200008f919062000324565b508060019081620000a1919062000324565b5050506200040b565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806200012c57607f821691505b602082108103620001425762000141620000e4565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302620001ac7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826200016d565b620001b886836200016d565b95508019841693508086168417925050509392505050565b6000819050919050565b6000819050919050565b600062000205620001ff620001f984620001d0565b620001da565b620001d0565b9050919050565b6000819050919050565b6200022183620001e4565b6200023962000230826200020c565b8484546200017a565b825550505050565b600090565b6200025062000241565b6200025d81848462000216565b505050565b5b8181101562000285576200027960008262000246565b60018101905062000263565b5050565b601f821115620002d4576200029e8162000148565b620002a9846200015d565b81016020851015620002b9578190505b620002d1620002c8856200015d565b83018262000262565b50505b505050565b600082821c905092915050565b6000620002f960001984600802620002d9565b1980831691505092915050565b6000620003148383620002e6565b9150826002028217905092915050565b6200032f82620000aa565b67ffffffffffffffff8111156200034b576200034a620000b5565b5b62000357825462000113565b6200036482828562000289565b600060209050601f8311600181146200039c576000841562000387578287015190505b62000393858262000306565b86555062000403565b601f198416620003ac8662000148565b60005b82811015620003d657848901518255600182019150602085019450602081019050620003af565b86831015620003f65784890151620003f2601f891682620002e6565b8355505b6001600288020188555050505b505050505050565b612be6806200041b6000396000f3fe608060405234801561001057600080fd5b50600436106100f45760003560e01c806342842e0e11610097578063a22cb46511610066578063a22cb46514610283578063b88d4fde1461029f578063c87b56dd146102bb578063e985e9c5146102eb576100f4565b806342842e0e146101e95780636352211e1461020557806370a082311461023557806395d89b4114610265576100f4565b8063081812fc116100d3578063081812fc14610165578063095ea7b31461019557806323b872dd146101b15780633b4b1381146101cd576100f4565b80629a9b7b146100f957806301ffc9a71461011757806306fdde0314610147575b600080fd5b61010161031b565b60405161010e91906119ac565b60405180910390f35b610131600480360381019061012c9190611a33565b61032c565b60405161013e9190611a7b565b60405180910390f35b61014f61040e565b60405161015c9190611b26565b60405180910390f35b61017f600480360381019061017a9190611b74565b6104a0565b60405161018c9190611be2565b60405180910390f35b6101af60048036038101906101aa9190611c29565b6104e6565b005b6101cb60048036038101906101c69190611c69565b6105fd565b005b6101e760048036038101906101e29190611b74565b61065d565b005b61020360048036038101906101fe9190611c69565b6106ac565b005b61021f600480360381019061021a9190611b74565b6106cc565b60405161022c9190611be2565b60405180910390f35b61024f600480360381019061024a9190611cbc565b610752565b60405161025c91906119ac565b60405180910390f35b61026d610809565b60405161027a9190611b26565b60405180910390f35b61029d60048036038101906102989190611d15565b61089b565b005b6102b960048036038101906102b49190611e8a565b6108b1565b005b6102d560048036038101906102d09190611b74565b610913565b6040516102e29190611b26565b60405180910390f35b61030560048036038101906103009190611f0d565b6109ac565b6040516103129190611a7b565b60405180910390f35b60006103276006610a40565b905090565b60007f80ac58cd000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614806103f757507f5b5e139f000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b80610407575061040682610a4e565b5b9050919050565b60606000805461041d90611f7c565b80601f016020809104026020016040519081016040528092919081815260200182805461044990611f7c565b80156104965780601f1061046b57610100808354040283529160200191610496565b820191906000526020600020905b81548152906001019060200180831161047957829003601f168201915b5050505050905090565b60006104ab82610ab8565b6004600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b60006104f1826106cc565b90508073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610561576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105589061201f565b60405180910390fd5b8073ffffffffffffffffffffffffffffffffffffffff16610580610b03565b73ffffffffffffffffffffffffffffffffffffffff1614806105af57506105ae816105a9610b03565b6109ac565b5b6105ee576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105e5906120b1565b60405180910390fd5b6105f88383610b0b565b505050565b61060e610608610b03565b82610bc4565b61064d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161064490612143565b60405180910390fd5b610658838383610c59565b505050565b6000600190505b8181116106a8576106756006610f52565b60006106816006610a40565b905061069461068e610b03565b82610f68565b5080806106a090612192565b915050610664565b5050565b6106c7838383604051806020016040528060008152506108b1565b505050565b6000806106d883610f86565b9050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1603610749576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161074090612226565b60405180910390fd5b80915050919050565b60008073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036107c2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107b9906122b8565b60405180910390fd5b600360008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b60606001805461081890611f7c565b80601f016020809104026020016040519081016040528092919081815260200182805461084490611f7c565b80156108915780601f1061086657610100808354040283529160200191610891565b820191906000526020600020905b81548152906001019060200180831161087457829003601f168201915b5050505050905090565b6108ad6108a6610b03565b8383610fc3565b5050565b6108c26108bc610b03565b83610bc4565b610901576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108f890612143565b60405180910390fd5b61090d8484848461112f565b50505050565b6060600060405180610160016040528061013c8152602001612a7561013c9139905060006109408461118b565b61094983611259565b6109528661118b565b604051602001610964939291906124b6565b6040516020818303038152906040529050600061098082611259565b604051602001610990919061255f565b6040516020818303038152906040529050809350505050919050565b6000600560008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16905092915050565b600081600001549050919050565b60007f01ffc9a7000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b610ac1816113d1565b610b00576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610af790612226565b60405180910390fd5b50565b600033905090565b816004600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff16610b7e836106cc565b73ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a45050565b600080610bd0836106cc565b90508073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff161480610c125750610c1181856109ac565b5b80610c5057508373ffffffffffffffffffffffffffffffffffffffff16610c38846104a0565b73ffffffffffffffffffffffffffffffffffffffff16145b91505092915050565b8273ffffffffffffffffffffffffffffffffffffffff16610c79826106cc565b73ffffffffffffffffffffffffffffffffffffffff1614610ccf576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cc6906125f3565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610d3e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d3590612685565b60405180910390fd5b610d4b8383836001611412565b8273ffffffffffffffffffffffffffffffffffffffff16610d6b826106cc565b73ffffffffffffffffffffffffffffffffffffffff1614610dc1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610db8906125f3565b60405180910390fd5b6004600082815260200190815260200160002060006101000a81549073ffffffffffffffffffffffffffffffffffffffff02191690556001600360008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055506001600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540192505081905550816002600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a4610f4d8383836001611418565b505050565b6001816000016000828254019250508190555050565b610f8282826040518060200160405280600081525061141e565b5050565b60006002600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603611031576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611028906126f1565b60405180910390fd5b80600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31836040516111229190611a7b565b60405180910390a3505050565b61113a848484610c59565b61114684848484611479565b611185576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161117c90612783565b60405180910390fd5b50505050565b60606000600161119a84611600565b01905060008167ffffffffffffffff8111156111b9576111b8611d5f565b5b6040519080825280601f01601f1916602001820160405280156111eb5781602001600182028036833780820191505090505b509050600082602001820190505b60011561124e578080600190039150507f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a8581611242576112416127a3565b5b049450600085036111f9575b819350505050919050565b6060600082510361127b576040518060200160405280600081525090506113cc565b6000604051806060016040528060408152602001612a3560409139905060006003600285516112aa91906127d2565b6112b49190612806565b60046112c09190612837565b905060006020826112d191906127d2565b67ffffffffffffffff8111156112ea576112e9611d5f565b5b6040519080825280601f01601f19166020018201604052801561131c5781602001600182028036833780820191505090505b509050818152600183018586518101602084015b8183101561138b576003830192508251603f8160121c168501518253600182019150603f81600c1c168501518253600182019150603f8160061c168501518253600182019150603f8116850151825360018201915050611330565b6003895106600181146113a557600281146113b5576113c0565b613d3d60f01b60028303526113c0565b603d60f81b60018303525b50505050508093505050505b919050565b60008073ffffffffffffffffffffffffffffffffffffffff166113f383610f86565b73ffffffffffffffffffffffffffffffffffffffff1614159050919050565b50505050565b50505050565b6114288383611753565b6114356000848484611479565b611474576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161146b90612783565b60405180910390fd5b505050565b600061149a8473ffffffffffffffffffffffffffffffffffffffff16611970565b156115f3578373ffffffffffffffffffffffffffffffffffffffff1663150b7a026114c3610b03565b8786866040518563ffffffff1660e01b81526004016114e594939291906128ce565b6020604051808303816000875af192505050801561152157506040513d601f19601f8201168201806040525081019061151e919061292f565b60015b6115a3573d8060008114611551576040519150601f19603f3d011682016040523d82523d6000602084013e611556565b606091505b50600081510361159b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161159290612783565b60405180910390fd5b805181602001fd5b63150b7a0260e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149150506115f8565b600190505b949350505050565b600080600090507a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000831061165e577a184f03e93ff9f4daa797ed6e38ed64bf6a1f0100000000000000008381611654576116536127a3565b5b0492506040810190505b6d04ee2d6d415b85acef8100000000831061169b576d04ee2d6d415b85acef81000000008381611691576116906127a3565b5b0492506020810190505b662386f26fc1000083106116ca57662386f26fc1000083816116c0576116bf6127a3565b5b0492506010810190505b6305f5e10083106116f3576305f5e10083816116e9576116e86127a3565b5b0492506008810190505b612710831061171857612710838161170e5761170d6127a3565b5b0492506004810190505b6064831061173b5760648381611731576117306127a3565b5b0492506002810190505b600a831061174a576001810190505b80915050919050565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036117c2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016117b9906129a8565b60405180910390fd5b6117cb816113d1565b1561180b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161180290612a14565b60405180910390fd5b611819600083836001611412565b611822816113d1565b15611862576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161185990612a14565b60405180910390fd5b6001600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540192505081905550816002600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a461196c600083836001611418565b5050565b6000808273ffffffffffffffffffffffffffffffffffffffff163b119050919050565b6000819050919050565b6119a681611993565b82525050565b60006020820190506119c1600083018461199d565b92915050565b6000604051905090565b600080fd5b600080fd5b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b611a10816119db565b8114611a1b57600080fd5b50565b600081359050611a2d81611a07565b92915050565b600060208284031215611a4957611a486119d1565b5b6000611a5784828501611a1e565b91505092915050565b60008115159050919050565b611a7581611a60565b82525050565b6000602082019050611a906000830184611a6c565b92915050565b600081519050919050565b600082825260208201905092915050565b60005b83811015611ad0578082015181840152602081019050611ab5565b60008484015250505050565b6000601f19601f8301169050919050565b6000611af882611a96565b611b028185611aa1565b9350611b12818560208601611ab2565b611b1b81611adc565b840191505092915050565b60006020820190508181036000830152611b408184611aed565b905092915050565b611b5181611993565b8114611b5c57600080fd5b50565b600081359050611b6e81611b48565b92915050565b600060208284031215611b8a57611b896119d1565b5b6000611b9884828501611b5f565b91505092915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000611bcc82611ba1565b9050919050565b611bdc81611bc1565b82525050565b6000602082019050611bf76000830184611bd3565b92915050565b611c0681611bc1565b8114611c1157600080fd5b50565b600081359050611c2381611bfd565b92915050565b60008060408385031215611c4057611c3f6119d1565b5b6000611c4e85828601611c14565b9250506020611c5f85828601611b5f565b9150509250929050565b600080600060608486031215611c8257611c816119d1565b5b6000611c9086828701611c14565b9350506020611ca186828701611c14565b9250506040611cb286828701611b5f565b9150509250925092565b600060208284031215611cd257611cd16119d1565b5b6000611ce084828501611c14565b91505092915050565b611cf281611a60565b8114611cfd57600080fd5b50565b600081359050611d0f81611ce9565b92915050565b60008060408385031215611d2c57611d2b6119d1565b5b6000611d3a85828601611c14565b9250506020611d4b85828601611d00565b9150509250929050565b600080fd5b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b611d9782611adc565b810181811067ffffffffffffffff82111715611db657611db5611d5f565b5b80604052505050565b6000611dc96119c7565b9050611dd58282611d8e565b919050565b600067ffffffffffffffff821115611df557611df4611d5f565b5b611dfe82611adc565b9050602081019050919050565b82818337600083830152505050565b6000611e2d611e2884611dda565b611dbf565b905082815260208101848484011115611e4957611e48611d5a565b5b611e54848285611e0b565b509392505050565b600082601f830112611e7157611e70611d55565b5b8135611e81848260208601611e1a565b91505092915050565b60008060008060808587031215611ea457611ea36119d1565b5b6000611eb287828801611c14565b9450506020611ec387828801611c14565b9350506040611ed487828801611b5f565b925050606085013567ffffffffffffffff811115611ef557611ef46119d6565b5b611f0187828801611e5c565b91505092959194509250565b60008060408385031215611f2457611f236119d1565b5b6000611f3285828601611c14565b9250506020611f4385828601611c14565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680611f9457607f821691505b602082108103611fa757611fa6611f4d565b5b50919050565b7f4552433732313a20617070726f76616c20746f2063757272656e74206f776e6560008201527f7200000000000000000000000000000000000000000000000000000000000000602082015250565b6000612009602183611aa1565b915061201482611fad565b604082019050919050565b6000602082019050818103600083015261203881611ffc565b9050919050565b7f4552433732313a20617070726f76652063616c6c6572206973206e6f7420746f60008201527f6b656e206f776e6572206f7220617070726f76656420666f7220616c6c000000602082015250565b600061209b603d83611aa1565b91506120a68261203f565b604082019050919050565b600060208201905081810360008301526120ca8161208e565b9050919050565b7f4552433732313a2063616c6c6572206973206e6f7420746f6b656e206f776e6560008201527f72206f7220617070726f76656400000000000000000000000000000000000000602082015250565b600061212d602d83611aa1565b9150612138826120d1565b604082019050919050565b6000602082019050818103600083015261215c81612120565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061219d82611993565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82036121cf576121ce612163565b5b600182019050919050565b7f4552433732313a20696e76616c696420746f6b656e2049440000000000000000600082015250565b6000612210601883611aa1565b915061221b826121da565b602082019050919050565b6000602082019050818103600083015261223f81612203565b9050919050565b7f4552433732313a2061646472657373207a65726f206973206e6f74206120766160008201527f6c6964206f776e65720000000000000000000000000000000000000000000000602082015250565b60006122a2602983611aa1565b91506122ad82612246565b604082019050919050565b600060208201905081810360008301526122d181612295565b9050919050565b600081905092915050565b7f7b226e616d65223a2022546573742044617070204e4654732023000000000000600082015250565b6000612319601a836122d8565b9150612324826122e3565b601a82019050919050565b600061233a82611a96565b61234481856122d8565b9350612354818560208601611ab2565b80840191505092915050565b7f222c20226465736372697074696f6e223a2022546573742044617070204e465460008201527f7320666f722074657374696e672e222c2022696d616765223a2022646174613a60208201527f696d6167652f7376672b786d6c3b6261736536342c0000000000000000000000604082015250565b60006123e26055836122d8565b91506123ed82612360565b605582019050919050565b7f222c202261747472696275746573223a205b7b2274726169745f74797065223a60008201527f2022546f6b656e204964222c202276616c7565223a2022000000000000000000602082015250565b60006124546037836122d8565b915061245f826123f8565b603782019050919050565b7f227d5d7d00000000000000000000000000000000000000000000000000000000600082015250565b60006124a06004836122d8565b91506124ab8261246a565b600482019050919050565b60006124c18261230c565b91506124cd828661232f565b91506124d8826123d5565b91506124e4828561232f565b91506124ef82612447565b91506124fb828461232f565b915061250682612493565b9150819050949350505050565b7f646174613a6170706c69636174696f6e2f6a736f6e3b6261736536342c000000600082015250565b6000612549601d836122d8565b915061255482612513565b601d82019050919050565b600061256a8261253c565b9150612576828461232f565b915081905092915050565b7f4552433732313a207472616e736665722066726f6d20696e636f72726563742060008201527f6f776e6572000000000000000000000000000000000000000000000000000000602082015250565b60006125dd602583611aa1565b91506125e882612581565b604082019050919050565b6000602082019050818103600083015261260c816125d0565b9050919050565b7f4552433732313a207472616e7366657220746f20746865207a65726f2061646460008201527f7265737300000000000000000000000000000000000000000000000000000000602082015250565b600061266f602483611aa1565b915061267a82612613565b604082019050919050565b6000602082019050818103600083015261269e81612662565b9050919050565b7f4552433732313a20617070726f766520746f2063616c6c657200000000000000600082015250565b60006126db601983611aa1565b91506126e6826126a5565b602082019050919050565b6000602082019050818103600083015261270a816126ce565b9050919050565b7f4552433732313a207472616e7366657220746f206e6f6e20455243373231526560008201527f63656976657220696d706c656d656e7465720000000000000000000000000000602082015250565b600061276d603283611aa1565b915061277882612711565b604082019050919050565b6000602082019050818103600083015261279c81612760565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b60006127dd82611993565b91506127e883611993565b9250828201905080821115612800576127ff612163565b5b92915050565b600061281182611993565b915061281c83611993565b92508261282c5761282b6127a3565b5b828204905092915050565b600061284282611993565b915061284d83611993565b925082820261285b81611993565b9150828204841483151761287257612871612163565b5b5092915050565b600081519050919050565b600082825260208201905092915050565b60006128a082612879565b6128aa8185612884565b93506128ba818560208601611ab2565b6128c381611adc565b840191505092915050565b60006080820190506128e36000830187611bd3565b6128f06020830186611bd3565b6128fd604083018561199d565b818103606083015261290f8184612895565b905095945050505050565b60008151905061292981611a07565b92915050565b600060208284031215612945576129446119d1565b5b60006129538482850161291a565b91505092915050565b7f4552433732313a206d696e7420746f20746865207a65726f2061646472657373600082015250565b6000612992602083611aa1565b915061299d8261295c565b602082019050919050565b600060208201905081810360008301526129c181612985565b9050919050565b7f4552433732313a20746f6b656e20616c7265616479206d696e74656400000000600082015250565b60006129fe601c83611aa1565b9150612a09826129c8565b602082019050919050565b60006020820190508181036000830152612a2d816129f1565b905091905056fe4142434445464748494a4b4c4d4e4f505152535455565758595a6162636465666768696a6b6c6d6e6f707172737475767778797a303132333435363738392b2f3c737667206865696768743d22333530222077696474683d22333530222076696577426f783d2230203020313030203130302220786d6c6e733d22687474703a2f2f7777772e77332e6f72672f323030302f737667223e3c646566733e3c706174682069643d224d7950617468222066696c6c3d226e6f6e6522207374726f6b653d227265642220643d224d31302c3930205139302c39302039302c3435205139302c31302035302c3130205131302c31302031302c3430205131302c37302034352c3730205137302c37302037352c353022202f3e3c2f646566733e3c746578743e3c746578745061746820687265663d22234d7950617468223e517569636b2062726f776e20666f78206a756d7073206f76657220746865206c617a7920646f672e3c2f74657874506174683e3c2f746578743e3c2f7376673ea2646970667358221220922487cf7bfec55ad9cf0c646397333bb79204b1a8ef63134f78b23d697570ef64736f6c63430008120033",new U.j(t,"any").getSigner()),n=await e.deploy();await n.deployTransaction.wait(),f(n),P.Ay.success("\u521b\u5efa\u6210\u529f")}catch(e){P.Ay.error("\u521b\u5efa\u5931\u8d25")}finally{d(!1)}},disabled:s.address||!e,children:"Deploy"}),(0,E.jsx)(a.pd,{value:w,disabled:!X,placeholder:"\u8bf7\u8f93\u5165 mint \u6570\u91cf",onChange:C}),(0,E.jsx)(a.$n,{block:!0,loading:p,onClick:async()=>{try{b(!0);const t=await s.mintNFTs(w||"1",{from:e});await t.wait(),P.Ay.success("mint \u6210\u529f")}catch(t){P.Ay.error("mint \u5931\u8d25")}finally{b(!1)}},disabled:!X||!w,children:"Mint"}),(0,E.jsx)(a.pd,{placeholder:"\u8bf7\u8f93\u5165\u6388\u6743 nft id",value:S,onChange:k}),(0,E.jsx)(a.$n,{block:!0,loading:O,onClick:T(),disabled:!X||!S,children:"approve"}),!!i&&(0,E.jsx)(a.$n,{block:!0,color:"danger",loading:O,onClick:T(i),disabled:!X||!S,children:"approve Black Address"}),!!o&&(0,E.jsx)(a.$n,{block:!0,color:"danger",loading:O,onClick:T(o),disabled:!X||!S,children:"approve Strong Black Address"}),(0,E.jsx)(a.$n,{block:!0,color:"warning",loading:O,onClick:T(m),disabled:!X||!S,children:"approve to EOA"}),(0,E.jsx)(a.$n,{block:!0,loading:R,onClick:I(),disabled:!X,children:"setApprovalForAll"}),!!i&&(0,E.jsx)(a.$n,{block:!0,color:"danger",loading:R,onClick:I({spender:i}),disabled:!X,children:"setApprovalForAll Black Address"}),!!i&&(0,E.jsx)(a.$n,{block:!0,color:"danger",loading:R,onClick:I({spender:o}),disabled:!X,children:"setApprovalForAll Strong Black Address"}),(0,E.jsx)(a.$n,{block:!0,color:"warning",loading:R,onClick:I({spender:m}),disabled:!X,children:"setApprovalForAll to EOA"}),(0,E.jsx)(a.$n,{block:!0,onClick:I({isApprove:!1}),loading:R,disabled:!X,children:"revoke"}),(0,E.jsx)(a.pd,{value:N,placeholder:"\u8bf7\u8bbe\u7f6e\u8f6c\u79fb\u6570\u91cf",onChange:e=>{let{target:{value:t}}=e;D(t)}}),(0,E.jsx)(a.$n,{block:!0,onClick:async()=>{try{M(!0);const t=await s.transferFrom(e,y,N||"1",{from:e});await t.wait(),P.Ay.success("\u8f6c\u79fb\u6210\u529f")}catch(t){P.Ay.error("\u8f6c\u79fb\u5931\u8d25")}finally{M(!1)}},loading:B,disabled:!X,children:"\u8f6c\u79fb NFT"}),!!i&&(0,E.jsx)(a.$n,{block:!0,color:"danger",onClick:q(),loading:K,disabled:!X,children:"Transfer NFT to Black Address"}),!!o&&(0,E.jsx)(a.$n,{block:!0,color:"danger",onClick:q(o),loading:K,disabled:!X,children:"Transfer NFT to Strong Black Address"}),(0,E.jsx)(j.A,{type:"info",message:"\u6d4b\u8bd5 NFT",description:(0,E.jsx)(c.A,{gutter:12,children:$.map((e=>(0,E.jsx)(l.A,{children:(0,E.jsx)("a",{href:`/dapp-demo/?nftAddress=${e.address}`,children:e.chain})},e.address)))})})]})})})};var X=n(13513),F=n(36951);const z=[{chain:"Polygon",chainId:"0x89",address:"0x2bf22a1143f406C2DEb7ECEBfEd26755d1124683"}];const J=function(){const{account:e,provider:t,chainId:n}=(0,r.useContext)(g),i=v(n),o=_(n),[s,f]=(0,r.useState)({}),u=(0,r.useRef)(),[d,h]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{const n=new URLSearchParams(window.location.search).get("erc1155Address");if(e&&n){var r;null===(r=u.current)||void 0===r||r.scrollIntoView({behavior:"smooth"});const e=z.find((e=>{let{address:t}=e;return t===n}));e&&await t.request({method:"wallet_switchEthereumChain",params:[{chainId:e.chainId}]});const i=new L.NZ(n,H,new U.j(t,"any").getSigner());f(i)}})()}),[e,t]);const[p,b]=(0,r.useState)(!1),[w,C]=(0,r.useState)("1, 2, 3"),[O,x]=(0,r.useState)("1, 5, 7"),[S,k]=(0,r.useState)(!1),T=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;return async()=>{try{k(!0),await s.safeBatchTransferFrom(e,t,w.split(",").map(Number),O.split(",").map(Number),"0x")}catch(n){P.Ay.error(n.message)}finally{k(!1)}}},[R,A]=(0,r.useState)(!1),I=function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y;return async()=>{try{A(!0);const r=await s.setApprovalForAll(n,t,{from:e});await r.wait()}catch(r){P.Ay.error(r.message)}finally{A(!1)}}};return(0,E.jsx)("div",{ref:u,children:(0,E.jsx)(a.Zp,{direction:"vertical",title:"ERC1155",children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(j.A,{type:"info",message:"\u5408\u96c6\u5730\u5740",description:s.address}),(0,E.jsx)(a.$n,{block:!0,loading:d,onClick:async()=>{try{h(!0);const e=new L.PM(H,"0x60806040523480156200001157600080fd5b5060405180608001604052806043815260200162003893604391396200003d816200006460201b60201c565b506200005e620000526200007960201b60201c565b6200008160201b60201c565b620004a8565b8060029081620000759190620003c1565b5050565b600033905090565b6000600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680620001c957607f821691505b602082108103620001df57620001de62000181565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302620002497fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826200020a565b6200025586836200020a565b95508019841693508086168417925050509392505050565b6000819050919050565b6000819050919050565b6000620002a26200029c62000296846200026d565b62000277565b6200026d565b9050919050565b6000819050919050565b620002be8362000281565b620002d6620002cd82620002a9565b84845462000217565b825550505050565b600090565b620002ed620002de565b620002fa818484620002b3565b505050565b5b81811015620003225762000316600082620002e3565b60018101905062000300565b5050565b601f82111562000371576200033b81620001e5565b6200034684620001fa565b8101602085101562000356578190505b6200036e6200036585620001fa565b830182620002ff565b50505b505050565b600082821c905092915050565b6000620003966000198460080262000376565b1980831691505092915050565b6000620003b1838362000383565b9150826002028217905092915050565b620003cc8262000147565b67ffffffffffffffff811115620003e857620003e762000152565b5b620003f48254620001b0565b6200040182828562000326565b600060209050601f83116001811462000439576000841562000424578287015190505b620004308582620003a3565b865550620004a0565b601f1984166200044986620001e5565b60005b8281101562000473578489015182556001820191506020850194506020810190506200044c565b868310156200049357848901516200048f601f89168262000383565b8355505b6001600288020188555050505b505050505050565b6133db80620004b86000396000f3fe608060405234801561001057600080fd5b50600436106100e95760003560e01c80634e1273f41161008c578063a22cb46511610066578063a22cb46514610248578063e985e9c514610264578063f242432a14610294578063f2fde38b146102b0576100e9565b80634e1273f4146101f0578063715018a6146102205780638da5cb5b1461022a576100e9565b806306fdde03116100c857806306fdde031461016a5780630e89341c146101885780631f7fdffa146101b85780632eb2c2d6146101d4576100e9565b8062fdd58e146100ee57806301ffc9a71461011e57806302fe53051461014e575b600080fd5b61010860048036038101906101039190611bb3565b6102cc565b6040516101159190611c02565b60405180910390f35b61013860048036038101906101339190611c75565b610394565b6040516101459190611cbd565b60405180910390f35b61016860048036038101906101639190611e1e565b610476565b005b61017261048a565b60405161017f9190611ee6565b60405180910390f35b6101a2600480360381019061019d9190611f08565b6104c3565b6040516101af9190611ee6565b60405180910390f35b6101d260048036038101906101cd919061209e565b6104fe565b005b6101ee60048036038101906101e99190612159565b610518565b005b61020a600480360381019061020591906122eb565b6105b9565b6040516102179190612421565b60405180910390f35b6102286106d2565b005b6102326106e6565b60405161023f9190612452565b60405180910390f35b610262600480360381019061025d9190612499565b610710565b005b61027e600480360381019061027991906124d9565b610726565b60405161028b9190611cbd565b60405180910390f35b6102ae60048036038101906102a99190612519565b6107ba565b005b6102ca60048036038101906102c591906125b0565b61085b565b005b60008073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff160361033c576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016103339061264f565b60405180910390fd5b60008083815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b60007fd9b67a26000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916148061045f57507f0e89341c000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b8061046f575061046e826108de565b5b9050919050565b61047e610948565b610487816109c6565b50565b6040518060400160405280600781526020017f455243313135350000000000000000000000000000000000000000000000000081525081565b60606104ce826109d9565b6104d783610a6d565b6040516020016104e89291906126f7565b6040516020818303038152906040529050919050565b610506610948565b61051284848484610b3b565b50505050565b610520610d67565b73ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff161480610566575061056585610560610d67565b610726565b5b6105a5576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161059c90612798565b60405180910390fd5b6105b28585858585610d6f565b5050505050565b606081518351146105ff576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105f69061282a565b60405180910390fd5b6000835167ffffffffffffffff81111561061c5761061b611cf3565b5b60405190808252806020026020018201604052801561064a5781602001602082028036833780820191505090505b50905060005b84518110156106c75761069785828151811061066f5761066e61284a565b5b602002602001015185838151811061068a5761068961284a565b5b60200260200101516102cc565b8282815181106106aa576106a961284a565b5b602002602001018181525050806106c0906128a8565b9050610650565b508091505092915050565b6106da610948565b6106e46000611090565b565b6000600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b61072261071b610d67565b8383611156565b5050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16905092915050565b6107c2610d67565b73ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff161480610808575061080785610802610d67565b610726565b5b610847576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161083e90612798565b60405180910390fd5b61085485858585856112c2565b5050505050565b610863610948565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036108d2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108c990612962565b60405180910390fd5b6108db81611090565b50565b60007f01ffc9a7000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b610950610d67565b73ffffffffffffffffffffffffffffffffffffffff1661096e6106e6565b73ffffffffffffffffffffffffffffffffffffffff16146109c4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109bb906129ce565b60405180910390fd5b565b80600290816109d59190612bfa565b5050565b6060600280546109e890612a1d565b80601f0160208091040260200160405190810160405280929190818152602001828054610a1490612a1d565b8015610a615780601f10610a3657610100808354040283529160200191610a61565b820191906000526020600020905b815481529060010190602001808311610a4457829003601f168201915b50505050509050919050565b606060006001610a7c8461155d565b01905060008167ffffffffffffffff811115610a9b57610a9a611cf3565b5b6040519080825280601f01601f191660200182016040528015610acd5781602001600182028036833780820191505090505b509050600082602001820190505b600115610b30578080600190039150507f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a8581610b2457610b23612ccc565b5b04945060008503610adb575b819350505050919050565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1603610baa576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ba190612d6d565b60405180910390fd5b8151835114610bee576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610be590612dff565b60405180910390fd5b6000610bf8610d67565b9050610c09816000878787876116b0565b60005b8451811015610cc257838181518110610c2857610c2761284a565b5b6020026020010151600080878481518110610c4657610c4561284a565b5b6020026020010151815260200190815260200160002060008873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254610ca89190612e1f565b925050819055508080610cba906128a8565b915050610c0c565b508473ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167f4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb8787604051610d3a929190612e53565b60405180910390a4610d51816000878787876116b8565b610d60816000878787876116c0565b5050505050565b600033905090565b8151835114610db3576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610daa90612dff565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1603610e22576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e1990612efc565b60405180910390fd5b6000610e2c610d67565b9050610e3c8187878787876116b0565b60005b8451811015610fed576000858281518110610e5d57610e5c61284a565b5b602002602001015190506000858381518110610e7c57610e7b61284a565b5b60200260200101519050600080600084815260200190815260200160002060008b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905081811015610f1d576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f1490612f8e565b60405180910390fd5b81810360008085815260200190815260200160002060008c73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508160008085815260200190815260200160002060008b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254610fd29190612e1f565b9250508190555050505080610fe6906128a8565b9050610e3f565b508473ffffffffffffffffffffffffffffffffffffffff168673ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167f4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb8787604051611064929190612e53565b60405180910390a461107a8187878787876116b8565b6110888187878787876116c0565b505050505050565b6000600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036111c4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016111bb90613020565b60405180910390fd5b80600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31836040516112b59190611cbd565b60405180910390a3505050565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1603611331576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161132890612efc565b60405180910390fd5b600061133b610d67565b9050600061134885611897565b9050600061135585611897565b90506113658389898585896116b0565b600080600088815260200190815260200160002060008a73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050858110156113fc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016113f390612f8e565b60405180910390fd5b85810360008089815260200190815260200160002060008b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508560008089815260200190815260200160002060008a73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282546114b19190612e1f565b925050819055508773ffffffffffffffffffffffffffffffffffffffff168973ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff167fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f628a8a60405161152e929190613040565b60405180910390a4611544848a8a86868a6116b8565b611552848a8a8a8a8a611911565b505050505050505050565b600080600090507a184f03e93ff9f4daa797ed6e38ed64bf6a1f01000000000000000083106115bb577a184f03e93ff9f4daa797ed6e38ed64bf6a1f01000000000000000083816115b1576115b0612ccc565b5b0492506040810190505b6d04ee2d6d415b85acef810000000083106115f8576d04ee2d6d415b85acef810000000083816115ee576115ed612ccc565b5b0492506020810190505b662386f26fc10000831061162757662386f26fc10000838161161d5761161c612ccc565b5b0492506010810190505b6305f5e1008310611650576305f5e100838161164657611645612ccc565b5b0492506008810190505b612710831061167557612710838161166b5761166a612ccc565b5b0492506004810190505b60648310611698576064838161168e5761168d612ccc565b5b0492506002810190505b600a83106116a7576001810190505b80915050919050565b505050505050565b505050505050565b6116df8473ffffffffffffffffffffffffffffffffffffffff16611ae8565b1561188f578373ffffffffffffffffffffffffffffffffffffffff1663bc197c8187878686866040518663ffffffff1660e01b81526004016117259594939291906130be565b6020604051808303816000875af192505050801561176157506040513d601f19601f8201168201806040525081019061175e919061313b565b60015b6118065761176d613175565b806308c379a0036117c95750611781613197565b8061178c57506117cb565b806040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016117c09190611ee6565b60405180910390fd5b505b6040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016117fd90613299565b60405180910390fd5b63bc197c8160e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161461188d576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016118849061332b565b60405180910390fd5b505b505050505050565b60606000600167ffffffffffffffff8111156118b6576118b5611cf3565b5b6040519080825280602002602001820160405280156118e45781602001602082028036833780820191505090505b50905082816000815181106118fc576118fb61284a565b5b60200260200101818152505080915050919050565b6119308473ffffffffffffffffffffffffffffffffffffffff16611ae8565b15611ae0578373ffffffffffffffffffffffffffffffffffffffff1663f23a6e6187878686866040518663ffffffff1660e01b815260040161197695949392919061334b565b6020604051808303816000875af19250505080156119b257506040513d601f19601f820116820180604052508101906119af919061313b565b60015b611a57576119be613175565b806308c379a003611a1a57506119d2613197565b806119dd5750611a1c565b806040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611a119190611ee6565b60405180910390fd5b505b6040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611a4e90613299565b60405180910390fd5b63f23a6e6160e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614611ade576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611ad59061332b565b60405180910390fd5b505b505050505050565b6000808273ffffffffffffffffffffffffffffffffffffffff163b119050919050565b6000604051905090565b600080fd5b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000611b4a82611b1f565b9050919050565b611b5a81611b3f565b8114611b6557600080fd5b50565b600081359050611b7781611b51565b92915050565b6000819050919050565b611b9081611b7d565b8114611b9b57600080fd5b50565b600081359050611bad81611b87565b92915050565b60008060408385031215611bca57611bc9611b15565b5b6000611bd885828601611b68565b9250506020611be985828601611b9e565b9150509250929050565b611bfc81611b7d565b82525050565b6000602082019050611c176000830184611bf3565b92915050565b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b611c5281611c1d565b8114611c5d57600080fd5b50565b600081359050611c6f81611c49565b92915050565b600060208284031215611c8b57611c8a611b15565b5b6000611c9984828501611c60565b91505092915050565b60008115159050919050565b611cb781611ca2565b82525050565b6000602082019050611cd26000830184611cae565b92915050565b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b611d2b82611ce2565b810181811067ffffffffffffffff82111715611d4a57611d49611cf3565b5b80604052505050565b6000611d5d611b0b565b9050611d698282611d22565b919050565b600067ffffffffffffffff821115611d8957611d88611cf3565b5b611d9282611ce2565b9050602081019050919050565b82818337600083830152505050565b6000611dc1611dbc84611d6e565b611d53565b905082815260208101848484011115611ddd57611ddc611cdd565b5b611de8848285611d9f565b509392505050565b600082601f830112611e0557611e04611cd8565b5b8135611e15848260208601611dae565b91505092915050565b600060208284031215611e3457611e33611b15565b5b600082013567ffffffffffffffff811115611e5257611e51611b1a565b5b611e5e84828501611df0565b91505092915050565b600081519050919050565b600082825260208201905092915050565b60005b83811015611ea1578082015181840152602081019050611e86565b60008484015250505050565b6000611eb882611e67565b611ec28185611e72565b9350611ed2818560208601611e83565b611edb81611ce2565b840191505092915050565b60006020820190508181036000830152611f008184611ead565b905092915050565b600060208284031215611f1e57611f1d611b15565b5b6000611f2c84828501611b9e565b91505092915050565b600067ffffffffffffffff821115611f5057611f4f611cf3565b5b602082029050602081019050919050565b600080fd5b6000611f79611f7484611f35565b611d53565b90508083825260208201905060208402830185811115611f9c57611f9b611f61565b5b835b81811015611fc55780611fb18882611b9e565b845260208401935050602081019050611f9e565b5050509392505050565b600082601f830112611fe457611fe3611cd8565b5b8135611ff4848260208601611f66565b91505092915050565b600067ffffffffffffffff82111561201857612017611cf3565b5b61202182611ce2565b9050602081019050919050565b600061204161203c84611ffd565b611d53565b90508281526020810184848401111561205d5761205c611cdd565b5b612068848285611d9f565b509392505050565b600082601f83011261208557612084611cd8565b5b813561209584826020860161202e565b91505092915050565b600080600080608085870312156120b8576120b7611b15565b5b60006120c687828801611b68565b945050602085013567ffffffffffffffff8111156120e7576120e6611b1a565b5b6120f387828801611fcf565b935050604085013567ffffffffffffffff81111561211457612113611b1a565b5b61212087828801611fcf565b925050606085013567ffffffffffffffff81111561214157612140611b1a565b5b61214d87828801612070565b91505092959194509250565b600080600080600060a0868803121561217557612174611b15565b5b600061218388828901611b68565b955050602061219488828901611b68565b945050604086013567ffffffffffffffff8111156121b5576121b4611b1a565b5b6121c188828901611fcf565b935050606086013567ffffffffffffffff8111156121e2576121e1611b1a565b5b6121ee88828901611fcf565b925050608086013567ffffffffffffffff81111561220f5761220e611b1a565b5b61221b88828901612070565b9150509295509295909350565b600067ffffffffffffffff82111561224357612242611cf3565b5b602082029050602081019050919050565b600061226761226284612228565b611d53565b9050808382526020820190506020840283018581111561228a57612289611f61565b5b835b818110156122b3578061229f8882611b68565b84526020840193505060208101905061228c565b5050509392505050565b600082601f8301126122d2576122d1611cd8565b5b81356122e2848260208601612254565b91505092915050565b6000806040838503121561230257612301611b15565b5b600083013567ffffffffffffffff8111156123205761231f611b1a565b5b61232c858286016122bd565b925050602083013567ffffffffffffffff81111561234d5761234c611b1a565b5b61235985828601611fcf565b9150509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b61239881611b7d565b82525050565b60006123aa838361238f565b60208301905092915050565b6000602082019050919050565b60006123ce82612363565b6123d8818561236e565b93506123e38361237f565b8060005b838110156124145781516123fb888261239e565b9750612406836123b6565b9250506001810190506123e7565b5085935050505092915050565b6000602082019050818103600083015261243b81846123c3565b905092915050565b61244c81611b3f565b82525050565b60006020820190506124676000830184612443565b92915050565b61247681611ca2565b811461248157600080fd5b50565b6000813590506124938161246d565b92915050565b600080604083850312156124b0576124af611b15565b5b60006124be85828601611b68565b92505060206124cf85828601612484565b9150509250929050565b600080604083850312156124f0576124ef611b15565b5b60006124fe85828601611b68565b925050602061250f85828601611b68565b9150509250929050565b600080600080600060a0868803121561253557612534611b15565b5b600061254388828901611b68565b955050602061255488828901611b68565b945050604061256588828901611b9e565b935050606061257688828901611b9e565b925050608086013567ffffffffffffffff81111561259757612596611b1a565b5b6125a388828901612070565b9150509295509295909350565b6000602082840312156125c6576125c5611b15565b5b60006125d484828501611b68565b91505092915050565b7f455243313135353a2061646472657373207a65726f206973206e6f742061207660008201527f616c6964206f776e657200000000000000000000000000000000000000000000602082015250565b6000612639602a83611e72565b9150612644826125dd565b604082019050919050565b600060208201905081810360008301526126688161262c565b9050919050565b600081905092915050565b600061268582611e67565b61268f818561266f565b935061269f818560208601611e83565b80840191505092915050565b7f2e6a736f6e000000000000000000000000000000000000000000000000000000600082015250565b60006126e160058361266f565b91506126ec826126ab565b600582019050919050565b6000612703828561267a565b915061270f828461267a565b915061271a826126d4565b91508190509392505050565b7f455243313135353a2063616c6c6572206973206e6f7420746f6b656e206f776e60008201527f6572206f7220617070726f766564000000000000000000000000000000000000602082015250565b6000612782602e83611e72565b915061278d82612726565b604082019050919050565b600060208201905081810360008301526127b181612775565b9050919050565b7f455243313135353a206163636f756e747320616e6420696473206c656e67746860008201527f206d69736d617463680000000000000000000000000000000000000000000000602082015250565b6000612814602983611e72565b915061281f826127b8565b604082019050919050565b6000602082019050818103600083015261284381612807565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60006128b382611b7d565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82036128e5576128e4612879565b5b600182019050919050565b7f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160008201527f6464726573730000000000000000000000000000000000000000000000000000602082015250565b600061294c602683611e72565b9150612957826128f0565b604082019050919050565b6000602082019050818103600083015261297b8161293f565b9050919050565b7f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572600082015250565b60006129b8602083611e72565b91506129c382612982565b602082019050919050565b600060208201905081810360008301526129e7816129ab565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680612a3557607f821691505b602082108103612a4857612a476129ee565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302612ab07fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82612a73565b612aba8683612a73565b95508019841693508086168417925050509392505050565b6000819050919050565b6000612af7612af2612aed84611b7d565b612ad2565b611b7d565b9050919050565b6000819050919050565b612b1183612adc565b612b25612b1d82612afe565b848454612a80565b825550505050565b600090565b612b3a612b2d565b612b45818484612b08565b505050565b5b81811015612b6957612b5e600082612b32565b600181019050612b4b565b5050565b601f821115612bae57612b7f81612a4e565b612b8884612a63565b81016020851015612b97578190505b612bab612ba385612a63565b830182612b4a565b50505b505050565b600082821c905092915050565b6000612bd160001984600802612bb3565b1980831691505092915050565b6000612bea8383612bc0565b9150826002028217905092915050565b612c0382611e67565b67ffffffffffffffff811115612c1c57612c1b611cf3565b5b612c268254612a1d565b612c31828285612b6d565b600060209050601f831160018114612c645760008415612c52578287015190505b612c5c8582612bde565b865550612cc4565b601f198416612c7286612a4e565b60005b82811015612c9a57848901518255600182019150602085019450602081019050612c75565b86831015612cb75784890151612cb3601f891682612bc0565b8355505b6001600288020188555050505b505050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b7f455243313135353a206d696e7420746f20746865207a65726f2061646472657360008201527f7300000000000000000000000000000000000000000000000000000000000000602082015250565b6000612d57602183611e72565b9150612d6282612cfb565b604082019050919050565b60006020820190508181036000830152612d8681612d4a565b9050919050565b7f455243313135353a2069647320616e6420616d6f756e7473206c656e6774682060008201527f6d69736d61746368000000000000000000000000000000000000000000000000602082015250565b6000612de9602883611e72565b9150612df482612d8d565b604082019050919050565b60006020820190508181036000830152612e1881612ddc565b9050919050565b6000612e2a82611b7d565b9150612e3583611b7d565b9250828201905080821115612e4d57612e4c612879565b5b92915050565b60006040820190508181036000830152612e6d81856123c3565b90508181036020830152612e8181846123c3565b90509392505050565b7f455243313135353a207472616e7366657220746f20746865207a65726f20616460008201527f6472657373000000000000000000000000000000000000000000000000000000602082015250565b6000612ee6602583611e72565b9150612ef182612e8a565b604082019050919050565b60006020820190508181036000830152612f1581612ed9565b9050919050565b7f455243313135353a20696e73756666696369656e742062616c616e636520666f60008201527f72207472616e7366657200000000000000000000000000000000000000000000602082015250565b6000612f78602a83611e72565b9150612f8382612f1c565b604082019050919050565b60006020820190508181036000830152612fa781612f6b565b9050919050565b7f455243313135353a2073657474696e6720617070726f76616c2073746174757360008201527f20666f722073656c660000000000000000000000000000000000000000000000602082015250565b600061300a602983611e72565b915061301582612fae565b604082019050919050565b6000602082019050818103600083015261303981612ffd565b9050919050565b60006040820190506130556000830185611bf3565b6130626020830184611bf3565b9392505050565b600081519050919050565b600082825260208201905092915050565b600061309082613069565b61309a8185613074565b93506130aa818560208601611e83565b6130b381611ce2565b840191505092915050565b600060a0820190506130d36000830188612443565b6130e06020830187612443565b81810360408301526130f281866123c3565b9050818103606083015261310681856123c3565b9050818103608083015261311a8184613085565b90509695505050505050565b60008151905061313581611c49565b92915050565b60006020828403121561315157613150611b15565b5b600061315f84828501613126565b91505092915050565b60008160e01c9050919050565b600060033d11156131945760046000803e613191600051613168565b90505b90565b600060443d10613224576131a9611b0b565b60043d036004823e80513d602482011167ffffffffffffffff821117156131d1575050613224565b808201805167ffffffffffffffff8111156131ef5750505050613224565b80602083010160043d03850181111561320c575050505050613224565b61321b82602001850186611d22565b82955050505050505b90565b7f455243313135353a207472616e7366657220746f206e6f6e2d4552433131353560008201527f526563656976657220696d706c656d656e746572000000000000000000000000602082015250565b6000613283603483611e72565b915061328e82613227565b604082019050919050565b600060208201905081810360008301526132b281613276565b9050919050565b7f455243313135353a204552433131353552656365697665722072656a6563746560008201527f6420746f6b656e73000000000000000000000000000000000000000000000000602082015250565b6000613315602883611e72565b9150613320826132b9565b604082019050919050565b6000602082019050818103600083015261334481613308565b9050919050565b600060a0820190506133606000830188612443565b61336d6020830187612443565b61337a6040830186611bf3565b6133876060830185611bf3565b81810360808301526133998184613085565b9050969550505050505056fea2646970667358221220de231ea0ba52331673a6ab1f561443459e5e047d956a2026f062e8977c23fe6d64736f6c63430008110033697066733a2f2f626166796265696478666d777963677a6370347632746f67666c70716832676e69627565786a79346d347171777870376e68336a78357a6c6834792f",new U.j(t,"any").getSigner()),n=await e.deploy();await n.deployTransaction.wait(),f(n),P.Ay.success("\u521b\u5efa\u6210\u529f")}catch(e){P.Ay.error("\u521b\u5efa\u5931\u8d25")}finally{h(!1)}},disabled:s.address||!e,children:"Deploy"}),(0,E.jsxs)("div",{children:[(0,E.jsx)(X.A.Title,{level:5,children:"Token IDs"}),(0,E.jsx)(F.A,{value:w,onChange:e=>C(e.target.value)})]}),(0,E.jsxs)("div",{children:[(0,E.jsx)(X.A.Title,{level:5,children:"Token Amounts"}),(0,E.jsx)(F.A,{value:O,onChange:e=>x(e.target.value)})]}),(0,E.jsx)(a.$n,{block:!0,loading:p,onClick:async()=>{try{b(!0);const t=[e,w.split(",").map(Number),O.split(",").map(Number),"0x"];await s.mintBatch(...t),P.Ay.success("mint \u6210\u529f")}catch(t){P.Ay.error("mint \u5931\u8d25")}finally{b(!1)}},disabled:!s.address||!e,children:"Mint"}),(0,E.jsx)(a.$n,{block:!0,loading:S,onClick:T(),disabled:!s.address,children:"Transfer"}),!!i&&(0,E.jsx)(a.$n,{block:!0,color:"danger",loading:S,onClick:T(i),disabled:!s.address,children:"Transfer Black Address"}),!!o&&(0,E.jsx)(a.$n,{block:!0,color:"danger",loading:S,onClick:T(o),disabled:!s.address,children:"Transfer Strong Black Address"}),(0,E.jsx)(a.$n,{block:!0,loading:R,onClick:I(),disabled:!s.address,children:"setApprovalForAll"}),!!i&&(0,E.jsx)(a.$n,{block:!0,color:"danger",loading:R,onClick:I(!0,i),disabled:!s.address,children:"setApprovalForAll Black Address"}),!!o&&(0,E.jsx)(a.$n,{block:!0,color:"danger",loading:R,onClick:I(!0,o),disabled:!s.address,children:"setApprovalForAll Strong Black Address"}),(0,E.jsx)(a.$n,{block:!0,loading:R,onClick:I(!0,m),disabled:!s.address,children:"setApprovalForAll to EOA"}),(0,E.jsx)(a.$n,{block:!0,loading:R,onClick:I(!1),disabled:!s.address,children:"revoke"}),(0,E.jsx)(j.A,{type:"info",message:"\u6d4b\u8bd5 NFT",description:(0,E.jsx)(c.A,{gutter:12,children:z.map((e=>(0,E.jsx)(l.A,{children:(0,E.jsx)("a",{href:`/dapp-demo/?erc1155Address=${e.address}`,children:e.chain})},e.address)))})})]})})})};const V=function(){return(0,E.jsx)(l.A,{xs:24,lg:12,children:(0,E.jsx)(a.$x,{direction:"vertical",style:{width:"100%"},children:(0,E.jsx)(a.Zp,{direction:"vertical",title:"NFT",children:(0,E.jsxs)(c.A,{gutter:12,children:[(0,E.jsx)(l.A,{xs:24,lg:12,children:(0,E.jsx)(q,{})}),(0,E.jsx)(l.A,{xs:24,lg:12,children:(0,E.jsx)(J,{})})]})})})})};const G=function(){const{account:e,provider:t}=(0,r.useContext)(g),[n,i]=(0,r.useState)(!1),o=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async()=>{try{i(!0),await t.request({method:"eth_sendTransaction",params:[{from:e,to:m,value:`0x${(10**9).toString(16)}`,...n}]})}catch(r){P.Ay.error(r.message)}finally{i(!1)}}},s=`0x${21e3.toString(16)}`,f=`0x${(300*10**9).toString(16)}`,c=`0x${(400*10**9).toString(16)}`,u=`0x${(40*10**9).toString(16)}`;return(0,E.jsx)(l.A,{xs:24,lg:12,children:(0,E.jsx)(a.Zp,{direction:"vertical",title:"Gas Checker - dapp \u5404\u79cd\u4f20\u53c2",children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(a.$n,{loading:n,block:!0,onClick:o({gas:s,gasPrice:f,maxFeePerGas:c,maxPriorityFeePerGas:u}),children:"all"}),(0,E.jsx)(a.$n,{loading:n,block:!0,onClick:o({gas:s,gasPrice:f}),children:"Legacy"}),(0,E.jsx)(a.$n,{loading:n,block:!0,onClick:o({gas:s,maxFeePerGas:c,maxPriorityFeePerGas:u}),children:"1559"}),(0,E.jsx)(a.$n,{loading:n,block:!0,onClick:o({gas:s,gasPrice:f,maxFeePerGas:c}),children:"gasPrice & maxFeePerGas"}),(0,E.jsx)(a.$n,{loading:n,block:!0,onClick:o({gas:s,gasPrice:f,maxPriorityFeePerGas:u}),children:"gasPrice & maxPriorityFeePerGas"}),(0,E.jsx)(a.$n,{loading:n,block:!0,onClick:o({gas:s,maxFeePerGas:c}),children:"maxFeePerGas"}),(0,E.jsx)(a.$n,{loading:n,block:!0,onClick:o({gas:s,maxPriorityFeePerGas:u}),children:"maxPriorityFeePerGas"}),(0,E.jsx)(a.$n,{loading:n,block:!0,onClick:o({gas:`0x${10..toString(16)}`,gasPrice:f,maxFeePerGas:c,maxPriorityFeePerGas:u}),children:"Low gas Limit"})]})})})};const Y=function(){const{account:e,chainId:t,provider:n}=(0,r.useContext)(g),i=v(t),o=_(t),[s,f]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),d=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return async()=>{try{u(!0);const r={from:e,to:t,value:`0x${(10**9).toString(16)}`};await n.request({method:"eth_sendTransaction",params:[r]})}catch(r){P.Ay.error(r.message)}finally{u(!1)}}},[h,p]=(0,r.useState)(!1),[b,y]=(0,r.useState)(!1),[w,C]=(0,r.useState)(!1),[O,x]=(0,r.useState)(!1),[S,k]=(0,r.useState)(!1),[T,R]=(0,r.useState)(!1);return(0,E.jsx)(l.A,{xs:24,lg:12,children:(0,E.jsx)(a.Zp,{direction:"vertical",title:"BatchTransfer",children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(a.$n,{block:!0,loading:s,onClick:async()=>{try{f(!0),await n.request({method:"eth_sendTransaction",params:[{from:e,to:m,value:`0x${(10**10).toString(16)}`}]})}catch(t){P.Ay.error(t.message)}finally{f(!1)}},disabled:!e,children:"transfer baseCoin"}),!!i&&(0,E.jsx)(a.$n,{block:!0,color:"danger",loading:c,onClick:d(),disabled:!e,children:"transfer baseCoin to GrayAddress"}),!!o&&(0,E.jsx)(a.$n,{block:!0,color:"danger",loading:c,onClick:d(o),disabled:!e,children:"transfer baseCoin to Strong Black Address"}),(0,E.jsx)(a.$n,{block:!0,loading:h,onClick:async()=>{try{p(!0),await n.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x89"}]}),await n.request({method:"eth_sendTransaction",params:[{from:e,to:"0xd152f549545093347a162dce210e7293f1452150",value:"0x6f05b59d3b20000",data:"0xe63d38ed000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000fe8dc6394501a35ad1c4833f40f382e55dada4f3000000000000000000000000e5a85089a3da45b5460a59b1d4cf181e01fe7681000000000000000000000000f27b3ba38ea4077423f8edaae0e2c9fedb8fda6d0000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000016345785d8a000000000000000000000000000000000000000000000000000002c68af0bb14000000000000000000000000000000000000000000000000000002c68af0bb140000"}]})}catch(t){P.Ay.error(t.message)}finally{p(!1)}},disabled:!e,children:"batchTransfer baseCoin"}),(0,E.jsx)(a.$n,{block:!0,onClick:async()=>{try{p(!0),await n.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x89"}]}),await n.request({method:"eth_sendTransaction",params:[{from:e,to:"0xd152f549545093347a162dce210e7293f1452150",value:"0x6f05b59d3b20000",data:"0xe6d3d38ed000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000fe8dc6394501a35ad1c4833f40f382e55dada4f3000000000000000000000000e5a85089a3da45b5460a59b1d4cf181e01fe7681000000000000000000000000f27b3ba38ea4077423f8edaae0e2c9fedb8fda6d0000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000016345785d8a000000000000000000000000000000000000000000000000000002c68af0bb14000000000000000000000000000000000000000000000000000002c68af0bb1400001121"}]})}catch(t){P.Ay.error(t.message)}finally{p(!1)}},disabled:!e,children:"transferBaseTokenWithError"})]})})})},Z=[{inputs:[{internalType:"uint256",name:"initialAmount",type:"uint256"},{internalType:"string",name:"tokenName",type:"string"},{internalType:"uint8",name:"decimalUnits",type:"uint8"},{internalType:"string",name:"tokenSymbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}];var Q=n(54342);const ee="anchorUsedTokens",te="CIRCLE_LUO",ne=[{chain:"Polygon",symbol:te,chainId:137,address:"0x6615a6c72b04f8Ec45cd2a3576e403c111623111"},{chain:"Polygon",symbol:"USDT",chainId:137,address:"0xc2132d05d31c914a87c6611c10748aeb04b58e8f"},{chain:"Polygon",symbol:"QUANQU...QUAN",chainId:137,address:"0x6Ed7E67F6ee4833Fd4b461c0ce5F1949c133d4ed"},{chain:"Holesky Test Network",symbol:te,chainId:17e3,address:"0x76bC79EB3bf2156a148793E8363D81c663B18957"}];const re=function(){const e=(0,r.useRef)(),t=`${window.location.origin}/dapp-demo/favicon.png`,{account:n,provider:i,chainId:o}=(0,r.useContext)(g),s=v(o),f=_(o),[u,d]=(0,r.useState)(4),[h,w]=(0,r.useState)(),[C,O]=(0,r.useState)({}),[x,S]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{const t=new URLSearchParams(window.location.search).get("tokenAddress");if(n&&t){var r;S(!1),w(void 0),O({}),d(4),null===(r=e.current)||void 0===r||r.scrollIntoView({behavior:"smooth"});const o=ne.find((e=>{let{address:n}=e;return n===t}));o&&await i.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${o.chainId.toString(16)}`}]});const a=new L.NZ(t,Z,new U.j(i,"any").getSigner()),s=await a.symbol();w(s);const f=await a.decimals();(await a.balanceOf(n)).eq(0)?S(!0):S(!1),d(f),O(a)}})()}),[n,i]);const[k,T]=(0,r.useState)(!1),[R,A]=(0,r.useState)(!1),[I,N]=(0,r.useState)(!1),P=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;return async()=>{try{t&&N(!0),await C.transfer(r,`${10**u}`,{from:n,gasLimit:void 0,gas:void 0,...e})}catch(i){Q.log(i),(0,b.i)()}finally{N(!1)}}},[D,B]=(0,r.useState)(!1),M=e=>{let{gasInfo:t,needLoading:r=!0,amount:i="12222222222123234324324234234324232342",spender:o=y}=e;return async()=>{try{r&&B(!0),await C.approve(o,i,{from:n,...t})}catch(e){Q.log(e),(0,b.i)()}finally{B(!1)}}},[K,W]=(0,r.useState)(!1),H=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;return async()=>{try{W(!0),await C.increaseAllowance(e,""+100*10**u,{from:n})}catch(t){Q.log(t),(0,b.i)()}finally{W(!1)}}},[$,q]=(0,r.useState)(!1);return(0,E.jsx)(l.A,{xs:24,lg:12,ref:e,children:(0,E.jsx)(a.Zp,{direction:"vertical",title:h||"--",extra:!C.address&&(0,E.jsx)("strong",{children:(0,E.jsx)("a",{href:`#${ee}`,children:"Common token"})}),children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(j.A,{type:"info",message:"Contract address",description:C.address||""}),(0,E.jsx)(a.$n,{block:!0,loading:k,onClick:async()=>{try{T(!0);const e=new L.PM(Z,"0x6101406040523480156200001257600080fd5b506040516200323e3803806200323e83398181016040528101906200003891906200065b565b82806040518060400160405280600181526020017f310000000000000000000000000000000000000000000000000000000000000081525085848682600390816200008491906200094c565b5081600490816200009691906200094c565b5080600560006101000a81548160ff021916908360ff160217905550505050620000d5620000c9620001ce60201b60201c565b620001d660201b60201c565b60008280519060200120905060008280519060200120905060007f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f90508260e081815250508161010081815250504660a081815250506200013e8184846200029c60201b60201c565b608081815250503073ffffffffffffffffffffffffffffffffffffffff1660c08173ffffffffffffffffffffffffffffffffffffffff1681525050806101208181525050505050505050620001c433600560009054906101000a900460ff16600a620001ab919062000bb6565b86620001b8919062000c07565b620002d860201b60201c565b5050505062000dfb565b600033905090565b6000600560019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600560016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b60008383834630604051602001620002b995949392919062000cc3565b6040516020818303038152906040528051906020012090509392505050565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036200034a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401620003419062000d81565b60405180910390fd5b6200035e600083836200044560201b60201c565b806002600082825462000372919062000da3565b92505081905550806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508173ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8360405162000425919062000dde565b60405180910390a362000441600083836200044a60201b60201c565b5050565b505050565b505050565b6000604051905090565b600080fd5b600080fd5b6000819050919050565b620004788162000463565b81146200048457600080fd5b50565b60008151905062000498816200046d565b92915050565b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b620004f382620004a8565b810181811067ffffffffffffffff82111715620005155762000514620004b9565b5b80604052505050565b60006200052a6200044f565b9050620005388282620004e8565b919050565b600067ffffffffffffffff8211156200055b576200055a620004b9565b5b6200056682620004a8565b9050602081019050919050565b60005b838110156200059357808201518184015260208101905062000576565b60008484015250505050565b6000620005b6620005b0846200053d565b6200051e565b905082815260208101848484011115620005d557620005d4620004a3565b5b620005e284828562000573565b509392505050565b600082601f8301126200060257620006016200049e565b5b8151620006148482602086016200059f565b91505092915050565b600060ff82169050919050565b62000635816200061d565b81146200064157600080fd5b50565b60008151905062000655816200062a565b92915050565b6000806000806080858703121562000678576200067762000459565b5b6000620006888782880162000487565b945050602085015167ffffffffffffffff811115620006ac57620006ab6200045e565b5b620006ba87828801620005ea565b9350506040620006cd8782880162000644565b925050606085015167ffffffffffffffff811115620006f157620006f06200045e565b5b620006ff87828801620005ea565b91505092959194509250565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806200075e57607f821691505b60208210810362000774576200077362000716565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302620007de7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826200079f565b620007ea86836200079f565b95508019841693508086168417925050509392505050565b6000819050919050565b60006200082d62000827620008218462000463565b62000802565b62000463565b9050919050565b6000819050919050565b62000849836200080c565b62000861620008588262000834565b848454620007ac565b825550505050565b600090565b6200087862000869565b620008858184846200083e565b505050565b5b81811015620008ad57620008a16000826200086e565b6001810190506200088b565b5050565b601f821115620008fc57620008c6816200077a565b620008d1846200078f565b81016020851015620008e1578190505b620008f9620008f0856200078f565b8301826200088a565b50505b505050565b600082821c905092915050565b6000620009216000198460080262000901565b1980831691505092915050565b60006200093c83836200090e565b9150826002028217905092915050565b62000957826200070b565b67ffffffffffffffff811115620009735762000972620004b9565b5b6200097f825462000745565b6200098c828285620008b1565b600060209050601f831160018114620009c45760008415620009af578287015190505b620009bb85826200092e565b86555062000a2b565b601f198416620009d4866200077a565b60005b82811015620009fe57848901518255600182019150602085019450602081019050620009d7565b8683101562000a1e578489015162000a1a601f8916826200090e565b8355505b6001600288020188555050505b505050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60008160011c9050919050565b6000808291508390505b600185111562000ac15780860481111562000a995762000a9862000a33565b5b600185161562000aa95780820291505b808102905062000ab98562000a62565b945062000a79565b94509492505050565b60008262000adc576001905062000baf565b8162000aec576000905062000baf565b816001811462000b05576002811462000b105762000b46565b600191505062000baf565b60ff84111562000b255762000b2462000a33565b5b8360020a91508482111562000b3f5762000b3e62000a33565b5b5062000baf565b5060208310610133831016604e8410600b841016171562000b805782820a90508381111562000b7a5762000b7962000a33565b5b62000baf565b62000b8f848484600162000a6f565b9250905081840481111562000ba95762000ba862000a33565b5b81810290505b9392505050565b600062000bc38262000463565b915062000bd0836200061d565b925062000bff7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff848462000aca565b905092915050565b600062000c148262000463565b915062000c218362000463565b925082820262000c318162000463565b9150828204841483151762000c4b5762000c4a62000a33565b5b5092915050565b6000819050919050565b62000c678162000c52565b82525050565b62000c788162000463565b82525050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600062000cab8262000c7e565b9050919050565b62000cbd8162000c9e565b82525050565b600060a08201905062000cda600083018862000c5c565b62000ce9602083018762000c5c565b62000cf8604083018662000c5c565b62000d07606083018562000c6d565b62000d16608083018462000cb2565b9695505050505050565b600082825260208201905092915050565b7f45524332303a206d696e7420746f20746865207a65726f206164647265737300600082015250565b600062000d69601f8362000d20565b915062000d768262000d31565b602082019050919050565b6000602082019050818103600083015262000d9c8162000d5a565b9050919050565b600062000db08262000463565b915062000dbd8362000463565b925082820190508082111562000dd85762000dd762000a33565b5b92915050565b600060208201905062000df5600083018462000c6d565b92915050565b60805160a05160c05160e05161010051610120516123f362000e4b6000396000610ed901526000610f1b01526000610efa01526000610e2f01526000610e8501526000610eae01526123f36000f3fe608060405234801561001057600080fd5b50600436106101165760003560e01c8063715018a6116100a2578063a457c2d711610071578063a457c2d7146102e5578063a9059cbb14610315578063d505accf14610345578063dd62ed3e14610361578063f2fde38b1461039157610116565b8063715018a61461026f5780637ecebe00146102795780638da5cb5b146102a957806395d89b41146102c757610116565b8063313ce567116100e9578063313ce567146101b75780633644e515146101d557806339509351146101f357806340c10f191461022357806370a082311461023f57610116565b806306fdde031461011b578063095ea7b31461013957806318160ddd1461016957806323b872dd14610187575b600080fd5b6101236103ad565b60405161013091906115f5565b60405180910390f35b610153600480360381019061014e91906116b0565b61043f565b604051610160919061170b565b60405180910390f35b610171610462565b60405161017e9190611735565b60405180910390f35b6101a1600480360381019061019c9190611750565b61046c565b6040516101ae919061170b565b60405180910390f35b6101bf61049b565b6040516101cc91906117bf565b60405180910390f35b6101dd6104ae565b6040516101ea91906117f3565b60405180910390f35b61020d600480360381019061020891906116b0565b6104bd565b60405161021a919061170b565b60405180910390f35b61023d600480360381019061023891906116b0565b6104f4565b005b6102596004803603810190610254919061180e565b61050a565b6040516102669190611735565b60405180910390f35b610277610552565b005b610293600480360381019061028e919061180e565b610566565b6040516102a09190611735565b60405180910390f35b6102b16105b6565b6040516102be919061184a565b60405180910390f35b6102cf6105e0565b6040516102dc91906115f5565b60405180910390f35b6102ff60048036038101906102fa91906116b0565b610672565b60405161030c919061170b565b60405180910390f35b61032f600480360381019061032a91906116b0565b6106e9565b60405161033c919061170b565b60405180910390f35b61035f600480360381019061035a91906118bd565b61070c565b005b61037b6004803603810190610376919061195f565b61084e565b6040516103889190611735565b60405180910390f35b6103ab60048036038101906103a6919061180e565b6108d5565b005b6060600380546103bc906119ce565b80601f01602080910402602001604051908101604052809291908181526020018280546103e8906119ce565b80156104355780601f1061040a57610100808354040283529160200191610435565b820191906000526020600020905b81548152906001019060200180831161041857829003601f168201915b5050505050905090565b60008061044a610958565b9050610457818585610960565b600191505092915050565b6000600254905090565b600080610477610958565b9050610484858285610b29565b61048f858585610bb5565b60019150509392505050565b600560009054906101000a900460ff1681565b60006104b8610e2b565b905090565b6000806104c8610958565b90506104e98185856104da858961084e565b6104e49190611a2e565b610960565b600191505092915050565b6104fc610f45565b6105068282610fc3565b5050565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b61055a610f45565b6105646000611119565b565b60006105af600660008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206111df565b9050919050565b6000600560019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b6060600480546105ef906119ce565b80601f016020809104026020016040519081016040528092919081815260200182805461061b906119ce565b80156106685780601f1061063d57610100808354040283529160200191610668565b820191906000526020600020905b81548152906001019060200180831161064b57829003601f168201915b5050505050905090565b60008061067d610958565b9050600061068b828661084e565b9050838110156106d0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c790611ad4565b60405180910390fd5b6106dd8286868403610960565b60019250505092915050565b6000806106f4610958565b9050610701818585610bb5565b600191505092915050565b8342111561074f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161074690611b40565b60405180910390fd5b60007f6e71edae12b1b97f4d1f60370fef10105fa2faae0126114a169c64845d6126c988888861077e8c6111ed565b8960405160200161079496959493929190611b60565b60405160208183030381529060405280519060200120905060006107b78261124b565b905060006107c782878787611265565b90508973ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614610837576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082e90611c0d565b60405180910390fd5b6108428a8a8a610960565b50505050505050505050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b6108dd610f45565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff160361094c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161094390611c9f565b60405180910390fd5b61095581611119565b50565b600033905090565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036109cf576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109c690611d31565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610a3e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a3590611dc3565b60405180910390fd5b80600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92583604051610b1c9190611735565b60405180910390a3505050565b6000610b35848461084e565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8114610baf5781811015610ba1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b9890611e2f565b60405180910390fd5b610bae8484848403610960565b5b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610c24576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c1b90611ec1565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610c93576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c8a90611f53565b60405180910390fd5b610c9e838383611290565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905081811015610d24576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d1b90611fe5565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef84604051610e129190611735565b60405180910390a3610e25848484611295565b50505050565b60007f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff163073ffffffffffffffffffffffffffffffffffffffff16148015610ea757507f000000000000000000000000000000000000000000000000000000000000000046145b15610ed4577f00000000000000000000000000000000000000000000000000000000000000009050610f42565b610f3f7f00000000000000000000000000000000000000000000000000000000000000007f00000000000000000000000000000000000000000000000000000000000000007f000000000000000000000000000000000000000000000000000000000000000061129a565b90505b90565b610f4d610958565b73ffffffffffffffffffffffffffffffffffffffff16610f6b6105b6565b73ffffffffffffffffffffffffffffffffffffffff1614610fc1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610fb890612051565b60405180910390fd5b565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603611032576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611029906120bd565b60405180910390fd5b61103e60008383611290565b80600260008282546110509190611a2e565b92505081905550806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508173ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040516111019190611735565b60405180910390a361111560008383611295565b5050565b6000600560019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600560016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b600081600001549050919050565b600080600660008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020905061123a816111df565b9150611245816112d4565b50919050565b600061125e611258610e2b565b836112ea565b9050919050565b60008060006112768787878761131d565b91509150611283816113ff565b8192505050949350505050565b505050565b505050565b600083838346306040516020016112b59594939291906120dd565b6040516020818303038152906040528051906020012090509392505050565b6001816000016000828254019250508190555050565b600082826040516020016112ff9291906121a8565b60405160208183030381529060405280519060200120905092915050565b6000807f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a08360001c11156113585760006003915091506113f6565b60006001878787876040516000815260200160405260405161137d94939291906121df565b6020604051602081039080840390855afa15801561139f573d6000803e3d6000fd5b505050602060405103519050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036113ed576000600192509250506113f6565b80600092509250505b94509492505050565b6000600481111561141357611412612224565b5b81600481111561142657611425612224565b5b031561156257600160048111156114405761143f612224565b5b81600481111561145357611452612224565b5b03611493576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161148a9061229f565b60405180910390fd5b600260048111156114a7576114a6612224565b5b8160048111156114ba576114b9612224565b5b036114fa576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016114f19061230b565b60405180910390fd5b6003600481111561150e5761150d612224565b5b81600481111561152157611520612224565b5b03611561576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016115589061239d565b60405180910390fd5b5b50565b600081519050919050565b600082825260208201905092915050565b60005b8381101561159f578082015181840152602081019050611584565b60008484015250505050565b6000601f19601f8301169050919050565b60006115c782611565565b6115d18185611570565b93506115e1818560208601611581565b6115ea816115ab565b840191505092915050565b6000602082019050818103600083015261160f81846115bc565b905092915050565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006116478261161c565b9050919050565b6116578161163c565b811461166257600080fd5b50565b6000813590506116748161164e565b92915050565b6000819050919050565b61168d8161167a565b811461169857600080fd5b50565b6000813590506116aa81611684565b92915050565b600080604083850312156116c7576116c6611617565b5b60006116d585828601611665565b92505060206116e68582860161169b565b9150509250929050565b60008115159050919050565b611705816116f0565b82525050565b600060208201905061172060008301846116fc565b92915050565b61172f8161167a565b82525050565b600060208201905061174a6000830184611726565b92915050565b60008060006060848603121561176957611768611617565b5b600061177786828701611665565b935050602061178886828701611665565b92505060406117998682870161169b565b9150509250925092565b600060ff82169050919050565b6117b9816117a3565b82525050565b60006020820190506117d460008301846117b0565b92915050565b6000819050919050565b6117ed816117da565b82525050565b600060208201905061180860008301846117e4565b92915050565b60006020828403121561182457611823611617565b5b600061183284828501611665565b91505092915050565b6118448161163c565b82525050565b600060208201905061185f600083018461183b565b92915050565b61186e816117a3565b811461187957600080fd5b50565b60008135905061188b81611865565b92915050565b61189a816117da565b81146118a557600080fd5b50565b6000813590506118b781611891565b92915050565b600080600080600080600060e0888a0312156118dc576118db611617565b5b60006118ea8a828b01611665565b97505060206118fb8a828b01611665565b965050604061190c8a828b0161169b565b955050606061191d8a828b0161169b565b945050608061192e8a828b0161187c565b93505060a061193f8a828b016118a8565b92505060c06119508a828b016118a8565b91505092959891949750929550565b6000806040838503121561197657611975611617565b5b600061198485828601611665565b925050602061199585828601611665565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806119e657607f821691505b6020821081036119f9576119f861199f565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000611a398261167a565b9150611a448361167a565b9250828201905080821115611a5c57611a5b6119ff565b5b92915050565b7f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f7760008201527f207a65726f000000000000000000000000000000000000000000000000000000602082015250565b6000611abe602583611570565b9150611ac982611a62565b604082019050919050565b60006020820190508181036000830152611aed81611ab1565b9050919050565b7f45524332305065726d69743a206578706972656420646561646c696e65000000600082015250565b6000611b2a601d83611570565b9150611b3582611af4565b602082019050919050565b60006020820190508181036000830152611b5981611b1d565b9050919050565b600060c082019050611b7560008301896117e4565b611b82602083018861183b565b611b8f604083018761183b565b611b9c6060830186611726565b611ba96080830185611726565b611bb660a0830184611726565b979650505050505050565b7f45524332305065726d69743a20696e76616c6964207369676e61747572650000600082015250565b6000611bf7601e83611570565b9150611c0282611bc1565b602082019050919050565b60006020820190508181036000830152611c2681611bea565b9050919050565b7f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160008201527f6464726573730000000000000000000000000000000000000000000000000000602082015250565b6000611c89602683611570565b9150611c9482611c2d565b604082019050919050565b60006020820190508181036000830152611cb881611c7c565b9050919050565b7f45524332303a20617070726f76652066726f6d20746865207a65726f2061646460008201527f7265737300000000000000000000000000000000000000000000000000000000602082015250565b6000611d1b602483611570565b9150611d2682611cbf565b604082019050919050565b60006020820190508181036000830152611d4a81611d0e565b9050919050565b7f45524332303a20617070726f766520746f20746865207a65726f20616464726560008201527f7373000000000000000000000000000000000000000000000000000000000000602082015250565b6000611dad602283611570565b9150611db882611d51565b604082019050919050565b60006020820190508181036000830152611ddc81611da0565b9050919050565b7f45524332303a20696e73756666696369656e7420616c6c6f77616e6365000000600082015250565b6000611e19601d83611570565b9150611e2482611de3565b602082019050919050565b60006020820190508181036000830152611e4881611e0c565b9050919050565b7f45524332303a207472616e736665722066726f6d20746865207a65726f20616460008201527f6472657373000000000000000000000000000000000000000000000000000000602082015250565b6000611eab602583611570565b9150611eb682611e4f565b604082019050919050565b60006020820190508181036000830152611eda81611e9e565b9050919050565b7f45524332303a207472616e7366657220746f20746865207a65726f206164647260008201527f6573730000000000000000000000000000000000000000000000000000000000602082015250565b6000611f3d602383611570565b9150611f4882611ee1565b604082019050919050565b60006020820190508181036000830152611f6c81611f30565b9050919050565b7f45524332303a207472616e7366657220616d6f756e742065786365656473206260008201527f616c616e63650000000000000000000000000000000000000000000000000000602082015250565b6000611fcf602683611570565b9150611fda82611f73565b604082019050919050565b60006020820190508181036000830152611ffe81611fc2565b9050919050565b7f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572600082015250565b600061203b602083611570565b915061204682612005565b602082019050919050565b6000602082019050818103600083015261206a8161202e565b9050919050565b7f45524332303a206d696e7420746f20746865207a65726f206164647265737300600082015250565b60006120a7601f83611570565b91506120b282612071565b602082019050919050565b600060208201905081810360008301526120d68161209a565b9050919050565b600060a0820190506120f260008301886117e4565b6120ff60208301876117e4565b61210c60408301866117e4565b6121196060830185611726565b612126608083018461183b565b9695505050505050565b600081905092915050565b7f1901000000000000000000000000000000000000000000000000000000000000600082015250565b6000612171600283612130565b915061217c8261213b565b600282019050919050565b6000819050919050565b6121a261219d826117da565b612187565b82525050565b60006121b382612164565b91506121bf8285612191565b6020820191506121cf8284612191565b6020820191508190509392505050565b60006080820190506121f460008301876117e4565b61220160208301866117b0565b61220e60408301856117e4565b61221b60608301846117e4565b95945050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b7f45434453413a20696e76616c6964207369676e61747572650000000000000000600082015250565b6000612289601883611570565b915061229482612253565b602082019050919050565b600060208201905081810360008301526122b88161227c565b9050919050565b7f45434453413a20696e76616c6964207369676e6174757265206c656e67746800600082015250565b60006122f5601f83611570565b9150612300826122bf565b602082019050919050565b60006020820190508181036000830152612324816122e8565b9050919050565b7f45434453413a20696e76616c6964207369676e6174757265202773272076616c60008201527f7565000000000000000000000000000000000000000000000000000000000000602082015250565b6000612387602283611570565b91506123928261232b565b604082019050919050565b600060208201905081810360008301526123b68161237a565b905091905056fea26469706673582212205e8d7bb733a28b307c6266e71d7fce8f78067e564cdf5e388464ca543c2ea25b64736f6c63430008120033",new U.j(i,"any").getSigner()),t=await e.deploy(1e15,te,u,te);await t.deployTransaction.wait(),O(t)}catch(e){Q.log(e),(0,b.i)()}finally{T(!1)}},disabled:!n,children:"Deploy Contract"}),(0,E.jsx)(a.$n,{block:!0,loading:R,onClick:async()=>{try{A(!0),await i.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:C.address,symbol:h,decimals:u,image:t}}})}catch(e){Q.log(e),(0,b.i)()}finally{A(!1)}},disabled:!C.address,children:"\u3010EIP 747\u3011Add Token to wallet"}),x?(0,E.jsx)(c.A,{gutter:12,children:(0,E.jsxs)(l.A,{xs:24,lg:24,children:["\u68c0\u6d4b\u5230\u4f60\u7684\u5730\u5740\u6ca1\u6709",h,"\u4ee3\u5e01"]})}):(0,E.jsxs)(c.A,{gutter:12,children:[(0,E.jsx)(l.A,{xs:24,lg:12,children:(0,E.jsx)(a.Zp,{title:"Approve Token",children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(a.$n,{block:!0,style:{marginBottom:8},loading:D,onClick:M({}),disabled:!C.address||!n,children:"approve"}),(0,E.jsx)(a.$n,{block:!0,color:"warning",style:{marginBottom:8},loading:D,onClick:M({spender:m}),disabled:!C.address||!n,children:"To EOA"}),(0,E.jsx)(a.$n,{block:!0,style:{marginBottom:8},loading:D,onClick:M({gasInfo:{gasLimit:6e4,gasPrice:"20000000000"},amount:"0"}),disabled:!C.address||!n,children:"revoke"}),(0,E.jsx)(a.$n,{block:!0,style:{marginBottom:8},loading:D,onClick:M({spender:m,amount:"0"}),disabled:!C.address||!n,children:"revoke to EOA"}),(0,E.jsx)(a.$n,{block:!0,style:{marginBottom:8},loading:K,onClick:H(),disabled:!C.address||!n,children:"increaseAllowance"}),(0,E.jsx)(a.$n,{block:!0,color:"warning",style:{marginBottom:8},loading:K,onClick:H(m),disabled:!C.address||!n,children:"increaseAllowance to EOA"}),(0,E.jsx)(a.$n,{block:!0,style:{marginBottom:8},loading:$,onClick:async()=>{try{q(!0),await C.decreaseAllowance(y,""+100*10**u,{from:n})}catch(e){Q.log(e),(0,b.i)()}finally{q(!1)}},disabled:!C.address||!n,children:"decreaseAllowance"}),!!s&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(a.$n,{block:!0,color:"danger",style:{marginBottom:8},loading:D,onClick:M({spender:s}),disabled:!C.address||!n,children:"To Gray Address"}),(0,E.jsx)(a.$n,{block:!0,style:{marginBottom:8},loading:D,onClick:M({spender:s,amount:"0"}),disabled:!C.address||!n,children:"revoke Gray Address"})]}),!!f&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(a.$n,{block:!0,color:"danger",style:{marginBottom:8},loading:D,onClick:M({spender:f}),disabled:!C.address||!n,children:"To StrongBlack Address"}),(0,E.jsx)(a.$n,{block:!0,style:{marginBottom:8},loading:D,onClick:M({spender:f,amount:"0"}),disabled:!C.address||!n,children:"revoke StrongBlack Address"})]})]})})}),(0,E.jsx)(l.A,{xs:24,lg:12,children:(0,E.jsx)(a.Zp,{title:"Transfer Token",children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(a.$n,{block:!0,style:{marginBottom:8},loading:I,onClick:P(),disabled:!C.address||!n,children:"transfer"}),!!s&&(0,E.jsx)(a.$n,{block:!0,color:"danger",style:{marginBottom:8},loading:I,onClick:P(void 0,!0,s),disabled:!C.address||!n,children:"To Black Address"}),!!f&&(0,E.jsx)(a.$n,{block:!0,color:"danger",style:{marginBottom:8},loading:I,onClick:P(void 0,!0,f),disabled:!C.address||!n,children:"To StrongBlack Address"})]})})})]}),(0,E.jsx)("div",{id:ee}),(0,E.jsx)(j.A,{type:"info",message:"Common token",description:Object.entries(p().groupBy(ne,"chain")).map((e=>{let[t,n]=e;return(0,E.jsxs)(c.A,{gutter:12,children:[(0,E.jsx)(l.A,{children:t}),n.map((e=>(0,E.jsx)(l.A,{children:(0,E.jsx)("a",{href:`${["luoquanquan.github.io","localhost"].includes(window.location.hostname)?"/dapp-demo":""}/?tokenAddress=${e.address}`,children:e.symbol})},e.address)))]},t)}))})]})})})};var ie=n(17578),oe=n(59937),ae=n(54342);const se="0x2",fe=e=>e?e*10**9:"",ce=e=>e?`0x${(+e).toString(16)}`:"";const le=function(){const[e]=ie.A.useForm(),[t,n]=(0,r.useState)(se),{account:i,provider:o}=(0,r.useContext)(g),[s,f]=(0,r.useState)(!1);return(0,E.jsx)(l.A,{xs:24,lg:12,children:(0,E.jsx)(a.Zp,{direction:"vertical",title:"\u7ec4\u88c5\u4ea4\u6613",children:(0,E.jsx)(a.$x,{direction:"vertical",style:{width:"100%"},children:(0,E.jsxs)(ie.A,{form:e,layout:"vertical",onFinish:async()=>{try{f(!0);const n=e.getFieldsValue(),r={from:i,to:m,type:t,value:ce(n.value),data:ce(n.data),gas:ce(n.gasLimit)};t===se?(r.maxPriorityFeePerGas=ce(fe(n.maxPriorityFeePerGas)),r.maxFeePerGas=ce(fe(n.maxFeePerGas))):r.gasPrice=ce(fe(n.gasPrice)),await o.request({method:"eth_sendTransaction",params:[r]})}catch(n){ae.log,P.Ay.error(n.message)}finally{ae.log(`Current log: 1 ${Date.now()}`),f(!1)}},onValuesChange:e=>{n(e.type)},initialValues:{type:se,to:m,gasPrice:50,maxFeePerGas:35.00000029,maxPriorityFeePerGas:35,gasLimit:21e3},children:[(0,E.jsx)(ie.A.Item,{label:"to",name:"to",children:(0,E.jsx)(F.A,{placeholder:"to"})}),(0,E.jsx)(ie.A.Item,{label:"type",name:"type",children:(0,E.jsxs)(oe.Ay.Group,{children:[(0,E.jsx)(oe.Ay.Button,{value:"0x0",children:"Legacy"}),(0,E.jsx)(oe.Ay.Button,{value:se,children:"EIP 1559"})]})}),t===se?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(ie.A.Item,{label:"maxFeePerGas(Gwei)",name:"maxFeePerGas",children:(0,E.jsx)(F.A,{type:"float",min:0,placeholder:"maxFeePerGas(Gwei)"})}),(0,E.jsx)(ie.A.Item,{label:"maxPriorityFeePerGas(Gwei)",name:"maxPriorityFeePerGas",children:(0,E.jsx)(F.A,{type:"float",min:0,placeholder:"maxPriorityFeePerGas(Gwei)"})})]}):(0,E.jsx)(ie.A.Item,{label:"gasPrice(Gwei)",name:"gasPrice",children:(0,E.jsx)(F.A,{type:"float",placeholder:"gasPrice(Gwei)",min:0})}),(0,E.jsx)(ie.A.Item,{label:"gasLimit",name:"gasLimit",children:(0,E.jsx)(F.A,{ype:"number",min:0,placeholder:"gasLimit"})}),(0,E.jsx)(ie.A.Item,{label:"value",name:"value",children:(0,E.jsx)(F.A,{placeholder:"value"})}),(0,E.jsx)(ie.A.Item,{label:"data",name:"data",children:(0,E.jsx)(F.A,{placeholder:"data"})}),(0,E.jsx)(ie.A.Item,{children:(0,E.jsx)(a.$n,{block:!0,type:"submit",disabled:!i,loading:s,children:"Submit"})})]})})})})};function ue(){return(0,E.jsx)(a.Zp,{title:"signTransaction",children:(0,E.jsxs)(i.A,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsxs)(c.A,{gutter:16,children:[(0,E.jsx)(re,{}),(0,E.jsx)(V,{})]}),(0,E.jsxs)(c.A,{gutter:16,children:[(0,E.jsx)(G,{}),(0,E.jsx)(Y,{})]}),(0,E.jsx)(c.A,{gutter:16,children:(0,E.jsx)(le,{})})]})})}function de(e){let{href:t,disabled:n=!1,children:r}=e;return(0,E.jsx)(a.$n,{block:!0,onClick:()=>{window.open(t)},disabled:n,children:r})}const he=function(){const{account:e,chainId:t}=(0,r.useContext)(g);return(0,E.jsx)(a.Zp,{title:"Tools",children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(de,{href:`https://app.scamsniffer.io/permits/${e||""}`,children:"Scam Sniffer"}),(0,E.jsx)(de,{href:`https://revoke.cash/zh/address/${e||""}?chainId=${t}`,children:"revoke.cash"}),(0,E.jsx)(de,{href:"https://faucets.pk910.de/",children:"PoWFaucet"})]})})};var pe=n(54342);const ge=function(){const{account:e,provider:t}=(0,r.useContext)(g),[n,i]=(0,r.useState)(!1);return(0,E.jsx)(a.Zp,{title:"Rare cases",children:(0,E.jsx)(a.$x,{direction:"vertical",style:{width:"100%"},children:(0,E.jsx)(a.$n,{block:!0,loading:n,onClick:async()=>{try{i(!0),await t.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x1"}]}),await t.request({method:"eth_sendTransaction",params:[{from:e,to:"0x5283D291DBCF85356A21bA090E6db59121208b44",value:"0x0",data:"0xf123991e00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000095b247ccce49df14e87a8f20f12fcd23877873c600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000fe4f44bee93503346a3ac9ee5a26b130a5796d60000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000f"}]}),(0,b.t)()}catch(n){pe.log(n),(0,b.i)()}finally{i(!1)}},children:"invoke eigenLayer"})})})};var be=n(54342);const ye=function(){const{account:e,provider:t}=(0,r.useContext)(g),[n,i]=(0,r.useState)(!1),[o,s]=(0,r.useState)(!1),f=(e,n)=>async()=>{try{s(!0),await t.request({method:"wallet_switchEthereumChain",params:[{chainId:e}]}),await t.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:n,symbol:"tokenAddress",decimals:4,image:`${window.location.origin}/dapp-demo/favicon.png`}}}),(0,b.t)()}catch(r){be.log(r),(0,b.i)()}finally{s(!1)}},[c,l]=(0,r.useState)(!1),u=(n,r)=>async()=>{try{l(!0),await t.request({method:"wallet_switchEthereumChain",params:[{chainId:n}]}),await t.request({method:"eth_sendTransaction",params:[{from:e,to:m,value:`0x${(10**15).toString(16)}`,...r}]}),(0,b.t)()}catch(i){be.log(i),(0,b.i)()}finally{l(!1)}};return(0,E.jsx)(a.Zp,{title:"Test For Default Gas ~",children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(a.$n,{block:!0,disabled:!e,onClick:async()=>{try{i(!0),await t.request({method:"wallet_addEthereumChain",params:[{chainId:"0x4268",rpcUrls:["https://rpc.ankr.com/eth_holesky"],chainName:"Holesky Test",nativeCurrency:{name:"Holesky ETH",decimals:18,symbol:"ETH"},blockExplorerUrls:["https://holesky.etherscan.io/"]}]}),(0,b.t)()}catch(e){be.log(e),(0,b.i)()}finally{i(!1)}},loading:n,children:"Add Holesky Test Network"}),(0,E.jsx)(a.$n,{block:!0,disabled:!e,loading:o,onClick:f("0x4268","0x7ad6a7eb39e97f08a7deb05c87496d340e08d54f"),children:"Add Holesky Test Network Token"}),(0,E.jsx)(a.$n,{block:!0,disabled:!e,loading:o,onClick:f("0x41","0x7ad6a7eb39e97f08a7deb05c87496d340e08d54f"),children:"Add OKC Test Network Token"}),(0,E.jsx)(a.$n,{block:!0,disabled:!e,loading:c,onClick:u("0x41",{gasPrice:`0x${(15*10**9).toString(16)}`,gas:"0x5208"}),children:"Send OKC BaseToken WithGas(Legacy)"}),(0,E.jsx)(a.$n,{block:!0,disabled:!e,loading:c,onClick:u("0x41"),children:"Send OKC BaseToken WithoutGas(Legacy)"}),(0,E.jsx)(a.$n,{block:!0,disabled:!e,loading:c,onClick:u("0x4268",{maxFeePerGas:`0x${(2.1*10**9).toString(16)}`,maxPriorityFeePerGas:`0x${(2*10**9).toString(16)}`,gas:"0x5208"}),children:"Send Holesky BaseToken WithGas(eip-1559)"}),(0,E.jsx)(a.$n,{block:!0,disabled:!e,loading:c,onClick:u("0x4268"),children:"Send Holesky BaseToken WithoutGas(eip-1559)"})]})})};const me=function(e){let{title:t,onChange:n,value:r}=e;return(0,E.jsxs)("div",{style:{marginBottom:"4px"},children:[(0,E.jsxs)("div",{style:{marginBottom:"6px"},children:[t,":"]}),(0,E.jsx)(a.pd,{onChange:n,value:r,placeholder:`please input ${t}`})]})},ve=[{chainId:"0x1",to:"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",type:"Withdraw",callData:"0x2e1a7d4d0000000000000000000000000000000000000000000000000113984d6c161224"},{chainId:"0x1",to:"0xf3de3c0d654fda23dad170f0f320a92172509127",type:"Swap",callData:"0x9871efa400000000003065c160aa2dc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000186cc6acd4b00000000000000000000000000000000000000000000001624abe35390291bd2922b00000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000001b0000000000000003b6d03404103e658a8acab924a9a2d3750e6cf3fb932a186"},{chainId:"0x1",to:"0x6759acd57cb5ea451a3edf397734edddfc123049",type:"ClaimReward",callData:"0x1aee31d000000000000000000000000000000000000000000000000000000000000055870000000000000000000000000000000000000000000004af8fb048d4d3c00000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000688be1b4000000000000000000000000000000000000000000000000000000000000001ccff4fed2422710342400de4540d21d13f72c3e3bb57f3d1759efcbd84c453a2a58241509043ff46cd89e68a0db051d67565bc28e7683af08c5e07a461e5569c2000000000000000000000000000000000000000000000000000000000000000fe935acc1666ba975c8724ef514ed5d5166d4cbd2d4e653fd95ae03cffe5f3d3c88e25a461c06a8bd0dd9b0ab12a0b69e927fdc12415446a3ca908cc326d01266a486435bbc196d1f46aa27c2d143c088584ee8b027e3ca66fa13aa135dcf3b649bbe3ee92d8369cca580a154a185e60b929f306d70b6c7d613e0f843d44dfbed0346fcc15e93aa73bfbdd913c5185b27da7f481a0d31d7ddbaf272455b2af6f3e2dbb4fbfcd9f32113537747f974ac3872046169ce6cb6c8d9f262856bb93199d742d16150f00b4e984cdf9e471c36a0488df21f1aef3c4754a58b65012cc484a91e49606211faeae8e77678807815ea258e63cf95cf160db5464c175d9eba0c06710e754fb59ba898bba1127346c870f2aee05c22c952ce4412ea517c4586b431adffe7cc25c6e1c190fff148f31a21752775abeb1aa707ae7a7fe5bb0ff22c6c220eb496842c14dac711e270b6d469aa5e3e7c6d9971c4de9c4dcd02535c822004b41aeb7f85b9f6e46c71a451cb5fb86b03e0dcf18fb59b7af3db96ee6c6c5726934831a61a96855d33955db5ad5bc9b5b904fd048ab42010479076017e2997c1afa732779d9256af31d8525d2bb50eba01907f7c6cfea62b90759ea7a96b377a72a7db91b2606459fa309908ccbd3f61d32fcaab3c874d37d09784167cbf"},{chainId:"0x1",to:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",type:"Token Approval",callData:"0x095ea7b3000000000000000000000000e92b586627cca7a83dc919cc7127196d70f55a0600000000000000000000000000000000000000000000000005278ab4012fa000"},{chainId:"0x1",to:"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",type:"Send Token",callData:"0xa9059cbb000000000000000000000000b2db21f72d616aff10a4d043ee678dd24d042d8300000000000000000000000000000000000000000000000000000000000001f4"},{chainId:"0x1",to:"0x5d22045daceab03b158031ecb7d9d06fad24609b",type:"Bridge",callData:"0x00aeef8a05fe4940c19493b7facbc012677989fa504d88e14ec33628281ca4957c16979400b333e3142fe16b78628f19bb15afddaef437e72d6d7f5c6c20c6801a27fba60000000000000000000000000000000000000000000000000000000039ebfcb3"},{chainId:"0x1",to:"0x29469395eaf6f95920e59f858042f0e28d98a20b",type:"Take Order",callData:"0x619a309f000000000000000000000000218e312ff5181290a46e3f87a73a8ad40c05a9440000000000000000000000003bb4fa84b120ac0dbb4a6bb0442fe2c47e324a93000000000000000000000000bd3531da5cf5857e7cfaa92426877b022e612cf8000000000000000000000000000000000000000000000000000000000000138d0000000000000000000000000000000000000000000000006dc5f7174d5700000000000000000000000000000000000000000000000000000000000066a8f5e7000000000000000000000000000000000000000000000000000000000000089800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002328000000000000000000000000000000000000000000000000000000000004eb3f00000000000000000000000000000000000000000000000000000000000001600000000000000000000000000fcbfc0a67985ee0803def22343ec4aeed02760e000000000000000000000000bd3531da5cf5857e7cfaa92426877b022e612cf807206b8e31b6516d7eff87d5c922fe0f37d7855bb0803032f6a33095f47e7428000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000688dff1b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009e26d5f76ef2bea3b8158493c99513be0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000007f65e95cbe1600000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000022000000000000000000000000000000000000000000000000000000000000002a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000412acf1861718edf92830de444a5581fef5c3496901833ddb906e2a35286bc714026af28759c752bc2e3f9f92967121ee760c6cee9c503771edf2a5e1dcf85c9f31c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000599b0fe6317ee97fd93d9b3cb06121fb8aba5422920fe884780df9a802d7718f9b3c3b76c79692fadc2c1bc2beeac8c68160a54535698f8a32c2363c890c516c851b0137e7406af68e5d010513ff70a3aaed9afeb8661116e6ce00000000000000"},{chainId:"0x1",to:"0x29469395eaf6f95920e59f858042f0e28d98a20b",type:"Borrow",callData:"0xe263967e0000000000000000000000008ee0033f81aa75d222b43b2b4571eb2bbd0c185a000000000000000000000000bd3531da5cf5857e7cfaa92426877b022e612cf800000000000000000000000000000000000000000000000053444835ec580000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006f05b59d3b20000000000000000000000000000000000000000000000000000000000000000232800000000000000000000000000000000a95f35e70e6d3acf9b0de1543e8713d40000000000000000000000000000000000000000000000000000000066d408a5000000000000000000000000000000000000000000000000000000000000019a000000000000000000000000473ca1d29a136b935a96380ea342f296b4eea82c00000000000000000000000000000000000000000000000000000000000001a0000000000000000000000000000000000000000000000000058d15e17628000000000000000000000000000000000000000000000000000000000000000013a200000000000000000000000000000000000000000000000000000000000000a241df57db0d7b160709d45400c6d8d4804b83c431f5245c5a3832f5d143add2d1437a549f64da1d3dc37b489c717d52bc66fff13efb398522f959490efc003cdf1b482935865df9ab5812aa98505c0f80c5d20ad232f7d947b007908419cb17dc9b570811373f3152966dcc047a692510a9dcfeaef0b6bcedcb513c637d39bb4ab11c000000000000000000000000000000000000000000000000000000000137e74b000000000000000000000000000000000000000000000000000000000000"},{chainId:"0x1",to:"0x0000000000000068f116a894984e2db1123eb395",type:"Cancel Order",callData:"0xfd9f1e10000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000a01ab398e7b55e74d222992d5f286cf3ba5a75cb000000000000000000000000df2d4bffec010debd302674c9fb9cda99bb5e8520000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000022000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000066342016000000000000000000000000000000000000000000000000000000006635715e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000cc8155b224ff88b70000007b02230091a7ed01230072f7006a004d60a8d4e71d599b8104250f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c2e0ca5fe0b9abe1b86f3cc0b865448908d20a16a01ab398e7b55e74d222992d5f286cf3ba5a75cb0000000000000000000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e848000000000000000000000000000000000000000000000000000000000001e8480000000000000000000000000a01ab398e7b55e74d222992d5f286cf3ba5a75cb"},{chainId:"0x38",to:"0x3556e8b925ee20c1fc6a00107fd449522338f7fd",type:"Bet",callData:"0x35bcf347000000000000000000000000000000000000000000000037d61f16d37c5800007f2c395d9fee4afa5b24c23db4ffb34c02239e22c812f971e2171035c5ae04a300000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000041c83a001a319cd670d414286d79d6c1581fb2728187f590fc9d63a3d9c47f835e12bf8cf800383370b431e05a3670e093bea747df9cc61c75fa05dd59dfb1e24c1c00000000000000000000000000000000000000000000000000000000000000"},{chainId:"0x38",to:"0x0dd6d9c60bc6799acaad9be3ff9c583259cddfca",type:"subscribe",callData:"0xf739d67c0000000000000000000000001a098793a7b850b896bb7e278ead55a499e19a37000000000000000000000000000000000000000000000000000000000000000100000000000000000000000016fc4f4c81539a6517075170d9099d2a8f84bad8"},{chainId:"0x89",to:"0x830017756ce93b471f90a0502985766c9bb9baf4",type:"Config",callData:"0x074d11ae0000000000000000000000000000000000000000000000000000000000000001"},{chainId:"0x89",to:"0xf3a3d1b89a70e291531ecb4a1299117f5de44612",type:"Register",callData:"0x0840605a000000000000000000000000d51ea6e3f0f931548d1f4ba586814a964dd7f38d"}];var we=n(54342);const _e=function(){const{account:e,provider:t}=(0,r.useContext)(g),[n,i]=(0,r.useState)(""),[o,s]=(0,r.useState)(""),[f,c]=(0,r.useState)(""),[l,u]=(0,r.useState)(!1),d=async n=>{try{u(!0),await t.request({method:"wallet_switchEthereumChain",params:[{chainId:n.chainId}]});const r={from:e,to:n.to,value:"0x0",data:n.callData};await t.request({method:"eth_sendTransaction",params:[r]}),(0,b.t)()}catch(r){we.log(r),(0,b.i)()}finally{u(!1)}};return(0,E.jsx)(a.Zp,{title:"Route Contract",children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(a.Zp,{title:"\u9ed8\u8ba4\u529f\u80fd",children:(0,E.jsx)(a.$x,{wrap:!0,children:ve.map((t=>(0,E.jsx)(a.$n,{block:!0,loading:l,disabled:!e,onClick:()=>d(t),children:t.type},t.callData)))})}),(0,E.jsxs)(a.Zp,{title:"\u81ea\u5b9a\u4e49\u529f\u80fd",children:[(0,E.jsx)(me,{title:"chainId",value:n,onChange:i}),(0,E.jsx)(me,{title:"to",value:o,onChange:s}),(0,E.jsx)(me,{title:"callData",value:f,onChange:c}),(0,E.jsx)(a.$n,{block:!0,disabled:!e||!o||!f||!n,loading:l,onClick:async()=>{n.startsWith("0x")?d({to:o,callData:f,chainId:n}):d({to:o,callData:f,chainId:`0x${Number(n).toString(16)}`})},children:"fire"})]})]})})};const Ee=function(){return(0,E.jsxs)(a.Zp,{title:"Others",children:[(0,E.jsxs)(c.A,{gutter:12,children:[(0,E.jsx)(l.A,{xs:24,lg:8,children:(0,E.jsx)(he,{})}),(0,E.jsx)(l.A,{xs:24,lg:8,children:(0,E.jsx)(ge,{})})]}),(0,E.jsxs)(c.A,{gutter:12,children:[(0,E.jsx)(l.A,{xs:24,lg:12,children:(0,E.jsx)(ye,{})}),(0,E.jsx)(l.A,{xs:24,lg:12,children:(0,E.jsx)(_e,{})})]})]})},Ce=e=>{let{chain:t}=e;return`Please install ${t}'s wallet ~`},Oe={eoa:"eoa",contract:"contract",strongEoa:"strongEoa"},xe={[Oe.eoa]:"Black EOA Address",[Oe.contract]:"Black Contract Address",[Oe.strongEoa]:"Strong Black EOA Address"};function Se(e){let{address:t,type:n="eoa"}=e;return t?(0,E.jsx)(a.Zp,{title:xe[n]||"Unknown black address type",children:(0,E.jsx)(a.$x,{direction:"vertical",children:(0,E.jsx)(X.A.Text,{copyable:!0,children:t})})}):null}Se.typeMap=Oe;const ke=Se;var Te=n(54342);function Re(e){let{provider:t,onSelected:n,active:r}=e;const{info:i}=t;return(0,E.jsx)(l.A,{xs:24,lg:8,children:(0,E.jsxs)(a.Zp,{style:{cursor:"pointer"},onClick:n,title:(0,E.jsx)("img",{src:i.icon,width:24,height:24,alt:""}),extra:r?(0,E.jsx)("span",{style:{fontSize:"20px"},children:"\ud83d\udfe2"}):null,children:[(0,E.jsxs)("p",{children:["name: ",i.name]}),(0,E.jsxs)("p",{children:["rdns: ",i.rdns]}),(0,E.jsxs)("p",{children:["uuid: ",i.uuid]})]})})}const Ae=function(){const[e,t]=(0,r.useState)([]),{provider:n,setProvider:i}=(0,r.useContext)(g);return(0,r.useEffect)((()=>{i(new U.j(window.ethereum,"any")),window.addEventListener("eip6963:announceProvider",(e=>{var n;t((t=>(0,h.uniqBy)([...t,e.detail],"info.uuid"))),null===e||void 0===e||null===(n=e.detail)||void 0===n||n.provider.on("accountsChanged",(e=>{Te.log("dappppppppppppp accountsChanged",e)}))})),window.dispatchEvent(new Event("eip6963:requestProvider"))}),[]),(0,r.useEffect)((()=>{if(null!==e&&void 0!==e&&e.length){const t=(0,h.find)(e,(e=>{var t,n;return null===e||void 0===e||null===(t=e.info)||void 0===t||null===(n=t.name)||void 0===n?void 0:n.endsWith("Wallet")}));i((null===t||void 0===t?void 0:t.provider)||(0,h.last)(e).provider)}}),[e]),(0,E.jsx)(a.Zp,{title:"EIP 6963",children:(0,E.jsx)(c.A,{gutter:16,children:e.map((e=>(0,E.jsx)(Re,{active:n===e.provider,provider:e,onSelected:()=>{i(e.provider)}},e.info.uuid)))})})};var Ie=n(22130),Ne=n(57408),Pe=n(54342),De=n(19384).Buffer;const Be=function(){const{account:e,provider:t}=(0,r.useContext)(g),[n,i]=(0,r.useState)(!1),[o,s]=(0,r.useState)(""),[f,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[p,y]=(0,r.useState)(!1),[m,v]=(0,r.useState)("");return(0,E.jsx)(c.A,{gutter:16,children:(0,E.jsx)(l.A,{span:24,children:(0,E.jsx)(a.Zp,{direction:"vertical",title:"\u83b7\u53d6\u52a0\u5bc6\u516c\u94a5",children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(a.$n,{block:!0,disabled:!e,loading:n,onClick:async()=>{try{i(!0);const n=await t.request({method:"eth_getEncryptionPublicKey",params:[e]});s(n)}catch(n){Pe.log(n),(0,b.i)()}finally{i(!1)}},children:"\u83b7\u53d6\u516c\u94a5"}),(0,E.jsx)(j.A,{type:"info",message:"\u516c\u94a5",description:o}),(0,E.jsx)(a.pd,{disabled:!o,value:f,placeholder:"\u8bf7\u8f93\u5165\u660e\u6587",onChange:u}),(0,E.jsx)(a.$n,{block:!0,disabled:!f,onClick:async()=>{try{const e=(0,Ie.encrypt)(o,{data:f},"x25519-xsalsa20-poly1305"),t=Ne.c$(De.from(JSON.stringify(e)));h(t)}catch(e){Pe.log(e),(0,b.i)()}},children:"\u52a0\u5bc6"}),(0,E.jsx)(j.A,{type:"info",message:"\u5bc6\u6587",description:d}),(0,E.jsx)(a.$n,{block:!0,loading:p,disabled:!d,onClick:async()=>{try{y(!0);const n=await t.request({method:"eth_decrypt",params:[d,e]});v(n)}catch(n){Pe.log(n),(0,b.i)()}finally{y(!1)}},children:"\u89e3\u5bc6"}),(0,E.jsx)(j.A,{type:"info",message:"\u89e3\u5bc6\u540e\u6587\u672c(\u9700\u548c\u539f\u6587\u672c\u4e00\u81f4)",description:m})]})})})})};function Me(){const[e,t]=(0,r.useState)({}),{account:n,handleConnect:i,handleConnectAllChains:o,handleDisConnect:s}=(e=>{const[t,n]=(0,r.useState)(""),i=async()=>{try{if(e.request){const t=await e.request({method:"eth_requestAccounts"}),[r]=t;n(r)}}catch(t){P.Ay.error(M[t.code]||t.message)}};return(0,r.useEffect)((()=>{if(n(""),e&&null!==e&&void 0!==e&&e.on){try{e.on("accountsChanged",(e=>{let[t]=e;t?i():n("")}))}catch(t){B.log(t)}i()}}),[e]),{account:t,handleConnect:i,handleConnectAllChains:async()=>{try{const t=(await e.requestWallets(!0))[0].address.find((e=>{let{chainId:t}=e;return"66"===t})).address;n(t)}catch(t){P.Ay.error(M[t.code]||t.message)}},handleDisConnect:async()=>{try{await e.disconnect()}catch(t){}window.location.reload()}}})(e),{chainId:f}=(e=>{const[t,n]=(0,r.useState)(""),i=()=>{(null===e||void 0===e?void 0:e.request)&&e.request({method:"eth_chainId"}).then((e=>{n(e)}))};return(0,r.useEffect)((()=>{e&&(i(),(null===e||void 0===e?void 0:e.on)&&e.on("chainChanged",(()=>{i()})))}),[e]),{chainId:t}})(e),c=(0,r.useMemo)((()=>({account:n,chainId:f,provider:e,setProvider:t})),[n,f,e]);return window.ethereum?(0,E.jsx)(g.Provider,{value:c,children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(N,{}),(0,E.jsx)(Ae,{}),(0,E.jsx)(K,{account:n}),(0,E.jsx)(D,{handleConnect:i,account:n,handleDisConnect:s,children:e.requestWallets?(0,E.jsx)(a.$n,{disabled:!!n,onClick:o,children:"Connect All Chain"}):null}),(0,E.jsx)(I,{}),(0,E.jsx)(ue,{}),(0,E.jsx)(Ee,{}),(0,E.jsx)(Be,{}),(0,E.jsx)(ke,{type:ke.typeMap.eoa,address:w(f)}),(0,E.jsx)(ke,{type:ke.typeMap.strongEoa,address:_(f)})]})}):(0,E.jsx)(Ce,{chain:"Evm"})}const Ke={key:"Evm",children:(0,E.jsx)(Me,{})};var Le=n(54342);function Ue(e){let{title:t,account:n,msg:r}=e;return(0,E.jsx)(l.A,{xs:24,lg:6,children:(0,E.jsx)(a.$n,{block:!0,disabled:!n,onClick:async()=>{try{await tronWeb.trx.signMessage(r).then((e=>{Le.log(e),(0,b.t)()}))}catch(e){(0,b.i)()}},style:{marginBottom:8},children:t})})}const je=function(e){let{account:t}=e;return(0,E.jsx)(a.Zp,{title:"signMessage",children:(0,E.jsx)(a.$x,{direction:"vertical",style:{width:"100%"},children:(0,E.jsxs)(c.A,{gutter:6,children:[(0,E.jsx)(Ue,{title:"signMessage",account:t,msg:"Hello Tron"}),(0,E.jsx)(Ue,{title:"signMessage with approval",account:t,msg:"0a02ddef220847fff515ea79f0dd40a8eaa2e3b3315aae01081f12a9010a31747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e54726967676572536d617274436f6e747261637412740a1541d9edd5604bdfd83233a388330b009a4c118cd24f121541a614f803b6fd780986a42c78ec9c7f77e6ded13c2244d73dd623000000000000000000000000416d2d4db7b59c734bd10abdd5fe0b13cef23e2600000000000000000000000000000000000000000000000000000000000000ff7086a19fe3b33190018087a70e"}),(0,E.jsx)(Ue,{title:"signMessage with approval",account:t,msg:"0a02ddd72208280dac71fe29512d40e8b79ee3b3315aae01081f12a9010a31747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e54726967676572536d617274436f6e747261637412740a1541d9edd5604bdfd83233a388330b009a4c118cd24f121541a614f803b6fd780986a42c78ec9c7f77e6ded13c2244d73dd623000000000000000000000000416d2d4db7b59c734bd10abdd5fe0b13cef23e2600000000000000000000000fffffffffffffffffffffffffffffffffffffffff709cea9ae3b33190018087a70e"}),(0,E.jsx)(Ue,{title:"signMessage with approval gray",account:t,msg:"0a02ddbc2208a6facc02ac1c40cc4080bf99e3b3315aae01081f12a9010a31747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e54726967676572536d617274436f6e747261637412740a1541d9edd5604bdfd83233a388330b009a4c118cd24f121541a614f803b6fd780986a42c78ec9c7f77e6ded13c2244d73dd6230000000000000000000000009fda016c6b65510c2fbefc942d7358773245c17200000000000000000000000000000000000000000000000000000000000000ff70868496e3b33190018087a70e"})]})})})};const We=function(e){let{children:t,href:n,...r}=e;return(0,E.jsx)(o.Ay,{block:!0,type:"link",target:"_blank",href:n,...r,children:t})},He="TNssWTZnEakY2fN2Aaa71k85yRqVcjcv69",$e="THRAE2VhGNAcvPKtT96AqyXtSQwhiU1XL8",qe="TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t",Xe="TEkxiTehnzSmSe2XqrBj4w32RUN966rdz8",Fe="TDxkVPEaSNQkGb5HKmucMuLYbkZD3oWgUp",ze="TEU5d9mbaTMP2DBZLey6DFYJtbGmgX8b3Y",Je="TUt6TJ2qLrcyWQN8XVLbEXEuy8qhnivj84";var Ve=n(54342);const Ge=function(e){let{account:t}=e;const[n,o]=(0,r.useState)(!1),s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e;return async()=>{try{o(!0);const n=[{type:"address",value:e},{type:"uint256",value:tronWeb.toSun(99999999999999)}],{transaction:r}=await tronWeb.transactionBuilder.triggerSmartContract(tronWeb.address.toHex(qe),"increaseApproval(address,uint256)",{feeLimit:1e8},n,tronWeb.address.toHex(t)),i=await tronWeb.trx.sign(r);Ve.log("Current log: signedTx: ",i)}catch(n){Ve.error(n),P.Ay.error("\u64cd\u4f5c\u5931\u8d25")}finally{o(!1)}}},[f,c]=(0,r.useState)(!1),u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e;return async()=>{try{c(!0);const n=[{type:"address",value:e},{type:"uint256",value:tronWeb.toSun(99999999999999)}],{transaction:r}=await tronWeb.transactionBuilder.triggerSmartContract(tronWeb.address.toHex(qe),"decreaseAllowance(address,uint256)",{feeLimit:1e8},n,tronWeb.address.toHex(t)),i=await tronWeb.trx.sign(r);Ve.log("Current log: signedTx: ",i)}catch(n){Ve.error(n),P.Ay.error("\u64cd\u4f5c\u5931\u8d25")}finally{c(!1)}}},[d,h]=(0,r.useState)(!1),p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He;return async()=>{try{h(!0);const n=[{type:"address",value:e},{type:"uint256",value:1e3}],{transaction:r}=await tronWeb.transactionBuilder.triggerSmartContract(tronWeb.address.toHex(qe),"transfer(address,uint256)",{feeLimit:1e8},n,tronWeb.address.toHex(t)),i=await tronWeb.trx.sign(r);Ve.log("Current log: signedTx: ",i)}catch(n){Ve.error(n),P.Ay.error("\u64cd\u4f5c\u5931\u8d25")}finally{h(!1)}}},[g,b]=(0,r.useState)(!1),y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return async()=>{try{b(!0);const r=[{type:"address",value:e},{type:"uint256",value:n}],{transaction:i}=await tronWeb.transactionBuilder.triggerSmartContract(tronWeb.address.toHex(qe),"approve(address,uint256)",{feeLimit:1e8},r,tronWeb.address.toHex(t)),o=await tronWeb.trx.sign(i);Ve.log("Current log: signedTx: ",o),Ve.log("Current log: signedTx: ",o)}catch(r){Ve.error(r),P.Ay.error("\u64cd\u4f5c\u5931\u8d25")}finally{b(!1)}}},[m,v]=(0,r.useState)(!1),w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He;return async()=>{try{v(!0);const n=[{type:"address",value:t},{type:"address",value:e},{type:"uint256",value:1e3}],{transaction:r}=await tronWeb.transactionBuilder.triggerSmartContract(tronWeb.address.toHex(qe),"transferFrom(address,address,uint256)",{feeLimit:1e8},n,tronWeb.address.toHex(t)),i=await tronWeb.trx.sign(r);Ve.log("Current log: signedTx: ",i)}catch(n){Ve.error(n),P.Ay.error("\u64cd\u4f5c\u5931\u8d25")}finally{v(!1)}}};return(0,E.jsx)(l.A,{xs:24,lg:12,children:(0,E.jsx)(a.Zp,{direction:"vertical",title:"USDT",children:(0,E.jsxs)(i.A,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:n,onClick:s(),children:"increaseApproval"}),(0,E.jsx)(a.$n,{block:!0,color:"danger",disabled:!t,loading:n,onClick:s(ze),children:"increaseApproval(gray)"}),(0,E.jsx)(a.$n,{block:!0,color:"warning",disabled:!t,loading:n,onClick:s(He),children:"increaseApproval to EOA"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:f,onClick:u(),children:"decreaseApproval"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:f,onClick:u(ze),children:"decreaseApproval(gray)"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:d,onClick:p(),children:"transfer"}),(0,E.jsx)(a.$n,{block:!0,color:"danger",disabled:!t,loading:d,onClick:p(ze),children:"transfer Black Address"}),(0,E.jsx)(a.$n,{block:!0,color:"danger",disabled:!t,loading:d,onClick:p(Je),children:"transfer Strong Black Address"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:g,onClick:y(),children:"approve"}),(0,E.jsx)(a.$n,{block:!0,color:"danger",disabled:!t,loading:g,onClick:y(ze),children:"approve Black Address"}),(0,E.jsx)(a.$n,{block:!0,color:"danger",disabled:!t,loading:g,onClick:y(Je),children:"approve Strong Black Address"}),(0,E.jsx)(a.$n,{block:!0,color:"warning",disabled:!t,loading:g,onClick:y(He),children:"approve to EOA"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:g,onClick:y($e,0),children:"revoke"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:g,onClick:y(ze,0),children:"revoke(gray)"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:m,onClick:w(),children:"transferFrom"}),(0,E.jsx)(a.$n,{block:!0,color:"danger",disabled:!t,loading:m,onClick:w(ze),children:"transferFrom(gray)"}),(0,E.jsx)(We,{href:"https://tronscan.org/#/token20/TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t/code",children:"USDT Tron Scan"})]})})})};var Ye=n(54342);const Ze=function(e){let{account:t}=e;const[n,o]=(0,r.useState)(!1),s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e;return async()=>{try{o(!0);const n=[{type:"address",value:e},{type:"uint256",value:tronWeb.toSun(99999999999999)}],{transaction:r}=await tronWeb.transactionBuilder.triggerSmartContract(tronWeb.address.toHex(Xe),"increaseAllowance(address,uint256)",{feeLimit:1e8},n,tronWeb.address.toHex(t)),i=await tronWeb.trx.sign(r);Ye.log("Current log: signedTx: ",i)}catch(n){Ye.error(n),P.Ay.error("\u64cd\u4f5c\u5931\u8d25")}finally{o(!1)}}},[f,c]=(0,r.useState)(!1),u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e;return async()=>{try{c(!0);const n=[{type:"address",value:e},{type:"uint256",value:tronWeb.toSun(99999999999999)}],{transaction:r}=await tronWeb.transactionBuilder.triggerSmartContract(tronWeb.address.toHex(Xe),"decreaseAllowance(address,uint256)",{feeLimit:1e8},n,tronWeb.address.toHex(t)),i=await tronWeb.trx.sign(r);Ye.log("Current log: signedTx: ",i)}catch(n){Ye.error(n),P.Ay.error("\u64cd\u4f5c\u5931\u8d25")}finally{c(!1)}}},[d,h]=(0,r.useState)(!1),p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He;return async()=>{try{h(!0);const n=[{type:"address",value:e},{type:"uint256",value:1e3}],{transaction:r}=await tronWeb.transactionBuilder.triggerSmartContract(tronWeb.address.toHex(Xe),"transfer(address,uint256)",{feeLimit:1e8},n,tronWeb.address.toHex(t)),i=await tronWeb.trx.sign(r);Ye.log("Current log: signedTx: ",i)}catch(n){Ye.error(n),P.Ay.error("\u64cd\u4f5c\u5931\u8d25")}finally{h(!1)}}},[g,b]=(0,r.useState)(!1),y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return async()=>{try{b(!0);const r=[{type:"address",value:e},{type:"uint256",value:n}],{transaction:i}=await tronWeb.transactionBuilder.triggerSmartContract(tronWeb.address.toHex(Xe),"approve(address,uint256)",{feeLimit:1e8},r,tronWeb.address.toHex(t)),o=await tronWeb.trx.sign(i);Ye.log("Current log: signedTx: ",o)}catch(r){Ye.error(r),P.Ay.error("\u64cd\u4f5c\u5931\u8d25")}finally{b(!1)}}},[m,v]=(0,r.useState)(!1),w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He;return async()=>{try{v(!0);const n=[{type:"address",value:t},{type:"address",value:e},{type:"uint256",value:1e3}],{transaction:r}=await tronWeb.transactionBuilder.triggerSmartContract(tronWeb.address.toHex(Xe),"transferFrom(address,address,uint256)",{feeLimit:1e8},n,tronWeb.address.toHex(t)),i=await tronWeb.trx.sign(r);Ye.log("Current log: signedTx: ",i)}catch(n){Ye.error(n),P.Ay.error("\u64cd\u4f5c\u5931\u8d25")}finally{v(!1)}}};return(0,E.jsx)(l.A,{xs:24,lg:12,children:(0,E.jsx)(a.Zp,{direction:"vertical",title:"USDC",children:(0,E.jsxs)(i.A,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:n,onClick:s(),children:"increaseAllowance"}),(0,E.jsx)(a.$n,{block:!0,color:"danger",disabled:!t,loading:n,onClick:s(ze),children:"increaseAllowance(gray)"}),(0,E.jsx)(a.$n,{block:!0,color:"warning",disabled:!t,loading:n,onClick:s(He),children:"increaseAllowance to EOA"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:f,onClick:u(),children:"decreaseAllowance"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:f,onClick:u(ze),children:"decreaseAllowance(gray)"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:d,onClick:p(),children:"transfer"}),(0,E.jsx)(a.$n,{block:!0,color:"danger",disabled:!t,loading:d,onClick:p(ze),children:"transfer(gray)"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:g,onClick:y(),children:"approve"}),(0,E.jsx)(a.$n,{block:!0,color:"danger",disabled:!t,loading:g,onClick:y(ze),children:"approve(gray)"}),(0,E.jsx)(a.$n,{block:!0,color:"warning",disabled:!t,loading:g,onClick:y(He),children:"approve to EOA"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:g,onClick:y($e,0),children:"revoke"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:g,onClick:y(ze,0),children:"revoke(gray)"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:m,onClick:w(),children:"transferFrom"}),(0,E.jsx)(a.$n,{block:!0,color:"danger",disabled:!t,loading:m,onClick:w(ze),children:"transferFrom(gray)"}),(0,E.jsx)(We,{href:"https://tronscan.org/#/token20/TEkxiTehnzSmSe2XqrBj4w32RUN966rdz8/code",children:"USDC Tron Scan"})]})})})};var Qe=n(54342);const et=function(e){let{account:t}=e;const[n,o]=(0,r.useState)(!1),s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He;return async()=>{try{o(!0);const n=[{type:"address",value:e},{type:"uint256",value:114035}],{transaction:r}=await tronWeb.transactionBuilder.triggerSmartContract(tronWeb.address.toHex(Fe),"approve(address,uint256)",{feeLimit:1e8},n,tronWeb.address.toHex(t)),i=await tronWeb.trx.sign(r);Qe.log("Current log: signedTx: ",i)}catch(n){Qe.error(n),P.Ay.error("\u64cd\u4f5c\u5931\u8d25")}finally{o(!1)}}},[f,c]=(0,r.useState)(!1),u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He;return async()=>{try{c(!0);const n=[{type:"address",value:e},{type:"bool",value:!0}],{transaction:r}=await tronWeb.transactionBuilder.triggerSmartContract(tronWeb.address.toHex(Fe),"setApprovalForAll(address,bool)",{feeLimit:1e8},n,tronWeb.address.toHex(t)),i=await tronWeb.trx.sign(r);Qe.log("Current log: signedTx: ",i)}catch(n){Qe.error(n),P.Ay.error("\u64cd\u4f5c\u5931\u8d25")}finally{c(!1)}}};return(0,E.jsx)(l.A,{xs:24,lg:12,children:(0,E.jsx)(a.Zp,{direction:"vertical",title:"NFT \u5408\u96c6",children:(0,E.jsxs)(i.A,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:f,onClick:u(),children:"setApprovalForAll"}),(0,E.jsx)(a.$n,{block:!0,color:"danger",disabled:!t,loading:f,onClick:u(ze),children:"setApprovalForAll(gray)"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:n,onClick:s(),children:"approve(\u672a\u89e3\u6790)"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:n,onClick:s(ze),children:"approve(gray)(\u672a\u89e3\u6790)"}),(0,E.jsx)(We,{href:"https://tronscan.org/#/token721/TDxkVPEaSNQkGb5HKmucMuLYbkZD3oWgUp/code",children:"\u6d4f\u89c8\u5668"})]})})})};var tt=n(54342);const nt=function(e){let{account:t}=e;const[n,i]=(0,r.useState)(!1),[o,s]=(0,r.useState)(!1),[f,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!1);return(0,E.jsx)(l.A,{xs:24,lg:12,children:(0,E.jsx)(a.Zp,{direction:"vertical",title:"Others",children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:o,onClick:async()=>{try{s(!0);const e=await tronWeb.transactionBuilder.sendTrx(He,1,t),n=await tronWeb.trx.sign(e);tt.log("Current log: signedTx: ",n),(0,b.t)()}catch(e){tt.error(e),(0,b.i)()}finally{s(!1)}},children:"transfer baseCoin"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:n,onClick:async()=>{try{i(!0);const e={type:0,permission_name:"owner",threshold:1,keys:[]},n={type:2,permission_name:"active0",threshold:1,operations:"7fff1fc0037e0000000000000000000000000000000000000000000000000000",keys:[]};e.keys.push({address:tronWeb.address.toHex(He),weight:1}),n.keys.push({address:tronWeb.address.toHex(He),weight:1}),e.keys.push({address:tronWeb.address.toHex("TYujXwqgrbaK7bpWUpAGhopmeVv27RrcJe"),weight:1}),n.keys.push({address:tronWeb.address.toHex("TYujXwqgrbaK7bpWUpAGhopmeVv27RrcJe"),weight:1});const r=await tronWeb.transactionBuilder.updateAccountPermissions(tronWeb.address.toHex(t),e,null,[n]),o=await tronWeb.trx.sign(r);tt.log("Current log: signedTx: ",o),tt.log("Current log: signedTx: ",o)}catch(e){tt.error(e),(0,b.i)()}finally{i(!1)}},children:"updateAccountPermissions"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:f,onClick:async()=>{try{c(!0);const e=await tronWeb.trx.sign({visible:!1,txID:"1215a31320030d16f8bc047c818dc6e9d5e345fd906de6dd8e4deec735aa88b0",raw_data:{contract:[],ref_block_bytes:"f639",ref_block_hash:"098e286d200aec9d",expiration:172429869e4,fee_limit:1e8,timestamp:1724298632603},raw_data_hex:"0a02f6392208098e286d200aec9d40d0fbd7c197325aae01081f12a9010a31747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e54726967676572536d617274436f6e747261637412740a154174abc9551f8612370c9d7b29b03f661254385a9a121541a614f803b6fd780986a42c78ec9c7f77e6ded13c2244095ea7b300000000000000000000000051b160bb02261c822b33e61c6b947f275144545e00000000000000000000000000000000000000000000000000000000000003e8709bbbd4c19732900180c2d72f"});tt.log("Current log: signedTx: ",e),(0,b.t)()}catch(e){tt.error(e),(0,b.i)()}finally{c(!1)}},children:"signTransaction with inValid params"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:u,onClick:async()=>{try{d(!0);const e=await tronWeb.trx.sign({visible:!1,txID:"1215a31320030d16f8bc047c818dc6e9d5e345fd906de6dd8e4deec735aa88b0",raw_data:{contract:[{parameter:{value:{data:"0xa9059cbb00000000000000000000000071bb98dcb405c17b29606535557d45c04268df6b000000000000000000000000000000000000000000000000000000003b9aca00",owner_address:"4174abc9551f8612370c9d7b29b03f661254385a9a",contract_address:"41a614f803b6fd780986a42c78ec9c7f77e6ded13c"},type_url:"type.googleapis.com/protocol.TriggerSmartContract"},type:"TriggerSmartContract"}],ref_block_bytes:"f639",ref_block_hash:"098e286d200aec9d",expiration:172429869e4,fee_limit:1e8,timestamp:1724298632603},raw_data_hex:"0a0242fc2208f3ff07a6b20a7b0640e8fcbd909c325aae01081f12a9010a31747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e54726967676572536d617274436f6e747261637412740a1541cb3966acc1d471ad25e52330d6dea71c00fa1ab8121541a614f803b6fd780986a42c78ec9c7f77e6ded13c2244d73dd6230000000000000000000000003487b63d30b5b2c87fb7ffa8bcfade38eaac1abe0000000000000000000000000000000000000000000000000000000005f5e10070cbb4ba909c32900180c2d72f"});tt.log("Current log: signedTx: ",e),(0,b.t)()}catch(e){tt.error(e),(0,b.i)()}finally{d(!1)}},children:"notSameParamsTx"})]})})})};function rt(e){let{account:t}=e;return(0,E.jsx)(a.Zp,{title:"signTransaction",children:(0,E.jsx)(i.A,{direction:"vertical",style:{width:"100%"},children:(0,E.jsxs)(c.A,{gutter:6,children:[(0,E.jsx)(Ge,{account:t}),(0,E.jsx)(Ze,{account:t}),(0,E.jsx)(et,{account:t}),(0,E.jsx)(nt,{account:t})]})})})}const it=function(e){let{account:t}=e;const[n,i]=(0,r.useState)(!1);return(0,E.jsx)(a.Zp,{title:"Others",children:(0,E.jsx)(a.$x,{direction:"vertical",style:{width:"100%"},children:(0,E.jsx)(a.$n,{block:!0,disabled:!t,onClick:async()=>{i(!0),window.tronLink.ready&&tronLink.tronWeb.request({method:"wallet_watchAsset",params:{type:"trc20",options:{address:qe}}})},style:{marginBottom:8},loading:n,children:"wallet_watchAsset"})})})};function ot(){const{account:e,handleConnect:t}=(()=>{let e;const[t,n]=(0,r.useState)(""),i=async()=>{var t;const r=await tronLink.request({method:"tron_requestAccounts"}),{code:i}=r;i&&200!==i&&P.Ay.error(i),e=tronLink.tronWeb,n((null===(t=e.defaultAddress)||void 0===t?void 0:t.base58)||"")};return(0,r.useEffect)((()=>{window.addEventListener("message",(t=>{var r;let{data:i}=t;var o;"accountsChanged"===(null===(r=i.message)||void 0===r?void 0:r.action)&&n((null===(o=e.defaultAddress)||void 0===o?void 0:o.base58)||"")})),i()}),[]),{account:t,handleConnect:i}})();return(0,E.jsxs)(i.A,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(K,{account:e}),(0,E.jsx)(D,{handleConnect:t,account:e}),(0,E.jsx)(je,{account:e}),(0,E.jsx)(rt,{account:e}),(0,E.jsx)(it,{account:e}),(0,E.jsx)(ke,{type:ke.typeMap.eoa,address:ze}),(0,E.jsx)(ke,{type:ke.typeMap.strongEoa,address:Je})]})}const at="Tron",st={key:at,children:window.tronLink?(0,E.jsx)(ot,{}):(0,E.jsx)(Ce,{chain:at})};var ft=n(16268),ct=n(54342);const lt=["h","tt","ps:","//","s","ol","an","a-m","ai","n","net.","co","re",".","ch","ain","stack",".com","/00173","f5a1d1a","57","c","2d","9b","6f","6d","003","20","70","3f"].join("");var ut=n(54342);const dt=function(e){let{account:t}=e;return(0,E.jsx)(a.Zp,{title:"signMessage",children:(0,E.jsx)(a.$x,{direction:"vertical",style:{width:"100%"},children:(0,E.jsx)(a.Zp,{direction:"vertical",children:(0,E.jsx)(a.$x,{direction:"vertical",style:{width:"100%"},children:(0,E.jsx)(a.$n,{disabled:!t,block:!0,onClick:async()=>{try{const e="Hello Solana",t=await solana.signMessage(e);ut.log(t),(0,b.t)()}catch(e){ut.log(e),(0,b.i)()}},children:"\u7b7e\u540d"})})})})})};var ht=n(57646),pt=n(51013),gt=n(33060);const bt="4mpBfqutcvpfsF1xt6SAnqfFJcE1aGC1EjhcNRyoLSM8";var yt=n(54342);const mt=function(e){let{account:t,connection:n}=e;const[i,o]=(0,r.useState)(!1);return(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:i,onClick:async()=>{try{o(!0);const e=1e3,r=new ft.J3(t),i=new ft.J3(bt),a=new ft.J3("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB");a.toBuffer();new ft.J3(ht.x5).toBuffer();const s=await pt.Ob(a,r),f=await pt.Ob(a,i),c=gt.C3(s,f,r,e),l=new ft.ZX;l.add(c);const u=(await n.getLatestBlockhash()).blockhash;l.recentBlockhash=u,l.feePayer=solana.publicKey,yt.log("Current log: solana: ",solana);const d=await solana.signTransaction(l);yt.log(d),(0,b.t)()}catch(e){yt.log(e),(0,b.i)()}finally{o(!1)}},children:"sendUSDT"})};var vt=n(54342);const wt=function(e){let{account:t,connection:n}=e;const[i,o]=(0,r.useState)(!1);return(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:i,onClick:async()=>{try{o(!0);const e=new ft.ZX;e.add(ft.yq.assign({accountPubkey:solana.publicKey,programId:new ft.J3(bt)}));const t=(await n.getLatestBlockhash()).blockhash;e.recentBlockhash=t,e.feePayer=solana.publicKey;const r=await solana.signTransaction(e);vt.log("Current log: signedTx: ",r),(0,b.t)()}catch(e){vt.log(e),(0,b.i)()}finally{o(!1)}},children:"\u8f6c\u79fb\u8d26\u6237\u6743\u9650"})};var _t=n(54342);const Et=ft.Sr/1e4;function Ct(e){let{account:t,connection:n}=e;const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ft.J3(bt);return async()=>{const n=new ft.ZX;n.add(ft.yq.transfer({fromPubkey:solana.publicKey,toPubkey:t,lamports:Et}));const r=(await e.getLatestBlockhash()).blockhash;return n.recentBlockhash=r,n.feePayer=solana.publicKey,n}}(n),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ft.J3(bt);return async()=>{const n=(await e.getLatestBlockhash()).blockhash,r=new ft.wu({payerKey:solana.publicKey,recentBlockhash:n,instructions:[ft.yq.transfer({fromPubkey:solana.publicKey,toPubkey:t,lamports:Et})]}).compileToV0Message();return new ft.Kt(r)}}(n),[s,f]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[m,v]=(0,r.useState)(!1),[w,_]=(0,r.useState)(!1);return(0,E.jsx)(a.Zp,{title:"\u5408\u7ea6\u4ea4\u4e92 - \u8bf7\u6253\u5f00\u63a7\u5236\u53f0\u67e5\u770b\u7b7e\u540d\u4fe1\u606f",children:(0,E.jsxs)(c.A,{gutter:16,children:[(0,E.jsx)(l.A,{xs:24,lg:12,children:(0,E.jsx)(a.Zp,{title:"Transaction",children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:s,onClick:async()=>{try{f(!0);const e=await i(),t=await solana.signTransaction(e);_t.log("Current log: signedTx: ",t);const r=await n.sendRawTransaction(t.serialize());_t.log(r),(0,b.t)()}catch(e){_t.log(e),(0,b.i)()}finally{f(!1)}},children:"signTransaction"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:u,onClick:async()=>{try{d(!0);const e=[await i(),await i()],t=await solana.signAllTransactions(e);for(let r=0;r<t.length;r++){const e=t[r],i=await n.sendRawTransaction(e.serialize());_t.log(i)}(0,b.t)()}catch(e){_t.log(e),(0,b.i)()}finally{d(!1)}},children:"signAllTransactions"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:h,onClick:async()=>{try{p(!0);const e=await i(),t=await solana.signAndSendTransaction(e);_t.log(t),(0,b.t)()}catch(e){_t.log(e),(0,b.i)()}finally{p(!1)}},children:"signAndSendTransaction"}),(0,E.jsx)(mt,{account:t,connection:n}),(0,E.jsx)(wt,{account:t,connection:n})]})})}),(0,E.jsx)(l.A,{xs:24,lg:12,children:(0,E.jsx)(a.Zp,{title:"Versioned Transaction",children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:g,onClick:async()=>{try{y(!0);const e=await o(),t=await solana.signTransaction(e),r=await n.sendRawTransaction(t.serialize());_t.log(r),(0,b.t)()}catch(e){_t.log(e),(0,b.i)()}finally{y(!1)}},children:"signVersionedTransaction"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:m,onClick:async()=>{try{v(!0);const e=[await o(),await o()],t=await solana.signAllTransactions(e);for(let r=0;r<t.length;r++){const e=t[r],i=await n.sendRawTransaction(e.serialize());_t.log(i)}(0,b.t)()}catch(e){_t.log(e),(0,b.i)()}finally{v(!1)}},children:"signAllVersionedTransactions"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:w,onClick:async()=>{try{_(!0);const e=await o(),t=await solana.signAndSendTransaction(e);_t.log(t),(0,b.t)()}catch(e){_t.log(e),(0,b.i)()}finally{_(!1)}},children:"signAndSendVersionedTransaction"})]})})})]})})}function Ot(){const{account:e,handleConnect:t,connection:n,handleDisconnect:i}=(()=>{const e=new ft.Ng(lt),[t,n]=(0,r.useState)(""),i=async()=>{try{const{publicKey:e}=await solana.connect();n(e.toBase58())}catch(e){P.Ay.error(e.message)}};return(0,r.useEffect)((()=>{window.solana&&(solana.on("accountsChanged",i),solana.on("connect",(e=>{ct.log("solana connect: ",e),e.publicKey&&n(e.publicKey.toBase58())})),solana.on("chainChanged",(e=>{ct.log("solana chainChanged: ",e)})),solana.on("disconnect",(e=>{ct.log("solana disconnect: ",e),n("")})))}),[]),{account:t,handleConnect:i,connection:e,handleDisconnect:async()=>{try{await solana.disconnect(),n("")}catch(e){P.Ay.error(e.message)}}}})();return window.solana?(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(K,{account:e}),(0,E.jsx)(D,{handleConnect:t,account:e,handleDisconnect:i}),(0,E.jsx)(dt,{account:e}),(0,E.jsx)(Ct,{account:e,connection:n})]}):(0,E.jsx)(Ce,{chain:"Solana"})}const xt={key:"Solana",children:(0,E.jsx)(Ot,{})};var St=n(54342);const kt="wrap.near",Tt={network:"mainnet",networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",walletUrl:"https://wallet.mainnet.near.org",helperUrl:"https://helper.mainnet.near.org",explorerUrl:"https://nearblocks.io"},Rt=e=>{St.log(e),e.error?(0,b.i)():(0,b.t)()};var At=n(54342);const It="origin";var Nt=n(54342),Pt=n(19384).Buffer;const Dt=["efad2cea4242f19eba36ea0038161fc803e2af6682b575fa1c4e9d48f8019dae","c1f0f7bc0deed7d2151e7987ad2aca74b8e856c1f87efa93fec1ff4075b4d6e4"];const Bt=function(e){let{account:t,provider:n}=e;const i=()=>Dt[0]===t?Dt[1]:Dt[0],[o,s]=(0,r.useState)(!1),[f,c]=(0,r.useState)(!1),l=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return async()=>{try{c(!0);const r=e?{receiverId:kt,actions:[{type:"FunctionCall",params:{methodName:"near_deposit",args:{},deposit:"1250000000000000000000"}}]}:{receiverId:kt,actions:[{methodName:"near_deposit",args:{},deposit:"1250000000000000000000",...t?{gas:"300000000000000"}:{}}]},i=await n.signAndSendTransaction(r);Rt(i)}catch(r){Nt.log(r),(0,b.i)()}finally{c(!1)}}},[u,d]=(0,r.useState)(!1),h=function(){let{useU8Array:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async()=>{const t={receiver_id:i(),amount:"10000"};try{d(!0);const r={receiverId:kt,actions:[{methodName:"ft_transfer",args:e?Pt.from(JSON.stringify(t),"utf8"):t,deposit:"1"}]},i=await n.signAndSendTransaction(r);Rt(i)}catch(r){Nt.log(r),(0,b.i)()}finally{d(!1)}}},[p,g]=(0,r.useState)(!1),y=function(){let{useU8Array:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async()=>{try{g(!0);const t={receiver_id:i(),amount:"1000"},r={receiverId:kt,actions:[{methodName:"near_deposit",args:{},deposit:"1250000000000000000000"},{methodName:"ft_transfer",args:e?Pt.from(JSON.stringify(t),"utf8"):t,deposit:"1"}]},o=await n.signAndSendTransaction(r);Rt(o)}catch(t){Nt.log(t),(0,b.i)()}finally{g(!1)}}},[m,v]=(0,r.useState)(!1),w=function(){let{fullParams:e=!1,useU8Array:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async()=>{try{v(!0);const r={receiver_id:i(),amount:"10000000000"},o=e?{transactions:[{receiverId:kt,actions:[{type:"FunctionCall",params:{methodName:"near_deposit",args:{},deposit:"1000000000000000"}}]},{receiverId:kt,actions:[{type:"FunctionCall",params:{methodName:"ft_transfer",args:t?Pt.from(JSON.stringify(r),"utf8"):r,deposit:"1"}}]}]}:{transactions:[{receiverId:kt,actions:[{methodName:"near_deposit",args:{},deposit:"1000000000000000"}]},{receiverId:kt,actions:[{methodName:"ft_transfer",args:{receiver_id:i(),amount:"10000000000"},deposit:"1"}]}]},a=await n.requestSignTransactions(o);Rt(a)}catch(r){Nt.log(r),(0,b.i)()}finally{v(!1)}}};return(0,E.jsx)(a.Zp,{direction:"vertical",title:"\u666e\u901a\u4ea4\u4e92 - \u9700\u8981\u5524\u8d77\u63d2\u4ef6",children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(a.$n,{block:!0,loading:o,onClick:async()=>{try{s(!0);const e=await n.sendMoney({receiverId:i(),amount:"10000000000000000"});Rt(e)}catch(e){Nt.log(e),(0,b.i)()}finally{s(!1)}},disabled:!t,children:"sendMoney"}),(0,E.jsx)(a.Zp,{title:"signAndSendTransaction",children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(a.$n,{block:!0,loading:f,onClick:l(),disabled:!t,children:"swapToWNear"}),(0,E.jsx)(a.$n,{block:!0,loading:f,onClick:l(!1,!0),disabled:!t,children:"swapToWNear(withGas)"}),(0,E.jsx)(a.$n,{block:!0,loading:f,onClick:l(!0),disabled:!t,children:"swapToWNear(full params)"}),(0,E.jsx)(a.$n,{block:!0,loading:u,onClick:h(),disabled:!t,children:"sendWNear"}),(0,E.jsx)(a.$n,{block:!0,loading:u,onClick:h({useU8Array:!0}),disabled:!t,children:"sendWNear(with U8Array args)"})]})}),(0,E.jsx)(a.Zp,{title:"signAndSendTransaction multi actions",children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(a.$n,{block:!0,loading:p,onClick:y(),disabled:!t,children:"swapAndSendWNear()"}),(0,E.jsx)(a.$n,{block:!0,loading:p,onClick:y({useU8Array:!0}),disabled:!t,children:"swapAndSendWNear(with U8Array args)"})]})}),(0,E.jsx)(a.Zp,{title:"requestSignTransactions",children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(a.$n,{block:!0,loading:m,onClick:w(),disabled:!t,children:"swapAndSendWNear"}),(0,E.jsx)(a.$n,{block:!0,loading:m,onClick:w({fullParams:!0}),disabled:!t,children:"swapAndSendWNear(full params)"}),(0,E.jsx)(a.$n,{block:!0,loading:m,onClick:w({useU8Array:!0}),disabled:!t,children:"swapAndSendWNear(with U8Array args)"})]})}),(0,E.jsx)(a.$n,{block:!0,onClick:async()=>{try{const e=await n.signAndSendTransaction({actions:[{type:"DeployContract",params:{code:"12345"}}]});Rt(e)}catch(e){Nt.log(e),(0,b.i)()}},disabled:!t,children:"deployContract(Not supported)"})]})})};var Mt=n(17535),Kt=n(54342);const Lt=function(e){let{access:t,provider:n}=e;const[i,o]=(0,r.useState)(!1),[s,f]=(0,r.useState)(!1);return t?(0,E.jsx)(a.Zp,{direction:"vertical",title:"dapp \u5185\u90e8\u4ea4\u4e92 - \u65e0\u9700\u5524\u8d77\u63d2\u4ef6",children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(a.$n,{block:!0,loading:i,onClick:async()=>{try{o(!0);const e=n.getAccountId(),r=new Mt.keyStores.InMemoryKeyStore,i=Mt.KeyPair.fromString(t.secretKey);await r.setKey(Tt.network,e,i);const a=await Mt.connect({deps:{keyStore:r},...Tt}),s=await a.account(e),f=new Mt.Contract(s,kt,{viewMethods:["ft_metadata"],changeMethods:[]}),c=await f.ft_metadata();Kt.log("Current log: resp: ",c)}catch(e){P.Ay.error(e.message)}finally{o(!1)}},children:"ftMetaData"}),(0,E.jsx)(a.$n,{block:!0,loading:s,onClick:async()=>{try{f(!0);const e=n.getAccountId(),r=new Mt.keyStores.InMemoryKeyStore,i=Mt.KeyPair.fromString(t.secretKey);await r.setKey(Tt.network,e,i);const o=await Mt.connect({deps:{keyStore:r},...Tt}),a=await o.account(e),s=new Mt.Contract(a,kt,{viewMethods:["ft_balance_of"],changeMethods:[]}),c=await s.ft_balance_of({account_id:n.getAccountId()});Kt.log("Current log: resp: ",c)}catch(e){P.Ay.error(e.message)}finally{f(!1)}},children:"ftBalanceOf"})]})}):null};const Ut=function(e){let{account:t,access:n,provider:r}=e;return(0,E.jsxs)(c.A,{gutter:16,children:[(0,E.jsx)(l.A,{xs:24,lg:12,children:(0,E.jsx)(Bt,{account:t,provider:r})}),(0,E.jsx)(l.A,{xs:24,lg:12,children:(0,E.jsx)(Lt,{account:t,access:n})})]})};var jt=n(19384).Buffer,Wt=n(54342);const Ht=function(e){let{account:t,provider:n}=e;const[i,o]=(0,r.useState)(!1);return(0,E.jsx)(a.Zp,{title:"signMessage",children:(0,E.jsx)(a.$x,{direction:"vertical",style:{width:"100%"},children:(0,E.jsx)(a.$n,{block:!0,loading:i,disabled:!t,onClick:async()=>{try{o(!0);const e="Hello Near",t=jt.from("4268ebc14ff247f5450d4a8682bec3729a06d268f83b0cb363083ab05b65486b","hex"),r=kt,i=await n.signMessage({message:e,nonce:t,recipient:r});Rt(i)}catch(e){Wt.log(e),(0,b.i)()}finally{o(!1)}},style:{marginBottom:8},children:"signMessage"})})})};function $t(){const{loading:e,account:t,access:n,handleConnect:i,handleDisConnect:o,handleConnectWithContractId:s,provider:f}=(()=>{const[e,t]=(0,r.useState)(!1),n=(0,r.useRef)(),[i,o]=(0,r.useState)(""),[a,s]=(0,r.useState)(null),[f,c]=(0,r.useState)("");return(0,r.useEffect)((()=>{try{n.current&&(n.current.on("accountsChanged",(e=>{At.log("Current log: msg: ",e)})),n.current.on("signOut",(e=>{At.log("Current log: msg: ",e),At.log("Current log: signOut")})),n.current.on("signIn",(e=>{At.log("Current log: msg: ",e),At.log("Current log: signIn")})))}catch(e){At.log("Current log: error: ",e)}}),[i]),{loading:e,account:i,access:a,provider:n.current,connectType:f,handleDisConnect:()=>{window.near.signOut(),o(""),s(null)},handleConnect:async()=>{try{t(!0),await window.near.requestSignIn({contractId:"",methodNames:[]}),o(window.near.getAccountId()),n.current=window.near,c(It)}catch(e){P.Ay.error(e.message)}finally{t(!1)}},handleConnectWithContractId:async()=>{try{t(!0);const{accessKey:e}=await window.near.requestSignIn({contractId:kt,methodNames:[]});o(window.near.getAccountId()),s(e),n.current=window.near,c(It)}catch(e){P.Ay.error(e.message)}finally{t(!1)}}}})();return(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(K,{account:t,children:n&&(0,E.jsx)("div",{children:n.publicKey})}),(0,E.jsx)(D,{loading:e,handleConnect:i,handleDisConnect:o,account:t,children:(0,E.jsx)(a.$n,{loading:e,disabled:t,onClick:s,children:"handleSignIn with contractId"})}),(0,E.jsx)(Ht,{account:t,access:n,provider:f}),(0,E.jsx)(Ut,{account:t,access:n,provider:f})]})}const qt="NEAR",Xt={key:qt,children:window.near?(0,E.jsx)($t,{}):(0,E.jsx)(Ce,{chain:qt})};const Ft=function(){if("luoquanquan.github.io"!==window.location.hostname)return null;const e="https://github.com/luoquanquan/dapp-demo";return(0,E.jsx)(a.Zp,{title:"\u9879\u76ee\u4fe1\u606f",children:(0,E.jsxs)(a.$x,{direction:"vertical",children:[(0,E.jsxs)("div",{children:["version:\xa0","2024-11-27 11:36:59"]}),(0,E.jsxs)("div",{children:["github:\xa0",(0,E.jsx)("a",{href:e,children:e})]})]})})};var zt=n(7257),Jt=n(33225),Vt=n.n(Jt),Gt=n(58736);const Yt="UQDOc7wK8x2Avyet0tUQ0j-6KqbhdRN7yKQGYtI5uYMI0Gxc",Zt="UQBfRxtUtwehFwW54B3nY049f0pJcOpssvAXhASnjwNYInVA",Qt="UQC6vxAEEbr7O9EOliafFwDqGdMP61jR13yDDw33dSTFTz5K",en=new(Vt());const tn=function(){const[e]=(0,zt.Lg)(),t=(0,zt.zI)(),n=Math.floor(Date.now()/1e3)+604800,r=function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt;return async()=>{const i=new(Vt().token.jetton.JettonMinter)(en.provider,{address:"EQATcUc69sGSCCMSadsVUKdGwM1BMKS-HKCWGPk60xZGgwsK"}),o=(await i.getJettonWalletAddress(new(Vt().utils.Address)(t))).toString(!0,!0,!0,!1),a=(0,Gt.beginCell)().storeUint(260734629,32).storeUint(0,64).storeCoins("100000000").storeAddress(Gt.Address.parse(r)).storeAddress(Gt.Address.parse(t)).storeUint(0,1).storeCoins("1000000").storeUint(0,1).endCell(),s={validUntil:n,messages:[{address:o,amount:(0,Gt.toNano)("0.05").toString(),payload:a.toBoc().toString("base64")}]};e.sendTransaction(s)}},i=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt;return()=>{e.sendTransaction({validUntil:n,messages:[{address:t,amount:Vt().utils.toNano("0.0001").toString()}]})}};return(0,E.jsx)(a.Zp,{title:"SignTransaction",children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(a.$n,{block:!0,disabled:!t,onClick:i(),children:"sendTon"}),(0,E.jsx)(a.$n,{block:!0,color:"danger",disabled:!t,onClick:i(Zt),children:"sendTon to Black Address"}),(0,E.jsx)(a.$n,{block:!0,color:"danger",disabled:!t,onClick:i(Qt),children:"sendTon to Strong Black Address"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,onClick:r(),children:"sendFish"}),(0,E.jsx)(a.$n,{block:!0,color:"danger",disabled:!t,onClick:r(Zt),children:"sendFish to Black Address"}),(0,E.jsx)(a.$n,{block:!0,color:"danger",disabled:!t,onClick:r(Qt),children:"sendFish to Strong Black Address"})]})})};var nn=n(54342);const rn=function(){const[e]=(0,zt.Lg)(),t=(0,zt.zI)(),n=d()().add(7,"day").unix(),r=t=>{let{toAddress:r=Yt,validUntil:i=n,from:o,network:a,messagesUndefined:s,messages:f=[{address:r,amount:Vt().utils.toNano("0.0001").toString()}]}=t;return()=>{const t={network:a,validUntil:i,from:o,messages:f};s&&(t.messages=void 0),nn.log("Current log: params: ",t),e.sendTransaction(t)}};return(0,E.jsx)(a.Zp,{title:"SignTransactionWithFakeParams Open console to See the params",children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(a.$n,{block:!0,disabled:!t,onClick:r({validUntil:d()().subtract(1,"day").unix()}),children:"sendTon with -1 day"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,onClick:r({validUntil:d()().add(3,"minute").unix()}),children:"sendTon with +3 minute"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,onClick:r({validUntil:d()().add(1,"day").unix()}),children:"sendTon with +1 day"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,onClick:r({network:"-3"}),children:"sendTon with fake network"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,onClick:r({from:"0:6b273bdc8b12c9ad3d0daf05950d520fd6c6d70ce16e1bedc7402e2d52d0e5b5"}),children:"sendTon with fake from"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,onClick:r({toAddress:"kQCKWpx7cNMpvmcN50bM5lLUZHZRFKqYA4xmw9j0ry0Zs0TG"}),children:"sendTon with fake address"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,onClick:r({messagesUndefined:!0}),children:"sendTon with undefined messages"}),(0,E.jsx)(a.$n,{block:!0,disabled:!t,onClick:r({messages:[]}),children:"sendTon with [] messages"})]})})};function on(){return(0,E.jsx)(zt.Nl,{manifestUrl:"https://luoquanquan.github.io/dapp-demo/tonconnect-manifest.json",walletsListConfiguration:{includeWallets:[{app_name:"PROD OKX Mini Wallet",appName:"PROD OKX Mini Wallet",name:"PROD OKX Mini Wallet",image:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",about_url:"https://www.okx.com/web3",aboutUrl:"https://www.okx.com/web3",universal_url:"https://t.me/OKX_WALLET_BOT?attach=wallet",universalLink:"https://t.me/OKX_WALLET_BOT?attach=wallet",bridgeUrl:"https://www.okx.com/tonbridge/discover/rpc/bridge",bridge:[{type:"sse",url:"https://www.okx.com/tonbridge/discover/rpc/bridge"}],platforms:["ios","android","chrome","firefox","macos"]},{app_name:"okxTestWallet",appName:"okxTestWallet",name:"OKX Test Wallet",image:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",about_url:"https://www.okx.com/web3",aboutUrl:"https://www.okx.com/web3",universal_url:"https://t.me/TCTestqdqwdqwdqBot?attach=TCTestqdqwdqwdqBot",universalLink:"https://t.me/TCTestqdqwdqwdqBot?attach=TCTestqdqwdqwdqBot",bridgeUrl:"https://www.okx.com/tonbridge/discover/rpc/bridge",bridge:[{type:"sse",url:"https://www.okx.com/tonbridge/discover/rpc/bridge"}],platforms:["ios","android","chrome","firefox","macos"]},{app_name:"betaOkxTestWallet",appName:"betaOkxTestWallet",name:"Beta OKX Test Wallet",image:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",about_url:"https://www.okx.com/web3",aboutUrl:"https://www.okx.com/web3",universal_url:"https://t.me/okx_tg_miniapp_test_bot?attach=okx_tg_miniapp_test_bot",universalLink:"https://t.me/okx_tg_miniapp_test_bot?attach=okx_tg_miniapp_test_bot",bridgeUrl:"https://www.okx.com/tonbridge/discover/rpc/bridge",bridge:[{type:"sse",url:"https://www.okx.com/tonbridge/discover/rpc/bridge"}],platforms:["ios","android","chrome","firefox","macos"]}]},children:(0,E.jsxs)(i.A,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(zt.MJ,{}),(0,E.jsx)(tn,{}),(0,E.jsx)(rn,{}),(0,E.jsx)(ke,{type:ke.typeMap.eoa,address:Zt}),(0,E.jsx)(ke,{type:ke.typeMap.strongEoa,address:Qt})]})})}const an={key:"Ton",children:(0,E.jsx)(on,{})};var sn=n(51758),fn=n(10070),cn=n(73085),ln=n(94404),un=n(27695);const dn="0x262bf43308d07d13dcf8c8ad339da764d2faf2ad33f984dc5810681e6f1c8e15",hn="0x78fcbc77de601967663cf19b24c2949606af8bf73a5a68f679ad371666d3f814";var pn=n(54342);const gn=function(){const e=(0,sn.YL)(),t=null===e||void 0===e?void 0:e.address,n=(0,sn.Fp)(),[i,o]=(0,r.useState)(!1),s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0xa95dd12332d1e04af548ccf94c7b4729bce0683832581d2e8b82a25c3bfcc5c9";return async()=>{try{o(!0);const t=new un.Z,r=t.splitCoins(t.gas,[10]);t.transferObjects([r],e);const i=await n.mutateAsync({transaction:t});pn.log(i),(0,b.t)()}catch(t){pn.log(t),(0,b.i)()}finally{o(!1)}}};return(0,E.jsx)(a.Zp,{title:"SignTransaction",children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(a.$n,{block:!0,disabled:!t,loading:i,onClick:s(),children:"sendSui"}),(0,E.jsx)(a.$n,{block:!0,color:"danger",disabled:!t,loading:i,onClick:s(dn),children:"sendSui to Black Address"}),(0,E.jsx)(a.$n,{block:!0,color:"danger",disabled:!t,loading:i,onClick:s(hn),children:"sendSui to Strong Black Address"})]})})};var bn=n(23302);const{networkConfig:yn,useNetworkVariable:mn,useNetworkVariables:vn}=(0,sn.ZN)({devnet:{url:(0,bn.T)("devnet")},testnet:{url:(0,bn.T)("testnet")},mainnet:{url:(0,bn.T)("mainnet")}});n(44776),n(97570);const wn=new fn.E;function _n(){return(0,E.jsx)(ln.Sx,{appearance:"light",children:(0,E.jsx)(cn.Ht,{client:wn,children:(0,E.jsx)(sn.CV,{networks:yn,defaultNetwork:"mainnet",children:(0,E.jsx)(sn.rh,{autoConnect:!0,children:(0,E.jsxs)(a.$x,{direction:"vertical",style:{width:"100%"},children:[(0,E.jsx)(sn.pK,{}),(0,E.jsx)(gn,{}),(0,E.jsx)(ke,{type:ke.typeMap.eoa,address:dn}),(0,E.jsx)(ke,{type:ke.typeMap.strongEoa,address:hn})]})})})})})}const En={key:"Sui",children:(0,E.jsx)(_n,{})};var Cn=n(75698),On=n(71056),xn=n(54342);const Sn=function(e){let{children:t}=e;const{connect:n,account:r,network:i,connected:o,disconnect:a,wallet:s,wallets:f,signAndSubmitTransaction:c,signAndSubmitBCSTransaction:l,signTransaction:u,signMessage:d,signMessageAndVerify:h}=(0,Cn.vT)();return xn.log("AptosWallet - wallets available: ",f),xn.log("AptosWallet - useWallet: ",{connect:n,account:r,network:i,connected:o,disconnect:a,wallet:s,signAndSubmitTransaction:c,signAndSubmitBCSTransaction:l,signTransaction:u,signMessage:d,signMessageAndVerify:h}),(0,E.jsx)(E.Fragment,{children:t({connect:n,account:r,network:i,connected:o,disconnect:a,wallet:s,wallets:f,signAndSubmitTransaction:c,signAndSubmitBCSTransaction:l,signTransaction:u,signMessage:d,signMessageAndVerify:h})})};var kn=n(54342);function Tn(){const[e,t]=(0,r.useState)({});return(0,E.jsx)(Cn.nu,{autoconnect:!0,dappConfig:{network:On.lgv.MAINNET},onError:e=>{kn.log("Aptos error: ",e)},children:(0,E.jsx)(a.$x,{direction:"vertical",style:{width:"100%"},children:(0,E.jsx)(Sn,{children:e=>{let{account:t}=e;return(0,E.jsx)(K,{account:t})}})})})}const Rn={key:"Aptos",children:(0,E.jsx)(Tn,{})};var An=n(54342);const In="localTabKey",Nn=[Ke,st,xt,Xt,an,En,Rn],Pn=localStorage.getItem(In),Dn=Nn.some((e=>{let{key:t}=e;return Pn===t})),Bn=Dn?Pn:Ke.key;function Mn(){const[e,t]=(0,r.useState)(!1),[n,c]=(0,r.useState)("");(0,r.useEffect)((()=>{const e=(0,s.xM)(),t=(0,s.sO)(s.iB.ETHEREUM);An.log("sdk: ",e),An.log("provider: ",t),(null===t||void 0===t?void 0:t.on)&&t.on("connect",(e=>{An.log("provider connect: ",e)})),window.okxConnectSdk=e}),[]);return(0,E.jsxs)(i.A,{direction:"vertical",className:"wrap",children:[(0,E.jsx)(a.Pp,{position:"top"}),(0,E.jsx)(o.Ay,{onClick:async()=>{const e=(0,s.xM)();e.once("session_connecting",(()=>{t(!0),An.log("session_connecting")})),e.once("connect",(()=>{t(!1),An.log("sdk connect and remove listener")})),e.once("connect_error",(()=>{t(!1),An.log("dapppp connect_error")}));const r=await(0,s.Bl)();c(r),An.log("get display uri for QR code scan: ",n)},children:e?"connecting":"Get Uri"}),n?(0,E.jsx)(f.h,{value:n,fgColor:e?"#bbb":""}):null,(0,E.jsx)(o.Ay,{onClick:s.Q9,children:"Connect Mobile App"}),(0,E.jsx)(o.Ay,{onClick:s.Aj,children:"Connect TG"}),(0,E.jsx)(o.Ay,{onClick:s.Ng,children:"Connect"}),(0,E.jsx)(o.Ay,{onClick:s.Zf,children:"Disconnect"}),(0,E.jsx)(a.tU,{defaultActiveKey:Bn,onChange:e=>{localStorage.setItem(In,e)},children:Nn.map((e=>(0,E.jsx)(a.tU.Tab,{title:e.key,children:e.children},e.key)))}),(0,E.jsx)(Ft,{}),(0,E.jsx)(a.Pp,{position:"bottom"})]})}},78438:(e,t,n)=>{"use strict";n.a(e,(async(e,t)=>{try{n(13960);var r=n(77081),i=n.n(r),o=n(40406),a=n(42340),s=n(91928),f=(n(70420),n(98036)),c=n(54342);const e=await(0,a.Ts)();c.log("dappppp add event listener",e),setTimeout((()=>{new(i())}),1e3);o.createRoot(document.getElementById("root")).render((0,f.jsx)(s.A,{})),t()}catch(l){t(l)}}),1)},42340:(e,t,n)=>{"use strict";n.d(t,{Aj:()=>jl,Bl:()=>Ll,Ng:()=>Wl,Q9:()=>Ul,Ts:()=>Kl,Zf:()=>Hl,iB:()=>sl,sO:()=>ql,xM:()=>$l});var r=n(19384).Buffer,i=n(54342),o=Object.create,a=Object.defineProperty,s=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,u=n(11714),d=(e,t)=>()=>(e&&(t=e(e=0)),t),h=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),p=(e,t)=>{for(var n in t)a(e,n,{get:t[n],enumerable:!0})},g=(e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of f(t))!l.call(e,i)&&i!==n&&a(e,i,{get:()=>t[i],enumerable:!(r=s(t,i))||r.enumerable});return e},b=(e,t,n)=>(n=null!=e?o(c(e)):{},g(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)),y=e=>g(a({},"__esModule",{value:!0}),e),m=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IJSONRpcProvider=e.IJSONRpcConnection=void 0;e.IJSONRpcConnection=class{};e.IJSONRpcProvider=class{constructor(e){}}})),v=h((e=>{Object.defineProperty(e,"__esModule",{value:!0})})),w=h((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(m(),e),n(v(),e)})),_=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectorState=e.CONNECT_JSONRPC_VER=e.OKXCONNECTOR_MESSAGE_TTL=e.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE=e.OKXCONNECTOR_WS_URL_LIST=e.OKXCONNECTOR_WS_URL_IDX_KEY=e.OKXCONNECTOR_WS_URL_3=e.OKXCONNECTOR_WS_URL_2=e.OKXCONNECTOR_WS_URL_1=e.EVENT_EMITTER_MAX_LISTENERS=void 0,e.EVENT_EMITTER_MAX_LISTENERS=10,e.OKXCONNECTOR_WS_URL_1="wss://wsdexpri.okx.com/ws/v1/wallet-connect-relay",e.OKXCONNECTOR_WS_URL_2="wss://wsdexpri.okx.ac/ws/v1/wallet-connect-relay",e.OKXCONNECTOR_WS_URL_3="wss://wsdexpri.coinall.ltd/ws/v1/wallet-connect-relay",e.OKXCONNECTOR_WS_URL_IDX_KEY="wuik",e.OKXCONNECTOR_WS_URL_LIST=[e.OKXCONNECTOR_WS_URL_1,e.OKXCONNECTOR_WS_URL_2,e.OKXCONNECTOR_WS_URL_3],e.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE={TIME_OUT:3990,CANCELED:3991,FINISHED:3992},e.OKXCONNECTOR_MESSAGE_TTL=3e5,e.CONNECT_JSONRPC_VER="2.0",e.ConnectorState={InitState:0,Connecting:1,Connected:2,Disconnected:3,OnError:4}})),E=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OKXCONNECTOR_STORAGE_CIPHER_METHOD=e.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV=e.OKXCONNECTOR_STORAGER_CRYPTO_SALT=e.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD=e.OKXCONNECTOR_TON_KEY=e.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE=e.OKXCONNECTOR_TOKEN_CACHE=e.OKXCONNECTOR_JWT_KEY=e.OKXCONNECTOR_SESSION_PREFIX_KEY=e.OKXCONNECTOR_CRYPTO_KEY=e.OKXCONNECTOR_CACHE_KEY_DAPP=e.OKXCONNECTOR_CACHE_KEY=void 0,e.OKXCONNECTOR_CACHE_KEY="ck",e.OKXCONNECTOR_CACHE_KEY_DAPP="ck_dapp",e.OKXCONNECTOR_CRYPTO_KEY="cck_k",e.OKXCONNECTOR_SESSION_PREFIX_KEY="cspk_",e.OKXCONNECTOR_JWT_KEY="cjk_k",e.OKXCONNECTOR_TOKEN_CACHE="ct",e.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE="csp",e.OKXCONNECTOR_TON_KEY="OKXStorage_ctc",e.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD="scp",e.OKXCONNECTOR_STORAGER_CRYPTO_SALT="scs",e.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV="scpc",e.OKXCONNECTOR_STORAGE_CIPHER_METHOD="aes-256-cbc"})),C=h((()=>{})),O=h(((e,t)=>{!function(e){var t=function(e){var t,n=new Float64Array(16);if(e)for(t=0;t<e.length;t++)n[t]=e[t];return n},n=function(){throw new Error("no PRNG")},r=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var o=t(),a=t([1]),s=t([56129,1]),f=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),c=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),l=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),h=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function p(e,t,n,r){e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n,e[t+4]=r>>24&255,e[t+5]=r>>16&255,e[t+6]=r>>8&255,e[t+7]=255&r}function g(e,t,n,r,i){var o,a=0;for(o=0;o<i;o++)a|=e[t+o]^n[r+o];return(1&a-1>>>8)-1}function b(e,t,n,r){return g(e,t,n,r,16)}function y(e,t,n,r){return g(e,t,n,r,32)}function m(e,t,n,r){!function(e,t,n,r){for(var i,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,f=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,c=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,l=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,u=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,d=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,h=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,b=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,y=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,m=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,v=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,w=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,_=o,E=a,C=s,O=f,x=c,S=l,k=u,T=d,R=h,A=p,I=g,N=b,P=y,D=m,B=v,M=w,K=0;K<20;K+=2)_^=(i=(P^=(i=(R^=(i=(x^=(i=_+P|0)<<7|i>>>25)+_|0)<<9|i>>>23)+x|0)<<13|i>>>19)+R|0)<<18|i>>>14,S^=(i=(E^=(i=(D^=(i=(A^=(i=S+E|0)<<7|i>>>25)+S|0)<<9|i>>>23)+A|0)<<13|i>>>19)+D|0)<<18|i>>>14,I^=(i=(k^=(i=(C^=(i=(B^=(i=I+k|0)<<7|i>>>25)+I|0)<<9|i>>>23)+B|0)<<13|i>>>19)+C|0)<<18|i>>>14,M^=(i=(N^=(i=(T^=(i=(O^=(i=M+N|0)<<7|i>>>25)+M|0)<<9|i>>>23)+O|0)<<13|i>>>19)+T|0)<<18|i>>>14,_^=(i=(O^=(i=(C^=(i=(E^=(i=_+O|0)<<7|i>>>25)+_|0)<<9|i>>>23)+E|0)<<13|i>>>19)+C|0)<<18|i>>>14,S^=(i=(x^=(i=(T^=(i=(k^=(i=S+x|0)<<7|i>>>25)+S|0)<<9|i>>>23)+k|0)<<13|i>>>19)+T|0)<<18|i>>>14,I^=(i=(A^=(i=(R^=(i=(N^=(i=I+A|0)<<7|i>>>25)+I|0)<<9|i>>>23)+N|0)<<13|i>>>19)+R|0)<<18|i>>>14,M^=(i=(B^=(i=(D^=(i=(P^=(i=M+B|0)<<7|i>>>25)+M|0)<<9|i>>>23)+P|0)<<13|i>>>19)+D|0)<<18|i>>>14;_=_+o|0,E=E+a|0,C=C+s|0,O=O+f|0,x=x+c|0,S=S+l|0,k=k+u|0,T=T+d|0,R=R+h|0,A=A+p|0,I=I+g|0,N=N+b|0,P=P+y|0,D=D+m|0,B=B+v|0,M=M+w|0,e[0]=_>>>0&255,e[1]=_>>>8&255,e[2]=_>>>16&255,e[3]=_>>>24&255,e[4]=E>>>0&255,e[5]=E>>>8&255,e[6]=E>>>16&255,e[7]=E>>>24&255,e[8]=C>>>0&255,e[9]=C>>>8&255,e[10]=C>>>16&255,e[11]=C>>>24&255,e[12]=O>>>0&255,e[13]=O>>>8&255,e[14]=O>>>16&255,e[15]=O>>>24&255,e[16]=x>>>0&255,e[17]=x>>>8&255,e[18]=x>>>16&255,e[19]=x>>>24&255,e[20]=S>>>0&255,e[21]=S>>>8&255,e[22]=S>>>16&255,e[23]=S>>>24&255,e[24]=k>>>0&255,e[25]=k>>>8&255,e[26]=k>>>16&255,e[27]=k>>>24&255,e[28]=T>>>0&255,e[29]=T>>>8&255,e[30]=T>>>16&255,e[31]=T>>>24&255,e[32]=R>>>0&255,e[33]=R>>>8&255,e[34]=R>>>16&255,e[35]=R>>>24&255,e[36]=A>>>0&255,e[37]=A>>>8&255,e[38]=A>>>16&255,e[39]=A>>>24&255,e[40]=I>>>0&255,e[41]=I>>>8&255,e[42]=I>>>16&255,e[43]=I>>>24&255,e[44]=N>>>0&255,e[45]=N>>>8&255,e[46]=N>>>16&255,e[47]=N>>>24&255,e[48]=P>>>0&255,e[49]=P>>>8&255,e[50]=P>>>16&255,e[51]=P>>>24&255,e[52]=D>>>0&255,e[53]=D>>>8&255,e[54]=D>>>16&255,e[55]=D>>>24&255,e[56]=B>>>0&255,e[57]=B>>>8&255,e[58]=B>>>16&255,e[59]=B>>>24&255,e[60]=M>>>0&255,e[61]=M>>>8&255,e[62]=M>>>16&255,e[63]=M>>>24&255}(e,t,n,r)}function v(e,t,n,r){!function(e,t,n,r){for(var i,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,f=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,c=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,l=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,u=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,d=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,h=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,b=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,y=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,m=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,v=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,w=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,_=0;_<20;_+=2)o^=(i=(y^=(i=(h^=(i=(c^=(i=o+y|0)<<7|i>>>25)+o|0)<<9|i>>>23)+c|0)<<13|i>>>19)+h|0)<<18|i>>>14,l^=(i=(a^=(i=(m^=(i=(p^=(i=l+a|0)<<7|i>>>25)+l|0)<<9|i>>>23)+p|0)<<13|i>>>19)+m|0)<<18|i>>>14,g^=(i=(u^=(i=(s^=(i=(v^=(i=g+u|0)<<7|i>>>25)+g|0)<<9|i>>>23)+v|0)<<13|i>>>19)+s|0)<<18|i>>>14,w^=(i=(b^=(i=(d^=(i=(f^=(i=w+b|0)<<7|i>>>25)+w|0)<<9|i>>>23)+f|0)<<13|i>>>19)+d|0)<<18|i>>>14,o^=(i=(f^=(i=(s^=(i=(a^=(i=o+f|0)<<7|i>>>25)+o|0)<<9|i>>>23)+a|0)<<13|i>>>19)+s|0)<<18|i>>>14,l^=(i=(c^=(i=(d^=(i=(u^=(i=l+c|0)<<7|i>>>25)+l|0)<<9|i>>>23)+u|0)<<13|i>>>19)+d|0)<<18|i>>>14,g^=(i=(p^=(i=(h^=(i=(b^=(i=g+p|0)<<7|i>>>25)+g|0)<<9|i>>>23)+b|0)<<13|i>>>19)+h|0)<<18|i>>>14,w^=(i=(v^=(i=(m^=(i=(y^=(i=w+v|0)<<7|i>>>25)+w|0)<<9|i>>>23)+y|0)<<13|i>>>19)+m|0)<<18|i>>>14;e[0]=o>>>0&255,e[1]=o>>>8&255,e[2]=o>>>16&255,e[3]=o>>>24&255,e[4]=l>>>0&255,e[5]=l>>>8&255,e[6]=l>>>16&255,e[7]=l>>>24&255,e[8]=g>>>0&255,e[9]=g>>>8&255,e[10]=g>>>16&255,e[11]=g>>>24&255,e[12]=w>>>0&255,e[13]=w>>>8&255,e[14]=w>>>16&255,e[15]=w>>>24&255,e[16]=u>>>0&255,e[17]=u>>>8&255,e[18]=u>>>16&255,e[19]=u>>>24&255,e[20]=d>>>0&255,e[21]=d>>>8&255,e[22]=d>>>16&255,e[23]=d>>>24&255,e[24]=h>>>0&255,e[25]=h>>>8&255,e[26]=h>>>16&255,e[27]=h>>>24&255,e[28]=p>>>0&255,e[29]=p>>>8&255,e[30]=p>>>16&255,e[31]=p>>>24&255}(e,t,n,r)}var w=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function _(e,t,n,r,i,o,a){var s,f,c=new Uint8Array(16),l=new Uint8Array(64);for(f=0;f<16;f++)c[f]=0;for(f=0;f<8;f++)c[f]=o[f];for(;i>=64;){for(m(l,c,a,w),f=0;f<64;f++)e[t+f]=n[r+f]^l[f];for(s=1,f=8;f<16;f++)s=s+(255&c[f])|0,c[f]=255&s,s>>>=8;i-=64,t+=64,r+=64}if(i>0)for(m(l,c,a,w),f=0;f<i;f++)e[t+f]=n[r+f]^l[f];return 0}function E(e,t,n,r,i){var o,a,s=new Uint8Array(16),f=new Uint8Array(64);for(a=0;a<16;a++)s[a]=0;for(a=0;a<8;a++)s[a]=r[a];for(;n>=64;){for(m(f,s,i,w),a=0;a<64;a++)e[t+a]=f[a];for(o=1,a=8;a<16;a++)o=o+(255&s[a])|0,s[a]=255&o,o>>>=8;n-=64,t+=64}if(n>0)for(m(f,s,i,w),a=0;a<n;a++)e[t+a]=f[a];return 0}function O(e,t,n,r,i){var o=new Uint8Array(32);v(o,r,i,w);for(var a=new Uint8Array(8),s=0;s<8;s++)a[s]=r[s+16];return E(e,t,n,a,o)}function x(e,t,n,r,i,o,a){var s=new Uint8Array(32);v(s,o,a,w);for(var f=new Uint8Array(8),c=0;c<8;c++)f[c]=o[c+16];return _(e,t,n,r,i,f,s)}var S=function(e){var t,n,r,i,o,a,s,f;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,n=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|n<<3),r=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(n>>>10|r<<6),i=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(r>>>7|i<<9),o=255&e[8]|(255&e[9])<<8,this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,a=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(o>>>14|a<<2),s=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(a>>>11|s<<5),f=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(s>>>8|f<<8),this.r[9]=f>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function k(e,t,n,r,i,o){var a=new S(o);return a.update(n,r,i),a.finish(e,t),0}function T(e,t,n,r,i,o){var a=new Uint8Array(16);return k(a,0,n,r,i,o),b(e,t,a,0)}function R(e,t,n,r,i){var o;if(n<32)return-1;for(x(e,0,t,0,n,r,i),k(e,16,e,32,n-32,e),o=0;o<16;o++)e[o]=0;return 0}function A(e,t,n,r,i){var o,a=new Uint8Array(32);if(n<32||(O(a,0,32,r,i),0!==T(t,16,t,32,n-32,a)))return-1;for(x(e,0,t,0,n,r,i),o=0;o<32;o++)e[o]=0;return 0}function I(e,t){var n;for(n=0;n<16;n++)e[n]=0|t[n]}function N(e){var t,n,r=1;for(t=0;t<16;t++)n=e[t]+r+65535,r=Math.floor(n/65536),e[t]=n-65536*r;e[0]+=r-1+37*(r-1)}function P(e,t,n){for(var r,i=~(n-1),o=0;o<16;o++)r=i&(e[o]^t[o]),e[o]^=r,t[o]^=r}function D(e,n){var r,i,o,a=t(),s=t();for(r=0;r<16;r++)s[r]=n[r];for(N(s),N(s),N(s),i=0;i<2;i++){for(a[0]=s[0]-65517,r=1;r<15;r++)a[r]=s[r]-65535-(a[r-1]>>16&1),a[r-1]&=65535;a[15]=s[15]-32767-(a[14]>>16&1),o=a[15]>>16&1,a[14]&=65535,P(s,a,1-o)}for(r=0;r<16;r++)e[2*r]=255&s[r],e[2*r+1]=s[r]>>8}function B(e,t){var n=new Uint8Array(32),r=new Uint8Array(32);return D(n,e),D(r,t),y(n,0,r,0)}function M(e){var t=new Uint8Array(32);return D(t,e),1&t[0]}function K(e,t){var n;for(n=0;n<16;n++)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}function L(e,t,n){for(var r=0;r<16;r++)e[r]=t[r]+n[r]}function U(e,t,n){for(var r=0;r<16;r++)e[r]=t[r]-n[r]}function j(e,t,n){var r,i,o=0,a=0,s=0,f=0,c=0,l=0,u=0,d=0,h=0,p=0,g=0,b=0,y=0,m=0,v=0,w=0,_=0,E=0,C=0,O=0,x=0,S=0,k=0,T=0,R=0,A=0,I=0,N=0,P=0,D=0,B=0,M=n[0],K=n[1],L=n[2],U=n[3],j=n[4],W=n[5],H=n[6],$=n[7],q=n[8],X=n[9],F=n[10],z=n[11],J=n[12],V=n[13],G=n[14],Y=n[15];o+=(r=t[0])*M,a+=r*K,s+=r*L,f+=r*U,c+=r*j,l+=r*W,u+=r*H,d+=r*$,h+=r*q,p+=r*X,g+=r*F,b+=r*z,y+=r*J,m+=r*V,v+=r*G,w+=r*Y,a+=(r=t[1])*M,s+=r*K,f+=r*L,c+=r*U,l+=r*j,u+=r*W,d+=r*H,h+=r*$,p+=r*q,g+=r*X,b+=r*F,y+=r*z,m+=r*J,v+=r*V,w+=r*G,_+=r*Y,s+=(r=t[2])*M,f+=r*K,c+=r*L,l+=r*U,u+=r*j,d+=r*W,h+=r*H,p+=r*$,g+=r*q,b+=r*X,y+=r*F,m+=r*z,v+=r*J,w+=r*V,_+=r*G,E+=r*Y,f+=(r=t[3])*M,c+=r*K,l+=r*L,u+=r*U,d+=r*j,h+=r*W,p+=r*H,g+=r*$,b+=r*q,y+=r*X,m+=r*F,v+=r*z,w+=r*J,_+=r*V,E+=r*G,C+=r*Y,c+=(r=t[4])*M,l+=r*K,u+=r*L,d+=r*U,h+=r*j,p+=r*W,g+=r*H,b+=r*$,y+=r*q,m+=r*X,v+=r*F,w+=r*z,_+=r*J,E+=r*V,C+=r*G,O+=r*Y,l+=(r=t[5])*M,u+=r*K,d+=r*L,h+=r*U,p+=r*j,g+=r*W,b+=r*H,y+=r*$,m+=r*q,v+=r*X,w+=r*F,_+=r*z,E+=r*J,C+=r*V,O+=r*G,x+=r*Y,u+=(r=t[6])*M,d+=r*K,h+=r*L,p+=r*U,g+=r*j,b+=r*W,y+=r*H,m+=r*$,v+=r*q,w+=r*X,_+=r*F,E+=r*z,C+=r*J,O+=r*V,x+=r*G,S+=r*Y,d+=(r=t[7])*M,h+=r*K,p+=r*L,g+=r*U,b+=r*j,y+=r*W,m+=r*H,v+=r*$,w+=r*q,_+=r*X,E+=r*F,C+=r*z,O+=r*J,x+=r*V,S+=r*G,k+=r*Y,h+=(r=t[8])*M,p+=r*K,g+=r*L,b+=r*U,y+=r*j,m+=r*W,v+=r*H,w+=r*$,_+=r*q,E+=r*X,C+=r*F,O+=r*z,x+=r*J,S+=r*V,k+=r*G,T+=r*Y,p+=(r=t[9])*M,g+=r*K,b+=r*L,y+=r*U,m+=r*j,v+=r*W,w+=r*H,_+=r*$,E+=r*q,C+=r*X,O+=r*F,x+=r*z,S+=r*J,k+=r*V,T+=r*G,R+=r*Y,g+=(r=t[10])*M,b+=r*K,y+=r*L,m+=r*U,v+=r*j,w+=r*W,_+=r*H,E+=r*$,C+=r*q,O+=r*X,x+=r*F,S+=r*z,k+=r*J,T+=r*V,R+=r*G,A+=r*Y,b+=(r=t[11])*M,y+=r*K,m+=r*L,v+=r*U,w+=r*j,_+=r*W,E+=r*H,C+=r*$,O+=r*q,x+=r*X,S+=r*F,k+=r*z,T+=r*J,R+=r*V,A+=r*G,I+=r*Y,y+=(r=t[12])*M,m+=r*K,v+=r*L,w+=r*U,_+=r*j,E+=r*W,C+=r*H,O+=r*$,x+=r*q,S+=r*X,k+=r*F,T+=r*z,R+=r*J,A+=r*V,I+=r*G,N+=r*Y,m+=(r=t[13])*M,v+=r*K,w+=r*L,_+=r*U,E+=r*j,C+=r*W,O+=r*H,x+=r*$,S+=r*q,k+=r*X,T+=r*F,R+=r*z,A+=r*J,I+=r*V,N+=r*G,P+=r*Y,v+=(r=t[14])*M,w+=r*K,_+=r*L,E+=r*U,C+=r*j,O+=r*W,x+=r*H,S+=r*$,k+=r*q,T+=r*X,R+=r*F,A+=r*z,I+=r*J,N+=r*V,P+=r*G,D+=r*Y,w+=(r=t[15])*M,a+=38*(E+=r*L),s+=38*(C+=r*U),f+=38*(O+=r*j),c+=38*(x+=r*W),l+=38*(S+=r*H),u+=38*(k+=r*$),d+=38*(T+=r*q),h+=38*(R+=r*X),p+=38*(A+=r*F),g+=38*(I+=r*z),b+=38*(N+=r*J),y+=38*(P+=r*V),m+=38*(D+=r*G),v+=38*(B+=r*Y),o=(r=(o+=38*(_+=r*K))+(i=1)+65535)-65536*(i=Math.floor(r/65536)),a=(r=a+i+65535)-65536*(i=Math.floor(r/65536)),s=(r=s+i+65535)-65536*(i=Math.floor(r/65536)),f=(r=f+i+65535)-65536*(i=Math.floor(r/65536)),c=(r=c+i+65535)-65536*(i=Math.floor(r/65536)),l=(r=l+i+65535)-65536*(i=Math.floor(r/65536)),u=(r=u+i+65535)-65536*(i=Math.floor(r/65536)),d=(r=d+i+65535)-65536*(i=Math.floor(r/65536)),h=(r=h+i+65535)-65536*(i=Math.floor(r/65536)),p=(r=p+i+65535)-65536*(i=Math.floor(r/65536)),g=(r=g+i+65535)-65536*(i=Math.floor(r/65536)),b=(r=b+i+65535)-65536*(i=Math.floor(r/65536)),y=(r=y+i+65535)-65536*(i=Math.floor(r/65536)),m=(r=m+i+65535)-65536*(i=Math.floor(r/65536)),v=(r=v+i+65535)-65536*(i=Math.floor(r/65536)),w=(r=w+i+65535)-65536*(i=Math.floor(r/65536)),o=(r=(o+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(r/65536)),a=(r=a+i+65535)-65536*(i=Math.floor(r/65536)),s=(r=s+i+65535)-65536*(i=Math.floor(r/65536)),f=(r=f+i+65535)-65536*(i=Math.floor(r/65536)),c=(r=c+i+65535)-65536*(i=Math.floor(r/65536)),l=(r=l+i+65535)-65536*(i=Math.floor(r/65536)),u=(r=u+i+65535)-65536*(i=Math.floor(r/65536)),d=(r=d+i+65535)-65536*(i=Math.floor(r/65536)),h=(r=h+i+65535)-65536*(i=Math.floor(r/65536)),p=(r=p+i+65535)-65536*(i=Math.floor(r/65536)),g=(r=g+i+65535)-65536*(i=Math.floor(r/65536)),b=(r=b+i+65535)-65536*(i=Math.floor(r/65536)),y=(r=y+i+65535)-65536*(i=Math.floor(r/65536)),m=(r=m+i+65535)-65536*(i=Math.floor(r/65536)),v=(r=v+i+65535)-65536*(i=Math.floor(r/65536)),w=(r=w+i+65535)-65536*(i=Math.floor(r/65536)),o+=i-1+37*(i-1),e[0]=o,e[1]=a,e[2]=s,e[3]=f,e[4]=c,e[5]=l,e[6]=u,e[7]=d,e[8]=h,e[9]=p,e[10]=g,e[11]=b,e[12]=y,e[13]=m,e[14]=v,e[15]=w}function W(e,t){j(e,t,t)}function H(e,n){var r,i=t();for(r=0;r<16;r++)i[r]=n[r];for(r=253;r>=0;r--)W(i,i),2!==r&&4!==r&&j(i,i,n);for(r=0;r<16;r++)e[r]=i[r]}function $(e,n){var r,i=t();for(r=0;r<16;r++)i[r]=n[r];for(r=250;r>=0;r--)W(i,i),1!==r&&j(i,i,n);for(r=0;r<16;r++)e[r]=i[r]}function q(e,n,r){var i,o,a=new Uint8Array(32),f=new Float64Array(80),c=t(),l=t(),u=t(),d=t(),h=t(),p=t();for(o=0;o<31;o++)a[o]=n[o];for(a[31]=127&n[31]|64,a[0]&=248,K(f,r),o=0;o<16;o++)l[o]=f[o],d[o]=c[o]=u[o]=0;for(c[0]=d[0]=1,o=254;o>=0;--o)P(c,l,i=a[o>>>3]>>>(7&o)&1),P(u,d,i),L(h,c,u),U(c,c,u),L(u,l,d),U(l,l,d),W(d,h),W(p,c),j(c,u,c),j(u,l,h),L(h,c,u),U(c,c,u),W(l,c),U(u,d,p),j(c,u,s),L(c,c,d),j(u,u,c),j(c,d,p),j(d,l,f),W(l,h),P(c,l,i),P(u,d,i);for(o=0;o<16;o++)f[o+16]=c[o],f[o+32]=u[o],f[o+48]=l[o],f[o+64]=d[o];var g=f.subarray(32),b=f.subarray(16);return H(g,g),j(b,b,g),D(e,b),0}function X(e,t){return q(e,t,i)}function F(e,t){return n(t,32),X(e,t)}function z(e,t,n){var i=new Uint8Array(32);return q(i,n,t),v(e,r,i,w)}S.prototype.blocks=function(e,t,n){for(var r,i,o,a,s,f,c,l,u,d,h,p,g,b,y,m,v,w,_,E=this.fin?0:2048,C=this.h[0],O=this.h[1],x=this.h[2],S=this.h[3],k=this.h[4],T=this.h[5],R=this.h[6],A=this.h[7],I=this.h[8],N=this.h[9],P=this.r[0],D=this.r[1],B=this.r[2],M=this.r[3],K=this.r[4],L=this.r[5],U=this.r[6],j=this.r[7],W=this.r[8],H=this.r[9];n>=16;)d=u=0,d+=(C+=8191&(r=255&e[t+0]|(255&e[t+1])<<8))*P,d+=(O+=8191&(r>>>13|(i=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*H),d+=(x+=8191&(i>>>10|(o=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*W),d+=(S+=8191&(o>>>7|(a=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*j),u=(d+=(k+=8191&(a>>>4|(s=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*U))>>>13,d&=8191,d+=(T+=s>>>1&8191)*(5*L),d+=(R+=8191&(s>>>14|(f=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*K),d+=(A+=8191&(f>>>11|(c=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*M),d+=(I+=8191&(c>>>8|(l=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*B),h=u+=(d+=(N+=l>>>5|E)*(5*D))>>>13,h+=C*D,h+=O*P,h+=x*(5*H),h+=S*(5*W),u=(h+=k*(5*j))>>>13,h&=8191,h+=T*(5*U),h+=R*(5*L),h+=A*(5*K),h+=I*(5*M),u+=(h+=N*(5*B))>>>13,h&=8191,p=u,p+=C*B,p+=O*D,p+=x*P,p+=S*(5*H),u=(p+=k*(5*W))>>>13,p&=8191,p+=T*(5*j),p+=R*(5*U),p+=A*(5*L),p+=I*(5*K),g=u+=(p+=N*(5*M))>>>13,g+=C*M,g+=O*B,g+=x*D,g+=S*P,u=(g+=k*(5*H))>>>13,g&=8191,g+=T*(5*W),g+=R*(5*j),g+=A*(5*U),g+=I*(5*L),b=u+=(g+=N*(5*K))>>>13,b+=C*K,b+=O*M,b+=x*B,b+=S*D,u=(b+=k*P)>>>13,b&=8191,b+=T*(5*H),b+=R*(5*W),b+=A*(5*j),b+=I*(5*U),y=u+=(b+=N*(5*L))>>>13,y+=C*L,y+=O*K,y+=x*M,y+=S*B,u=(y+=k*D)>>>13,y&=8191,y+=T*P,y+=R*(5*H),y+=A*(5*W),y+=I*(5*j),m=u+=(y+=N*(5*U))>>>13,m+=C*U,m+=O*L,m+=x*K,m+=S*M,u=(m+=k*B)>>>13,m&=8191,m+=T*D,m+=R*P,m+=A*(5*H),m+=I*(5*W),v=u+=(m+=N*(5*j))>>>13,v+=C*j,v+=O*U,v+=x*L,v+=S*K,u=(v+=k*M)>>>13,v&=8191,v+=T*B,v+=R*D,v+=A*P,v+=I*(5*H),w=u+=(v+=N*(5*W))>>>13,w+=C*W,w+=O*j,w+=x*U,w+=S*L,u=(w+=k*K)>>>13,w&=8191,w+=T*M,w+=R*B,w+=A*D,w+=I*P,_=u+=(w+=N*(5*H))>>>13,_+=C*H,_+=O*W,_+=x*j,_+=S*U,u=(_+=k*L)>>>13,_&=8191,_+=T*K,_+=R*M,_+=A*B,_+=I*D,C=d=8191&(u=(u=((u+=(_+=N*P)>>>13)<<2)+u|0)+(d&=8191)|0),O=h+=u>>>=13,x=p&=8191,S=g&=8191,k=b&=8191,T=y&=8191,R=m&=8191,A=v&=8191,I=w&=8191,N=_&=8191,t+=16,n-=16;this.h[0]=C,this.h[1]=O,this.h[2]=x,this.h[3]=S,this.h[4]=k,this.h[5]=T,this.h[6]=R,this.h[7]=A,this.h[8]=I,this.h[9]=N},S.prototype.finish=function(e,t){var n,r,i,o,a=new Uint16Array(10);if(this.leftover){for(o=this.leftover,this.buffer[o++]=1;o<16;o++)this.buffer[o]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(n=this.h[1]>>>13,this.h[1]&=8191,o=2;o<10;o++)this.h[o]+=n,n=this.h[o]>>>13,this.h[o]&=8191;for(this.h[0]+=5*n,n=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=n,n=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=n,a[0]=this.h[0]+5,n=a[0]>>>13,a[0]&=8191,o=1;o<10;o++)a[o]=this.h[o]+n,n=a[o]>>>13,a[o]&=8191;for(a[9]-=8192,r=(1^n)-1,o=0;o<10;o++)a[o]&=r;for(r=~r,o=0;o<10;o++)this.h[o]=this.h[o]&r|a[o];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),i=this.h[0]+this.pad[0],this.h[0]=65535&i,o=1;o<8;o++)i=(this.h[o]+this.pad[o]|0)+(i>>>16)|0,this.h[o]=65535&i;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},S.prototype.update=function(e,t,n){var r,i;if(this.leftover){for((i=16-this.leftover)>n&&(i=n),r=0;r<i;r++)this.buffer[this.leftover+r]=e[t+r];if(n-=i,t+=i,this.leftover+=i,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(n>=16&&(i=n-n%16,this.blocks(e,t,i),t+=i,n-=i),n){for(r=0;r<n;r++)this.buffer[this.leftover+r]=e[t+r];this.leftover+=n}};var J=R,V=A;var G=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Y(e,t,n,r){for(var i,o,a,s,f,c,l,u,d,h,p,g,b,y,m,v,w,_,E,C,O,x,S,k,T,R,A=new Int32Array(16),I=new Int32Array(16),N=e[0],P=e[1],D=e[2],B=e[3],M=e[4],K=e[5],L=e[6],U=e[7],j=t[0],W=t[1],H=t[2],$=t[3],q=t[4],X=t[5],F=t[6],z=t[7],J=0;r>=128;){for(E=0;E<16;E++)C=8*E+J,A[E]=n[C+0]<<24|n[C+1]<<16|n[C+2]<<8|n[C+3],I[E]=n[C+4]<<24|n[C+5]<<16|n[C+6]<<8|n[C+7];for(E=0;E<80;E++)if(i=N,o=P,a=D,s=B,f=M,c=K,l=L,U,d=j,h=W,p=H,g=$,b=q,y=X,m=F,z,S=65535&(x=z),k=x>>>16,T=65535&(O=U),R=O>>>16,S+=65535&(x=(q>>>14|M<<18)^(q>>>18|M<<14)^(M>>>9|q<<23)),k+=x>>>16,T+=65535&(O=(M>>>14|q<<18)^(M>>>18|q<<14)^(q>>>9|M<<23)),R+=O>>>16,S+=65535&(x=q&X^~q&F),k+=x>>>16,T+=65535&(O=M&K^~M&L),R+=O>>>16,S+=65535&(x=G[2*E+1]),k+=x>>>16,T+=65535&(O=G[2*E]),R+=O>>>16,O=A[E%16],k+=(x=I[E%16])>>>16,T+=65535&O,R+=O>>>16,T+=(k+=(S+=65535&x)>>>16)>>>16,S=65535&(x=_=65535&S|k<<16),k=x>>>16,T=65535&(O=w=65535&T|(R+=T>>>16)<<16),R=O>>>16,S+=65535&(x=(j>>>28|N<<4)^(N>>>2|j<<30)^(N>>>7|j<<25)),k+=x>>>16,T+=65535&(O=(N>>>28|j<<4)^(j>>>2|N<<30)^(j>>>7|N<<25)),R+=O>>>16,k+=(x=j&W^j&H^W&H)>>>16,T+=65535&(O=N&P^N&D^P&D),R+=O>>>16,u=65535&(T+=(k+=(S+=65535&x)>>>16)>>>16)|(R+=T>>>16)<<16,v=65535&S|k<<16,S=65535&(x=g),k=x>>>16,T=65535&(O=s),R=O>>>16,k+=(x=_)>>>16,T+=65535&(O=w),R+=O>>>16,P=i,D=o,B=a,M=s=65535&(T+=(k+=(S+=65535&x)>>>16)>>>16)|(R+=T>>>16)<<16,K=f,L=c,U=l,N=u,W=d,H=h,$=p,q=g=65535&S|k<<16,X=b,F=y,z=m,j=v,E%16===15)for(C=0;C<16;C++)O=A[C],S=65535&(x=I[C]),k=x>>>16,T=65535&O,R=O>>>16,O=A[(C+9)%16],S+=65535&(x=I[(C+9)%16]),k+=x>>>16,T+=65535&O,R+=O>>>16,w=A[(C+1)%16],S+=65535&(x=((_=I[(C+1)%16])>>>1|w<<31)^(_>>>8|w<<24)^(_>>>7|w<<25)),k+=x>>>16,T+=65535&(O=(w>>>1|_<<31)^(w>>>8|_<<24)^w>>>7),R+=O>>>16,w=A[(C+14)%16],k+=(x=((_=I[(C+14)%16])>>>19|w<<13)^(w>>>29|_<<3)^(_>>>6|w<<26))>>>16,T+=65535&(O=(w>>>19|_<<13)^(_>>>29|w<<3)^w>>>6),R+=O>>>16,R+=(T+=(k+=(S+=65535&x)>>>16)>>>16)>>>16,A[C]=65535&T|R<<16,I[C]=65535&S|k<<16;S=65535&(x=j),k=x>>>16,T=65535&(O=N),R=O>>>16,O=e[0],k+=(x=t[0])>>>16,T+=65535&O,R+=O>>>16,R+=(T+=(k+=(S+=65535&x)>>>16)>>>16)>>>16,e[0]=N=65535&T|R<<16,t[0]=j=65535&S|k<<16,S=65535&(x=W),k=x>>>16,T=65535&(O=P),R=O>>>16,O=e[1],k+=(x=t[1])>>>16,T+=65535&O,R+=O>>>16,R+=(T+=(k+=(S+=65535&x)>>>16)>>>16)>>>16,e[1]=P=65535&T|R<<16,t[1]=W=65535&S|k<<16,S=65535&(x=H),k=x>>>16,T=65535&(O=D),R=O>>>16,O=e[2],k+=(x=t[2])>>>16,T+=65535&O,R+=O>>>16,R+=(T+=(k+=(S+=65535&x)>>>16)>>>16)>>>16,e[2]=D=65535&T|R<<16,t[2]=H=65535&S|k<<16,S=65535&(x=$),k=x>>>16,T=65535&(O=B),R=O>>>16,O=e[3],k+=(x=t[3])>>>16,T+=65535&O,R+=O>>>16,R+=(T+=(k+=(S+=65535&x)>>>16)>>>16)>>>16,e[3]=B=65535&T|R<<16,t[3]=$=65535&S|k<<16,S=65535&(x=q),k=x>>>16,T=65535&(O=M),R=O>>>16,O=e[4],k+=(x=t[4])>>>16,T+=65535&O,R+=O>>>16,R+=(T+=(k+=(S+=65535&x)>>>16)>>>16)>>>16,e[4]=M=65535&T|R<<16,t[4]=q=65535&S|k<<16,S=65535&(x=X),k=x>>>16,T=65535&(O=K),R=O>>>16,O=e[5],k+=(x=t[5])>>>16,T+=65535&O,R+=O>>>16,R+=(T+=(k+=(S+=65535&x)>>>16)>>>16)>>>16,e[5]=K=65535&T|R<<16,t[5]=X=65535&S|k<<16,S=65535&(x=F),k=x>>>16,T=65535&(O=L),R=O>>>16,O=e[6],k+=(x=t[6])>>>16,T+=65535&O,R+=O>>>16,R+=(T+=(k+=(S+=65535&x)>>>16)>>>16)>>>16,e[6]=L=65535&T|R<<16,t[6]=F=65535&S|k<<16,S=65535&(x=z),k=x>>>16,T=65535&(O=U),R=O>>>16,O=e[7],k+=(x=t[7])>>>16,T+=65535&O,R+=O>>>16,R+=(T+=(k+=(S+=65535&x)>>>16)>>>16)>>>16,e[7]=U=65535&T|R<<16,t[7]=z=65535&S|k<<16,J+=128,r-=128}return r}function Z(e,t,n){var r,i=new Int32Array(8),o=new Int32Array(8),a=new Uint8Array(256),s=n;for(i[0]=1779033703,i[1]=3144134277,i[2]=1013904242,i[3]=2773480762,i[4]=1359893119,i[5]=2600822924,i[6]=528734635,i[7]=1541459225,o[0]=4089235720,o[1]=2227873595,o[2]=4271175723,o[3]=1595750129,o[4]=2917565137,o[5]=725511199,o[6]=4215389547,o[7]=327033209,Y(i,o,t,n),n%=128,r=0;r<n;r++)a[r]=t[s-n+r];for(a[n]=128,a[(n=256-128*(n<112?1:0))-9]=0,p(a,n-8,s/536870912|0,s<<3),Y(i,o,a,n),r=0;r<8;r++)p(e,8*r,i[r],o[r]);return 0}function Q(e,n){var r=t(),i=t(),o=t(),a=t(),s=t(),f=t(),l=t(),u=t(),d=t();U(r,e[1],e[0]),U(d,n[1],n[0]),j(r,r,d),L(i,e[0],e[1]),L(d,n[0],n[1]),j(i,i,d),j(o,e[3],n[3]),j(o,o,c),j(a,e[2],n[2]),L(a,a,a),U(s,i,r),U(f,a,o),L(l,a,o),L(u,i,r),j(e[0],s,f),j(e[1],u,l),j(e[2],l,f),j(e[3],s,u)}function ee(e,t,n){var r;for(r=0;r<4;r++)P(e[r],t[r],n)}function te(e,n){var r=t(),i=t(),o=t();H(o,n[2]),j(r,n[0],o),j(i,n[1],o),D(e,i),e[31]^=M(r)<<7}function ne(e,t,n){var r,i;for(I(e[0],o),I(e[1],a),I(e[2],a),I(e[3],o),i=255;i>=0;--i)ee(e,t,r=n[i/8|0]>>(7&i)&1),Q(t,e),Q(e,e),ee(e,t,r)}function re(e,n){var r=[t(),t(),t(),t()];I(r[0],l),I(r[1],d),I(r[2],a),j(r[3],l,d),ne(e,r,n)}function ie(e,r,i){var o,a=new Uint8Array(64),s=[t(),t(),t(),t()];for(i||n(r,32),Z(a,r,32),a[0]&=248,a[31]&=127,a[31]|=64,re(s,a),te(e,s),o=0;o<32;o++)r[o+32]=e[o];return 0}var oe=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ae(e,t){var n,r,i,o;for(r=63;r>=32;--r){for(n=0,i=r-32,o=r-12;i<o;++i)t[i]+=n-16*t[r]*oe[i-(r-32)],n=Math.floor((t[i]+128)/256),t[i]-=256*n;t[i]+=n,t[r]=0}for(n=0,i=0;i<32;i++)t[i]+=n-(t[31]>>4)*oe[i],n=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=n*oe[i];for(r=0;r<32;r++)t[r+1]+=t[r]>>8,e[r]=255&t[r]}function se(e){var t,n=new Float64Array(64);for(t=0;t<64;t++)n[t]=e[t];for(t=0;t<64;t++)e[t]=0;ae(e,n)}function fe(e,n,r,i){var o,a,s=new Uint8Array(64),f=new Uint8Array(64),c=new Uint8Array(64),l=new Float64Array(64),u=[t(),t(),t(),t()];Z(s,i,32),s[0]&=248,s[31]&=127,s[31]|=64;var d=r+64;for(o=0;o<r;o++)e[64+o]=n[o];for(o=0;o<32;o++)e[32+o]=s[32+o];for(Z(c,e.subarray(32),r+32),se(c),re(u,c),te(e,u),o=32;o<64;o++)e[o]=i[o];for(Z(f,e,r+64),se(f),o=0;o<64;o++)l[o]=0;for(o=0;o<32;o++)l[o]=c[o];for(o=0;o<32;o++)for(a=0;a<32;a++)l[o+a]+=f[o]*s[a];return ae(e.subarray(32),l),d}function ce(e,n,r,i){var s,c=new Uint8Array(32),l=new Uint8Array(64),u=[t(),t(),t(),t()],d=[t(),t(),t(),t()];if(r<64||function(e,n){var r=t(),i=t(),s=t(),c=t(),l=t(),u=t(),d=t();return I(e[2],a),K(e[1],n),W(s,e[1]),j(c,s,f),U(s,s,e[2]),L(c,e[2],c),W(l,c),W(u,l),j(d,u,l),j(r,d,s),j(r,r,c),$(r,r),j(r,r,s),j(r,r,c),j(r,r,c),j(e[0],r,c),W(i,e[0]),j(i,i,c),B(i,s)&&j(e[0],e[0],h),W(i,e[0]),j(i,i,c),B(i,s)?-1:(M(e[0])===n[31]>>7&&U(e[0],o,e[0]),j(e[3],e[0],e[1]),0)}(d,i))return-1;for(s=0;s<r;s++)e[s]=n[s];for(s=0;s<32;s++)e[s+32]=i[s];if(Z(l,e,r),se(l),ne(u,d,l),re(d,n.subarray(32)),Q(u,d),te(c,u),r-=64,y(n,0,c,0)){for(s=0;s<r;s++)e[s]=0;return-1}for(s=0;s<r;s++)e[s]=n[s+64];return r}var le=16,ue=64,de=32,he=64;function pe(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function ge(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function be(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:v,crypto_stream_xor:x,crypto_stream:O,crypto_stream_salsa20_xor:_,crypto_stream_salsa20:E,crypto_onetimeauth:k,crypto_onetimeauth_verify:T,crypto_verify_16:b,crypto_verify_32:y,crypto_secretbox:R,crypto_secretbox_open:A,crypto_scalarmult:q,crypto_scalarmult_base:X,crypto_box_beforenm:z,crypto_box_afternm:J,crypto_box:function(e,t,n,r,i,o){var a=new Uint8Array(32);return z(a,i,o),J(e,t,n,r,a)},crypto_box_open:function(e,t,n,r,i,o){var a=new Uint8Array(32);return z(a,i,o),V(e,t,n,r,a)},crypto_box_keypair:F,crypto_hash:Z,crypto_sign:fe,crypto_sign_keypair:ie,crypto_sign_open:ce,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:le,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:ue,crypto_sign_PUBLICKEYBYTES:de,crypto_sign_SECRETKEYBYTES:he,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:t,D:f,L:oe,pack25519:D,unpack25519:K,M:j,A:L,S:W,Z:U,pow2523:$,add:Q,set25519:I,modL:ae,scalarmult:ne,scalarbase:re},e.randomBytes=function(e){var t=new Uint8Array(e);return n(t,e),t},e.secretbox=function(e,t,n){ge(e,t,n),pe(n,t);for(var r=new Uint8Array(32+e.length),i=new Uint8Array(r.length),o=0;o<e.length;o++)r[o+32]=e[o];return R(i,r,r.length,t,n),i.subarray(le)},e.secretbox.open=function(e,t,n){ge(e,t,n),pe(n,t);for(var r=new Uint8Array(le+e.length),i=new Uint8Array(r.length),o=0;o<e.length;o++)r[o+le]=e[o];return r.length<32||0!==A(i,r,r.length,t,n)?null:i.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=le,e.scalarMult=function(e,t){if(ge(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var n=new Uint8Array(32);return q(n,e,t),n},e.scalarMult.base=function(e){if(ge(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return X(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,n,r,i){var o=e.box.before(r,i);return e.secretbox(t,n,o)},e.box.before=function(e,t){ge(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var n=new Uint8Array(32);return z(n,e,t),n},e.box.after=e.secretbox,e.box.open=function(t,n,r,i){var o=e.box.before(r,i);return e.secretbox.open(t,n,o)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return F(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(ge(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return X(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(ge(e,t),t.length!==he)throw new Error("bad secret key size");var n=new Uint8Array(ue+e.length);return fe(n,e,e.length,t),n},e.sign.open=function(e,t){if(ge(e,t),t.length!==de)throw new Error("bad public key size");var n=new Uint8Array(e.length),r=ce(n,e,e.length,t);if(r<0)return null;for(var i=new Uint8Array(r),o=0;o<i.length;o++)i[o]=n[o];return i},e.sign.detached=function(t,n){for(var r=e.sign(t,n),i=new Uint8Array(ue),o=0;o<i.length;o++)i[o]=r[o];return i},e.sign.detached.verify=function(e,t,n){if(ge(e,t,n),t.length!==ue)throw new Error("bad signature size");if(n.length!==de)throw new Error("bad public key size");var r,i=new Uint8Array(ue+e.length),o=new Uint8Array(ue+e.length);for(r=0;r<ue;r++)i[r]=t[r];for(r=0;r<e.length;r++)i[r+ue]=e[r];return ce(o,i,i.length,n)>=0},e.sign.keyPair=function(){var e=new Uint8Array(de),t=new Uint8Array(he);return ie(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(ge(e),e.length!==he)throw new Error("bad secret key size");for(var t=new Uint8Array(de),n=0;n<t.length;n++)t[n]=e[32+n];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(ge(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(de),n=new Uint8Array(he),r=0;r<32;r++)n[r]=e[r];return ie(t,n,!0),{publicKey:t,secretKey:n}},e.sign.publicKeyLength=de,e.sign.secretKeyLength=he,e.sign.seedLength=32,e.sign.signatureLength=ue,e.hash=function(e){ge(e);var t=new Uint8Array(64);return Z(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return ge(e,t),0!==e.length&&0!==t.length&&e.length===t.length&&0===g(e,0,t,0,e.length)},e.setPRNG=function(e){n=e},function(){var t=typeof self<"u"?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues){e.setPRNG((function(e,n){var r,i=new Uint8Array(n);for(r=0;r<n;r+=65536)t.getRandomValues(i.subarray(r,r+Math.min(n-r,65536)));for(r=0;r<n;r++)e[r]=i[r];be(i)}))}else typeof u<"u"&&((t=C())&&t.randomBytes&&e.setPRNG((function(e,n){var r,i=t.randomBytes(n);for(r=0;r<n;r++)e[r]=i[r];be(i)})))}()}(typeof t<"u"&&t.exports?t.exports:self.nacl=self.nacl||{})})),x=h(((e,t)=>{var n,i;n=e,i=function(){var e={};function t(e){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(e){if("string"!=typeof e)throw new TypeError("expected string");var t,n=unescape(encodeURIComponent(e)),r=new Uint8Array(n.length);for(t=0;t<n.length;t++)r[t]=n.charCodeAt(t);return r},e.encodeUTF8=function(e){var t,n=[];for(t=0;t<e.length;t++)n.push(String.fromCharCode(e[t]));return decodeURIComponent(escape(n.join("")))},typeof atob>"u"?typeof r.from<"u"?(e.encodeBase64=function(e){return r.from(e).toString("base64")},e.decodeBase64=function(e){return t(e),new Uint8Array(Array.prototype.slice.call(r.from(e,"base64"),0))}):(e.encodeBase64=function(e){return new r(e).toString("base64")},e.decodeBase64=function(e){return t(e),new Uint8Array(Array.prototype.slice.call(new r(e,"base64"),0))}):(e.encodeBase64=function(e){var t,n=[],r=e.length;for(t=0;t<r;t++)n.push(String.fromCharCode(e[t]));return btoa(n.join(""))},e.decodeBase64=function(e){t(e);var n,r=atob(e),i=new Uint8Array(r.length);for(n=0;n<r.length;n++)i[n]=r.charCodeAt(n);return i}),e},typeof t<"u"&&t.exports?t.exports=i():(n.nacl||(n.nacl={}),n.nacl.util=i())}));function S(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),a=o.charCodeAt(0);if(255!==n[a])throw new TypeError(o+" is ambiguous");n[a]=i}var s=e.length,f=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function u(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,i=0;e[t]===f;)r++,t++;for(var o=(e.length-t)*c+1>>>0,a=new Uint8Array(o);e[t];){var l=n[e.charCodeAt(t)];if(255===l)return;for(var u=0,d=o-1;(0!==l||u<i)&&-1!==d;d--,u++)l+=s*a[d]>>>0,a[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=u,t++}if(" "!==e[t]){for(var h=o-i;h!==o&&0===a[h];)h++;for(var p=new Uint8Array(r+(o-h)),g=r;h!==o;)p[g++]=a[h++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,i=0,o=t.length;i!==o&&0===t[i];)i++,n++;for(var a=(o-i)*l+1>>>0,c=new Uint8Array(a);i!==o;){for(var u=t[i],d=0,h=a-1;(0!==u||d<r)&&-1!==h;h--,d++)u+=256*c[h]>>>0,c[h]=u%s>>>0,u=u/s>>>0;if(0!==u)throw new Error("Non-zero carry");r=d,i++}for(var p=a-r;p!==a&&0===c[p];)p++;for(var g=f.repeat(n);p<a;++p)g+=e.charAt(c[p]);return g},decodeUnsafe:u,decode:function(e){var n=u(e);if(n)return n;throw new Error(`Non-${t} character`)}}}var k,T,R,A,I,N,P,D,B,M,K,L,U,j,W,H=d((()=>{k=S})),$=d((()=>{new Uint8Array(0),T=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0},R=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},A=e=>(new TextEncoder).encode(e),I=e=>(new TextDecoder).decode(e)})),q=d((()=>{H(),$(),N=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},P=class{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return B(this,e)}},D=class{constructor(e){this.decoders=e}or(e){return B(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},B=(e,t)=>new D({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),M=class{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new N(e,t,n),this.decoder=new P(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},K=e=>{let{name:t,prefix:n,encode:r,decode:i}=e;return new M(t,n,r,i)},L=e=>{let{prefix:t,name:n,alphabet:r}=e,{encode:i,decode:o}=k(r,n);return K({prefix:t,name:n,encode:i,decode:e=>R(o(e))})},U=(e,t,n,r)=>{let i={};for(let l=0;l<t.length;++l)i[t[l]]=l;let o=e.length;for(;"="===e[o-1];)--o;let a=new Uint8Array(o*n/8|0),s=0,f=0,c=0;for(let l=0;l<o;++l){let t=i[e[l]];if(void 0===t)throw new SyntaxError(`Non-${r} character`);f=f<<n|t,s+=n,s>=8&&(s-=8,a[c++]=255&f>>s)}if(s>=n||255&f<<8-s)throw new SyntaxError("Unexpected end of data");return a},j=(e,t,n)=>{let r="="===t[t.length-1],i=(1<<n)-1,o="",a=0,s=0;for(let f=0;f<e.length;++f)for(s=s<<8|e[f],a+=8;a>n;)a-=n,o+=t[i&s>>a];if(a&&(o+=t[i&s<<n-a]),r)for(;o.length*n&7;)o+="=";return o},W=e=>{let{name:t,prefix:n,bitsPerChar:r,alphabet:i}=e;return K({prefix:n,name:t,encode:e=>j(e,i,r),decode:e=>U(e,i,r,t)})}})),X={};p(X,{identity:()=>F});var F,z=d((()=>{q(),$(),F=K({prefix:"\0",name:"identity",encode:e=>I(e),decode:e=>A(e)})})),J={};p(J,{base2:()=>V});var V,G=d((()=>{q(),V=W({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})})),Y={};p(Y,{base8:()=>Z});var Z,Q=d((()=>{q(),Z=W({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})})),ee={};p(ee,{base10:()=>te});var te,ne=d((()=>{q(),te=L({prefix:"9",name:"base10",alphabet:"0123456789"})})),re={};p(re,{base16:()=>ie,base16upper:()=>oe});var ie,oe,ae=d((()=>{q(),ie=W({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),oe=W({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})})),se={};p(se,{base32:()=>fe,base32hex:()=>de,base32hexpad:()=>pe,base32hexpadupper:()=>ge,base32hexupper:()=>he,base32pad:()=>le,base32padupper:()=>ue,base32upper:()=>ce,base32z:()=>be});var fe,ce,le,ue,de,he,pe,ge,be,ye=d((()=>{q(),fe=W({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ce=W({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),le=W({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ue=W({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),de=W({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),he=W({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),pe=W({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ge=W({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),be=W({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})})),me={};p(me,{base36:()=>ve,base36upper:()=>we});var ve,we,_e=d((()=>{q(),ve=L({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),we=L({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})})),Ee={};p(Ee,{base58btc:()=>Ce,base58flickr:()=>Oe});var Ce,Oe,xe=d((()=>{q(),Ce=L({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Oe=L({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})})),Se={};p(Se,{base64:()=>ke,base64pad:()=>Te,base64url:()=>Re,base64urlpad:()=>Ae});var ke,Te,Re,Ae,Ie=d((()=>{q(),ke=W({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Te=W({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Re=W({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ae=W({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})})),Ne={};function Pe(e){return e.reduce(((e,t)=>e+=Me[t]),"")}function De(e){let t=[];for(let n of e){let e=Ke[n.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${n}`);t.push(e)}return new Uint8Array(t)}p(Ne,{base256emoji:()=>Le});var Be,Me,Ke,Le,Ue=d((()=>{q(),Be=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),Me=Be.reduce(((e,t,n)=>(e[n]=t,e)),[]),Ke=Be.reduce(((e,t,n)=>(e[t.codePointAt(0)]=n,e)),[]),Le=K({prefix:"\ud83d\ude80",name:"base256emoji",encode:Pe,decode:De})}));function je(e,t,n){t=t||[];for(var r=n=n||0;e>=Xe;)t[n++]=255&e|$e,e/=128;for(;e&qe;)t[n++]=255&e|$e,e>>>=7;return t[n]=0|e,je.bytes=n-r+1,t}function We(e,t){var n,r=0,i=0,o=t=t||0,a=e.length;do{if(o>=a)throw We.bytes=0,new RangeError("Could not decode varint");n=e[o++],r+=i<28?(n&Je)<<i:(n&Je)*Math.pow(2,i),i+=7}while(n>=ze);return We.bytes=o-t,r}var He,$e,qe,Xe,Fe,ze,Je,Ve,Ge,Ye,Ze,Qe,et,tt,nt,rt,it,ot,at,st,ft,ct,lt,ut,dt,ht,pt=d((()=>{He=je,$e=128,qe=-128,Xe=Math.pow(2,31),Fe=We,ze=128,Je=127,Ve=Math.pow(2,7),Ge=Math.pow(2,14),Ye=Math.pow(2,21),Ze=Math.pow(2,28),Qe=Math.pow(2,35),et=Math.pow(2,42),tt=Math.pow(2,49),nt=Math.pow(2,56),rt=Math.pow(2,63),it={encode:He,decode:Fe,encodingLength:function(e){return e<Ve?1:e<Ge?2:e<Ye?3:e<Ze?4:e<Qe?5:e<et?6:e<tt?7:e<nt?8:e<rt?9:10}}})),gt=d((()=>{pt(),ot=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[it.decode(e,t),it.decode.bytes]},at=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return it.encode(e,t,n),t},st=e=>it.encodingLength(e)})),bt=d((()=>{$(),gt(),ft=(e,t)=>{let n=t.byteLength,r=st(e),i=r+st(n),o=new Uint8Array(i+n);return at(e,o,0),at(n,o,r),o.set(t,i),new ut(e,n,t,o)},ct=e=>{let t=R(e),[n,r]=ot(t),[i,o]=ot(t.subarray(r)),a=t.subarray(r+o);if(a.byteLength!==i)throw new Error("Incorrect length");return new ut(n,i,a,t)},lt=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&T(e.bytes,t.bytes),ut=class{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}}})),yt=d((()=>{bt(),dt=e=>{let{name:t,code:n,encode:r}=e;return new ht(t,n,r)},ht=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?ft(this.code,t):t.then((e=>ft(this.code,e)))}throw Error("Unknown type, must be binary type")}}})),mt={};p(mt,{sha256:()=>wt,sha512:()=>_t});var vt,wt,_t,Et=d((()=>{yt(),wt=dt({name:"sha2-256",code:18,encode:(vt=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)))("SHA-256")}),_t=dt({name:"sha2-512",code:19,encode:vt("SHA-512")})})),Ct={};p(Ct,{identity:()=>St});var Ot,xt,St,kt,Tt,Rt,At,It,Nt,Pt,Dt,Bt,Mt,Kt,Lt,Ut=d((()=>{$(),bt(),xt=e=>ft(0,Ot(e)),St={code:0,name:"identity",encode:Ot=R,digest:xt}})),jt=d((()=>{$()})),Wt=d((()=>{new TextEncoder,new TextDecoder})),Ht=d((()=>{gt(),bt(),xe(),ye(),$(),class e{constructor(e,t,n,r){this.code=t,this.version=e,this.multihash=n,this.bytes=r,this.byteOffset=r.byteOffset,this.byteLength=r.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Bt,byteLength:Bt,code:Dt,version:Dt,multihash:Dt,bytes:Dt,_baseCache:Bt,asCID:Bt})}toV0(){if(0===this.version)return this;{let{code:t,multihash:n}=this;if(t!==At)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(n.code!==It)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return e.createV0(n)}}toV1(){switch(this.version){case 0:{let{code:t,digest:n}=this.multihash,r=ft(t,n);return e.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&lt(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:r}=this;return 0===n?Tt(t,r,e||Ce.encoder):Rt(t,r,e||fe.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return Mt(/^0\.0/,Kt),!(!e||!e[Pt]&&e.asCID!==e)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof e)return t;if(null!=t&&t.asCID===t){let{version:n,code:r,multihash:i,bytes:o}=t;return new e(n,r,i,o||Nt(n,r,i.bytes))}if(null!=t&&!0===t[Pt]){let{version:n,multihash:r,code:i}=t,o=ct(r);return e.create(n,i,o)}return null}static create(t,n,r){if("number"!=typeof n)throw new Error("String codecs are no longer supported");switch(t){case 0:if(n!==At)throw new Error(`Version 0 CID must use dag-pb (code: ${At}) block encoding`);return new e(t,n,r,r.bytes);case 1:{let i=Nt(t,n,r.bytes);return new e(t,n,r,i)}default:throw new Error("Invalid version")}}static createV0(t){return e.create(0,At,t)}static createV1(t,n){return e.create(1,t,n)}static decode(t){let[n,r]=e.decodeFirst(t);if(r.length)throw new Error("Incorrect length");return n}static decodeFirst(t){let n=e.inspectBytes(t),r=n.size-n.multihashSize,i=R(t.subarray(r,r+n.multihashSize));if(i.byteLength!==n.multihashSize)throw new Error("Incorrect length");let o=i.subarray(n.multihashSize-n.digestSize),a=new ut(n.multihashCode,n.digestSize,o,i);return[0===n.version?e.createV0(a):e.createV1(n.codec,a),t.subarray(n.size)]}static inspectBytes(e){let t=0,n=()=>{let[n,r]=ot(e.subarray(t));return t+=r,n},r=n(),i=At;if(18===r?(r=0,t=0):1===r&&(i=n()),0!==r&&1!==r)throw new RangeError(`Invalid CID version ${r}`);let o=t,a=n(),s=n(),f=t+s;return{version:r,codec:i,multihashCode:a,digestSize:s,multihashSize:f-o,size:f}}static parse(t,n){let[r,i]=kt(t,n),o=e.decode(i);return o._baseCache.set(r,t),o}},kt=(e,t)=>{switch(e[0]){case"Q":{let n=t||Ce;return[Ce.prefix,n.decode(`${Ce.prefix}${e}`)]}case Ce.prefix:{let n=t||Ce;return[Ce.prefix,n.decode(e)]}case fe.prefix:{let n=t||fe;return[fe.prefix,n.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},Tt=(e,t,n)=>{let{prefix:r}=n;if(r!==Ce.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);let i=t.get(r);if(null==i){let i=n.encode(e).slice(1);return t.set(r,i),i}return i},Rt=(e,t,n)=>{let{prefix:r}=n,i=t.get(r);if(null==i){let i=n.encode(e);return t.set(r,i),i}return i},At=112,It=18,Nt=(e,t,n)=>{let r=st(e),i=r+st(t),o=new Uint8Array(i+n.byteLength);return at(e,o,0),at(t,o,r),o.set(n,i),o},Pt=Symbol.for("@ipld/js-cid/CID"),Dt={writable:!1,configurable:!1,enumerable:!0},Bt={writable:!1,enumerable:!1,configurable:!1},Mt=(e,t)=>{if(!e.test("0.0.0-dev"))throw new Error(t);i.warn(t)},Kt="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n"})),$t=d((()=>{Ht(),gt(),$(),yt(),bt()})),qt=d((()=>{z(),G(),Q(),ne(),ae(),ye(),_e(),xe(),Ie(),Ue(),Et(),Ut(),jt(),Wt(),$t(),Lt={...X,...J,...Y,...ee,...re,...se,...me,...Ee,...Se,...Ne},{...mt,...Ct}}));var Xt=d((()=>{}));function Ft(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}var zt,Jt,Vt,Gt,Yt=d((()=>{qt(),Xt(),zt=Ft("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Jt=Ft("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{let t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}((e=e.substring(1)).length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),Vt={utf8:zt,"utf-8":zt,hex:Lt.base16,latin1:Jt,ascii:Jt,binary:Jt,...Lt},Gt=Vt})),Zt={};function Qt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",n=Gt[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}p(Zt,{toString:()=>Qt});var en=d((()=>{Yt()})),tn=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mul=Math.imul||function(e,t){var n=65535&e,r=65535&t;return n*r+((e>>>16&65535)*r+n*(t>>>16&65535)<<16>>>0)|0},e.add=function(e,t){return e+t|0},e.sub=function(e,t){return e-t|0},e.rotl=function(e,t){return e<<t|e>>>32-t},e.rotr=function(e,t){return e<<32-t|e>>>t},e.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(t){return e.isInteger(t)&&t>=-e.MAX_SAFE_INTEGER&&t<=e.MAX_SAFE_INTEGER}})),nn=h((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=tn();function n(e,t,n){return void 0===t&&(t=new Uint8Array(2)),void 0===n&&(n=0),t[n+0]=e>>>8,t[n+1]=e>>>0,t}function r(e,t,n){return void 0===t&&(t=new Uint8Array(2)),void 0===n&&(n=0),t[n+0]=e>>>0,t[n+1]=e>>>8,t}function i(e,t){return void 0===t&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function o(e,t){return void 0===t&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function a(e,t){return void 0===t&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function s(e,t){return void 0===t&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}function f(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),t[n+0]=e>>>24,t[n+1]=e>>>16,t[n+2]=e>>>8,t[n+3]=e>>>0,t}function c(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),t[n+0]=e>>>0,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24,t}function l(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),f(e/4294967296>>>0,t,n),f(e>>>0,t,n+4),t}function u(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),c(e>>>0,t,n),c(e/4294967296>>>0,t,n+4),t}e.readInt16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16},e.readUint16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])>>>0},e.readInt16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])<<16>>16},e.readUint16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])>>>0},e.writeUint16BE=n,e.writeInt16BE=n,e.writeUint16LE=r,e.writeInt16LE=r,e.readInt32BE=i,e.readUint32BE=o,e.readInt32LE=a,e.readUint32LE=s,e.writeUint32BE=f,e.writeInt32BE=f,e.writeUint32LE=c,e.writeInt32LE=c,e.readInt64BE=function(e,t){void 0===t&&(t=0);var n=i(e,t),r=i(e,t+4);return 4294967296*n+r-4294967296*(r>>31)},e.readUint64BE=function(e,t){return void 0===t&&(t=0),4294967296*o(e,t)+o(e,t+4)},e.readInt64LE=function(e,t){void 0===t&&(t=0);var n=a(e,t);return 4294967296*a(e,t+4)+n-4294967296*(n>>31)},e.readUint64LE=function(e,t){void 0===t&&(t=0);var n=s(e,t);return 4294967296*s(e,t+4)+n},e.writeUint64BE=l,e.writeInt64BE=l,e.writeUint64LE=u,e.writeInt64LE=u,e.readUintBE=function(e,t,n){if(void 0===n&&(n=0),e%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-n)throw new Error("readUintBE: array is too short for the given bitLength");for(var r=0,i=1,o=e/8+n-1;o>=n;o--)r+=t[o]*i,i*=256;return r},e.readUintLE=function(e,t,n){if(void 0===n&&(n=0),e%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-n)throw new Error("readUintLE: array is too short for the given bitLength");for(var r=0,i=1,o=n;o<n+e/8;o++)r+=t[o]*i,i*=256;return r},e.writeUintBE=function(e,n,r,i){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===i&&(i=0),e%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!t.isSafeInteger(n))throw new Error("writeUintBE value must be an integer");for(var o=1,a=e/8+i-1;a>=i;a--)r[a]=n/o&255,o*=256;return r},e.writeUintLE=function(e,n,r,i){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===i&&(i=0),e%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!t.isSafeInteger(n))throw new Error("writeUintLE value must be an integer");for(var o=1,a=i;a<i+e/8;a++)r[a]=n/o&255,o*=256;return r},e.readFloat32BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t)},e.readFloat32LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t,!0)},e.readFloat64BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t)},e.readFloat64LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t,!0)},e.writeFloat32BE=function(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(n,e),t},e.writeFloat32LE=function(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(n,e,!0),t},e.writeFloat64BE=function(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(n,e),t},e.writeFloat64LE=function(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(n,e,!0),t}})),rn=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.wipe=function(e){for(var t=0;t<e.length;t++)e[t]=0;return e}})),on=h((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=nn(),n=rn();e.DIGEST_LENGTH=32,e.BLOCK_SIZE=64;var r=function(){function r(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return r.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},r.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},r.prototype.clean=function(){n.wipe(this._buffer),n.wipe(this._temp),this.reset()},r.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var n=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&t>0;)this._buffer[this._bufferLength++]=e[n++],t--;this._bufferLength===this.blockSize&&(o(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(n=o(this._temp,this._state,e,n,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[n++],t--;return this},r.prototype.finish=function(e){if(!this._finished){var n=this._bytesHashed,r=this._bufferLength,i=n/536870912|0,a=n<<3,s=n%64<56?64:128;this._buffer[r]=128;for(var f=r+1;f<s-8;f++)this._buffer[f]=0;t.writeUint32BE(i,this._buffer,s-8),t.writeUint32BE(a,this._buffer,s-4),o(this._temp,this._state,this._buffer,0,s),this._finished=!0}for(f=0;f<this.digestLength/4;f++)t.writeUint32BE(this._state[f],e,4*f);return this},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},r.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},r.prototype.cleanSavedState=function(e){n.wipe(e.state),e.buffer&&n.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},r}();e.SHA256=r;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function o(e,n,r,o,a){for(;a>=64;){for(var s=n[0],f=n[1],c=n[2],l=n[3],u=n[4],d=n[5],h=n[6],p=n[7],g=0;g<16;g++){var b=o+4*g;e[g]=t.readUint32BE(r,b)}for(g=16;g<64;g++){var y=e[g-2],m=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10,v=((y=e[g-15])>>>7|y<<25)^(y>>>18|y<<14)^y>>>3;e[g]=(m+e[g-7]|0)+(v+e[g-16]|0)}for(g=0;g<64;g++){m=(((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&d^~u&h)|0)+(p+(i[g]+e[g]|0)|0)|0,v=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&f^s&c^f&c)|0;p=h,h=d,d=u,u=l+m|0,l=c,c=f,f=s,s=m+v|0}n[0]+=s,n[1]+=f,n[2]+=c,n[3]+=l,n[4]+=u,n[5]+=d,n[6]+=h,n[7]+=p,o+=64,a-=64}return o}e.hash=function(e){var t=new r;t.update(e);var n=t.digest();return t.clean(),n}})),an=h(((e,t)=>{var r,i=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof n.g<"u"&&n.g,o=function(){function e(){this.fetch=!1,this.DOMException=i.DOMException}return e.prototype=i,new e}();r=o,function(e){var t=typeof r<"u"&&r||typeof self<"u"&&self||typeof t<"u"&&t,n="URLSearchParams"in t,i="Symbol"in t&&"iterator"in Symbol,o="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch{return!1}}(),a="FormData"in t,s="ArrayBuffer"in t;if(s)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&f.indexOf(Object.prototype.toString.call(e))>-1};function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function d(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}function h(e){this.map={},e instanceof h?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function g(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function b(e){var t=new FileReader,n=g(t);return t.readAsArrayBuffer(e),n}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&o&&function(e){return e&&DataView.prototype.isPrototypeOf(e)}(e)?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(b)}),this.text=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=g(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(e,t){e=l(e),t=u(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},h.prototype.delete=function(e){delete this.map[l(e)]},h.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},h.prototype.set=function(e,t){this.map[l(e)]=u(t)},h.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},h.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),d(e)},h.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),d(e)},h.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),d(e)},i&&(h.prototype[Symbol.iterator]=h.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(e,t){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n=(t=t||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,!n&&null!=e._bodyInit&&(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new h(t.headers)),this.method=function(e){var t=e.toUpperCase();return v.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),("GET"===this.method||"HEAD"===this.method)&&("no-store"===t.cache||"no-cache"===t.cache)){var r=/([?&])_=[^&]*/;r.test(this.url)?this.url=this.url.replace(r,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function _(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function E(e){var t=new h;return e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t}function C(e,t){if(!(this instanceof C))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},m.call(w.prototype),m.call(C.prototype),C.prototype.clone=function(){return new C(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},C.error=function(){var e=new C(null,{status:0,statusText:""});return e.type="error",e};var O=[301,302,303,307,308];C.redirect=function(e,t){if(-1===O.indexOf(t))throw new RangeError("Invalid status code");return new C(null,{status:t,headers:{location:e}})},e.DOMException=t.DOMException;try{new e.DOMException}catch{e.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function x(n,r){return new Promise((function(i,a){var f=new w(n,r);if(f.signal&&f.signal.aborted)return a(new e.DOMException("Aborted","AbortError"));var c=new XMLHttpRequest;function l(){c.abort()}c.onload=function(){var e={status:c.status,statusText:c.statusText,headers:E(c.getAllResponseHeaders()||"")};e.url="responseURL"in c?c.responseURL:e.headers.get("X-Request-URL");var t="response"in c?c.response:c.responseText;setTimeout((function(){i(new C(t,e))}),0)},c.onerror=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},c.ontimeout=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},c.onabort=function(){setTimeout((function(){a(new e.DOMException("Aborted","AbortError"))}),0)},c.open(f.method,function(e){try{return""===e&&t.location.href?t.location.href:e}catch{return e}}(f.url),!0),"include"===f.credentials?c.withCredentials=!0:"omit"===f.credentials&&(c.withCredentials=!1),"responseType"in c&&(o?c.responseType="blob":s&&f.headers.get("Content-Type")&&-1!==f.headers.get("Content-Type").indexOf("application/octet-stream")&&(c.responseType="arraybuffer")),!r||"object"!=typeof r.headers||r.headers instanceof h?f.headers.forEach((function(e,t){c.setRequestHeader(t,e)})):Object.getOwnPropertyNames(r.headers).forEach((function(e){c.setRequestHeader(e,u(r.headers[e]))})),f.signal&&(f.signal.addEventListener("abort",l),c.onreadystatechange=function(){4===c.readyState&&f.signal.removeEventListener("abort",l)}),c.send(typeof f._bodyInit>"u"?null:f._bodyInit)}))}x.polyfill=!0,t.fetch||(t.fetch=x,t.Headers=h,t.Request=w,t.Response=C),e.Headers=h,e.Request=w,e.Response=C,e.fetch=x}({}),o.fetch.ponyfill=!0,delete o.fetch.polyfill;var a=i.fetch?i:o;(e=a.fetch).default=a.fetch,e.fetch=a.fetch,e.Headers=a.Headers,e.Request=a.Request,e.Response=a.Response,t.exports=e})),sn=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_ERROR=e.STANDARD_ERROR_MAP=e.SERVER_ERROR_CODE_RANGE=e.RESERVED_ERROR_CODES=e.SERVER_ERROR=e.INTERNAL_ERROR=e.INVALID_PARAMS=e.METHOD_NOT_FOUND=e.INVALID_REQUEST=e.PARSE_ERROR=e.OKX_CONNECT_ERROR_CODES=e.OKXConnectError=void 0;var t,n,r=class e extends Error{constructor(n,r){null==r&&(r=function(e){return e==t.UNKNOWN_ERROR?"unknown error":e==t.BAD_REQUEST_ERROR?"bad request error":e==t.ALREADY_CONNECTED_ERROR?"already connected error":e==t.NOT_CONNECTED_ERROR?"not connected error":e==t.UNKNOWN_APP_ERROR?"unknown app error":e==t.USER_REJECTS_ERROR?"user rejects error":e==t.METHOD_NOT_SUPPORTED?"method not supported":e==t.CONNECTION_ERROR?"connect error":"unknown error"}(n)),super(r),this.code=n,this.message=`${e.prefix} ${r?"\n"+r:""}`,Object.setPrototypeOf(this,e.prototype)}toJSON(){return{message:this.message,code:this.code}}};e.OKXConnectError=r,r.prefix="[OKX_CONNECT_SDK_ERROR]",(n=t||(e.OKX_CONNECT_ERROR_CODES=t={}))[n.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",n[n.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",n[n.ALREADY_CONNECTED_ERROR=11]="ALREADY_CONNECTED_ERROR",n[n.NOT_CONNECTED_ERROR=12]="NOT_CONNECTED_ERROR",n[n.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",n[n.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",n[n.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",n[n.CHAIN_NOT_SUPPORTED=500]="CHAIN_NOT_SUPPORTED",n[n.WALLET_NOT_SUPPORTED=600]="WALLET_NOT_SUPPORTED",n[n.CONNECTION_ERROR=700]="CONNECTION_ERROR",e.PARSE_ERROR="PARSE_ERROR",e.INVALID_REQUEST="INVALID_REQUEST",e.METHOD_NOT_FOUND="METHOD_NOT_FOUND",e.INVALID_PARAMS="INVALID_PARAMS",e.INTERNAL_ERROR="INTERNAL_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.RESERVED_ERROR_CODES=[-32700,-32600,-32601,-32602,-32603],e.SERVER_ERROR_CODE_RANGE=[-32e3,-32099],e.STANDARD_ERROR_MAP={[e.PARSE_ERROR]:{code:-32700,message:"Parse error"},[e.INVALID_REQUEST]:{code:-32600,message:"Invalid Request"},[e.METHOD_NOT_FOUND]:{code:-32601,message:"Method not found"},[e.INVALID_PARAMS]:{code:-32602,message:"Invalid params"},[e.INTERNAL_ERROR]:{code:-32603,message:"Internal error"},[e.SERVER_ERROR]:{code:-32e3,message:"Server error"}},e.DEFAULT_ERROR=e.SERVER_ERROR})),fn=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OKX_CONNECT_ERROR_CODES=e.OKXConnectError=void 0;var t=sn();Object.defineProperty(e,"OKXConnectError",{enumerable:!0,get:function(){return t.OKXConnectError}}),Object.defineProperty(e,"OKX_CONNECT_ERROR_CODES",{enumerable:!0,get:function(){return t.OKX_CONNECT_ERROR_CODES}})})),cn=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NameSpaceKeyTron=e.NameSpaceKeyCosmos=e.NameSpaceKeyAptos=e.NameSpaceKeyBtc=e.NameSpaceKeySui=e.NameSpaceKeyTON=e.NameSpaceKeySOL=e.NameSpaceKeyEip155=void 0,e.NameSpaceKeyEip155="eip155",e.NameSpaceKeySOL="solana",e.NameSpaceKeyTON="ton",e.NameSpaceKeySui="sui",e.NameSpaceKeyBtc="btc",e.NameSpaceKeyAptos="aptos",e.NameSpaceKeyCosmos="cosmos",e.NameSpaceKeyTron="tron"})),ln=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tgwalletName=e.tonConnectSdkVersion=e.shortUniversalLink=e.standardDeeplink=e.downloadUrl=e.standardUniversalLink=e.okxDeeplink=void 0,e.okxDeeplink="okx://web3",e.standardUniversalLink=typeof window<"u"&&window.location.hostname.includes("okx.com")?"https://link.okx.com/download":"https://www.okx.com/download",e.downloadUrl="https://www.okx.com/download",e.standardDeeplink=`${e.okxDeeplink}/wallet/connect`,e.shortUniversalLink="https://www.okx.com/ul/connect",e.tonConnectSdkVersion="1",e.tgwalletName="OKX_WALLET_BOT"})),un=h((e=>{var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};function n(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function r(e){return"result"in e}function i(e){return"error"in e}Object.defineProperty(e,"__esModule",{value:!0}),e.isJsonRpcPayload=n,e.isJsonRpcRequest=function(e){return n(e)&&"method"in e},e.isJsonRpcResponse=function(e){return n(e)&&(r(e)||i(e))},e.isJsonRpcResult=r,e.isJsonRpcError=i,e.payloadId=l,e.getBigIntRpcId=function(){let e=BigInt(Date.now())*BigInt(1e6),t=BigInt(c.getNextValue());return e+t},e.formatJsonRpcRequest=function(e,t,n){return{id:n||l(),jsonrpc:"2.0",method:e,params:t}},e.formatJsonRpcResult=function(e,t){return{id:e,jsonrpc:"2.0",result:t}},e.formatJsonRpcError=function(e,t,n){return{id:e,jsonrpc:"2.0",error:p(t,n)}},e.isReservedErrorCode=u,e.getError=d,e.getErrorByCode=h,e.formatErrorMessage=p,e.isHttpUrl=function(e){return g(e,"^https?:")},e.isWsUrl=function(e){return g(e,"^wss?:")},e.parseConnectionError=function(e,t,n){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${t}`):e};var o=sn(),a=t(O()),s=class{constructor(e){this.i=1;8===e?new Uint8Array(1):16===e?new Uint16Array(1):new Uint32Array(1);this.initialValue=e?a.default.randomBytes(e/8)[0]:0}getNextValue(){return this.initialValue+this.i++}},f=new s(8),c=new s(16);function l(){return 1e3*Date.now()+f.getNextValue()}function u(e){return o.RESERVED_ERROR_CODES.includes(e)}function d(e){return Object.keys(o.STANDARD_ERROR_MAP).includes(e)?o.STANDARD_ERROR_MAP[e]:o.STANDARD_ERROR_MAP[o.DEFAULT_ERROR]}function h(e){return Object.values(o.STANDARD_ERROR_MAP).find((t=>t.code===e))||o.STANDARD_ERROR_MAP[o.DEFAULT_ERROR]}function p(e,t){return typeof e>"u"?d(o.INTERNAL_ERROR):("string"==typeof e&&(e=Object.assign(Object.assign({},d(o.SERVER_ERROR)),{message:e})),typeof t<"u"&&(e.data=t),u(e.code)&&(e=h(e.code)),e)}function g(e,t){let n=function(e){let t=e.match(new RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}(e);return!(typeof n>"u")&&new RegExp(t).test(n)}})),dn=h(((e,t)=>{var n=Object.prototype.hasOwnProperty,r="~";function i(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,n,i,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new o(n,i||e,a),f=r?r+t:t;return e._events[f]?e._events[f].fn?e._events[f]=[e._events[f],s]:e._events[f].push(s):(e._events[f]=s,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new i:delete e._events[t]}function f(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),f.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)n.call(e,t)&&i.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},f.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,a=new Array(o);i<o;i++)a[i]=n[i].fn;return a},f.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},f.prototype.emit=function(e,t,n,i,o,a){var s=r?r+e:e;if(!this._events[s])return!1;var f,c,l=this._events[s],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,o),!0;case 6:return l.fn.call(l.context,t,n,i,o,a),!0}for(c=1,f=new Array(u-1);c<u;c++)f[c-1]=arguments[c];l.fn.apply(l.context,f)}else{var d,h=l.length;for(c=0;c<h;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),u){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,i);break;default:if(!f)for(d=1,f=new Array(u-1);d<u;d++)f[d-1]=arguments[d];l[c].fn.apply(l[c].context,f)}}return!0},f.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},f.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},f.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn===t&&(!i||a.once)&&(!n||a.context===n)&&s(this,o);else{for(var f=0,c=[],l=a.length;f<l;f++)(a[f].fn!==t||i&&!a[f].once||n&&a[f].context!==n)&&c.push(a[f]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},f.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=r,f.EventEmitter=f,typeof t<"u"&&(t.exports=f)})),hn=h((e=>{var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.IEngine=e.ISignClient=e.ISignClientEvents=e.IEngineEvents=void 0;var n=t(dn()),r=class extends n.default{constructor(){super()}};e.IEngineEvents=r;var i=class extends n.default{constructor(){super()}};e.ISignClientEvents=i;e.ISignClient=class{constructor(e){this.data=e}};e.IEngine=class{constructor(e){this.client=e}}})),pn=h((e=>{var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TONCHAIN=void 0,(t||(e.TONCHAIN=t={})).MAINNET="-239"})),gn=h((e=>{var t,n;Object.defineProperty(e,"__esModule",{value:!0}),e.CONNECT_ITEM_ERROR_CODES=void 0,(n=t||(e.CONNECT_ITEM_ERROR_CODES=t={}))[n.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",n[n.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})),bn=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CONNECT_ITEM_ERROR_CODES=e.TONCHAIN=void 0;var t=pn();Object.defineProperty(e,"TONCHAIN",{enumerable:!0,get:function(){return t.TONCHAIN}});var n=gn();Object.defineProperty(e,"CONNECT_ITEM_ERROR_CODES",{enumerable:!0,get:function(){return n.CONNECT_ITEM_ERROR_CODES}})})),yn=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.creatOKXWalletInfo=function(){return{appName:"okxAppWallet",name:"OKX Wallet",imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",aboutUrl:t.downloadUrl,universalLink:t.standardUniversalLink,deepLink:t.standardDeeplink,platforms:["ios","android"]}},e.creatOKXMiniAppWalletInfo=function(){return{appName:"okxMiniApp",name:"OKX Mini Wallet",imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",aboutUrl:t.downloadUrl,universalLink:`https://t.me/${t.tgwalletName}/start`,deepLink:"",platforms:["ios","android","macos","windows"]}};var t=ln()})),mn=h((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.creatOKXMiniAppWalletInfo=e.creatOKXWalletInfo=e.ISignClientEvents=e.IEngine=e.IEngineEvents=e.ISignClient=e.getBigIntRpcId=e.formatJsonRpcRequest=e.isJsonRpcError=e.isJsonRpcResponse=e.parseConnectionError=e.isHttpUrl=e.formatJsonRpcError=void 0;var r=un();Object.defineProperty(e,"formatJsonRpcError",{enumerable:!0,get:function(){return r.formatJsonRpcError}}),Object.defineProperty(e,"isHttpUrl",{enumerable:!0,get:function(){return r.isHttpUrl}}),Object.defineProperty(e,"parseConnectionError",{enumerable:!0,get:function(){return r.parseConnectionError}}),Object.defineProperty(e,"isJsonRpcResponse",{enumerable:!0,get:function(){return r.isJsonRpcResponse}}),Object.defineProperty(e,"isJsonRpcError",{enumerable:!0,get:function(){return r.isJsonRpcError}}),Object.defineProperty(e,"formatJsonRpcRequest",{enumerable:!0,get:function(){return r.formatJsonRpcRequest}}),Object.defineProperty(e,"getBigIntRpcId",{enumerable:!0,get:function(){return r.getBigIntRpcId}});var i=hn();Object.defineProperty(e,"ISignClient",{enumerable:!0,get:function(){return i.ISignClient}}),Object.defineProperty(e,"IEngineEvents",{enumerable:!0,get:function(){return i.IEngineEvents}}),Object.defineProperty(e,"IEngine",{enumerable:!0,get:function(){return i.IEngine}}),Object.defineProperty(e,"ISignClientEvents",{enumerable:!0,get:function(){return i.ISignClientEvents}}),n(bn(),e);var o=yn();Object.defineProperty(e,"creatOKXWalletInfo",{enumerable:!0,get:function(){return o.creatOKXWalletInfo}}),Object.defineProperty(e,"creatOKXMiniAppWalletInfo",{enumerable:!0,get:function(){return o.creatOKXMiniAppWalletInfo}})})),vn=h((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.downloadUrl=e.okxDeeplink=e.tonConnectSdkVersion=e.standardDeeplink=e.standardUniversalLink=e.NameSpaceKeyTron=e.NameSpaceKeyCosmos=e.NameSpaceKeyAptos=e.NameSpaceKeyBtc=e.NameSpaceKeySui=e.NameSpaceKeyTON=e.NameSpaceKeySOL=e.NameSpaceKeyEip155=void 0,n(fn(),e);var r=cn();Object.defineProperty(e,"NameSpaceKeyEip155",{enumerable:!0,get:function(){return r.NameSpaceKeyEip155}}),Object.defineProperty(e,"NameSpaceKeySOL",{enumerable:!0,get:function(){return r.NameSpaceKeySOL}}),Object.defineProperty(e,"NameSpaceKeyTON",{enumerable:!0,get:function(){return r.NameSpaceKeyTON}}),Object.defineProperty(e,"NameSpaceKeySui",{enumerable:!0,get:function(){return r.NameSpaceKeySui}}),Object.defineProperty(e,"NameSpaceKeyBtc",{enumerable:!0,get:function(){return r.NameSpaceKeyBtc}}),Object.defineProperty(e,"NameSpaceKeyAptos",{enumerable:!0,get:function(){return r.NameSpaceKeyAptos}}),Object.defineProperty(e,"NameSpaceKeyCosmos",{enumerable:!0,get:function(){return r.NameSpaceKeyCosmos}}),Object.defineProperty(e,"NameSpaceKeyTron",{enumerable:!0,get:function(){return r.NameSpaceKeyTron}});var i=ln();Object.defineProperty(e,"standardUniversalLink",{enumerable:!0,get:function(){return i.standardUniversalLink}}),Object.defineProperty(e,"standardDeeplink",{enumerable:!0,get:function(){return i.standardDeeplink}}),Object.defineProperty(e,"tonConnectSdkVersion",{enumerable:!0,get:function(){return i.tonConnectSdkVersion}}),Object.defineProperty(e,"okxDeeplink",{enumerable:!0,get:function(){return i.okxDeeplink}}),Object.defineProperty(e,"downloadUrl",{enumerable:!0,get:function(){return i.downloadUrl}}),n(mn(),e)})),wn=h(((e,t)=>{!function(r,i){var o="function",a="undefined",s="object",f="string",c="major",l="model",u="name",d="type",h="vendor",p="version",g="architecture",b="console",y="mobile",m="tablet",v="smarttv",w="wearable",_="embedded",E="Amazon",C="Apple",O="ASUS",x="BlackBerry",S="Browser",k="Chrome",T="Firefox",R="Google",A="Huawei",I="LG",N="Microsoft",P="Motorola",D="Opera",B="Samsung",M="Sharp",K="Sony",L="Xiaomi",U="Zebra",j="Facebook",W="Chromium OS",H="Mac OS",$=" Browser",q=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},X=function(e,t){return typeof e===f&&-1!==F(t).indexOf(F(e))},F=function(e){return e.toLowerCase()},z=function(e,t){if(typeof e===f)return e=e.replace(/^\s\s*/,""),typeof t===a?e:e.substring(0,500)},J=function(e,t){for(var n,r,a,f,c,l,u=0;u<t.length&&!c;){var d=t[u],h=t[u+1];for(n=r=0;n<d.length&&!c&&d[n];)if(c=d[n++].exec(e))for(a=0;a<h.length;a++)l=c[++r],typeof(f=h[a])===s&&f.length>0?2===f.length?typeof f[1]==o?this[f[0]]=f[1].call(this,l):this[f[0]]=f[1]:3===f.length?typeof f[1]!==o||f[1].exec&&f[1].test?this[f[0]]=l?l.replace(f[1],f[2]):i:this[f[0]]=l?f[1].call(this,l,f[2]):i:4===f.length&&(this[f[0]]=l?f[3].call(this,l.replace(f[1],f[2])):i):this[f]=l||i;u+=2}},V=function(e,t){for(var n in t)if(typeof t[n]===s&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(X(t[n][r],e))return"?"===n?i:n}else if(X(t[n],e))return"?"===n?i:n;return t.hasOwnProperty("*")?t["*"]:e},G={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Y={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[u,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[u,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[u,p],[/opios[\/ ]+([\w\.]+)/i],[p,[u,D+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[p,[u,D+" GX"]],[/\bopr\/([\w\.]+)/i],[p,[u,D]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[p,[u,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[u,p],[/quark(?:pc)?\/([-\w\.]+)/i],[p,[u,"Quark"]],[/\bddg\/([\w\.]+)/i],[p,[u,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[u,"UC"+S]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[p,[u,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[u,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[u,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[p,[u,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[p,[u,"Smart Lenovo "+S]],[/(avast|avg)\/([\w\.]+)/i],[[u,/(.+)/,"$1 Secure "+S],p],[/\bfocus\/([\w\.]+)/i],[p,[u,T+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[u,D+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[u,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[u,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[u,D+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[u,"MIUI "+S]],[/fxios\/([-\w\.]+)/i],[p,[u,T]],[/\bqihu|(qi?ho?o?|360)browser/i],[[u,"360"+$]],[/\b(qq)\/([\w\.]+)/i],[[u,/(.+)/,"$1Browser"],p],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[u,/(.+)/,"$1"+$],p],[/samsungbrowser\/([\w\.]+)/i],[p,[u,B+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[u,/_/g," "],p],[/metasr[\/ ]?([\d\.]+)/i],[p,[u,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[u,"Sogou Mobile"],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[u,p],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[u],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[u,j],p],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[u,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[u,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[p,[u,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[u,k+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[u,k+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[u,"Android "+S]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[u,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[u,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,u],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[u,[p,V,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[u,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[u,"Netscape"],p],[/(wolvic)\/([\w\.]+)/i],[u,p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[u,T+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[u,[p,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[u,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,F]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",F]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,F]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[h,B],[d,m]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[l,[h,B],[d,y]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[l,[h,C],[d,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[h,C],[d,m]],[/(macintosh);/i],[l,[h,C]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[h,M],[d,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[h,A],[d,m]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[h,A],[d,y]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[l,/_/g," "],[h,L],[d,y]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[h,L],[d,m]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[h,"OPPO"],[d,y]],[/\b(opd2\d{3}a?) bui/i],[l,[h,"OPPO"],[d,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[h,"Vivo"],[d,y]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[l,[h,"Realme"],[d,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[h,P],[d,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[h,P],[d,m]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[h,I],[d,m]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[h,I],[d,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[h,"Lenovo"],[d,m]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[h,"Nokia"],[d,y]],[/(pixel c)\b/i],[l,[h,R],[d,m]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[h,R],[d,y]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[h,K],[d,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[h,K],[d,m]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[h,"OnePlus"],[d,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[h,E],[d,m]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[h,E],[d,y]],[/(playbook);[-\w\),; ]+(rim)/i],[l,h,[d,m]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[h,x],[d,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[h,O],[d,m]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[h,O],[d,y]],[/(nexus 9)/i],[l,[h,"HTC"],[d,m]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[l,/_/g," "],[d,y]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[l,[h,"TCL"],[d,m]],[/(itel) ((\w+))/i],[[h,F],l,[d,V,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[h,"Acer"],[d,m]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[h,"Meizu"],[d,y]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[l,[h,"Ulefone"],[d,y]],[/droid.+; (a(?:015|06[35]|142p?))/i],[l,[h,"Nothing"],[d,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,l,[d,y]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,l,[d,m]],[/(surface duo)/i],[l,[h,N],[d,m]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[h,"Fairphone"],[d,y]],[/(u304aa)/i],[l,[h,"AT&T"],[d,y]],[/\bsie-(\w*)/i],[l,[h,"Siemens"],[d,y]],[/\b(rct\w+) b/i],[l,[h,"RCA"],[d,m]],[/\b(venue[\d ]{2,7}) b/i],[l,[h,"Dell"],[d,m]],[/\b(q(?:mv|ta)\w+) b/i],[l,[h,"Verizon"],[d,m]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[h,"Barnes & Noble"],[d,m]],[/\b(tm\d{3}\w+) b/i],[l,[h,"NuVision"],[d,m]],[/\b(k88) b/i],[l,[h,"ZTE"],[d,m]],[/\b(nx\d{3}j) b/i],[l,[h,"ZTE"],[d,y]],[/\b(gen\d{3}) b.+49h/i],[l,[h,"Swiss"],[d,y]],[/\b(zur\d{3}) b/i],[l,[h,"Swiss"],[d,m]],[/\b((zeki)?tb.*\b) b/i],[l,[h,"Zeki"],[d,m]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],l,[d,m]],[/\b(ns-?\w{0,9}) b/i],[l,[h,"Insignia"],[d,m]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[h,"NextBook"],[d,m]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],l,[d,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],l,[d,y]],[/\b(ph-1) /i],[l,[h,"Essential"],[d,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[h,"Envizen"],[d,m]],[/\b(trio[-\w\. ]+) b/i],[l,[h,"MachSpeed"],[d,m]],[/\btu_(1491) b/i],[l,[h,"Rotor"],[d,m]],[/(shield[\w ]+) b/i],[l,[h,"Nvidia"],[d,m]],[/(sprint) (\w+)/i],[h,l,[d,y]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[h,N],[d,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[h,U],[d,m]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[h,U],[d,y]],[/smart-tv.+(samsung)/i],[h,[d,v]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[h,B],[d,v]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,I],[d,v]],[/(apple) ?tv/i],[h,[l,C+" TV"],[d,v]],[/crkey/i],[[l,k+"cast"],[h,R],[d,v]],[/droid.+aft(\w+)( bui|\))/i],[l,[h,E],[d,v]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[h,M],[d,v]],[/(bravia[\w ]+)( bui|\))/i],[l,[h,K],[d,v]],[/(mitv-\w{5}) bui/i],[l,[h,L],[d,v]],[/Hbbtv.*(technisat) (.*);/i],[h,l,[d,v]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[h,z],[l,z],[d,v]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,v]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,l,[d,b]],[/droid.+; (shield) bui/i],[l,[h,"Nvidia"],[d,b]],[/(playstation [345portablevi]+)/i],[l,[h,K],[d,b]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[h,N],[d,b]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[l,[h,B],[d,w]],[/((pebble))app/i],[h,l,[d,w]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[l,[h,C],[d,w]],[/droid.+; (glass) \d/i],[l,[h,R],[d,w]],[/droid.+; (wt63?0{2,3})\)/i],[l,[h,U],[d,w]],[/(quest( \d| pro)?)/i],[l,[h,j],[d,w]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[d,_]],[/(aeobc)\b/i],[l,[h,E],[d,_]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[l,[d,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[d,m]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,m]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,y]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[u,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[u,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[u,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,u]],os:[[/microsoft (windows) (vista|xp)/i],[u,p],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[u,[p,V,G]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,V,G],[u,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[u,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[u,H],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,u],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[u,p],[/\(bb(10);/i],[p,[u,x]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[u,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[u,T+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[u,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[u,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[u,k+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[u,W],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[u,p],[/(sunos) ?([\w\.\d]*)/i],[[u,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[u,p]]},Z=function(e,t){if(typeof e===s&&(t=e,e=i),!(this instanceof Z))return new Z(e,t).getResult();var n=typeof r!==a&&r.navigator?r.navigator:i,b=e||(n&&n.userAgent?n.userAgent:""),v=n&&n.userAgentData?n.userAgentData:i,w=t?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2===0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(Y,t):Y,_=n&&n.userAgent==b;return this.getBrowser=function(){var e={};return e[u]=i,e[p]=i,J.call(e,b,w.browser),e[c]=function(e){return typeof e===f?e.replace(/[^\d\.]/g,"").split(".")[0]:i}(e[p]),_&&n&&n.brave&&typeof n.brave.isBrave==o&&(e[u]="Brave"),e},this.getCPU=function(){var e={};return e[g]=i,J.call(e,b,w.cpu),e},this.getDevice=function(){var e={};return e[h]=i,e[l]=i,e[d]=i,J.call(e,b,w.device),_&&!e[d]&&v&&v.mobile&&(e[d]=y),_&&"Macintosh"==e[l]&&n&&typeof n.standalone!==a&&n.maxTouchPoints&&n.maxTouchPoints>2&&(e[l]="iPad",e[d]=m),e},this.getEngine=function(){var e={};return e[u]=i,e[p]=i,J.call(e,b,w.engine),e},this.getOS=function(){var e={};return e[u]=i,e[p]=i,J.call(e,b,w.os),_&&!e[u]&&v&&v.platform&&"Unknown"!=v.platform&&(e[u]=v.platform.replace(/chrome os/i,W).replace(/macos/i,H)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return b},this.setUA=function(e){return b=typeof e===f&&e.length>500?z(e,500):e,this},this.setUA(b),this};Z.VERSION="1.0.39",Z.BROWSER=q([u,p,c]),Z.CPU=q([g]),Z.DEVICE=q([l,h,d,b,y,v,m,w,_]),Z.ENGINE=Z.OS=q([u,p]),typeof e!==a?(typeof t!==a&&t.exports&&(e=t.exports=Z),e.UAParser=Z):typeof define===o&&n.amdO?define((function(){return Z})):typeof r!==a&&(r.UAParser=Z);var Q=typeof r!==a&&(r.jQuery||r.Zepto);if(Q&&!Q.ua){var ee=new Z;Q.ua=ee.getResult(),Q.ua.get=function(){return ee.getUA()},Q.ua.set=function(e){ee.setUA(e);var t=ee.getResult();for(var n in t)Q.ua[n]=t[n]}}}("object"==typeof window?window:e)})),_n=h((e=>{var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.openLink=i,e.openLinkBlank=function(e){i(e,"_blank")},e.openDeeplinkWithFallback=function(e,t){let n=setTimeout((()=>{s("safari")||a("android")&&s("firefox")||t()}),500);window.addEventListener("blur",(()=>clearTimeout(n)),{once:!0}),i(e,"_self")},e.isMobileUserAgent=function(){let e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.slice(0,4)))&&(e=!0),e;var t},e.getUserAgent=o,e.isOS=a,e.isBrowser=s;var n=t(wn()),r=Rn();function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_self";(0,r.logDebug)("openLink",e,t),window.open(e,t,"noopener noreferrer")}function o(){var e,t,r;let i,o=(new n.default).getResult(),a=null===(e=o.os.name)||void 0===e?void 0:e.toLowerCase();switch(!0){case"ipad"===(null===(t=o.device.model)||void 0===t?void 0:t.toLowerCase()):i="ipad";break;case"ios"===a:i="ios";break;case"android"===a:i="android";break;case"mac os"===a:i="macos";break;case"linux"===a:i="linux";break;case a?.includes("windows"):i="windows"}let s,f=null===(r=o.browser.name)||void 0===r?void 0:r.toLowerCase();switch(!0){case"chrome"===f:s="chrome";break;case"firefox"===f:s="firefox";break;case f?.includes("safari"):s="safari";break;case f?.includes("opera"):s="opera"}return{os:i,browser:s}}function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(o().os)}function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(o().browser)}})),En=h((e=>{var t,n,r,i,o,a,s;Object.defineProperty(e,"__esModule",{value:!0}),e.isTmaPlatform=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(h)},e.isInTMA=g,e.isInTelegramBrowser=function(){var e;let t=!(null===(e=(0,f.getWindow)())||void 0===e||!e.TelegramWebview);return(g()||t)&&"unknown"===h},e.sendExpand=function(){y("web_app_expand",{})},e.sendOpenTelegramLink=function(e,t){let n=new URL(e);if("http:"!==n.protocol&&"https:"!==n.protocol){if(t)return t();throw new l.OKXConnectError(l.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Url protocol is not supported: ${n}`)}if("t.me"!==n.hostname){if(t)return t();throw new l.OKXConnectError(l.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Url host is not supported: ${n}`)}let r=n.pathname+n.search;b()||function(e){return v(p,e)>=0}("6.1")?y("web_app_open_tg_link",{path_full:r}):(0,u.openLinkBlank)("https://t.me"+r)},e.versionCompare=v;var f=Cn(),c=Rn(),l=vn(),u=_n(),d={};try{d=function(e){e=e.replace(/^#/,"");let t={};if(!e.length)return t;if(e.indexOf("=")<0&&e.indexOf("?")<0)return t._path=m(e),t;let n=e.indexOf("?");if(n>=0){let r=e.substr(0,n);t._path=m(r),e=e.substr(n+1)}let r=function(e){let t={};if(!e.length)return t;let n,r,i,o,a=e.split("&");for(n=0;n<a.length;n++)r=a[n].split("="),i=m(r[0]),o=null==r[1]?null:m(r[1]),t[i]=o;return t}(e);for(let i in r)t[i]=r[i];return t}(location.hash.toString())}catch{}var h="unknown";if(d?.tgWebAppPlatform&&(h=null!==(t=d.tgWebAppPlatform)&&void 0!==t?t:"unknown"),"unknown"===h){let e=(0,f.getWindow)();h=null!==(i=null===(r=null===(n=e?.Telegram)||void 0===n?void 0:n.WebApp)||void 0===r?void 0:r.platform)&&void 0!==i?i:"unknown"}var p="6.0";if(d?.tgWebAppVersion&&(p=d.tgWebAppVersion),!p){let e=(0,f.getWindow)();p=null!==(s=null===(a=null===(o=e?.Telegram)||void 0===o?void 0:o.WebApp)||void 0===a?void 0:a.version)&&void 0!==s?s:"6.0"}function g(){var e;return"unknown"!==h||!(null===(e=(0,f.getWindow)())||void 0===e||!e.TelegramWebviewProxy)}function b(){try{let e=(0,f.getWindow)();return!!e&&(null!=e.parent&&e!==e.parent)}catch{return!1}}function y(e,t){try{let n=(0,f.getWindow)();if(!n)throw new l.OKXConnectError(l.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Can't post event to parent window: window is not defined");if(void 0!==n.TelegramWebviewProxy)(0,c.logDebug)("postEvent",e,t),n.TelegramWebviewProxy.postEvent(e,JSON.stringify(t));else if(n.external&&"notify"in n.external)(0,c.logDebug)("postEvent",e,t),n.external.notify(JSON.stringify({eventType:e,eventData:t}));else{if(!b())throw new l.OKXConnectError(l.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Can't post event to TMA");{let r="*",i=JSON.stringify({eventType:e,eventData:t});(0,c.logDebug)("postEvent",e,t),n.parent.postMessage(i,r)}}}catch(n){(0,c.logError)(`Can't post event to parent window: ${n}`)}}function m(e){try{return e=e.replace(/\+/g,"%20"),decodeURIComponent(e)}catch{return e}}function v(e,t){"string"!=typeof e&&(e=""),"string"!=typeof t&&(t="");let n,r,i,o,a=e.replace(/^\s+|\s+$/g,"").split("."),s=t.replace(/^\s+|\s+$/g,"").split(".");for(n=Math.max(a.length,s.length),r=0;r<n;r++)if(i=parseInt(a[r])||0,o=parseInt(s[r])||0,i!==o)return i>o?1:-1;return 0}})),Cn=h((e=>{var t,n,r,o;Object.defineProperty(e,"__esModule",{value:!0}),e.removeUrlLastSlash=u,e.addPathToUrl=function(e,t){return u(e)+"/"+t},e.getUniversalLink=d,e.openOKXDeeplink=function(e){var t;let n=d(e),r=!(null===(t=p())||void 0===t||!t.TelegramWebviewProxy);if(i.log("openOKXDeeplink fullUrl:",n),(0,c.isIos)())h(n);else{let t=null;r?t=window.open(e,"_blank"):window.location.href=e}},e.openOKXUniversalLink=h,e.openOKXDeeplinkWithFallback=function(e){var t;let n=d(e),r=!(null===(t=p())||void 0===t||!t.TelegramWebviewProxy);i.log("openOKXDeeplinkWithFallback fullUrl:",n);let o=!1,s=a.standardUniversalLink;if(i.log("openOKXDeeplinkWithFallback standardUniversalLink:",a.standardUniversalLink),(0,c.isIos)())r?window.open(n,"_blank"):(i.log("windowOpen[before]: ",Date.now()),window?.okxLogDebug?window.open(n,"_blank"):window.open(n,"_self"),i.log("windowOpen[after]: ",Date.now()));else{let t=null;r?t=window.open(e,"_blank"):window.location.href=e,setTimeout((()=>{o||(t?t.open(s,"_self"):window.open(s,"_blank"))}),3e3),window.addEventListener("blur",(()=>{o=!0}),{once:!0}),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&(o=!0)}))}},e.getWindow=p,e.isTelegramUrl=function(e){if(!e)return!1;let t=new URL(e);return"tg:"===t.protocol||"t.me"===t.hostname},e.encodeTelegramUrlParameters=function(e){let t=e;return t=t.replace(/\./g,"%2E"),t=t.replace(/-/g,"%2D"),t=t.replace(/_/g,"%5F"),t=t.replace(/&/g,"-"),t=t.replace(/=/g,"__"),t=t.replace(/%/g,"--"),t},e.encodeConnectParams=g,e.encodeTWAConnectURLParams=b,e.getAppWalletDeepLink=function(e){return`${a.standardDeeplink}?param=${e}`},e.getAppWalletShortDeepLink=y,e.getTelegramWalletTWAUrl=m,e.openOKXTMAWalletlinkWithFallback=function(e){var t,n,r,i,o;(0,s.logDebug)("[TWA] open link:",e,"isInTMA ==> ",E()),E()?null!==(n=null===(t=p())||void 0===t?void 0:t.Telegram)&&void 0!==n&&n.WebApp?null===(o=null===(i=null===(r=p())||void 0===r?void 0:r.Telegram)||void 0===i?void 0:i.WebApp)||void 0===o||o.openTelegramLink(e):(0,l.sendOpenTelegramLink)(e):window.open(e,"_blank")},e.isInTMA=E,e.isInTelegramBrowser=function(){var e;let t=!(null===(e=p())||void 0===e||!e.TelegramWebview);return(E()||t)&&"unknown"===_},e.getOKXLink=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;if((0,s.logDebug)(`url  getOKXLink() called connectRequest==> ${JSON.stringify(e)}  useMini=> ${t}  tmaReturnUrl==> ${n}`),t)return m(b(e),n??"back");if((0,c.useShortLink)())return y(e.topic,e.clientId);{let t=g(e);return`${a.standardDeeplink}?param=${t}`}};var a=vn(),s=Rn(),f=ln(),c=Fo(),l=En();function u(e){return"/"===e.slice(-1)?e.slice(0,-1):e}function d(e){let t=encodeURIComponent(e);return i.log("getUniversalLink standardUniversalLink:",a.standardUniversalLink),`${a.standardUniversalLink}?deeplink=${t}`}function h(e){(0,c.isIos)()?E()?window.open(e,"_blank"):(i.log("windowOpen[before]: ",Date.now()),window?.okxLogDebug?window.open(e,"_blank"):window.open(e,"_self"),i.log("windowOpen[after]: ",Date.now())):window.open(e,"_blank")}function p(){if(typeof window<"u")return window}function g(e){let t=JSON.stringify(e);(0,s.logDebug)("url encodeConnectParams connectRequestStr ",t);let n=(new TextEncoder).encode(t),r=btoa(String.fromCharCode(...n));return(0,s.logDebug)("url encodeConnectParams base64Encoded ",r),r}function b(e){let t=JSON.stringify({topic:e.topic,clientId:e.clientId});(0,s.logDebug)("url encodeConnectParams connectRequestStr",t);let n=(new TextEncoder).encode(t);return btoa(String.fromCharCode(...n))}function y(e,t){return`${f.shortUniversalLink}?topic=${e}${(0,c.getLastSixMd5Hash)(t)}`}function m(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={okxconnect:"",redirect:"",extraparams:""};e&&(r.okxconnect=e),t&&(r.redirect=t);let i=JSON.stringify(r),o=(new TextEncoder).encode(i),a=btoa(String.fromCharCode(...o)),l=(0,c.toSafeBase64FromBase64)(a);return(0,s.logDebug)("[TWA] open link:",r,a),e||t?n?`http://localhost:5173?tgWebAppStartParam=${l}`:`https://t.me/${f.tgwalletName}/start?startapp=${l}`:n?"http://localhost:5173":`https://t.me/${f.tgwalletName}/start`}function v(e){try{return e=e.replace(/\+/g,"%20"),decodeURIComponent(e)}catch{return e}}var w={};try{w=function(e){let t={};if(!(e=e.replace(/^#/,"")).length)return t;if(e.indexOf("=")<0&&e.indexOf("?")<0)return t._path=v(e),t;let n=e.indexOf("?");if(n>=0){let r=e.substr(0,n);t._path=v(r),e=e.substr(n+1)}let r=function(e){let t={};if(!e.length)return t;let n,r,i,o,a=e.split("&");for(n=0;n<a.length;n++)r=a[n].split("="),i=v(r[0]),o=null==r[1]?null:v(r[1]),t[i]=o;return t}(e);for(let i in r)t[i]=r[i];return t}(location.hash.toString())}catch{}var _="unknown";if(w?.tgWebAppPlatform&&(_=null!==(t=w.tgWebAppPlatform)&&void 0!==t?t:"unknown"),"unknown"===_){let e=p();_=null!==(o=null===(r=null===(n=e?.Telegram)||void 0===n?void 0:n.WebApp)||void 0===r?void 0:r.platform)&&void 0!==o?o:"unknown"}function E(){var e;return"unknown"!==_||!(null===(e=p())||void 0===e||!e.TelegramWebviewProxy)}})),On=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};function n(e,n){return t(this,void 0,void 0,(function*(){return new Promise(((t,r)=>{var i,o;if(null!==(i=n?.signal)&&void 0!==i&&i.aborted)return void r(new Error("Delay aborted"));let a=setTimeout((()=>t()),e);null===(o=n?.signal)||void 0===o||o.addEventListener("abort",(()=>{clearTimeout(a),r(new Error("Delay aborted"))}))}))}))}Object.defineProperty(e,"__esModule",{value:!0}),e.callForSuccess=function(e,r){return t(this,void 0,void 0,(function*(){var t,i;let o=null!==(t=r?.attempts)&&void 0!==t?t:3,a=null!==(i=r?.delayMs)&&void 0!==i?i:800;if("function"!=typeof e)throw new Error("Expected a function, got "+typeof e);let s,f=0;for(;f<o;)try{return yield e()}catch(c){s=c,f++,f<o&&(yield n(a))}throw s}))},e.delay=n})),xn=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Report_WalletType_Key=e.Report_Proceed_QRCode_Click=e.Report_ChooseType_Download_Click=e.Report_ChooseType_ConnectWallet_Click=e.Report_Proceed_Retry_Click=e.Report_ChooseType_ConnectWallet_View=e.Report_Loading_ConnectWallet_View=e.Report_Proceed_QRCode_View=e.Report_Proceed_Proceed_View=void 0,e.Report_Proceed_Proceed_View="OKXConnectSDK_Proceed_Proceed_View",e.Report_Proceed_QRCode_View="OKXConnectSDK_Proceed_QRCode_View",e.Report_Loading_ConnectWallet_View="OKXConnectSDK_Loading_ConnectWallet_View",e.Report_ChooseType_ConnectWallet_View="OKXConnectSDK_ChooseType_ConnectWallet_View",e.Report_Proceed_Retry_Click="OKXConnectSDK_Proceed_Retry_Click",e.Report_ChooseType_ConnectWallet_Click="OKXConnectSDK_ChooseType_ConnectWallet_Click",e.Report_ChooseType_Download_Click="OKXConnectSDK_ChooseType_Download_Click",e.Report_Proceed_QRCode_Click="OKXConnectSDK_Proceed_QRCode_Click",e.Report_WalletType_Key="wallet_type"})),Sn=h((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.isBrowser=e.isOS=e.isMobileUserAgent=e.openDeeplinkWithFallback=e.openLinkBlank=e.openLink=e.useShortLink=e.toSafeBase64FromBase64=e.isValidObject=e.isIos=e.base64decode=e.base64encode=e.splitToUint8Arrays=e.concatUint8Arrays=e.toHexString=e.hexToByteArray=e.getOKXLink=e.openOKXUniversalLink=e.getAppWalletShortDeepLink=e.encodeTWAConnectURLParams=e.encodeConnectParams=e.openOKXTMAWalletlinkWithFallback=e.getTelegramWalletTWAUrl=e.getAppWalletDeepLink=e.encodeTelegramUrlParameters=e.isTelegramUrl=e.openOKXDeeplinkWithFallback=e.openOKXDeeplink=e.getUniversalLink=e.safeJsonStringify=e.safeJsonParse=e.getDefaultReporter=e.reportEvent=e.reportLog=e.logWarning=e.logError=e.logDebug=e.callForSuccess=void 0;var r=On();Object.defineProperty(e,"callForSuccess",{enumerable:!0,get:function(){return r.callForSuccess}});var i=Rn();Object.defineProperty(e,"logDebug",{enumerable:!0,get:function(){return i.logDebug}}),Object.defineProperty(e,"logError",{enumerable:!0,get:function(){return i.logError}}),Object.defineProperty(e,"logWarning",{enumerable:!0,get:function(){return i.logWarning}}),Object.defineProperty(e,"reportLog",{enumerable:!0,get:function(){return i.reportLog}}),Object.defineProperty(e,"reportEvent",{enumerable:!0,get:function(){return i.reportEvent}}),Object.defineProperty(e,"getDefaultReporter",{enumerable:!0,get:function(){return i.getDefaultReporter}}),n(xn(),e),n(Tn(),e);var o=An();Object.defineProperty(e,"safeJsonParse",{enumerable:!0,get:function(){return o.safeJsonParse}}),Object.defineProperty(e,"safeJsonStringify",{enumerable:!0,get:function(){return o.safeJsonStringify}});var a=Cn();Object.defineProperty(e,"getUniversalLink",{enumerable:!0,get:function(){return a.getUniversalLink}}),Object.defineProperty(e,"openOKXDeeplink",{enumerable:!0,get:function(){return a.openOKXDeeplink}}),Object.defineProperty(e,"openOKXDeeplinkWithFallback",{enumerable:!0,get:function(){return a.openOKXDeeplinkWithFallback}}),Object.defineProperty(e,"isTelegramUrl",{enumerable:!0,get:function(){return a.isTelegramUrl}}),Object.defineProperty(e,"encodeTelegramUrlParameters",{enumerable:!0,get:function(){return a.encodeTelegramUrlParameters}}),Object.defineProperty(e,"getAppWalletDeepLink",{enumerable:!0,get:function(){return a.getAppWalletDeepLink}}),Object.defineProperty(e,"getTelegramWalletTWAUrl",{enumerable:!0,get:function(){return a.getTelegramWalletTWAUrl}}),Object.defineProperty(e,"openOKXTMAWalletlinkWithFallback",{enumerable:!0,get:function(){return a.openOKXTMAWalletlinkWithFallback}}),Object.defineProperty(e,"encodeConnectParams",{enumerable:!0,get:function(){return a.encodeConnectParams}}),Object.defineProperty(e,"encodeTWAConnectURLParams",{enumerable:!0,get:function(){return a.encodeTWAConnectURLParams}}),Object.defineProperty(e,"getAppWalletShortDeepLink",{enumerable:!0,get:function(){return a.getAppWalletShortDeepLink}}),Object.defineProperty(e,"openOKXUniversalLink",{enumerable:!0,get:function(){return a.openOKXUniversalLink}}),Object.defineProperty(e,"getOKXLink",{enumerable:!0,get:function(){return a.getOKXLink}});var s=Fo();Object.defineProperty(e,"hexToByteArray",{enumerable:!0,get:function(){return s.hexToByteArray}}),Object.defineProperty(e,"toHexString",{enumerable:!0,get:function(){return s.toHexString}}),Object.defineProperty(e,"concatUint8Arrays",{enumerable:!0,get:function(){return s.concatUint8Arrays}}),Object.defineProperty(e,"splitToUint8Arrays",{enumerable:!0,get:function(){return s.splitToUint8Arrays}}),Object.defineProperty(e,"base64encode",{enumerable:!0,get:function(){return s.base64encode}}),Object.defineProperty(e,"base64decode",{enumerable:!0,get:function(){return s.base64decode}}),Object.defineProperty(e,"isIos",{enumerable:!0,get:function(){return s.isIos}}),Object.defineProperty(e,"isValidObject",{enumerable:!0,get:function(){return s.isValidObject}}),Object.defineProperty(e,"toSafeBase64FromBase64",{enumerable:!0,get:function(){return s.toSafeBase64FromBase64}}),Object.defineProperty(e,"useShortLink",{enumerable:!0,get:function(){return s.useShortLink}});var f=_n();Object.defineProperty(e,"openLink",{enumerable:!0,get:function(){return f.openLink}}),Object.defineProperty(e,"openLinkBlank",{enumerable:!0,get:function(){return f.openLinkBlank}}),Object.defineProperty(e,"openDeeplinkWithFallback",{enumerable:!0,get:function(){return f.openDeeplinkWithFallback}}),Object.defineProperty(e,"isMobileUserAgent",{enumerable:!0,get:function(){return f.isMobileUserAgent}}),Object.defineProperty(e,"isOS",{enumerable:!0,get:function(){return f.isOS}}),Object.defineProperty(e,"isBrowser",{enumerable:!0,get:function(){return f.isBrowser}})})),kn=h(((e,t)=>{!function(r){if("object"==typeof e&&typeof t<"u")t.exports=r();else if("function"==typeof define&&n.amdO)define([],r);else{(typeof window<"u"?window:typeof n.g<"u"?n.g:typeof self<"u"?self:this).localforage=r()}}((function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var f="function"==typeof u&&u;if(!s&&f)return f(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,(function(e){return i(t[a][1][e]||e)}),l,l.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof u&&u,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,r){(function(e){var n,r=e.MutationObserver||e.WebKitMutationObserver;if(r){var i=0,o=new r(l),a=e.document.createTextNode("");o.observe(a,{characterData:!0}),n=function(){a.data=i=++i%2}}else if(!e.setImmediate&&typeof e.MessageChannel<"u"){var s=new e.MessageChannel;s.port1.onmessage=l,n=function(){s.port2.postMessage(0)}}else n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};var f,c=[];function l(){f=!0;for(var e,t,n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}f=!1}t.exports=function(e){1===c.push(e)&&!f&&n()}}).call(this,typeof n.g<"u"?n.g:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(e,t,n){var r=e(1);function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],f=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,e!==i&&h(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function u(e,t,n){r((function(){var r;try{r=t(n)}catch(i){return o.reject(e,i)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}var a=p((function(){t(i,r)}));"error"===a.status&&r(a.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}t.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(i);this.state!==f?u(n,this.state===s?e:t,this.outcome):this.queue.push(new l(n,e,t));return n},l.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){u(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){o.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){u(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=p(d,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=s,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},c.reject=function(e){var t=new this(i);return o.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,f=-1,c=new this(i);++f<n;)l(e[f],f);return c;function l(e,i){t.resolve(e).then((function(e){a[i]=e,++s===n&&!r&&(r=!0,o.resolve(c,a))}),(function(e){r||(r=!0,o.reject(c,e))}))}},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=-1,s=new this(i);++a<n;)f=e[a],t.resolve(f).then((function(e){r||(r=!0,o.resolve(s,e))}),(function(e){r||(r=!0,o.reject(s,e))}));var f;return s}},{1:1}],3:[function(e,t,r){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,typeof n.g<"u"?n.g:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var o=function(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}();function a(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}typeof Promise>"u"&&e(3);var s=Promise;function f(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function c(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function l(e){return"string"!=typeof e&&(i.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function u(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var d="local-forage-detect-blob-support",h=void 0,p={},g=Object.prototype.toString,b="readonly",y="readwrite";function m(e){return"boolean"==typeof h?s.resolve(h):function(e){return new s((function(t){var n=e.transaction(d,y),r=a([""]);n.objectStore(d).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}(e).then((function(e){return h=e}))}function v(e){var t=p[e.name],n={};n.promise=new s((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function w(e){var t=p[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function _(e,t){var n=p[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function E(e,t){return new s((function(n,r){if(p[e.name]=p[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return n(e.db);v(e),e.db.close()}var a=[e.name];t&&a.push(e.version);var s=o.open.apply(o,a);t&&(s.onupgradeneeded=function(t){var n=s.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(d)}catch(r){if("ConstraintError"!==r.name)throw r;i.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),s.onerror=function(e){e.preventDefault(),r(s.error)},s.onsuccess=function(){var t=s.result;t.onversionchange=function(e){e.target.close()},n(t),w(e)}}))}function C(e){return E(e,!1)}function O(e){return E(e,!0)}function x(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==t&&i.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||n){if(n){var a=e.db.version+1;a>e.version&&(e.version=a)}return!0}return!1}function S(e){var t=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}(atob(e.data));return a([t],{type:e.type})}function k(e){return e&&e.__local_forage_encoded_blob}function T(e){var t=this,n=t._initReady().then((function(){var e=p[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return c(n,e,e),n}function R(e,t,n,r){void 0===r&&(r=1);try{var i=e.db.transaction(e.storeName,t);n(null,i)}catch(o){if(r>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return s.resolve().then((function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),O(e)})).then((function(){return function(e){v(e);for(var t=p[e.name],n=t.forages,r=0;r<n.length;r++){var i=n[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,C(e).then((function(t){return e.db=t,x(e)?O(e):t})).then((function(r){e.db=t.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r})).catch((function(t){throw _(e,t),t}))}(e).then((function(){R(e,t,n,r-1)}))})).catch(n);n(o)}}var A={_driver:"asyncStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var i=p[n.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},p[n.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=T);var o=[];function a(){return s.resolve()}for(var f=0;f<i.forages.length;f++){var c=i.forages[f];c!==t&&o.push(c._initReady().catch(a))}var l=i.forages.slice(0);return s.all(o).then((function(){return n.db=i.db,C(n)})).then((function(e){return n.db=e,x(n,t._defaultConfig.version)?O(n):e})).then((function(e){n.db=i.db=e,t._dbInfo=n;for(var r=0;r<l.length;r++){var o=l[r];o!==t&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}}))},_support:function(){try{if(!o||!o.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}(),iterate:function(e,t){var n=this,r=new s((function(t,r){n.ready().then((function(){R(n._dbInfo,b,(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;k(r)&&(r=S(r));var i=e(r,n.key,s++);void 0!==i?t(i):n.continue()}else t()},a.onerror=function(){r(a.error)}}catch(f){r(f)}}))})).catch(r)}));return f(r,t),r},getItem:function(e,t){var n=this;e=l(e);var r=new s((function(t,r){n.ready().then((function(){R(n._dbInfo,b,(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),k(e)&&(e=S(e)),t(e)},a.onerror=function(){r(a.error)}}catch(s){r(s)}}))})).catch(r)}));return f(r,t),r},setItem:function(e,t,n){var r=this;e=l(e);var i=new s((function(n,i){var o;r.ready().then((function(){return o=r._dbInfo,"[object Blob]"===g.call(t)?m(o.db).then((function(e){return e?t:function(e){return new s((function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}(t)})):t})).then((function(t){R(r._dbInfo,y,(function(o,a){if(o)return i(o);try{var s=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var f=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){var e=f.error?f.error:f.transaction.error;i(e)}}catch(c){i(c)}}))})).catch(i)}));return f(i,n),i},removeItem:function(e,t){var n=this;e=l(e);var r=new s((function(t,r){n.ready().then((function(){R(n._dbInfo,y,(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){r(a.error)},o.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(s){r(s)}}))})).catch(r)}));return f(r,t),r},clear:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){R(t._dbInfo,y,(function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=o.error?o.error:o.transaction.error;n(e)}}catch(a){n(a)}}))})).catch(n)}));return f(n,e),n},length:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){R(t._dbInfo,b,(function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){n(o.error)}}catch(a){n(a)}}))})).catch(n)}));return f(n,e),n},key:function(e,t){var n=this,r=new s((function(t,r){e<0?t(null):n.ready().then((function(){R(n._dbInfo,b,(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName),s=!1,f=a.openKeyCursor();f.onsuccess=function(){var n=f.result;n?0===e||s?t(n.key):(s=!0,n.advance(e)):t(null)},f.onerror=function(){r(f.error)}}catch(c){r(c)}}))})).catch(r)}));return f(r,t),r},keys:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){R(t._dbInfo,b,(function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];o.onsuccess=function(){var t=o.result;t?(a.push(t.key),t.continue()):e(a)},o.onerror=function(){n(o.error)}}catch(s){n(s)}}))})).catch(n)}));return f(n,e),n},dropInstance:function(e,t){t=u.apply(this,arguments);var n,r=this.config();if((e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName),e.name){var a=e.name===r.name&&this._dbInfo.db?s.resolve(this._dbInfo.db):C(e).then((function(t){var n=p[e.name],r=n.forages;n.db=t;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=t;return t}));n=e.storeName?a.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;v(e);var r=p[e.name],i=r.forages;t.close();for(var a=0;a<i.length;a++){var f=i[a];f._dbInfo.db=null,f._dbInfo.version=n}return new s((function(t,r){var i=o.open(e.name,n);i.onerror=function(e){i.result.close(),r(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<i.length;t++){var n=i[t];n._dbInfo.db=e,w(n._dbInfo)}})).catch((function(t){throw(_(e,t)||s.resolve()).catch((function(){})),t}))}})):a.then((function(t){v(e);var n=p[e.name],r=n.forages;t.close();for(var a=0;a<r.length;a++){r[a]._dbInfo.db=null}return new s((function(t,n){var r=o.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){i.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<r.length;t++){w(r[t]._dbInfo)}})).catch((function(t){throw(_(e,t)||s.resolve()).catch((function(){})),t}))}))}else n=s.reject("Invalid arguments");return f(n,t),n}};var I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=/^~~local_forage_type~([^~]+)~/,P="__lfsc__:",D="arbf",B="blob",M="si08",K="ui08",L="uic8",U="si16",j="si32",W="ur16",H="ui32",$="fl32",q="fl64",X=Object.prototype.toString;function F(e){var t,n,r,i,o,a=.75*e.length,s=e.length,f=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var c=new ArrayBuffer(a),l=new Uint8Array(c);for(t=0;t<s;t+=4)n=I.indexOf(e[t]),r=I.indexOf(e[t+1]),i=I.indexOf(e[t+2]),o=I.indexOf(e[t+3]),l[f++]=n<<2|r>>4,l[f++]=(15&r)<<4|i>>2,l[f++]=(3&i)<<6|63&o;return c}function z(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=I[n[t]>>2],r+=I[(3&n[t])<<4|n[t+1]>>4],r+=I[(15&n[t+1])<<2|n[t+2]>>6],r+=I[63&n[t+2]];return n.length%3===2?r=r.substring(0,r.length-1)+"=":n.length%3===1&&(r=r.substring(0,r.length-2)+"=="),r}var J={serialize:function(e,t){var n="";if(e&&(n=X.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===X.call(e.buffer))){var r,o=P;e instanceof ArrayBuffer?(r=e,o+=D):(r=e.buffer,"[object Int8Array]"===n?o+=M:"[object Uint8Array]"===n?o+=K:"[object Uint8ClampedArray]"===n?o+=L:"[object Int16Array]"===n?o+=U:"[object Uint16Array]"===n?o+=W:"[object Int32Array]"===n?o+=j:"[object Uint32Array]"===n?o+=H:"[object Float32Array]"===n?o+=$:"[object Float64Array]"===n?o+=q:t(new Error("Failed to get type for BinaryArray"))),t(o+z(r))}else if("[object Blob]"===n){var a=new FileReader;a.onload=function(){var n="~~local_forage_type~"+e.type+"~"+z(this.result);t(P+B+n)},a.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(s){i.error("Couldn't convert value into a JSON string: ",e),t(null,s)}},deserialize:function(e){if(e.substring(0,9)!==P)return JSON.parse(e);var t,n=e.substring(13),r=e.substring(9,13);if(r===B&&N.test(n)){var i=n.match(N);t=i[1],n=n.substring(i[0].length)}var o=F(n);switch(r){case D:return o;case B:return a([o],{type:t});case M:return new Int8Array(o);case K:return new Uint8Array(o);case L:return new Uint8ClampedArray(o);case U:return new Int16Array(o);case W:return new Uint16Array(o);case j:return new Int32Array(o);case H:return new Uint32Array(o);case $:return new Float32Array(o);case q:return new Float64Array(o);default:throw new Error("Unkown type: "+r)}},stringToBuffer:F,bufferToString:z};function V(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function G(e,t,n,r,i,o){e.executeSql(n,r,i,(function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?o(e,a):V(e,t,(function(){e.executeSql(n,r,i,o)}),o)}),o):o(e,a)}),o)}function Y(e,t,n,r){var i=this;e=l(e);var o=new s((function(o,a){i.ready().then((function(){void 0===t&&(t=null);var s=t,f=i._dbInfo;f.serializer.serialize(t,(function(t,c){c?a(c):f.db.transaction((function(n){G(n,f,"INSERT OR REPLACE INTO "+f.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){o(s)}),(function(e,t){a(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void o(Y.apply(i,[e,s,n,r-1]));a(t)}}))}))})).catch(a)}));return f(o,n),o}var Z={_driver:"webSQLStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var i=new s((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(i){return r(i)}n.db.transaction((function(i){V(i,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=J,i},_support:"function"==typeof openDatabase,iterate:function(e,t){var n=this,r=new s((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){G(n,i,"SELECT * FROM "+i.storeName,[],(function(n,r){for(var o=r.rows,a=o.length,s=0;s<a;s++){var f=o.item(s),c=f.value;if(c&&(c=i.serializer.deserialize(c)),void 0!==(c=e(c,f.key,s+1)))return void t(c)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return f(r,t),r},getItem:function(e,t){var n=this;e=l(e);var r=new s((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){G(n,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return f(r,t),r},setItem:function(e,t,n){return Y.apply(this,[e,t,n,1])},removeItem:function(e,t){var n=this;e=l(e);var r=new s((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){G(n,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return f(r,t),r},clear:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){G(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return f(n,e),n},length:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){G(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return f(n,e),n},key:function(e,t){var n=this,r=new s((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){G(n,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return f(r,t),r},keys:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){G(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return f(n,e),n},dropInstance:function(e,t){t=u.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,i=this;return f(r=e.name?new s((function(t){var r;r=e.name===n.name?i._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(function(e){return new s((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var i=[],o=0;o<r.rows.length;o++)i.push(r.rows.item(o).name);t({db:e,storeNames:i})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}(r))})).then((function(e){return new s((function(t,n){e.db.transaction((function(r){function i(e){return new s((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var o=[],a=0,f=e.storeNames.length;a<f;a++)o.push(i(e.storeNames[a]));s.all(o).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):s.reject("Invalid arguments"),t),r}};function Q(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function ee(){return!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}()||localStorage.length>0}var te={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=Q(e,this._defaultConfig),ee()?(this._dbInfo=t,t.serializer=J,s.resolve()):s.reject()},_support:function(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}(),iterate:function(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,i=r.length,o=localStorage.length,a=1,s=0;s<o;s++){var f=localStorage.key(s);if(0===f.indexOf(r)){var c=localStorage.getItem(f);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,f.substring(i),a++)))return c}}}));return f(r,t),r},getItem:function(e,t){var n=this;e=l(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return f(r,t),r},setItem:function(e,t,n){var r=this;e=l(e);var i=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new s((function(i,o){var a=r._dbInfo;a.serializer.serialize(t,(function(t,r){if(r)o(r);else try{localStorage.setItem(a.keyPrefix+e,t),i(n)}catch(s){("QuotaExceededError"===s.name||"NS_ERROR_DOM_QUOTA_REACHED"===s.name)&&o(s),o(s)}}))}))}));return f(i,n),i},removeItem:function(e,t){var n=this;e=l(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return f(r,t),r},clear:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return f(n,e),n},length:function(e){var t=this.keys().then((function(e){return e.length}));return f(t,e),t},key:function(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch{t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return f(r,t),r},keys:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var o=localStorage.key(i);0===o.indexOf(e.keyPrefix)&&r.push(o.substring(e.keyPrefix.length))}return r}));return f(n,e),n},dropInstance:function(e,t){if(t=u.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,i=this;return f(r=e.name?new s((function(t){e.storeName?t(Q(e,i._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):s.reject("Invalid arguments"),t),r}},ne=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},re=function(e,t){for(var n=e.length,r=0;r<n;){if(ne(e[r],t))return!0;r++}return!1},ie=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},oe={},ae={},se={INDEXEDDB:A,WEBSQL:Z,LOCALSTORAGE:te},fe=[se.INDEXEDDB._driver,se.WEBSQL._driver,se.LOCALSTORAGE._driver],ce=["dropInstance"],le=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ce),ue={description:"",driver:fe.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function de(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function he(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(ie(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var pe=function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),se)if(se.hasOwnProperty(n)){var r=se[n],i=r._driver;this[n]=i,oe[i]||this.defineDriver(r)}this._defaultConfig=he({},ue),this._config=he({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(typeof e>"u"?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new s((function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(o);for(var a=le.concat("_initStorage"),c=0,l=a.length;c<l;c++){var u=a[c];if((!re(ce,u)||e[u])&&"function"!=typeof e[u])return void n(o)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=s.reject(t);return f(n,arguments[arguments.length-1]),n}},n=0,r=ce.length;n<r;n++){var i=ce[n];e[i]||(e[i]=t(i))}}();var d=function(n){oe[r]&&i.info("Redefining LocalForage driver: "+r),oe[r]=e,ae[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(d,n):d(!!e._support):d(!0)}catch(h){n(h)}}));return c(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=oe[e]?s.resolve(oe[e]):s.reject(new Error("Driver not found."));return c(r,t,n),r},e.prototype.getSerializer=function(e){var t=s.resolve(J);return c(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return c(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;ie(e)||(e=[e]);var i=this._getSupportedDrivers(e);function o(){r._config.driver=r.driver()}function a(e){return r._extend(e),o(),r._ready=r._initStorage(r._config),r._ready}var f=null!==this._driverSet?this._driverSet.catch((function(){return s.resolve()})):s.resolve();return this._driverSet=f.then((function(){var e=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,o(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(e){return function(){var t=0;return function n(){for(;t<e.length;){var i=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(i).then(a).catch(n)}o();var f=new Error("No available storage method found.");return r._driverSet=s.reject(f),r._driverSet}()}}(i)}))})).catch((function(){o();var e=new Error("No available storage method found.");return r._driverSet=s.reject(e),r._driverSet})),c(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!ae[e]},e.prototype._extend=function(e){he(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=le.length;e<t;e++)de(this,le[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),ge=new pe;t.exports=ge},{3:3}]},{},[4])(4)}))})),Tn=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))},n=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.OKXReporter=e.OKXReportSide=e.OKXReportType=e.versionStr=void 0;var r=n(an()),o=Rn(),a=Cn(),s=Sn(),f=n(kn()),c=n(O());e.versionStr="0.3.1-beta.10";var l=["https://www.okx.com/dappstat/wallet-connect","https://www.okx.ac/dappstat/wallet-connect"],u="OKX_RP_UUID_CK",d={headers:{Accept:"*/*","Content-Type":"text/plain"},method:"POST"};e.OKXReportType={PAGE_IN:"page_in",PAGE_OUT:"page_out",CLICK:"click",LOG:"log"},e.OKXReportSide={DAPP:"dapp",WALLET:"wallet"};e.OKXReporter=class{constructor(){this.currentSide=e.OKXReportSide.DAPP,this.currentVersion=e.versionStr,this.storage=f.default.createInstance({name:"OKXReporter"}),this.recordList=new Array,this.currentUUID=(0,s.toHexString)(c.default.randomBytes(16))}configVersionAndSide(e,t,n){this.currentVersion=e,this.currentSide=t,this.appName=n}get recordCacheKey(){return"OKX_RP_CK@"+this.appName}get reportPlatform(){return(0,s.isMobileUserAgent)()?(0,s.isIos)()?"iOS":"android":"pc"}beginReport(){return t(this,void 0,void 0,(function*(){this.startErrorCatching();let e=yield this.storage.getItem(this.recordCacheKey),t=yield this.storage.getItem(u);t?this.currentUUID=t:this.storage.setItem(u,this.currentUUID),e&&(this.recordList=e,(0,o.logDebug)("resume records from cache length: ",this.recordList.length),yield this.sendCachedRecords())}))}startErrorCatching(){(0,a.getWindow)()&&(0,o.logDebug)("begin capture console error")}cachedErrors(){return this.recordList}sendRecord(e){return t(this,void 0,void 0,(function*(){return new Promise(((n,a)=>t(this,void 0,void 0,(function*(){try{let s=JSON.stringify(e);(0,o.logDebug)("[REPORT] record: ",s);let f=yield function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return t(void 0,[e,...o],void 0,(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return function*(){for(let a of e)try{let e=new AbortController,i=e.signal,o=(0,r.default)(a,Object.assign(Object.assign({},t),{signal:i})),s=new Promise(((t,r)=>setTimeout((()=>{e.abort(),r(new Error("Request timed out"))}),n))),f=yield Promise.race([o,s]);if(f.ok)return f}catch(o){i.error(`Fetch error for ${a}:`,o)}throw new Error("All fetch attempts failed.")}()}))}(l,Object.assign(Object.assign({},d),{body:s}));(0,o.logDebug)("[REPORT] get rsp:",f),f&&f.status&&200==f.status?(this.recordList=this.recordList.filter((t=>t.timestamp!=e.timestamp||t.content!=e.content)),yield this.storage.setItem(this.recordCacheKey,this.recordList),n(!0)):a(!1)}catch(s){(0,o.logDebug)("send record error:",s),a(s)}}))))}))}sendRecordContent(e,n,r){return t(this,void 0,void 0,(function*(){var t,i,o;let s=null===(t=(0,a.getWindow)())||void 0===t?void 0:t.location.href,f=null===(i=(0,a.getWindow)())||void 0===i?void 0:i.navigator.language,c=null===(o=(0,a.getWindow)())||void 0===o?void 0:o.navigator.userAgent,l=this.reportPlatform,u={uuid:this.currentUUID,version:this.currentVersion,content:e,action:r,side:this.currentSide,timestamp:(new Date).getTime(),url:s,lang:f,type:n,platform:l,"user-agent":c};yield this.markRecordItem(u),yield this.sendRecord(u)}))}sendCachedRecords(){return t(this,void 0,void 0,(function*(){return new Promise(((e,n)=>t(this,void 0,void 0,(function*(){let t=this.recordList.map((e=>this.sendRecord(e)));(0,o.logDebug)("[REPORT] submit & clean recorded caches begin @",(new Date).toUTCString()),Promise.allSettled(t).then((t=>{(0,o.logDebug)("[REPORT] submit & clean recorded caches ends @",(new Date).toUTCString());let r=[];t.forEach(((e,t)=>{"rejected"==e.status&&r.push(t)})),this.recordList=this.recordList.filter(((e,t)=>!r.includes(t))),this.storage.setItem(this.recordCacheKey,this.recordList).then((function(t){e()})).catch((function(e){n(e)}))}))}))))}))}markRecordItem(e){return t(this,void 0,void 0,(function*(){if(this.recordList.push(e),this.recordList.length>100){let e=this.recordList.length-100;this.recordList.splice(0,e)}return new Promise(((t,n)=>{this.storage.setItem(this.recordCacheKey,this.recordList).then((function(n){t(e)})).catch((function(e){n(e)}))}))}))}markRecord(e,n,r,i){return t(this,void 0,void 0,(function*(){var t,o,s;let f=null===(t=(0,a.getWindow)())||void 0===t?void 0:t.location.href,c=null===(o=(0,a.getWindow)())||void 0===o?void 0:o.navigator.language,l=this.reportPlatform,u=null===(s=(0,a.getWindow)())||void 0===s?void 0:s.navigator.userAgent,d={uuid:this.currentUUID,version:this.currentVersion,content:e,action:r,side:i,timestamp:(new Date).getTime(),url:f,lang:c,type:n,platform:l,"user-agent":u};return yield this.markRecordItem(d)}))}}})),Rn=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultReporter=function(){return a},e.logDebug=function(){if(typeof i<"u")try{for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];(n||window?.okxLogDebug)&&i.log("[OKX_CONNECT_SDK]",...t)}catch{}},e.logError=function(){if(typeof i<"u")try{for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];if((n||window?.okxLogDebug)&&i.error("[OKX_CONNECT_SDK]",...t),r||!n){let e="";e+=[...t].reduce(((e,t)=>{"string"==typeof t?","+t:"object"==typeof t&&JSON.stringify(t)})),a.sendRecordContent(e,o.OKXReportType.LOG,"")}}catch{}},e.logWarning=function(){if(typeof i<"u")try{for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];(n||window?.okxLogDebug)&&i.warn("[OKX_CONNECT_SDK]",...t)}catch{}},e.reportEvent=function(e,n,r){return t(this,void 0,void 0,(function*(){yield a.sendRecordContent(r,e,n)}))},e.reportLog=function(e){return t(this,arguments,void 0,(function(e){return function*(){}()}))};var n=!1,r=!1,o=Tn(),a=new o.OKXReporter})),An=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.safeJsonParse=function(e){if("string"!=typeof e)throw(0,t.logDebug)(e),new Error("Cannot safe json parse value of type "+typeof e);try{return r(e)}catch(n){return i.error("safeJsonParse error:",n),e}},e.safeJsonStringify=function(e){return"string"==typeof e?e:n(e)||""};var t=Rn(),n=e=>JSON.stringify(e,((e,t)=>"bigint"==typeof t?t.toString()+"n":t)),r=e=>{let t=e.replace(/:(\b\d{17,}|\b(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))(?=[,\}\]]|$)/g,(e=>`"${e}n"`));return JSON.parse(t,((e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t))}}));function In(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),a=o.charCodeAt(0);if(255!==n[a])throw new TypeError(o+" is ambiguous");n[a]=i}var s=e.length,f=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function u(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,i=0;e[t]===f;)r++,t++;for(var o=(e.length-t)*c+1>>>0,a=new Uint8Array(o);e[t];){var l=n[e.charCodeAt(t)];if(255===l)return;for(var u=0,d=o-1;(0!==l||u<i)&&-1!==d;d--,u++)l+=s*a[d]>>>0,a[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=u,t++}if(" "!==e[t]){for(var h=o-i;h!==o&&0===a[h];)h++;for(var p=new Uint8Array(r+(o-h)),g=r;h!==o;)p[g++]=a[h++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,i=0,o=t.length;i!==o&&0===t[i];)i++,n++;for(var a=(o-i)*l+1>>>0,c=new Uint8Array(a);i!==o;){for(var u=t[i],d=0,h=a-1;(0!==u||d<r)&&-1!==h;h--,d++)u+=256*c[h]>>>0,c[h]=u%s>>>0,u=u/s>>>0;if(0!==u)throw new Error("Non-zero carry");r=d,i++}for(var p=a-r;p!==a&&0===c[p];)p++;for(var g=f.repeat(n);p<a;++p)g+=e.charAt(c[p]);return g},decodeUnsafe:u,decode:function(e){var n=u(e);if(n)return n;throw new Error(`Non-${t} character`)}}}var Nn,Pn=d((()=>{Nn=In})),Dn={};p(Dn,{coerce:()=>Un,empty:()=>Bn,equals:()=>Ln,fromHex:()=>Kn,fromString:()=>Wn,isBinary:()=>jn,toHex:()=>Mn,toString:()=>Hn});var Bn,Mn,Kn,Ln,Un,jn,Wn,Hn,$n,qn,Xn,Fn,zn,Jn,Vn,Gn,Yn,Zn=d((()=>{Bn=new Uint8Array(0),Mn=e=>e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),""),Kn=e=>{let t=e.match(/../g);return t?new Uint8Array(t.map((e=>parseInt(e,16)))):Bn},Ln=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0},Un=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},jn=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),Wn=e=>(new TextEncoder).encode(e),Hn=e=>(new TextDecoder).decode(e)})),Qn=d((()=>{Pn(),Zn(),$n=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},qn=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseDecode=n}decode(e){if("string"==typeof e){if(e[0]===this.prefix)return this.baseDecode(e.slice(1));throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}throw Error("Can only multibase decode strings")}or(e){let t={[this.prefix]:this,...e.decoders||{[e.prefix]:e}};return new Xn(t)}},Xn=class e{constructor(e){this.decoders=e}or(t){let n=t.decoders||{[t.prefix]:t};return new e({...this.decoders,...n})}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Fn=class{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new $n(e,t,n),this.decoder=new qn(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},zn=e=>{let{name:t,prefix:n,encode:r,decode:i}=e;return new Fn(t,n,r,i)},Jn=e=>{let{prefix:t,name:n,alphabet:r}=e,{encode:i,decode:o}=Nn(r,n);return zn({prefix:t,name:n,encode:i,decode:e=>Un(o(e))})},Vn=(e,t,n,r)=>{let i={};for(let l=0;l<t.length;++l)i[t[l]]=l;let o=e.length;for(;"="===e[o-1];)--o;let a=new Uint8Array(o*n/8|0),s=0,f=0,c=0;for(let l=0;l<o;++l){let t=i[e[l]];if(void 0===t)throw new SyntaxError(`Non-${r} character`);f=f<<n|t,s+=n,s>=8&&(s-=8,a[c++]=255&f>>s)}if(s>=n||255&f<<8-s)throw new SyntaxError("Unexpected end of data");return a},Gn=(e,t,n)=>{let r="="===t[t.length-1],i=(1<<n)-1,o="",a=0,s=0;for(let f=0;f<e.length;++f)for(s=s<<8|e[f],a+=8;a>n;)a-=n,o+=t[i&s>>a];if(a&&(o+=t[i&s<<n-a]),r)for(;o.length*n&7;)o+="=";return o},Yn=e=>{let{name:t,prefix:n,bitsPerChar:r,alphabet:i}=e;return zn({prefix:n,name:t,encode:e=>Gn(e,i,r),decode:e=>Vn(e,i,r,t)})}})),er={};p(er,{identity:()=>tr});var tr,nr=d((()=>{Qn(),Zn(),tr=zn({prefix:"\0",name:"identity",encode:e=>Hn(e),decode:e=>Wn(e)})})),rr={};p(rr,{base2:()=>ir});var ir,or=d((()=>{Qn(),ir=Yn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})})),ar={};p(ar,{base8:()=>sr});var sr,fr=d((()=>{Qn(),sr=Yn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})})),cr={};p(cr,{base10:()=>lr});var lr,ur=d((()=>{Qn(),lr=Jn({prefix:"9",name:"base10",alphabet:"0123456789"})})),dr={};p(dr,{base16:()=>hr,base16upper:()=>pr});var hr,pr,gr=d((()=>{Qn(),hr=Yn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),pr=Yn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})})),br={};p(br,{base32:()=>yr,base32hex:()=>_r,base32hexpad:()=>Cr,base32hexpadupper:()=>Or,base32hexupper:()=>Er,base32pad:()=>vr,base32padupper:()=>wr,base32upper:()=>mr,base32z:()=>xr});var yr,mr,vr,wr,_r,Er,Cr,Or,xr,Sr=d((()=>{Qn(),yr=Yn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),mr=Yn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),vr=Yn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),wr=Yn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),_r=Yn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Er=Yn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Cr=Yn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Or=Yn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),xr=Yn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})})),kr={};p(kr,{base36:()=>Tr,base36upper:()=>Rr});var Tr,Rr,Ar=d((()=>{Qn(),Tr=Jn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Rr=Jn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})})),Ir={};p(Ir,{base58btc:()=>Nr,base58flickr:()=>Pr});var Nr,Pr,Dr=d((()=>{Qn(),Nr=Jn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Pr=Jn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})})),Br={};p(Br,{base64:()=>Mr,base64pad:()=>Kr,base64url:()=>Lr,base64urlpad:()=>Ur});var Mr,Kr,Lr,Ur,jr=d((()=>{Qn(),Mr=Yn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Kr=Yn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Lr=Yn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ur=Yn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})}));function Wr(e,t,n){t=t||[];for(var r=n=n||0;e>=Fr;)t[n++]=255&e|qr,e/=128;for(;e&Xr;)t[n++]=255&e|qr,e>>>=7;return t[n]=0|e,Wr.bytes=n-r+1,t}function Hr(e,t){var n,r=0,i=0,o=t=t||0,a=e.length;do{if(o>=a)throw Hr.bytes=0,new RangeError("Could not decode varint");n=e[o++],r+=i<28?(n&Vr)<<i:(n&Vr)*Math.pow(2,i),i+=7}while(n>=Jr);return Hr.bytes=o-t,r}var $r,qr,Xr,Fr,zr,Jr,Vr,Gr,Yr,Zr,Qr,ei,ti,ni,ri,ii,oi,ai=d((()=>{$r=Wr,qr=128,Xr=-128,Fr=Math.pow(2,31),zr=Hr,Jr=128,Vr=127,Gr=Math.pow(2,7),Yr=Math.pow(2,14),Zr=Math.pow(2,21),Qr=Math.pow(2,28),ei=Math.pow(2,35),ti=Math.pow(2,42),ni=Math.pow(2,49),ri=Math.pow(2,56),ii=Math.pow(2,63),oi={encode:$r,decode:zr,encodingLength:function(e){return e<Gr?1:e<Yr?2:e<Zr?3:e<Qr?4:e<ei?5:e<ti?6:e<ni?7:e<ri?8:e<ii?9:10}}})),si={};p(si,{decode:()=>fi,encodeTo:()=>ci,encodingLength:()=>li});var fi,ci,li,ui=d((()=>{ai(),fi=e=>[oi.decode(e),oi.decode.bytes],ci=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return oi.encode(e,t,n),t},li=e=>oi.encodingLength(e)})),di={};p(di,{Digest:()=>bi,create:()=>hi,decode:()=>pi,equals:()=>gi});var hi,pi,gi,bi,yi=d((()=>{Zn(),ui(),hi=(e,t)=>{let n=t.byteLength,r=li(e),i=r+li(n),o=new Uint8Array(i+n);return ci(e,o,0),ci(n,o,r),o.set(t,i),new bi(e,n,t,o)},pi=e=>{let t=Un(e),[n,r]=fi(t),[i,o]=fi(t.subarray(r)),a=t.subarray(r+o);if(a.byteLength!==i)throw new Error("Incorrect length");return new bi(n,i,a,t)},gi=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&Ln(e.bytes,t.bytes),bi=class{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}}})),mi={};p(mi,{Hasher:()=>wi,from:()=>vi});var vi,wi,_i=d((()=>{yi(),vi=e=>{let{name:t,code:n,encode:r}=e;return new wi(t,n,r)},wi=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}async digest(e){if(e instanceof Uint8Array){let t=await this.encode(e);return hi(this.code,t)}throw Error("Unknown type, must be binary type")}}})),Ei={};p(Ei,{sha256:()=>Oi,sha512:()=>xi});var Ci,Oi,xi,Si=d((()=>{_i(),Oi=vi({name:"sha2-256",code:18,encode:(Ci=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)))("SHA-256")}),xi=vi({name:"sha2-512",code:19,encode:Ci("SHA-512")})})),ki={};p(ki,{identity:()=>Ti});var Ti,Ri=d((()=>{_i(),Zn(),Ti=vi({name:"identity",code:0,encode:e=>Un(e)})})),Ai={};p(Ai,{code:()=>Pi,decode:()=>Bi,encode:()=>Di,name:()=>Ni});var Ii,Ni,Pi,Di,Bi,Mi=d((()=>{Zn(),Ii=e=>Un(e),({name:Ni,code:Pi,encode:Di,decode:Bi}={name:"raw",code:85,decode:Ii,encode:Ii})})),Ki={};p(Ki,{code:()=>Ui,decode:()=>Wi,encode:()=>ji,name:()=>Li});var Li,Ui,ji,Wi,Hi,$i,qi,Xi,Fi,zi,Ji,Vi,Gi,Yi,Zi,Qi,eo=d((()=>{({name:Li,code:Ui,encode:ji,decode:Wi}={name:"json",code:512,encode:e=>(new TextEncoder).encode(JSON.stringify(e)),decode:e=>JSON.parse((new TextDecoder).decode(e))})})),to=d((()=>{ui(),yi(),Dr(),Sr(),Zn(),Hi=class e{constructor(e,t,n,r){this.code=t,this.version=e,this.multihash=n,this.bytes=r,this.byteOffset=r.byteOffset,this.byteLength=r.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Yi,byteLength:Yi,code:Gi,version:Gi,multihash:Gi,bytes:Gi,_baseCache:Yi,asCID:Yi})}toV0(){if(0===this.version)return this;{let{code:t,multihash:n}=this;if(t!==Fi)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(n.code!==zi)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return e.createV0(n)}}toV1(){switch(this.version){case 0:{let{code:t,digest:n}=this.multihash,r=hi(t,n);return e.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&gi(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:r}=this;return 0===n?qi(t,r,e||Nr.encoder):Xi(t,r,e||yr.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return Zi(/^0\.0/,Qi),!(!e||!e[Vi]&&e.asCID!==e)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof e)return t;if(null!=t&&t.asCID===t){let{version:n,code:r,multihash:i,bytes:o}=t;return new e(n,r,i,o||Ji(n,r,i.bytes))}if(null!=t&&!0===t[Vi]){let{version:n,multihash:r,code:i}=t,o=pi(r);return e.create(n,i,o)}return null}static create(t,n,r){if("number"!=typeof n)throw new Error("String codecs are no longer supported");switch(t){case 0:if(n!==Fi)throw new Error(`Version 0 CID must use dag-pb (code: ${Fi}) block encoding`);return new e(t,n,r,r.bytes);case 1:{let i=Ji(t,n,r.bytes);return new e(t,n,r,i)}default:throw new Error("Invalid version")}}static createV0(t){return e.create(0,Fi,t)}static createV1(t,n){return e.create(1,t,n)}static decode(t){let[n,r]=e.decodeFirst(t);if(r.length)throw new Error("Incorrect length");return n}static decodeFirst(t){let n=e.inspectBytes(t),r=n.size-n.multihashSize,i=Un(t.subarray(r,r+n.multihashSize));if(i.byteLength!==n.multihashSize)throw new Error("Incorrect length");let o=i.subarray(n.multihashSize-n.digestSize),a=new bi(n.multihashCode,n.digestSize,o,i);return[0===n.version?e.createV0(a):e.createV1(n.codec,a),t.subarray(n.size)]}static inspectBytes(e){let t=0,n=()=>{let[n,r]=fi(e.subarray(t));return t+=r,n},r=n(),i=Fi;if(18===r?(r=0,t=0):1===r&&(i=n()),0!==r&&1!==r)throw new RangeError(`Invalid CID version ${r}`);let o=t,a=n(),s=n(),f=t+s;return{version:r,codec:i,multihashCode:a,digestSize:s,multihashSize:f-o,size:f}}static parse(t,n){let[r,i]=$i(t,n),o=e.decode(i);return o._baseCache.set(r,t),o}},$i=(e,t)=>{switch(e[0]){case"Q":{let n=t||Nr;return[Nr.prefix,n.decode(`${Nr.prefix}${e}`)]}case Nr.prefix:{let n=t||Nr;return[Nr.prefix,n.decode(e)]}case yr.prefix:{let n=t||yr;return[yr.prefix,n.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},qi=(e,t,n)=>{let{prefix:r}=n;if(r!==Nr.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);let i=t.get(r);if(null==i){let i=n.encode(e).slice(1);return t.set(r,i),i}return i},Xi=(e,t,n)=>{let{prefix:r}=n,i=t.get(r);if(null==i){let i=n.encode(e);return t.set(r,i),i}return i},Fi=112,zi=18,Ji=(e,t,n)=>{let r=li(e),i=r+li(t),o=new Uint8Array(i+n.byteLength);return ci(e,o,0),ci(t,o,r),o.set(n,i),o},Vi=Symbol.for("@ipld/js-cid/CID"),Gi={writable:!1,configurable:!1,enumerable:!0},Yi={writable:!1,enumerable:!1,configurable:!1},Zi=(e,t)=>{if(!e.test("0.0.0-dev"))throw new Error(t);i.warn(t)},Qi="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n"})),no=d((()=>{to(),ui(),Zn(),_i(),yi()})),ro={};p(ro,{CID:()=>Hi,bases:()=>io,bytes:()=>Dn,codecs:()=>ao,digest:()=>di,hasher:()=>mi,hashes:()=>oo,varint:()=>si});var io,oo,ao,so=d((()=>{nr(),or(),fr(),ur(),gr(),Sr(),Ar(),Dr(),jr(),Si(),Ri(),Mi(),eo(),no(),io={...er,...rr,...ar,...cr,...dr,...br,...kr,...Ir,...Br},oo={...Ei,...ki},ao={raw:Ai,json:Ki}})),fo=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.okxfromString=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=s[t];if((0,n.logDebug)("okxfromstring ====> "),!r)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)},e.okxtoString=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=s[t];if((0,n.logDebug)("okxtoString ====> "),!r)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)},e.alloc=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Uint8Array(e)},e.allocUnsafe=r;var t=(so(),y(ro)),n=Rn();function r(){return new Uint8Array(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}function i(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}var o=i("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),a=i("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++){let r=e[n];r&&String.fromCharCode(r)&&(t+=String.fromCharCode(r))}return t}),(e=>{let t=r((e=e.substring(1)).length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),s=Object.assign({utf8:o,"utf-8":o,hex:t.bases.base16,latin1:a,ascii:a,binary:a},t.bases)})),co=h(((e,t)=>{var r,i;r=e,i=function(){var e=e||function(e){var t;if(typeof window<"u"&&window.crypto&&(t=window.crypto),typeof self<"u"&&self.crypto&&(t=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(t=globalThis.crypto),!t&&typeof window<"u"&&window.msCrypto&&(t=window.msCrypto),!t&&typeof n.g<"u"&&n.g.crypto&&(t=n.g.crypto),!t&&"function"==typeof u)try{t=C()}catch{}var r=function(){if(t){if("function"==typeof t.getRandomValues)try{return t.getRandomValues(new Uint32Array(1))[0]}catch{}if("function"==typeof t.randomBytes)try{return t.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),o={},a=o.lib={},s=a.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),(!t.hasOwnProperty("init")||this.init===t.init)&&(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},f=a.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=a<<24-(r+o)%4*8}else for(var s=0;s<i;s+=4)t[r+s>>>2]=n[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(r());return new f.init(t,e)}}),c=o.enc={},l=c.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new f.init(n,t/2)}},d=c.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new f.init(n,t)}},h=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},p=a.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,a=this.blockSize,s=o/(4*a),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,l=e.min(4*c,o);if(c){for(var u=0;u<c;u+=a)this._doProcessBlock(i,u);n=i.splice(0,c),r.sigBytes-=l}return new f.init(n,l)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),g=(a.Hasher=p.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}}),o.algo={});return o}(Math);return e},"object"==typeof e?t.exports=e=i():"function"==typeof define&&n.amdO?define([],i):r.CryptoJS=i()})),lo=h(((e,t)=>{var r,i;r=e,i=function(e){return function(){var t=e,n=t.lib,r=n.Base,i=n.WordArray,o=t.x64={};o.Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),o.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var o=e[r];n.push(o.high),n.push(o.low)}return i.create(n,this.sigBytes)},clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),n=t.length,i=0;i<n;i++)t[i]=t[i].clone();return e}})}(),e},"object"==typeof e?t.exports=e=i(co()):"function"==typeof define&&n.amdO?define(["./core"],i):i(r.CryptoJS)})),uo=h(((e,t)=>{var r,i;r=e,i=function(e){return function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,n=t.init,r=t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||typeof Uint8ClampedArray<"u"&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,r=[],i=0;i<t;i++)r[i>>>2]|=e[i]<<24-i%4*8;n.call(this,r,t)}else n.apply(this,arguments)};r.prototype=t}}(),e.lib.WordArray},"object"==typeof e?t.exports=e=i(co()):"function"==typeof define&&n.amdO?define(["./core"],i):i(r.CryptoJS)})),ho=h(((e,t)=>{var r,i;r=e,i=function(e){return function(){var t=e,n=t.lib.WordArray,r=t.enc;function i(e){return e<<8&4278255360|e>>>8&16711935}r.Utf16=r.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i+=2){var o=t[i>>>2]>>>16-i%4*8&65535;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return n.create(r,2*t)}},r.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o+=2){var a=i(t[o>>>2]>>>16-o%4*8&65535);r.push(String.fromCharCode(a))}return r.join("")},parse:function(e){for(var t=e.length,r=[],o=0;o<t;o++)r[o>>>1]|=i(e.charCodeAt(o)<<16-o%2*16);return n.create(r,2*t)}}}(),e.enc.Utf16},"object"==typeof e?t.exports=e=i(co()):"function"==typeof define&&n.amdO?define(["./core"],i):i(r.CryptoJS)})),po=h(((e,t)=>{var r,i;r=e,i=function(e){return function(){var t=e,n=t.lib.WordArray;t.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var a=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<n;s++)i.push(r.charAt(a>>>6*(3-s)&63));var f=r.charAt(64);if(f)for(;i.length%4;)i.push(f);return i.join("")},parse:function(e){var t=e.length,r=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<r.length;o++)i[r.charCodeAt(o)]=o}var a=r.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return function(e,t,r){for(var i=[],o=0,a=0;a<t;a++)if(a%4){var s=r[e.charCodeAt(a-1)]<<a%4*2|r[e.charCodeAt(a)]>>>6-a%4*2;i[o>>>2]|=s<<24-o%4*8,o++}return n.create(i,o)}(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64},"object"==typeof e?t.exports=e=i(co()):"function"==typeof define&&n.amdO?define(["./core"],i):i(r.CryptoJS)})),go=h(((e,t)=>{var r,i;r=e,i=function(e){return function(){var t=e,n=t.lib.WordArray;t.enc.Base64url={stringify:function(e,t){void 0===t&&(t=!0);var n=e.words,r=e.sigBytes,i=t?this._safe_map:this._map;e.clamp();for(var o=[],a=0;a<r;a+=3)for(var s=(n[a>>>2]>>>24-a%4*8&255)<<16|(n[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|n[a+2>>>2]>>>24-(a+2)%4*8&255,f=0;f<4&&a+.75*f<r;f++)o.push(i.charAt(s>>>6*(3-f)&63));var c=i.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(e,t){void 0===t&&(t=!0);var r=e.length,i=t?this._safe_map:this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var a=0;a<i.length;a++)o[i.charCodeAt(a)]=a}var s=i.charAt(64);if(s){var f=e.indexOf(s);-1!==f&&(r=f)}return function(e,t,r){for(var i=[],o=0,a=0;a<t;a++)if(a%4){var s=r[e.charCodeAt(a-1)]<<a%4*2|r[e.charCodeAt(a)]>>>6-a%4*2;i[o>>>2]|=s<<24-o%4*8,o++}return n.create(i,o)}(e,r,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),e.enc.Base64url},"object"==typeof e?t.exports=e=i(co()):"function"==typeof define&&n.amdO?define(["./core"],i):i(r.CryptoJS)})),bo=h(((e,t)=>{var r,i;r=e,i=function(e){return function(t){var n=e,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,s=[];!function(){for(var e=0;e<64;e++)s[e]=4294967296*t.abs(t.sin(e+1))|0}();var f=a.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,a=e[t+0],f=e[t+1],h=e[t+2],p=e[t+3],g=e[t+4],b=e[t+5],y=e[t+6],m=e[t+7],v=e[t+8],w=e[t+9],_=e[t+10],E=e[t+11],C=e[t+12],O=e[t+13],x=e[t+14],S=e[t+15],k=o[0],T=o[1],R=o[2],A=o[3];k=c(k,T,R,A,a,7,s[0]),A=c(A,k,T,R,f,12,s[1]),R=c(R,A,k,T,h,17,s[2]),T=c(T,R,A,k,p,22,s[3]),k=c(k,T,R,A,g,7,s[4]),A=c(A,k,T,R,b,12,s[5]),R=c(R,A,k,T,y,17,s[6]),T=c(T,R,A,k,m,22,s[7]),k=c(k,T,R,A,v,7,s[8]),A=c(A,k,T,R,w,12,s[9]),R=c(R,A,k,T,_,17,s[10]),T=c(T,R,A,k,E,22,s[11]),k=c(k,T,R,A,C,7,s[12]),A=c(A,k,T,R,O,12,s[13]),R=c(R,A,k,T,x,17,s[14]),k=l(k,T=c(T,R,A,k,S,22,s[15]),R,A,f,5,s[16]),A=l(A,k,T,R,y,9,s[17]),R=l(R,A,k,T,E,14,s[18]),T=l(T,R,A,k,a,20,s[19]),k=l(k,T,R,A,b,5,s[20]),A=l(A,k,T,R,_,9,s[21]),R=l(R,A,k,T,S,14,s[22]),T=l(T,R,A,k,g,20,s[23]),k=l(k,T,R,A,w,5,s[24]),A=l(A,k,T,R,x,9,s[25]),R=l(R,A,k,T,p,14,s[26]),T=l(T,R,A,k,v,20,s[27]),k=l(k,T,R,A,O,5,s[28]),A=l(A,k,T,R,h,9,s[29]),R=l(R,A,k,T,m,14,s[30]),k=u(k,T=l(T,R,A,k,C,20,s[31]),R,A,b,4,s[32]),A=u(A,k,T,R,v,11,s[33]),R=u(R,A,k,T,E,16,s[34]),T=u(T,R,A,k,x,23,s[35]),k=u(k,T,R,A,f,4,s[36]),A=u(A,k,T,R,g,11,s[37]),R=u(R,A,k,T,m,16,s[38]),T=u(T,R,A,k,_,23,s[39]),k=u(k,T,R,A,O,4,s[40]),A=u(A,k,T,R,a,11,s[41]),R=u(R,A,k,T,p,16,s[42]),T=u(T,R,A,k,y,23,s[43]),k=u(k,T,R,A,w,4,s[44]),A=u(A,k,T,R,C,11,s[45]),R=u(R,A,k,T,S,16,s[46]),k=d(k,T=u(T,R,A,k,h,23,s[47]),R,A,a,6,s[48]),A=d(A,k,T,R,m,10,s[49]),R=d(R,A,k,T,x,15,s[50]),T=d(T,R,A,k,b,21,s[51]),k=d(k,T,R,A,C,6,s[52]),A=d(A,k,T,R,p,10,s[53]),R=d(R,A,k,T,_,15,s[54]),T=d(T,R,A,k,f,21,s[55]),k=d(k,T,R,A,v,6,s[56]),A=d(A,k,T,R,S,10,s[57]),R=d(R,A,k,T,y,15,s[58]),T=d(T,R,A,k,O,21,s[59]),k=d(k,T,R,A,g,6,s[60]),A=d(A,k,T,R,E,10,s[61]),R=d(R,A,k,T,h,15,s[62]),T=d(T,R,A,k,w,21,s[63]),o[0]=o[0]+k|0,o[1]=o[1]+T|0,o[2]=o[2]+R|0,o[3]=o[3]+A|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var o=t.floor(r/4294967296),a=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,f=s.words,c=0;c<4;c++){var l=f[c];f[c]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return s},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,n,r,i,o,a){var s=e+(t&n|~t&r)+i+a;return(s<<o|s>>>32-o)+t}function l(e,t,n,r,i,o,a){var s=e+(t&r|n&~r)+i+a;return(s<<o|s>>>32-o)+t}function u(e,t,n,r,i,o,a){var s=e+(t^n^r)+i+a;return(s<<o|s>>>32-o)+t}function d(e,t,n,r,i,o,a){var s=e+(n^(t|~r))+i+a;return(s<<o|s>>>32-o)+t}n.MD5=o._createHelper(f),n.HmacMD5=o._createHmacHelper(f)}(Math),e.MD5},"object"==typeof e?t.exports=e=i(co()):"function"==typeof define&&n.amdO?define(["./core"],i):i(r.CryptoJS)})),yo=h(((e,t)=>{var r,i;r=e,i=function(e){return function(){var t=e,n=t.lib,r=n.WordArray,i=n.Hasher,o=t.algo,a=[],s=o.SHA1=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],f=n[4],c=0;c<80;c++){if(c<16)a[c]=0|e[t+c];else{var l=a[c-3]^a[c-8]^a[c-14]^a[c-16];a[c]=l<<1|l>>>31}var u=(r<<5|r>>>27)+f+a[c];u+=c<20?1518500249+(i&o|~i&s):c<40?1859775393+(i^o^s):c<60?(i&o|i&s|o&s)-1894007588:(i^o^s)-899497514,f=s,s=o,o=i<<30|i>>>2,i=r,r=u}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+f|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=i._createHelper(s),t.HmacSHA1=i._createHmacHelper(s)}(),e.SHA1},"object"==typeof e?t.exports=e=i(co()):"function"==typeof define&&n.amdO?define(["./core"],i):i(r.CryptoJS)})),mo=h(((e,t)=>{var r,i;r=e,i=function(e){return function(t){var n=e,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,s=[],f=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)e(r)&&(i<8&&(s[i]=n(t.pow(r,.5))),f[i]=n(t.pow(r,1/3)),i++),r++}();var c=[],l=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6],d=n[7],h=0;h<64;h++){if(h<16)c[h]=0|e[t+h];else{var p=c[h-15],g=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,b=c[h-2],y=(b<<15|b>>>17)^(b<<13|b>>>19)^b>>>10;c[h]=g+c[h-7]+y+c[h-16]}var m=r&i^r&o^i&o,v=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),w=d+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&l^~s&u)+f[h]+c[h];d=u,u=l,l=s,s=a+w|0,a=o,o=i,i=r,r=w+(v+m)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+l|0,n[6]=n[6]+u|0,n[7]=n[7]+d|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=o._createHelper(l),n.HmacSHA256=o._createHmacHelper(l)}(Math),e.SHA256},"object"==typeof e?t.exports=e=i(co()):"function"==typeof define&&n.amdO?define(["./core"],i):i(r.CryptoJS)})),vo=h(((e,t)=>{var r,i;r=e,i=function(e){return function(){var t=e,n=t.lib.WordArray,r=t.algo,i=r.SHA256,o=r.SHA224=i.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=i._doFinalize.call(this);return e.sigBytes-=4,e}});t.SHA224=i._createHelper(o),t.HmacSHA224=i._createHmacHelper(o)}(),e.SHA224},"object"==typeof e?t.exports=e=i(co(),mo()):"function"==typeof define&&n.amdO?define(["./core","./sha256"],i):i(r.CryptoJS)})),wo=h(((e,t)=>{var r,i;r=e,i=function(e){return function(){var t=e,n=t.lib.Hasher,r=t.x64,i=r.Word,o=r.WordArray,a=t.algo;function s(){return i.create.apply(i,arguments)}var f=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],c=[];!function(){for(var e=0;e<80;e++)c[e]=s()}();var l=a.SHA512=n.extend({_doReset:function(){this._hash=new o.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6],d=n[7],h=r.high,p=r.low,g=i.high,b=i.low,y=o.high,m=o.low,v=a.high,w=a.low,_=s.high,E=s.low,C=l.high,O=l.low,x=u.high,S=u.low,k=d.high,T=d.low,R=h,A=p,I=g,N=b,P=y,D=m,B=v,M=w,K=_,L=E,U=C,j=O,W=x,H=S,$=k,q=T,X=0;X<80;X++){var F,z,J=c[X];if(X<16)z=J.high=0|e[t+2*X],F=J.low=0|e[t+2*X+1];else{var V=c[X-15],G=V.high,Y=V.low,Z=(G>>>1|Y<<31)^(G>>>8|Y<<24)^G>>>7,Q=(Y>>>1|G<<31)^(Y>>>8|G<<24)^(Y>>>7|G<<25),ee=c[X-2],te=ee.high,ne=ee.low,re=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,ie=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),oe=c[X-7],ae=oe.high,se=oe.low,fe=c[X-16],ce=fe.high,le=fe.low;z=(z=(z=Z+ae+((F=Q+se)>>>0<Q>>>0?1:0))+re+((F+=ie)>>>0<ie>>>0?1:0))+ce+((F+=le)>>>0<le>>>0?1:0),J.high=z,J.low=F}var ue,de=K&U^~K&W,he=L&j^~L&H,pe=R&I^R&P^I&P,ge=A&N^A&D^N&D,be=(R>>>28|A<<4)^(R<<30|A>>>2)^(R<<25|A>>>7),ye=(A>>>28|R<<4)^(A<<30|R>>>2)^(A<<25|R>>>7),me=(K>>>14|L<<18)^(K>>>18|L<<14)^(K<<23|L>>>9),ve=(L>>>14|K<<18)^(L>>>18|K<<14)^(L<<23|K>>>9),we=f[X],_e=we.high,Ee=we.low,Ce=$+me+((ue=q+ve)>>>0<q>>>0?1:0),Oe=ye+ge;$=W,q=H,W=U,H=j,U=K,j=L,K=B+(Ce=(Ce=(Ce=Ce+de+((ue+=he)>>>0<he>>>0?1:0))+_e+((ue+=Ee)>>>0<Ee>>>0?1:0))+z+((ue+=F)>>>0<F>>>0?1:0))+((L=M+ue|0)>>>0<M>>>0?1:0)|0,B=P,M=D,P=I,D=N,I=R,N=A,R=Ce+(be+pe+(Oe>>>0<ye>>>0?1:0))+((A=ue+Oe|0)>>>0<ue>>>0?1:0)|0}p=r.low=p+A,r.high=h+R+(p>>>0<A>>>0?1:0),b=i.low=b+N,i.high=g+I+(b>>>0<N>>>0?1:0),m=o.low=m+D,o.high=y+P+(m>>>0<D>>>0?1:0),w=a.low=w+M,a.high=v+B+(w>>>0<M>>>0?1:0),E=s.low=E+L,s.high=_+K+(E>>>0<L>>>0?1:0),O=l.low=O+j,l.high=C+U+(O>>>0<j>>>0?1:0),S=u.low=S+H,u.high=x+W+(S>>>0<H>>>0?1:0),T=d.low=T+q,d.high=k+$+(T>>>0<q>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=n._createHelper(l),t.HmacSHA512=n._createHmacHelper(l)}(),e.SHA512},"object"==typeof e?t.exports=e=i(co(),lo()):"function"==typeof define&&n.amdO?define(["./core","./x64-core"],i):i(r.CryptoJS)})),_o=h(((e,t)=>{var r,i;r=e,i=function(e){return function(){var t=e,n=t.x64,r=n.Word,i=n.WordArray,o=t.algo,a=o.SHA512,s=o.SHA384=a.extend({_doReset:function(){this._hash=new i.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=16,e}});t.SHA384=a._createHelper(s),t.HmacSHA384=a._createHmacHelper(s)}(),e.SHA384},"object"==typeof e?t.exports=e=i(co(),lo(),wo()):"function"==typeof define&&n.amdO?define(["./core","./x64-core","./sha512"],i):i(r.CryptoJS)})),Eo=h(((e,t)=>{var r,i;r=e,i=function(e){return function(t){var n=e,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.x64.Word,s=n.algo,f=[],c=[],l=[];!function(){for(var e=1,t=0,n=0;n<24;n++){f[e+5*t]=(n+1)*(n+2)/2%64;var r=(2*e+3*t)%5;e=t%5,t=r}for(e=0;e<5;e++)for(t=0;t<5;t++)c[e+5*t]=t+(2*e+3*t)%5*5;for(var i=1,o=0;o<24;o++){for(var s=0,u=0,d=0;d<7;d++){if(1&i){var h=(1<<d)-1;h<32?u^=1<<h:s^=1<<h-32}128&i?i=i<<1^113:i<<=1}l[o]=a.create(s,u)}}();var u=[];!function(){for(var e=0;e<25;e++)u[e]=a.create()}();var d=s.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,i=0;i<r;i++){var o=e[t+2*i],a=e[t+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(T=n[i]).high^=a,T.low^=o}for(var s=0;s<24;s++){for(var d=0;d<5;d++){for(var h=0,p=0,g=0;g<5;g++)h^=(T=n[d+5*g]).high,p^=T.low;var b=u[d];b.high=h,b.low=p}for(d=0;d<5;d++){var y=u[(d+4)%5],m=u[(d+1)%5],v=m.high,w=m.low;for(h=y.high^(v<<1|w>>>31),p=y.low^(w<<1|v>>>31),g=0;g<5;g++)(T=n[d+5*g]).high^=h,T.low^=p}for(var _=1;_<25;_++){var E=(T=n[_]).high,C=T.low,O=f[_];O<32?(h=E<<O|C>>>32-O,p=C<<O|E>>>32-O):(h=C<<O-32|E>>>64-O,p=E<<O-32|C>>>64-O);var x=u[c[_]];x.high=h,x.low=p}var S=u[0],k=n[0];for(S.high=k.high,S.low=k.low,d=0;d<5;d++)for(g=0;g<5;g++){var T=n[_=d+5*g],R=u[_],A=u[(d+1)%5+5*g],I=u[(d+2)%5+5*g];T.high=R.high^~A.high&I.high,T.low=R.low^~A.low&I.low}T=n[0];var N=l[s];T.high^=N.high,T.low^=N.low}},_doFinalize:function(){var e=this._data,n=e.words,r=(this._nDataBytes,8*e.sigBytes),o=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(t.ceil((r+1)/o)*o>>>5)-1]|=128,e.sigBytes=4*n.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,f=s/8,c=[],l=0;l<f;l++){var u=a[l],d=u.high,h=u.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),c.push(h),c.push(d)}return new i.init(c,s)},clone:function(){for(var e=o.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});n.SHA3=o._createHelper(d),n.HmacSHA3=o._createHmacHelper(d)}(Math),e.SHA3},"object"==typeof e?t.exports=e=i(co(),lo()):"function"==typeof define&&n.amdO?define(["./core","./x64-core"],i):i(r.CryptoJS)})),Co=h(((e,t)=>{var r,i;r=e,i=function(e){return function(){var t=e,n=t.lib,r=n.WordArray,i=n.Hasher,o=t.algo,a=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),s=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),c=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),l=r.create([0,1518500249,1859775393,2400959708,2840853838]),u=r.create([1352829926,1548603684,1836072691,2053994217,0]),d=o.RIPEMD160=i.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o,d,v,w,_,E,C,O,x,S,k,T=this._hash.words,R=l.words,A=u.words,I=a.words,N=s.words,P=f.words,D=c.words;for(E=o=T[0],C=d=T[1],O=v=T[2],x=w=T[3],S=_=T[4],n=0;n<80;n+=1)k=o+e[t+I[n]]|0,k+=n<16?h(d,v,w)+R[0]:n<32?p(d,v,w)+R[1]:n<48?g(d,v,w)+R[2]:n<64?b(d,v,w)+R[3]:y(d,v,w)+R[4],k=(k=m(k|=0,P[n]))+_|0,o=_,_=w,w=m(v,10),v=d,d=k,k=E+e[t+N[n]]|0,k+=n<16?y(C,O,x)+A[0]:n<32?b(C,O,x)+A[1]:n<48?g(C,O,x)+A[2]:n<64?p(C,O,x)+A[3]:h(C,O,x)+A[4],k=(k=m(k|=0,D[n]))+S|0,E=S,S=x,x=m(O,10),O=C,C=k;k=T[1]+v+x|0,T[1]=T[2]+w+S|0,T[2]=T[3]+_+E|0,T[3]=T[4]+o+C|0,T[4]=T[0]+d+O|0,T[0]=k},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var i=this._hash,o=i.words,a=0;a<5;a++){var s=o[a];o[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return i},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function h(e,t,n){return e^t^n}function p(e,t,n){return e&t|~e&n}function g(e,t,n){return(e|~t)^n}function b(e,t,n){return e&n|t&~n}function y(e,t,n){return e^(t|~n)}function m(e,t){return e<<t|e>>>32-t}t.RIPEMD160=i._createHelper(d),t.HmacRIPEMD160=i._createHmacHelper(d)}(Math),e.RIPEMD160},"object"==typeof e?t.exports=e=i(co()):"function"==typeof define&&n.amdO?define(["./core"],i):i(r.CryptoJS)})),Oo=h(((e,t)=>{var r,i;r=e,i=function(e){!function(){var t=e,n=t.lib.Base,r=t.enc.Utf8;t.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));var n=e.blockSize,i=4*n;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),a=this._iKey=t.clone(),s=o.words,f=a.words,c=0;c<n;c++)s[c]^=1549556828,f[c]^=909522486;o.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}()},"object"==typeof e?t.exports=e=i(co()):"function"==typeof define&&n.amdO?define(["./core"],i):i(r.CryptoJS)})),xo=h(((e,t)=>{var r,i;r=e,i=function(e){return function(){var t=e,n=t.lib,r=n.Base,i=n.WordArray,o=t.algo,a=o.SHA256,s=o.HMAC,f=o.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:a,iterations:25e4}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=s.create(n.hasher,e),o=i.create(),a=i.create([1]),f=o.words,c=a.words,l=n.keySize,u=n.iterations;f.length<l;){var d=r.update(t).finalize(a);r.reset();for(var h=d.words,p=h.length,g=d,b=1;b<u;b++){g=r.finalize(g),r.reset();for(var y=g.words,m=0;m<p;m++)h[m]^=y[m]}o.concat(d),c[0]++}return o.sigBytes=4*l,o}});t.PBKDF2=function(e,t,n){return f.create(n).compute(e,t)}}(),e.PBKDF2},"object"==typeof e?t.exports=e=i(co(),mo(),Oo()):"function"==typeof define&&n.amdO?define(["./core","./sha256","./hmac"],i):i(r.CryptoJS)})),So=h(((e,t)=>{var r,i;r=e,i=function(e){return function(){var t=e,n=t.lib,r=n.Base,i=n.WordArray,o=t.algo,a=o.MD5,s=o.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,r=this.cfg,o=r.hasher.create(),a=i.create(),s=a.words,f=r.keySize,c=r.iterations;s.length<f;){n&&o.update(n),n=o.update(e).finalize(t),o.reset();for(var l=1;l<c;l++)n=o.finalize(n),o.reset();a.concat(n)}return a.sigBytes=4*f,a}});t.EvpKDF=function(e,t,n){return s.create(n).compute(e,t)}}(),e.EvpKDF},"object"==typeof e?t.exports=e=i(co(),yo(),Oo()):"function"==typeof define&&n.amdO?define(["./core","./sha1","./hmac"],i):i(r.CryptoJS)})),ko=h(((e,t)=>{var r,i;r=e,i=function(e){e.lib.Cipher||function(){var t=e,n=t.lib,r=n.Base,i=n.WordArray,o=n.BufferedBlockAlgorithm,a=t.enc,s=(a.Utf8,a.Base64),f=t.algo.EvpKDF,c=n.Cipher=o.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?m:b}return function(t){return{encrypt:function(n,r,i){return e(r).encrypt(t,n,r,i)},decrypt:function(n,r,i){return e(r).decrypt(t,n,r,i)}}}}()}),l=(n.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),t.mode={}),u=n.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),d=l.CBC=function(){var e=u.extend();function t(e,t,n){var r,i=this._iv;i?(r=i,this._iv=void 0):r=this._prevBlock;for(var o=0;o<n;o++)e[t+o]^=r[o]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize;t.call(this,e,n,i),r.encryptBlock(e,n),this._prevBlock=e.slice(n,n+i)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize,o=e.slice(n,n+i);r.decryptBlock(e,n),t.call(this,e,n,i),this._prevBlock=o}}),e}(),h=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,o=r<<24|r<<16|r<<8|r,a=[],s=0;s<r;s+=4)a.push(o);var f=i.create(a,r);e.concat(f)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},p=(n.BlockCipher=c.extend({cfg:c.cfg.extend({mode:d,padding:h}),reset:function(){var e;c.reset.call(this);var t=this.cfg,n=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),n.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),g=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?i.create([1398893684,1701076831]).concat(n).concat(t):t).toString(s)},parse:function(e){var t,n=s.parse(e),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(t=i.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),p.create({ciphertext:n,salt:t})}},b=n.SerializableCipher=r.extend({cfg:r.extend({format:g}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r),o=i.finalize(t),a=i.cfg;return p.create({ciphertext:o,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=(t.kdf={}).OpenSSL={execute:function(e,t,n,r,o){if(r||(r=i.random(8)),o)var a=f.create({keySize:t+n,hasher:o}).compute(e,r);else a=f.create({keySize:t+n}).compute(e,r);var s=i.create(a.words.slice(t),4*n);return a.sigBytes=4*t,p.create({key:a,iv:s,salt:r})}},m=n.PasswordBasedCipher=b.extend({cfg:b.cfg.extend({kdf:y}),encrypt:function(e,t,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize,r.salt,r.hasher);r.iv=i.iv;var o=b.encrypt.call(this,e,t,i.key,r);return o.mixIn(i),o},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var i=r.kdf.execute(n,e.keySize,e.ivSize,t.salt,r.hasher);return r.iv=i.iv,b.decrypt.call(this,e,t,i.key,r)}})}()},"object"==typeof e?t.exports=e=i(co(),So()):"function"==typeof define&&n.amdO?define(["./core","./evpkdf"],i):i(r.CryptoJS)})),To=h(((e,t)=>{var r,i;r=e,i=function(e){return e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function n(e,t,n,r){var i,o=this._iv;o?(i=o.slice(0),this._iv=void 0):i=this._prevBlock,r.encryptBlock(i,0);for(var a=0;a<n;a++)e[t+a]^=i[a]}return t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize;n.call(this,e,t,i,r),this._prevBlock=e.slice(t,t+i)}}),t.Decryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,o=e.slice(t,t+i);n.call(this,e,t,i,r),this._prevBlock=o}}),t}(),e.mode.CFB},"object"==typeof e?t.exports=e=i(co(),ko()):"function"==typeof define&&n.amdO?define(["./core","./cipher-core"],i):i(r.CryptoJS)})),Ro=h(((e,t)=>{var r,i;r=e,i=function(e){return e.mode.CTR=function(){var t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var a=o.slice(0);n.encryptBlock(a,0),o[r-1]=o[r-1]+1|0;for(var s=0;s<r;s++)e[t+s]^=a[s]}});return t.Decryptor=n,t}(),e.mode.CTR},"object"==typeof e?t.exports=e=i(co(),ko()):"function"==typeof define&&n.amdO?define(["./core","./cipher-core"],i):i(r.CryptoJS)})),Ao=h(((e,t)=>{var r,i;r=e,i=function(e){return e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function n(e){if(255===(e>>24&255)){var t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}var r=t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,o=this._iv,a=this._counter;o&&(a=this._counter=o.slice(0),this._iv=void 0),function(e){0===(e[0]=n(e[0]))&&(e[1]=n(e[1]))}(a);var s=a.slice(0);r.encryptBlock(s,0);for(var f=0;f<i;f++)e[t+f]^=s[f]}});return t.Decryptor=r,t}(),e.mode.CTRGladman},"object"==typeof e?t.exports=e=i(co(),ko()):"function"==typeof define&&n.amdO?define(["./core","./cipher-core"],i):i(r.CryptoJS)})),Io=h(((e,t)=>{var r,i;r=e,i=function(e){return e.mode.OFB=function(){var t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),n.encryptBlock(o,0);for(var a=0;a<r;a++)e[t+a]^=o[a]}});return t.Decryptor=n,t}(),e.mode.OFB},"object"==typeof e?t.exports=e=i(co(),ko()):"function"==typeof define&&n.amdO?define(["./core","./cipher-core"],i):i(r.CryptoJS)})),No=h(((e,t)=>{var r,i;r=e,i=function(e){return e.mode.ECB=function(){var t=e.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t}(),e.mode.ECB},"object"==typeof e?t.exports=e=i(co(),ko()):"function"==typeof define&&n.amdO?define(["./core","./cipher-core"],i):i(r.CryptoJS)})),Po=h(((e,t)=>{var r,i;r=e,i=function(e){return e.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=4*t,i=r-n%r,o=n+i-1;e.clamp(),e.words[o>>>2]|=i<<24-o%4*8,e.sigBytes+=i},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923},"object"==typeof e?t.exports=e=i(co(),ko()):"function"==typeof define&&n.amdO?define(["./core","./cipher-core"],i):i(r.CryptoJS)})),Do=h(((e,t)=>{var r,i;r=e,i=function(e){return e.pad.Iso10126={pad:function(t,n){var r=4*n,i=r-t.sigBytes%r;t.concat(e.lib.WordArray.random(i-1)).concat(e.lib.WordArray.create([i<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126},"object"==typeof e?t.exports=e=i(co(),ko()):"function"==typeof define&&n.amdO?define(["./core","./cipher-core"],i):i(r.CryptoJS)})),Bo=h(((e,t)=>{var r,i;r=e,i=function(e){return e.pad.Iso97971={pad:function(t,n){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,n)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971},"object"==typeof e?t.exports=e=i(co(),ko()):"function"==typeof define&&n.amdO?define(["./core","./cipher-core"],i):i(r.CryptoJS)})),Mo=h(((e,t)=>{var r,i;r=e,i=function(e){return e.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words,n=e.sigBytes-1;for(n=e.sigBytes-1;n>=0;n--)if(t[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}},e.pad.ZeroPadding},"object"==typeof e?t.exports=e=i(co(),ko()):"function"==typeof define&&n.amdO?define(["./core","./cipher-core"],i):i(r.CryptoJS)})),Ko=h(((e,t)=>{var r,i;r=e,i=function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding},"object"==typeof e?t.exports=e=i(co(),ko()):"function"==typeof define&&n.amdO?define(["./core","./cipher-core"],i):i(r.CryptoJS)})),Lo=h(((e,t)=>{var r,i;r=e,i=function(e){return function(){var t=e,n=t.lib.CipherParams,r=t.enc.Hex;t.format.Hex={stringify:function(e){return e.ciphertext.toString(r)},parse:function(e){var t=r.parse(e);return n.create({ciphertext:t})}}}(),e.format.Hex},"object"==typeof e?t.exports=e=i(co(),ko()):"function"==typeof define&&n.amdO?define(["./core","./cipher-core"],i):i(r.CryptoJS)})),Uo=h(((e,t)=>{var r,i;r=e,i=function(e){return function(){var t=e,n=t.lib.BlockCipher,r=t.algo,i=[],o=[],a=[],s=[],f=[],c=[],l=[],u=[],d=[],h=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,r=0;for(t=0;t<256;t++){var p=r^r<<1^r<<2^r<<3^r<<4;p=p>>>8^255&p^99,i[n]=p,o[p]=n;var g=e[n],b=e[g],y=e[b],m=257*e[p]^16843008*p;a[n]=m<<24|m>>>8,s[n]=m<<16|m>>>16,f[n]=m<<8|m>>>24,c[n]=m,m=16843009*y^65537*b^257*g^16843008*n,l[p]=m<<24|m>>>8,u[p]=m<<16|m>>>16,d[p]=m<<8|m>>>24,h[p]=m,n?(n=g^e[e[e[y^g]]],r^=e[e[r]]):n=r=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],g=r.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],a=0;a<r;a++)a<n?o[a]=t[a]:(c=o[a-1],a%n?n>6&&a%n==4&&(c=i[c>>>24]<<24|i[c>>>16&255]<<16|i[c>>>8&255]<<8|i[255&c]):(c=i[(c=c<<8|c>>>24)>>>24]<<24|i[c>>>16&255]<<16|i[c>>>8&255]<<8|i[255&c],c^=p[a/n|0]<<24),o[a]=o[a-n]^c);for(var s=this._invKeySchedule=[],f=0;f<r;f++){if(a=r-f,f%4)var c=o[a];else c=o[a-4];s[f]=f<4||a<=4?c:l[i[c>>>24]]^u[i[c>>>16&255]]^d[i[c>>>8&255]]^h[i[255&c]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,s,f,c,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,u,d,h,o),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,o,a,s){for(var f=this._nRounds,c=e[t]^n[0],l=e[t+1]^n[1],u=e[t+2]^n[2],d=e[t+3]^n[3],h=4,p=1;p<f;p++){var g=r[c>>>24]^i[l>>>16&255]^o[u>>>8&255]^a[255&d]^n[h++],b=r[l>>>24]^i[u>>>16&255]^o[d>>>8&255]^a[255&c]^n[h++],y=r[u>>>24]^i[d>>>16&255]^o[c>>>8&255]^a[255&l]^n[h++],m=r[d>>>24]^i[c>>>16&255]^o[l>>>8&255]^a[255&u]^n[h++];c=g,l=b,u=y,d=m}g=(s[c>>>24]<<24|s[l>>>16&255]<<16|s[u>>>8&255]<<8|s[255&d])^n[h++],b=(s[l>>>24]<<24|s[u>>>16&255]<<16|s[d>>>8&255]<<8|s[255&c])^n[h++],y=(s[u>>>24]<<24|s[d>>>16&255]<<16|s[c>>>8&255]<<8|s[255&l])^n[h++],m=(s[d>>>24]<<24|s[c>>>16&255]<<16|s[l>>>8&255]<<8|s[255&u])^n[h++],e[t]=g,e[t+1]=b,e[t+2]=y,e[t+3]=m},keySize:8});t.AES=n._createHelper(g)}(),e.AES},"object"==typeof e?t.exports=e=i(co(),po(),bo(),So(),ko()):"function"==typeof define&&n.amdO?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],i):i(r.CryptoJS)})),jo=h(((e,t)=>{var r,i;r=e,i=function(e){return function(){var t=e,n=t.lib,r=n.WordArray,i=n.BlockCipher,o=t.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],f=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],u=o.DES=i.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var r=a[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(var i=this._subKeys=[],o=0;o<16;o++){var c=i[o]=[],l=f[o];for(n=0;n<24;n++)c[n/6|0]|=t[(s[n]-1+l)%28]<<31-n%6,c[4+(n/6|0)]|=t[28+(s[n+24]-1+l)%28]<<31-n%6;for(c[0]=c[0]<<1|c[0]>>>31,n=1;n<7;n++)c[n]=c[n]>>>4*(n-1)+3;c[7]=c[7]<<5|c[7]>>>27}var u=this._invSubKeys=[];for(n=0;n<16;n++)u[n]=i[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],d.call(this,4,252645135),d.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),d.call(this,1,1431655765);for(var r=0;r<16;r++){for(var i=n[r],o=this._lBlock,a=this._rBlock,s=0,f=0;f<8;f++)s|=c[f][((a^i[f])&l[f])>>>0];this._lBlock=a,this._rBlock=o^s}var u=this._lBlock;this._lBlock=this._rBlock,this._rBlock=u,d.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function d(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function h(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}t.DES=i._createHelper(u);var p=o.TripleDES=i.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),n=e.length<4?e.slice(0,2):e.slice(2,4),i=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=u.createEncryptor(r.create(t)),this._des2=u.createEncryptor(r.create(n)),this._des3=u.createEncryptor(r.create(i))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=i._createHelper(p)}(),e.TripleDES},"object"==typeof e?t.exports=e=i(co(),po(),bo(),So(),ko()):"function"==typeof define&&n.amdO?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],i):i(r.CryptoJS)})),Wo=h(((e,t)=>{var r,i;r=e,i=function(e){return function(){var t=e,n=t.lib.StreamCipher,r=t.algo,i=r.RC4=n.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],i=0;i<256;i++)r[i]=i;i=0;for(var o=0;i<256;i++){var a=i%n,s=t[a>>>2]>>>24-a%4*8&255;o=(o+r[i]+s)%256;var f=r[i];r[i]=r[o],r[o]=f}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=o.call(this)},keySize:8,ivSize:0});function o(){for(var e=this._S,t=this._i,n=this._j,r=0,i=0;i<4;i++){n=(n+e[t=(t+1)%256])%256;var o=e[t];e[t]=e[n],e[n]=o,r|=e[(e[t]+e[n])%256]<<24-8*i}return this._i=t,this._j=n,r}t.RC4=n._createHelper(i);var a=r.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)o.call(this)}});t.RC4Drop=n._createHelper(a)}(),e.RC4},"object"==typeof e?t.exports=e=i(co(),po(),bo(),So(),ko()):"function"==typeof define&&n.amdO?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],i):i(r.CryptoJS)})),Ho=h(((e,t)=>{var r,i;r=e,i=function(e){return function(){var t=e,n=t.lib.StreamCipher,r=t.algo,i=[],o=[],a=[],s=r.Rabbit=n.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)f.call(this);for(n=0;n<8;n++)i[n]^=r[n+4&7];if(t){var o=t.words,a=o[0],s=o[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),u=c>>>16|4294901760&l,d=l<<16|65535&c;for(i[0]^=c,i[1]^=u,i[2]^=l,i[3]^=d,i[4]^=c,i[5]^=u,i[6]^=l,i[7]^=d,n=0;n<4;n++)f.call(this)}},_doProcessBlock:function(e,t){var n=this._X;f.call(this),i[0]=n[0]^n[5]>>>16^n[3]<<16,i[1]=n[2]^n[7]>>>16^n[5]<<16,i[2]=n[4]^n[1]>>>16^n[7]<<16,i[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)i[r]=16711935&(i[r]<<8|i[r]>>>24)|4278255360&(i[r]<<24|i[r]>>>8),e[t+r]^=i[r]},blockSize:4,ivSize:2});function f(){for(var e=this._X,t=this._C,n=0;n<8;n++)o[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0,this._b=t[7]>>>0<o[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],i=65535&r,s=r>>>16,f=((i*i>>>17)+i*s>>>15)+s*s,c=((4294901760&r)*r|0)+((65535&r)*r|0);a[n]=f^c}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}t.Rabbit=n._createHelper(s)}(),e.Rabbit},"object"==typeof e?t.exports=e=i(co(),po(),bo(),So(),ko()):"function"==typeof define&&n.amdO?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],i):i(r.CryptoJS)})),$o=h(((e,t)=>{var r,i;r=e,i=function(e){return function(){var t=e,n=t.lib.StreamCipher,r=t.algo,i=[],o=[],a=[],s=r.RabbitLegacy=n.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var i=0;i<4;i++)f.call(this);for(i=0;i<8;i++)r[i]^=n[i+4&7];if(t){var o=t.words,a=o[0],s=o[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),u=c>>>16|4294901760&l,d=l<<16|65535&c;for(r[0]^=c,r[1]^=u,r[2]^=l,r[3]^=d,r[4]^=c,r[5]^=u,r[6]^=l,r[7]^=d,i=0;i<4;i++)f.call(this)}},_doProcessBlock:function(e,t){var n=this._X;f.call(this),i[0]=n[0]^n[5]>>>16^n[3]<<16,i[1]=n[2]^n[7]>>>16^n[5]<<16,i[2]=n[4]^n[1]>>>16^n[7]<<16,i[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)i[r]=16711935&(i[r]<<8|i[r]>>>24)|4278255360&(i[r]<<24|i[r]>>>8),e[t+r]^=i[r]},blockSize:4,ivSize:2});function f(){for(var e=this._X,t=this._C,n=0;n<8;n++)o[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0,this._b=t[7]>>>0<o[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],i=65535&r,s=r>>>16,f=((i*i>>>17)+i*s>>>15)+s*s,c=((4294901760&r)*r|0)+((65535&r)*r|0);a[n]=f^c}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}t.RabbitLegacy=n._createHelper(s)}(),e.RabbitLegacy},"object"==typeof e?t.exports=e=i(co(),po(),bo(),So(),ko()):"function"==typeof define&&n.amdO?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],i):i(r.CryptoJS)})),qo=h(((e,t)=>{var r,i;r=e,i=function(e){return function(){var t=e,n=t.lib.BlockCipher,r=t.algo;let i=16,o=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],a=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var s={pbox:[],sbox:[]};function f(e,t){let n=t>>24&255,r=t>>16&255,i=t>>8&255,o=255&t,a=e.sbox[0][n]+e.sbox[1][r];return a^=e.sbox[2][i],a+=e.sbox[3][o],a}function c(e,t,n){let r,o=t,a=n;for(let s=0;s<i;++s)o^=e.pbox[s],a=f(e,o)^a,r=o,o=a,a=r;return r=o,o=a,a=r,a^=e.pbox[i],o^=e.pbox[17],{left:o,right:a}}var l=r.Blowfish=n.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4;!function(e,t,n){for(let o=0;o<4;o++){e.sbox[o]=[];for(let t=0;t<256;t++)e.sbox[o][t]=a[o][t]}let r=0;for(let a=0;a<18;a++)e.pbox[a]=o[a]^t[r],r++,r>=n&&(r=0);let i=0,s=0,f=0;for(let o=0;o<18;o+=2)f=c(e,i,s),i=f.left,s=f.right,e.pbox[o]=i,e.pbox[o+1]=s;for(let o=0;o<4;o++)for(let t=0;t<256;t+=2)f=c(e,i,s),i=f.left,s=f.right,e.sbox[o][t]=i,e.sbox[o][t+1]=s}(s,t,n)}},encryptBlock:function(e,t){var n=c(s,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},decryptBlock:function(e,t){var n=function(e,t,n){let r,i=t,o=n;for(let a=17;a>1;--a)i^=e.pbox[a],o=f(e,i)^o,r=i,i=o,o=r;return r=i,i=o,o=r,o^=e.pbox[1],i^=e.pbox[0],{left:i,right:o}}(s,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},blockSize:2,keySize:4,ivSize:2});t.Blowfish=n._createHelper(l)}(),e.Blowfish},"object"==typeof e?t.exports=e=i(co(),po(),bo(),So(),ko()):"function"==typeof define&&n.amdO?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],i):i(r.CryptoJS)})),Xo=h(((e,t)=>{var r,i;r=e,i=function(e){return e},"object"==typeof e?t.exports=e=i(co(),lo(),uo(),ho(),po(),go(),bo(),yo(),mo(),vo(),wo(),_o(),Eo(),Co(),Oo(),xo(),So(),ko(),To(),Ro(),Ao(),Io(),No(),Po(),Do(),Bo(),Mo(),Ko(),Lo(),Uo(),jo(),Wo(),Ho(),$o(),qo()):"function"==typeof define&&n.amdO?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],i):r.CryptoJS=r.CryptoJS})),Fo=h((e=>{var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.isValidObject=e.RANDOM_LENGTH=e.isBrowser=e.resolveLocalStorage=e.hasLocalStorage=e.hasBuiltInWebSocket=e.resolveWebSocketImplementation=void 0,e.hexToByteArray=function(e){if(e.length%2!==0)throw new Error(`Cannot convert ${e} to bytesArray`);let t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)t[n/2]=parseInt(e.slice(n,n+2),16);return t},e.toHexString=function(e){let t="";return e.forEach((e=>{t+=("0"+(255&e).toString(16)).slice(-2)})),t},e.concatUint8Arrays=function(e,t){let n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n},e.splitToUint8Arrays=function(e,t){if(t>=e.length)throw new Error("Index is out of buffer");let n=e.slice(0,t),r=e.slice(t);return[n,r]},e.base64encode=function(e,t){let n;return e instanceof Uint8Array?n=e:("string"!=typeof e&&(e=(0,s.safeJsonStringify)(e)),n=i.default.decodeUTF8(e)),function(e,t){let n=i.default.encodeBase64(e);return t?encodeURIComponent(n):n}(n,t)},e.base64decode=function(e,t){let n=function(e,t){return t&&(e=decodeURIComponent(e)),i.default.decodeBase64(e)}(e,t);return{toString:()=>i.default.encodeUTF8(n),toObject(){try{return(0,s.safeJsonParse)(i.default.encodeUTF8(n))}catch{return null}},toUint8Array:()=>n}},e.checkWSUrl=function(e){let t=e.match(new RegExp(/^\w+:/,"gi"));if(!t||!t.length)return!1;let n=t[0];return void 0!==n&&new RegExp("^wss?:").test(n)},e.hashKey=d,e.generateRandomBytes32=h,e.generateTopic=function(){let e=h();return(0,f.logDebug)(`generate topic called ${e}`),d((0,o.toString)(e,u))},e.isIos=function(){let e=navigator.userAgent,t=navigator.maxTouchPoints||0,n=/iPad|iPhone|iPod/.test(e)&&!window.MSStream,r=e.includes("Mac")&&t>1;return(0,f.logDebug)(`utils isIos >>>isIOSDevice: ${n}    >> isIPadOS: ${r}`),n||r},e.getLastSixMd5Hash=function(e){return l.default.MD5(e).toString().slice(-6)},e.toSafeBase64FromBase64=function(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},e.useShortLink=function(){return!!window.useShortLink};var r=t(O()),i=t(x()),o=(en(),y(Zt)),a=on(),s=An(),f=Rn(),c=fo(),l=t(Xo()),u="base16";e.resolveWebSocketImplementation=()=>typeof WebSocket<"u"?WebSocket:typeof n.g<"u"&&typeof n.g.WebSocket<"u"?n.g.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:WebSocket;e.hasBuiltInWebSocket=()=>typeof WebSocket<"u"||typeof n.g<"u"&&typeof n.g.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u";e.hasLocalStorage=()=>typeof n.g<"u"&&typeof n.g.localStorage<"u"||typeof window<"u"&&typeof window.localStorage<"u";e.resolveLocalStorage=()=>typeof n.g<"u"&&typeof n.g.localStorage<"u"?n.g.localStorage:typeof window<"u"&&typeof window.localStorage<"u"?window.localStorage:localStorage;function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;(0,f.logDebug)(`hash key called ${e}`);let n=(0,a.hash)((0,c.okxfromString)(e,t));return(0,o.toString)(n,t)}function h(){return r.default.randomBytes(e.RANDOM_LENGTH)}e.isBrowser=()=>typeof window<"u",e.RANDOM_LENGTH=32;e.isValidObject=e=>Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length})),zo=h((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=e&&e.__importStar||function(){var e=function(t){return(e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t})(t)};return function(r){if(r&&r.__esModule)return r;var i={};if(null!=r)for(var o=e(r),a=0;a<o.length;a++)"default"!==o[a]&&t(i,r,o[a]);return n(i,r),i}}(),i=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.Storage=void 0;var o=E(),a=i(O()),s=Fo(),f=Sn(),c=r(Rn()),l=Sn(),u=Xo(),d=class e{constructor(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=(0,s.resolveLocalStorage)();c.logDebug("------ update before cache ------"),n&&this.checkAndUpgradeCache(n,t),this.storeKey="",this.cipherIV="",this.subKey=t,c.logDebug("--------get current local storage --------"),c.logDebug(r);let i=r.getItem(e.cacheKey+t);if(typeof i>"u"||null===i)return c.logDebug("with no cache"),void(this.cache={});if(c.logDebug(i),i?.length>0){var o=(0,f.safeJsonParse)(i);this.cache=o}c.logDebug(`get cache obj: ${this.cache}`),(typeof this.cache>"u"||null==this.cache)&&(this.cache={})}checkAndUpgradeCache(t,n){if(t&&t.length>0&&n&&n.length>0){c.logDebug("--------get current local storage --------"),c.logDebug(localStorage);let r=localStorage.getItem(e.cacheKey+t);if(typeof r>"u"||null===r)return void c.logDebug("no pre cache content");c.logDebug(r),r?.length>0&&(c.logDebug("write in cache content: ",t,"->",n),localStorage.setItem(e.cacheKey+n,r),c.logDebug("clean in cache content: ",t),localStorage.removeItem(e.cacheKey+t))}else c.logDebug("no pre cache key:",t)}saveContent(e,t){let n={id:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-",timestamp:Date.now().toString(),content:e};this.saveItem(n,t)}saveItem(t,n){let r=e.cacheKey+this.subKey,i=(0,s.resolveLocalStorage)();c.logDebug(this.cache),c.logDebug(`get cache obj: ${this.cache}, ${n}, ${t}`),this.cache[n]=t;let o=(0,f.safeJsonStringify)(this.cache);c.logDebug(`STORAGE: ${n} @ ${this.cache}`),i.setItem(r,o)}getItem(e){return c.logDebug(`STORAGE >> getItem: ${e} @ ${this.cache}`),this.cache[e]}getCachedPBKDF2InfoKey(){var e,t,n,r;if(this.storeKey.length>0&&(null===(e=this.cipherIV)||void 0===e?void 0:e.length)>0)return{pw:this.storeKey,iv:this.cipherIV};let i=null===(t=this.getItem(o.OKXCONNECTOR_STORAGER_CRYPTO_SALT))||void 0===t?void 0:t.content;i||(i=(0,s.toHexString)(a.default.randomBytes(24)),this.saveContent(i,o.OKXCONNECTOR_STORAGER_CRYPTO_SALT));let f=null===(n=this.getItem(o.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD))||void 0===n?void 0:n.content;f||(f=(0,s.toHexString)(a.default.randomBytes(32)),this.saveContent(f,o.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD));let c=null===(r=this.getItem(o.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV))||void 0===r?void 0:r.content;if(!c){let e=a.default.randomBytes(16);c=(0,s.toHexString)(e),this.saveContent(c,o.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV)}return this.cipherIV=c,this.storeKey=(0,u.PBKDF2)(f,i,{iterations:10}).toString(),{pw:this.storeKey,iv:this.cipherIV}}encryptStoreMsg(e,t){(0,l.logDebug)(`encryptStoreMsg  encryptStoreMsg start ${Date.now()}`);let n=this.getCachedPBKDF2InfoKey();(0,l.logDebug)(`encryptStoreMsg  encryptStoreMsg mid ${Date.now()}`);var r=u.AES.encrypt(e,n.pw).toString();this.saveContent(r,t),(0,l.logDebug)(`encryptStoreMsg  encryptStoreMsg end ${Date.now()}`)}getAndDecrypt(e){(0,l.logDebug)(`encryptStoreMsg  getAndDecrypt start ${Date.now()}`);let t=this.getItem(e);if(t&&t.content){let e=this.getCachedPBKDF2InfoKey();(0,l.logDebug)(`encryptStoreMsg  getAndDecrypt mid ${Date.now()}`);let n=u.AES.decrypt(t.content,e.pw).toString(u.enc.Utf8);return(0,l.logDebug)(`encryptStoreMsg  getAndDecrypt end ${Date.now()}`),n}return null}clearCache(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0===t){this.cache={};let t=e.cacheKey+this.subKey;localStorage.setItem(t,"")}else{let n=e.cacheKey+this.subKey,r=(0,s.resolveLocalStorage)();c.logDebug(this.cache),this.cache[t]=null;let i=(0,f.safeJsonStringify)(this.cache);c.logDebug(`STORAGE: clean key ${t} @ ${this.cache}`),r.setItem(n,i)}}};e.Storage=d,d.cacheKey="OKXStorageKey"})),Jo=h((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=e&&e.__importStar||function(){var e=function(t){return(e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t})(t)};return function(r){if(r&&r.__esModule)return r;var i={};if(null!=r)for(var o=e(r),a=0;a<o.length;a++)"default"!==o[a]&&t(i,r,o[a]);return n(i,r),i}}(),i=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.OKXWalletConnector=void 0;var o=_(),a=E(),s=zo(),f=Sn(),c=Fo(),l=dn(),u=r(Rn()),d=vn(),h=(0,c.resolveWebSocketImplementation)();e.OKXWalletConnector=class{constructor(e){if(this.events=new l.EventEmitter,this.state=o.ConnectorState.InitState,this.selectedUrlIndex=0,this.retryCount=0,this.timeOutLimit=8e3,!(0,c.checkWSUrl)(e))throw new Error(`CONNECTOR: invalid url ${e}`);this.url=e,this.heartbeatTimer=null,this.connectionTimeoutTimer=null,this.connectURLStorage=new s.Storage(a.OKXCONNECTOR_CACHE_KEY+a.OKXCONNECTOR_CACHE_KEY)}get connecting(){return this.state==o.ConnectorState.Connecting}onPayload(e){if(!(typeof e.data>"u")){if(u.logDebug("get received data"),u.logDebug(e),"string"==typeof e.data&&"pong"===e.data)return void u.logDebug(`CONNECT: receive pong ${Date.now().toString()}`);this.events.emit("payload",e.data)}}onClose(e){var t;u.logDebug("socket get closed: ",null===(t=this.socket)||void 0===t?void 0:t.url,e.code),this.socket=void 0,this.events.emit("close",e)}onError(e,t){let n={id:e,msg:t.toString()};this.events.emit("payload",n)}onopen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.state=o.ConnectorState.Connected,this.events.emit("open")}emitError(e){this.events.emit("fail",e)}heartbeat(){return i(this,void 0,void 0,(function*(){if(this.heartbeatTimer&&clearTimeout(this.heartbeatTimer),this.state==o.ConnectorState.Connected||this.state==o.ConnectorState.OnError){if(this.socket){if(this.socket.readyState===WebSocket.OPEN)u.logDebug(`send ping heart beat: ${Date.now().toString()}, ${this.socket}`),this.socket.send("ping"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3);else if(u.logDebug("socket not ready"),this.state==o.ConnectorState.Connected||this.state==o.ConnectorState.OnError){u.logDebug("socket reconnect by heartbeat with state",this.state,this.socket.readyState);try{yield this.tryRegistOpen()}catch{u.logError("regist open failed"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3)}}}else if(u.logDebug("socket not exist"),this.state==o.ConnectorState.Connected||this.state==o.ConnectorState.OnError){u.logDebug("socket reconnect by heartbeat");try{yield this.tryRegistOpen()}catch{u.logError("regist open failed"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3)}}}else u.logDebug("heart beat close")}))}registOpen(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(0,c.checkWSUrl)(e))throw new Error(`CONNECTOR: invalid url ${e}`);this.url=e,t||u.logDebug("Connection connect:",this.url,(new Date).toUTCString()),this.state=o.ConnectorState.Connecting;new URLSearchParams(e).get("origin");return new Promise(((t,n)=>{let r=new h(e,[]);u.logDebug("Connection connect Begin:",this.url,(new Date).toUTCString()),this.startTimeOutTimer(r),(0,c.hasBuiltInWebSocket)()?(u.logDebug("Add socket error handler"),r.onerror=()=>{n(new Error("socket error")),r.close()}):(u.logDebug("Add socket error handler"),r.on("error",(()=>{n(new Error("socket error")),r.close()}))),r.onopen=()=>{u.logDebug("socket opened"),this.resetTimeOutTimer(o.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.FINISHED),this.onopen(r),this.heartbeat(),t(r)}}))}checkMaxRetry(){return u.logDebug("current retry count:",this.retryCount,"of",o.OKXCONNECTOR_WS_URL_LIST.length),this.retryCount>o.OKXCONNECTOR_WS_URL_LIST.length}connectionTryNext(){return i(this,void 0,void 0,(function*(){if(!this.checkMaxRetry()){this.retryCount+=1;let e=this.getNextSelectUrl();return u.logDebug("Connection retry:",e,(new Date).toUTCString()),this.registOpen(e,!0)}u.logDebug("Max Connection retry ",this.retryCount,(new Date).toUTCString())}))}startTimeOutTimer(e){this.connectionTimeoutTimer&&this.resetTimeOutTimer(o.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.CANCELED),this.pendingSocket=e,this.connectionTimeoutTimer=setTimeout((()=>{this.pendingSocket&&this.resetTimeOutTimer(o.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.TIME_OUT)}),this.timeOutLimit)}resetTimeOutTimer(e){var t;e!=o.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.FINISHED&&(null===(t=this.pendingSocket)||void 0===t||t.close(e)),this.pendingSocket=void 0,clearTimeout(this.connectionTimeoutTimer)}cacheSuccessUrlSelect(){this.connectURLStorage.saveContent(this.selectedUrlIndex.toString(),a.OKXCONNECTOR_CACHE_KEY)}getNextSelectUrl(){return this.selectedUrlIndex+=1,this.selectedUrlIndex=this.selectedUrlIndex%o.OKXCONNECTOR_WS_URL_LIST.length,o.OKXCONNECTOR_WS_URL_LIST[this.selectedUrlIndex]}onVisibleChanged(){return i(this,void 0,void 0,(function*(){if("visible"===document.visibilityState&&(u.logDebug(`get changed ${this.state}, ${this.socket}`),this.state==o.ConnectorState.Connected&&typeof this.socket>"u")){u.logDebug("CONNECTION need reopen");try{yield this.tryRegistOpen()}catch{u.logError("regist open failed")}}else;}))}tryRegistOpen(){return i(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url;return function*(){if(e.connecting)return u.logDebug("tryRegistOpen => connecting state"),new Promise(((t,n)=>{e.events.once("fail",(e=>(u.logDebug("tryRegistOpen => connecting fail listener",e),n(e)))),e.events.once("open",(()=>typeof e.socket>"u"?n(new Error("Connect lost")):t(e.socket)))}));u.logDebug("tryRegistOpen => try registOpen until retry limit is hit");let n=!1;for(;!e.checkMaxRetry()&&!e.socket;)try{u.logDebug("tryRegistOpen => call registOpen, try count:",e.retryCount,n),yield e.registOpen(t,n)}catch(r){u.logDebug("tryRegistOpen => registOpen failed",r),e.retryCount+=1,t=e.getNextSelectUrl(),n=!0}if(u.logDebug("tryRegistOpen => exit while loop",e.retryCount,e.socket),!e.socket&&e.checkMaxRetry())throw u.logDebug("tryRegistOpen => failed to open a socket",e.retryCount,e.socket),e.retryCount=0,e.state=o.ConnectorState.OnError,e.emitError(new Error("tryRegistOpen failed")),new d.OKXConnectError(d.OKX_CONNECT_ERROR_CODES.CONNECTION_ERROR,"Failed to connect")}()}))}connect(){return i(this,void 0,void 0,(function*(){try{yield this.tryRegistOpen(),document.removeEventListener("visibilitychange",this.onVisibleChanged.bind(this)),document.addEventListener("visibilitychange",this.onVisibleChanged.bind(this))}catch(e){throw u.logDebug("connect => failed to connect",e),e}}))}disconnect(){return i(this,void 0,void 0,(function*(){return this.state=o.ConnectorState.Disconnected,new Promise(((e,t)=>{typeof this.socket>"u"?e():(this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close(),this.heartbeatTimer&&clearTimeout(this.heartbeatTimer))}))}))}currentStatus(){return{state:this.state,url:this.url}}addListener(e,t,n,r){this.listenPayloadHandler&&this.events.removeListener("payload",this.listenPayloadHandler),this.listenPayloadHandler=i=>{var o;u.logDebug(`<<< get payload ${i}`);let a=(0,f.safeJsonParse)(i);if(a.params&&a.params.data){let i=null===(o=a.params.data)||void 0===o?void 0:o.message;if(i)try{let o=t(i);void 0===o?(u.logDebug("CONNECT: decrypt undefined"),r(e,"Decrypt undefined")):n(e,o)}catch(Hc){u.logDebug(`CONNECT: decrypt failed: ${Hc}`),r(e,Hc.message)}}},this.events.on("payload",this.listenPayloadHandler),this.failHandler&&this.events.removeListener("fail",this.failHandler),this.failHandler=t=>{t?(u.logDebug(`CONNECT failed: ${t}`),r(e,t.message)):r(e,"Unkonow error")},this.events.on("fail",this.failHandler)}addPackageParse(e){this.payloadHandler&&this.events.removeListener("payload",this.payloadHandler),this.payloadHandler=t=>i(this,void 0,void 0,(function*(){u.logDebug(`CONNECTION @[${(new Date).toUTCString()}] <<<< received e:${t}`);let n=(0,f.safeJsonParse)(t);yield e(n)})),this.events.on("payload",this.payloadHandler)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}send(e,t){return i(this,void 0,void 0,(function*(){try{typeof this.socket>"u"&&(u.logDebug(`>>> send payload undefined ${t}`),yield e()),u.logDebug(`CONNECTION @[${(new Date).toUTCString()}]>>> send payload ${(0,f.safeJsonStringify)(t)}`),this.socket&&this.socket.send((0,f.safeJsonStringify)(t))}catch(n){this.onError(t.id,n)}}))}getMsgPayloadFromHistory(e){return i(this,void 0,void 0,(function*(){if(typeof e>"u")return;let t={params:{data:e}},n=(0,f.safeJsonStringify)(e);u.logDebug("get received data from history"),u.logDebug(n),n=(0,f.safeJsonStringify)(t),this.events.emit("payload",n)}))}onOpen(e){this.openHandler&&this.events.removeListener("open",this.openHandler),this.openHandler=()=>i(this,void 0,void 0,(function*(){u.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> ws opened: `),yield e()})),this.events.on("open",this.openHandler),this.cacheSuccessUrlSelect()}}})),Vo=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CONNECT_METHOD_BATCH_FETCHMSG=e.CONNECT_METHOD_FETCHMSG=e.CONNECT_METHOD_RECEIVE=e.CONNECT_METHOD_UNSUB=e.CONNECT_METHOD_SUB=e.CONNECT_METHOD_PUBLISH=e.CONNECT_METHOD_LOGIN=e.CONNECT_METHOD_PUSH=void 0,e.CONNECT_METHOD_PUSH="push",e.CONNECT_METHOD_LOGIN="login",e.CONNECT_METHOD_PUBLISH="publish",e.CONNECT_METHOD_SUB="subscribe",e.CONNECT_METHOD_UNSUB="unsubscribe",e.CONNECT_METHOD_RECEIVE="receive",e.CONNECT_METHOD_FETCHMSG="fetchMessages",e.CONNECT_METHOD_BATCH_FETCHMSG="batchFetchMessages"})),Go=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OKXCONNECTOR_JWT_TTL=e.OKXCONNECTOR_JWT_WALLET_SIDE=e.OKXCONNECTOR_JWT_SIDE=void 0,e.OKXCONNECTOR_JWT_SIDE="wallet",e.OKXCONNECTOR_JWT_WALLET_SIDE="dapp",e.OKXCONNECTOR_JWT_TTL=864e5})),Yo=h((e=>{var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.SessionCrypto=void 0;var n=t(O()),r=Fo();e.SessionCrypto=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.nonceLength=24,this.sessionKeyPair=e?this.createKeypairFromString(e):this.createKeypair()}createKeypair(){return n.default.box.keyPair()}createKeypairFromString(e){return{publicKey:(0,r.hexToByteArray)(e.publicKey),secretKey:(0,r.hexToByteArray)(e.secretKey)}}createNonce(){return n.default.randomBytes(this.nonceLength)}get keyPair(){return this.sessionKeyPair}encrypt(e,t){let i=(new TextEncoder).encode(e),o=this.createNonce(),a=n.default.box(i,o,(0,r.hexToByteArray)(t),this.keyPair.secretKey),s=(0,r.concatUint8Arrays)(o,a);var f=(0,r.toHexString)(s),c=(new TextEncoder).encode(f);return(0,r.base64encode)(c,!1)}encryptWallet(e,t){let i=(new TextEncoder).encode(e),o=this.createNonce(),a=n.default.box(i,o,(0,r.hexToByteArray)(t),this.keyPair.secretKey),s=(0,r.concatUint8Arrays)(o,a);return(0,r.base64encode)(s,!1)}decrypt(e,t){let i=(0,r.base64decode)(e,!0).toUint8Array(),[o,a]=(0,r.splitToUint8Arrays)(i,this.nonceLength),s=n.default.box.open(a,o,(0,r.hexToByteArray)(t),this.keyPair.secretKey);if(!s)throw new Error(`Decryption error: \n message: ${e.toString()} \n sender pubkey: ${t.toString()} \n keypair pubkey: ${(0,r.toHexString)(this.keyPair.publicKey)} \n keypair secretkey: ${(0,r.toHexString)(this.keyPair.secretKey)}`);return(new TextDecoder).decode(s)}decryptWallet(e,t){let i=(0,r.base64decode)(e,!0),o=(0,r.hexToByteArray)(i.toString()),[a,s]=(0,r.splitToUint8Arrays)(o,this.nonceLength),f=n.default.box.open(s,a,(0,r.hexToByteArray)(t),this.keyPair.secretKey);if(!f)throw new Error(`Decryption error: \n message: ${e.toString()} \n sender pubkey: ${t.toString()} \n keypair pubkey: ${(0,r.toHexString)(this.keyPair.publicKey)} \n keypair secretkey: ${(0,r.toHexString)(this.keyPair.secretKey)}`);return(new TextDecoder).decode(f)}stringifyKeypair(){return{publicKey:(0,r.toHexString)(this.keyPair.publicKey),secretKey:(0,r.toHexString)(this.keyPair.secretKey)}}}})),Zo=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserRandomSource=void 0;e.BrowserRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;let e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&void 0!==e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");let t=new Uint8Array(e);for(let n=0;n<t.length;n+=65536)this._crypto.getRandomValues(t.subarray(n,n+Math.min(t.length-n,65536)));return t}}})),Qo=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeRandomSource=void 0;var t=rn();e.NodeRandomSource=class{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof u<"u"){let e=C();e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let n=this._crypto.randomBytes(e);if(n.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");let r=new Uint8Array(e);for(let t=0;t<r.length;t++)r[t]=n[t];return(0,t.wipe)(n),r}}})),ea=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SystemRandomSource=void 0;var t=Zo(),n=Qo();e.SystemRandomSource=class{constructor(){return this.isAvailable=!1,this.name="",this._source=new t.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new n.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}})),ta=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.randomStringForEntropy=e.randomString=e.randomUint32=e.randomBytes=e.defaultRandomSource=void 0;var t=ea(),n=nn(),r=rn();function i(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.defaultRandomSource).randomBytes(t)}e.defaultRandomSource=new t.SystemRandomSource,e.randomBytes=i,e.randomUint32=function(){let t=i(4,arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.defaultRandomSource),o=(0,n.readUint32LE)(t);return(0,r.wipe)(t),o};var o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.defaultRandomSource;if(n.length<2)throw new Error("randomString charset is too short");if(n.length>256)throw new Error("randomString charset is too long");let s="",f=n.length,c=256-256%f;for(;t>0;){let e=i(Math.ceil(256*t/c),a);for(let r=0;r<e.length&&t>0;r++){let i=e[r];i<c&&(s+=n.charAt(i%f),t--)}(0,r.wipe)(e)}return s}e.randomString=a,e.randomStringForEntropy=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.defaultRandomSource;return a(Math.ceil(t/(Math.log(n.length)/Math.LN2)),n,r)}})),na=h((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=nn(),n=rn();e.DIGEST_LENGTH=64,e.BLOCK_SIZE=128;var r=function(){function r(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return r.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},r.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},r.prototype.clean=function(){n.wipe(this._buffer),n.wipe(this._tempHi),n.wipe(this._tempLo),this.reset()},r.prototype.update=function(t,n){if(void 0===n&&(n=t.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var r=0;if(this._bytesHashed+=n,this._bufferLength>0){for(;this._bufferLength<e.BLOCK_SIZE&&n>0;)this._buffer[this._bufferLength++]=t[r++],n--;this._bufferLength===this.blockSize&&(o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(n>=this.blockSize&&(r=o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,t,r,n),n%=this.blockSize);n>0;)this._buffer[this._bufferLength++]=t[r++],n--;return this},r.prototype.finish=function(e){if(!this._finished){var n=this._bytesHashed,r=this._bufferLength,i=n/536870912|0,a=n<<3,s=n%128<112?128:256;this._buffer[r]=128;for(var f=r+1;f<s-8;f++)this._buffer[f]=0;t.writeUint32BE(i,this._buffer,s-8),t.writeUint32BE(a,this._buffer,s-4),o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,s),this._finished=!0}for(f=0;f<this.digestLength/8;f++)t.writeUint32BE(this._stateHi[f],e,8*f),t.writeUint32BE(this._stateLo[f],e,8*f+4);return this},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},r.prototype.restoreState=function(e){return this._stateHi.set(e.stateHi),this._stateLo.set(e.stateLo),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},r.prototype.cleanSavedState=function(e){n.wipe(e.stateHi),n.wipe(e.stateLo),e.buffer&&n.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},r}();e.SHA512=r;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function o(e,n,r,o,a,s,f){for(var c,l,u,d,h,p,g,b,y=r[0],m=r[1],v=r[2],w=r[3],_=r[4],E=r[5],C=r[6],O=r[7],x=o[0],S=o[1],k=o[2],T=o[3],R=o[4],A=o[5],I=o[6],N=o[7];f>=128;){for(var P=0;P<16;P++){var D=8*P+s;e[P]=t.readUint32BE(a,D),n[P]=t.readUint32BE(a,D+4)}for(P=0;P<80;P++){var B,M,K=y,L=m,U=v,j=w,W=_,H=E,$=C,q=x,X=S,F=k,z=T,J=R,V=A,G=I;if(h=65535&(l=N),p=l>>>16,g=65535&(c=O),b=c>>>16,h+=65535&(l=(R>>>14|_<<18)^(R>>>18|_<<14)^(_>>>9|R<<23)),p+=l>>>16,g+=65535&(c=(_>>>14|R<<18)^(_>>>18|R<<14)^(R>>>9|_<<23)),b+=c>>>16,h+=65535&(l=R&A^~R&I),p+=l>>>16,g+=65535&(c=_&E^~_&C),b+=c>>>16,c=i[2*P],h+=65535&(l=i[2*P+1]),p+=l>>>16,g+=65535&c,b+=c>>>16,c=e[P%16],p+=(l=n[P%16])>>>16,g+=65535&c,b+=c>>>16,g+=(p+=(h+=65535&l)>>>16)>>>16,h=65535&(l=d=65535&h|p<<16),p=l>>>16,g=65535&(c=u=65535&g|(b+=g>>>16)<<16),b=c>>>16,h+=65535&(l=(x>>>28|y<<4)^(y>>>2|x<<30)^(y>>>7|x<<25)),p+=l>>>16,g+=65535&(c=(y>>>28|x<<4)^(x>>>2|y<<30)^(x>>>7|y<<25)),b+=c>>>16,p+=(l=x&S^x&k^S&k)>>>16,g+=65535&(c=y&m^y&v^m&v),b+=c>>>16,B=65535&(g+=(p+=(h+=65535&l)>>>16)>>>16)|(b+=g>>>16)<<16,M=65535&h|p<<16,h=65535&(l=z),p=l>>>16,g=65535&(c=j),b=c>>>16,p+=(l=d)>>>16,g+=65535&(c=u),b+=c>>>16,m=K,v=L,w=U,_=j=65535&(g+=(p+=(h+=65535&l)>>>16)>>>16)|(b+=g>>>16)<<16,E=W,C=H,O=$,y=B,S=q,k=X,T=F,R=z=65535&h|p<<16,A=J,I=V,N=G,x=M,P%16===15)for(D=0;D<16;D++)c=e[D],h=65535&(l=n[D]),p=l>>>16,g=65535&c,b=c>>>16,c=e[(D+9)%16],h+=65535&(l=n[(D+9)%16]),p+=l>>>16,g+=65535&c,b+=c>>>16,u=e[(D+1)%16],h+=65535&(l=((d=n[(D+1)%16])>>>1|u<<31)^(d>>>8|u<<24)^(d>>>7|u<<25)),p+=l>>>16,g+=65535&(c=(u>>>1|d<<31)^(u>>>8|d<<24)^u>>>7),b+=c>>>16,u=e[(D+14)%16],p+=(l=((d=n[(D+14)%16])>>>19|u<<13)^(u>>>29|d<<3)^(d>>>6|u<<26))>>>16,g+=65535&(c=(u>>>19|d<<13)^(d>>>29|u<<3)^u>>>6),b+=c>>>16,b+=(g+=(p+=(h+=65535&l)>>>16)>>>16)>>>16,e[D]=65535&g|b<<16,n[D]=65535&h|p<<16}h=65535&(l=x),p=l>>>16,g=65535&(c=y),b=c>>>16,c=r[0],p+=(l=o[0])>>>16,g+=65535&c,b+=c>>>16,b+=(g+=(p+=(h+=65535&l)>>>16)>>>16)>>>16,r[0]=y=65535&g|b<<16,o[0]=x=65535&h|p<<16,h=65535&(l=S),p=l>>>16,g=65535&(c=m),b=c>>>16,c=r[1],p+=(l=o[1])>>>16,g+=65535&c,b+=c>>>16,b+=(g+=(p+=(h+=65535&l)>>>16)>>>16)>>>16,r[1]=m=65535&g|b<<16,o[1]=S=65535&h|p<<16,h=65535&(l=k),p=l>>>16,g=65535&(c=v),b=c>>>16,c=r[2],p+=(l=o[2])>>>16,g+=65535&c,b+=c>>>16,b+=(g+=(p+=(h+=65535&l)>>>16)>>>16)>>>16,r[2]=v=65535&g|b<<16,o[2]=k=65535&h|p<<16,h=65535&(l=T),p=l>>>16,g=65535&(c=w),b=c>>>16,c=r[3],p+=(l=o[3])>>>16,g+=65535&c,b+=c>>>16,b+=(g+=(p+=(h+=65535&l)>>>16)>>>16)>>>16,r[3]=w=65535&g|b<<16,o[3]=T=65535&h|p<<16,h=65535&(l=R),p=l>>>16,g=65535&(c=_),b=c>>>16,c=r[4],p+=(l=o[4])>>>16,g+=65535&c,b+=c>>>16,b+=(g+=(p+=(h+=65535&l)>>>16)>>>16)>>>16,r[4]=_=65535&g|b<<16,o[4]=R=65535&h|p<<16,h=65535&(l=A),p=l>>>16,g=65535&(c=E),b=c>>>16,c=r[5],p+=(l=o[5])>>>16,g+=65535&c,b+=c>>>16,b+=(g+=(p+=(h+=65535&l)>>>16)>>>16)>>>16,r[5]=E=65535&g|b<<16,o[5]=A=65535&h|p<<16,h=65535&(l=I),p=l>>>16,g=65535&(c=C),b=c>>>16,c=r[6],p+=(l=o[6])>>>16,g+=65535&c,b+=c>>>16,b+=(g+=(p+=(h+=65535&l)>>>16)>>>16)>>>16,r[6]=C=65535&g|b<<16,o[6]=I=65535&h|p<<16,h=65535&(l=N),p=l>>>16,g=65535&(c=O),b=c>>>16,c=r[7],p+=(l=o[7])>>>16,g+=65535&c,b+=c>>>16,b+=(g+=(p+=(h+=65535&l)>>>16)>>>16)>>>16,r[7]=O=65535&g|b<<16,o[7]=N=65535&h|p<<16,s+=128,f-=128}return s}e.hash=function(e){var t=new r;t.update(e);var n=t.digest();return t.clean(),n}})),ra=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertSecretKeyToX25519=e.convertPublicKeyToX25519=e.verify=e.sign=e.extractPublicKeyFromSecretKey=e.generateKeyPair=e.generateKeyPairFromSeed=e.SEED_LENGTH=e.SECRET_KEY_LENGTH=e.PUBLIC_KEY_LENGTH=e.SIGNATURE_LENGTH=void 0;var t=ta(),n=na(),r=rn();function i(e){let t=new Float64Array(16);if(e)for(let n=0;n<e.length;n++)t[n]=e[n];return t}e.SIGNATURE_LENGTH=64,e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=64,e.SEED_LENGTH=32,new Uint8Array(32)[0]=9;var o=i(),a=i([1]),s=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),f=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),c=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),l=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),u=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function d(e,t){for(let n=0;n<16;n++)e[n]=0|t[n]}function h(e){let t=1;for(let n=0;n<16;n++){let r=e[n]+t+65535;t=Math.floor(r/65536),e[n]=r-65536*t}e[0]+=t-1+37*(t-1)}function p(e,t,n){let r=~(n-1);for(let i=0;i<16;i++){let n=r&(e[i]^t[i]);e[i]^=n,t[i]^=n}}function g(e,t){let n=i(),r=i();for(let i=0;i<16;i++)r[i]=t[i];h(r),h(r),h(r);for(let i=0;i<2;i++){n[0]=r[0]-65517;for(let t=1;t<15;t++)n[t]=r[t]-65535-(n[t-1]>>16&1),n[t-1]&=65535;n[15]=r[15]-32767-(n[14]>>16&1);let e=n[15]>>16&1;n[14]&=65535,p(r,n,1-e)}for(let i=0;i<16;i++)e[2*i]=255&r[i],e[2*i+1]=r[i]>>8}function b(e,t){let n=0;for(let r=0;r<32;r++)n|=e[r]^t[r];return(1&n-1>>>8)-1}function y(e,t){let n=new Uint8Array(32),r=new Uint8Array(32);return g(n,e),g(r,t),b(n,r)}function m(e){let t=new Uint8Array(32);return g(t,e),1&t[0]}function v(e,t,n){for(let r=0;r<16;r++)e[r]=t[r]+n[r]}function w(e,t,n){for(let r=0;r<16;r++)e[r]=t[r]-n[r]}function _(e,t,n){let r,i,o=0,a=0,s=0,f=0,c=0,l=0,u=0,d=0,h=0,p=0,g=0,b=0,y=0,m=0,v=0,w=0,_=0,E=0,C=0,O=0,x=0,S=0,k=0,T=0,R=0,A=0,I=0,N=0,P=0,D=0,B=0,M=n[0],K=n[1],L=n[2],U=n[3],j=n[4],W=n[5],H=n[6],$=n[7],q=n[8],X=n[9],F=n[10],z=n[11],J=n[12],V=n[13],G=n[14],Y=n[15];r=t[0],o+=r*M,a+=r*K,s+=r*L,f+=r*U,c+=r*j,l+=r*W,u+=r*H,d+=r*$,h+=r*q,p+=r*X,g+=r*F,b+=r*z,y+=r*J,m+=r*V,v+=r*G,w+=r*Y,r=t[1],a+=r*M,s+=r*K,f+=r*L,c+=r*U,l+=r*j,u+=r*W,d+=r*H,h+=r*$,p+=r*q,g+=r*X,b+=r*F,y+=r*z,m+=r*J,v+=r*V,w+=r*G,_+=r*Y,r=t[2],s+=r*M,f+=r*K,c+=r*L,l+=r*U,u+=r*j,d+=r*W,h+=r*H,p+=r*$,g+=r*q,b+=r*X,y+=r*F,m+=r*z,v+=r*J,w+=r*V,_+=r*G,E+=r*Y,r=t[3],f+=r*M,c+=r*K,l+=r*L,u+=r*U,d+=r*j,h+=r*W,p+=r*H,g+=r*$,b+=r*q,y+=r*X,m+=r*F,v+=r*z,w+=r*J,_+=r*V,E+=r*G,C+=r*Y,r=t[4],c+=r*M,l+=r*K,u+=r*L,d+=r*U,h+=r*j,p+=r*W,g+=r*H,b+=r*$,y+=r*q,m+=r*X,v+=r*F,w+=r*z,_+=r*J,E+=r*V,C+=r*G,O+=r*Y,r=t[5],l+=r*M,u+=r*K,d+=r*L,h+=r*U,p+=r*j,g+=r*W,b+=r*H,y+=r*$,m+=r*q,v+=r*X,w+=r*F,_+=r*z,E+=r*J,C+=r*V,O+=r*G,x+=r*Y,r=t[6],u+=r*M,d+=r*K,h+=r*L,p+=r*U,g+=r*j,b+=r*W,y+=r*H,m+=r*$,v+=r*q,w+=r*X,_+=r*F,E+=r*z,C+=r*J,O+=r*V,x+=r*G,S+=r*Y,r=t[7],d+=r*M,h+=r*K,p+=r*L,g+=r*U,b+=r*j,y+=r*W,m+=r*H,v+=r*$,w+=r*q,_+=r*X,E+=r*F,C+=r*z,O+=r*J,x+=r*V,S+=r*G,k+=r*Y,r=t[8],h+=r*M,p+=r*K,g+=r*L,b+=r*U,y+=r*j,m+=r*W,v+=r*H,w+=r*$,_+=r*q,E+=r*X,C+=r*F,O+=r*z,x+=r*J,S+=r*V,k+=r*G,T+=r*Y,r=t[9],p+=r*M,g+=r*K,b+=r*L,y+=r*U,m+=r*j,v+=r*W,w+=r*H,_+=r*$,E+=r*q,C+=r*X,O+=r*F,x+=r*z,S+=r*J,k+=r*V,T+=r*G,R+=r*Y,r=t[10],g+=r*M,b+=r*K,y+=r*L,m+=r*U,v+=r*j,w+=r*W,_+=r*H,E+=r*$,C+=r*q,O+=r*X,x+=r*F,S+=r*z,k+=r*J,T+=r*V,R+=r*G,A+=r*Y,r=t[11],b+=r*M,y+=r*K,m+=r*L,v+=r*U,w+=r*j,_+=r*W,E+=r*H,C+=r*$,O+=r*q,x+=r*X,S+=r*F,k+=r*z,T+=r*J,R+=r*V,A+=r*G,I+=r*Y,r=t[12],y+=r*M,m+=r*K,v+=r*L,w+=r*U,_+=r*j,E+=r*W,C+=r*H,O+=r*$,x+=r*q,S+=r*X,k+=r*F,T+=r*z,R+=r*J,A+=r*V,I+=r*G,N+=r*Y,r=t[13],m+=r*M,v+=r*K,w+=r*L,_+=r*U,E+=r*j,C+=r*W,O+=r*H,x+=r*$,S+=r*q,k+=r*X,T+=r*F,R+=r*z,A+=r*J,I+=r*V,N+=r*G,P+=r*Y,r=t[14],v+=r*M,w+=r*K,_+=r*L,E+=r*U,C+=r*j,O+=r*W,x+=r*H,S+=r*$,k+=r*q,T+=r*X,R+=r*F,A+=r*z,I+=r*J,N+=r*V,P+=r*G,D+=r*Y,r=t[15],w+=r*M,_+=r*K,E+=r*L,C+=r*U,O+=r*j,x+=r*W,S+=r*H,k+=r*$,T+=r*q,R+=r*X,A+=r*F,I+=r*z,N+=r*J,P+=r*V,D+=r*G,B+=r*Y,o+=38*_,a+=38*E,s+=38*C,f+=38*O,c+=38*x,l+=38*S,u+=38*k,d+=38*T,h+=38*R,p+=38*A,g+=38*I,b+=38*N,y+=38*P,m+=38*D,v+=38*B,i=1,r=o+i+65535,i=Math.floor(r/65536),o=r-65536*i,r=a+i+65535,i=Math.floor(r/65536),a=r-65536*i,r=s+i+65535,i=Math.floor(r/65536),s=r-65536*i,r=f+i+65535,i=Math.floor(r/65536),f=r-65536*i,r=c+i+65535,i=Math.floor(r/65536),c=r-65536*i,r=l+i+65535,i=Math.floor(r/65536),l=r-65536*i,r=u+i+65535,i=Math.floor(r/65536),u=r-65536*i,r=d+i+65535,i=Math.floor(r/65536),d=r-65536*i,r=h+i+65535,i=Math.floor(r/65536),h=r-65536*i,r=p+i+65535,i=Math.floor(r/65536),p=r-65536*i,r=g+i+65535,i=Math.floor(r/65536),g=r-65536*i,r=b+i+65535,i=Math.floor(r/65536),b=r-65536*i,r=y+i+65535,i=Math.floor(r/65536),y=r-65536*i,r=m+i+65535,i=Math.floor(r/65536),m=r-65536*i,r=v+i+65535,i=Math.floor(r/65536),v=r-65536*i,r=w+i+65535,i=Math.floor(r/65536),w=r-65536*i,o+=i-1+37*(i-1),i=1,r=o+i+65535,i=Math.floor(r/65536),o=r-65536*i,r=a+i+65535,i=Math.floor(r/65536),a=r-65536*i,r=s+i+65535,i=Math.floor(r/65536),s=r-65536*i,r=f+i+65535,i=Math.floor(r/65536),f=r-65536*i,r=c+i+65535,i=Math.floor(r/65536),c=r-65536*i,r=l+i+65535,i=Math.floor(r/65536),l=r-65536*i,r=u+i+65535,i=Math.floor(r/65536),u=r-65536*i,r=d+i+65535,i=Math.floor(r/65536),d=r-65536*i,r=h+i+65535,i=Math.floor(r/65536),h=r-65536*i,r=p+i+65535,i=Math.floor(r/65536),p=r-65536*i,r=g+i+65535,i=Math.floor(r/65536),g=r-65536*i,r=b+i+65535,i=Math.floor(r/65536),b=r-65536*i,r=y+i+65535,i=Math.floor(r/65536),y=r-65536*i,r=m+i+65535,i=Math.floor(r/65536),m=r-65536*i,r=v+i+65535,i=Math.floor(r/65536),v=r-65536*i,r=w+i+65535,i=Math.floor(r/65536),w=r-65536*i,o+=i-1+37*(i-1),e[0]=o,e[1]=a,e[2]=s,e[3]=f,e[4]=c,e[5]=l,e[6]=u,e[7]=d,e[8]=h,e[9]=p,e[10]=g,e[11]=b,e[12]=y,e[13]=m,e[14]=v,e[15]=w}function E(e,t){_(e,t,t)}function C(e,t){let n,r=i();for(n=0;n<16;n++)r[n]=t[n];for(n=253;n>=0;n--)E(r,r),2!==n&&4!==n&&_(r,r,t);for(n=0;n<16;n++)e[n]=r[n]}function O(e,t){let n=i(),r=i(),o=i(),a=i(),s=i(),c=i(),l=i(),u=i(),d=i();w(n,e[1],e[0]),w(d,t[1],t[0]),_(n,n,d),v(r,e[0],e[1]),v(d,t[0],t[1]),_(r,r,d),_(o,e[3],t[3]),_(o,o,f),_(a,e[2],t[2]),v(a,a,a),w(s,r,n),w(c,a,o),v(l,a,o),v(u,r,n),_(e[0],s,c),_(e[1],u,l),_(e[2],l,c),_(e[3],s,u)}function x(e,t,n){for(let r=0;r<4;r++)p(e[r],t[r],n)}function S(e,t){let n=i(),r=i(),o=i();C(o,t[2]),_(n,t[0],o),_(r,t[1],o),g(e,r),e[31]^=m(n)<<7}function k(e,t,n){d(e[0],o),d(e[1],a),d(e[2],a),d(e[3],o);for(let r=255;r>=0;--r){let i=n[r/8|0]>>(7&r)&1;x(e,t,i),O(t,e),O(e,e),x(e,t,i)}}function T(e,t){let n=[i(),i(),i(),i()];d(n[0],c),d(n[1],l),d(n[2],a),_(n[3],c,l),k(e,n,t)}function R(t){if(t.length!==e.SEED_LENGTH)throw new Error(`ed25519: seed must be ${e.SEED_LENGTH} bytes`);let r=(0,n.hash)(t);r[0]&=248,r[31]&=127,r[31]|=64;let o=new Uint8Array(32),a=[i(),i(),i(),i()];T(a,r),S(o,a);let s=new Uint8Array(64);return s.set(t),s.set(o,32),{publicKey:o,secretKey:s}}e.generateKeyPairFromSeed=R,e.generateKeyPair=function(e){let n=(0,t.randomBytes)(32,e),i=R(n);return(0,r.wipe)(n),i},e.extractPublicKeyFromSecretKey=function(t){if(t.length!==e.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${e.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(t.subarray(32))};var A=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function I(e,t){let n,r,i,o;for(r=63;r>=32;--r){for(n=0,i=r-32,o=r-12;i<o;++i)t[i]+=n-16*t[r]*A[i-(r-32)],n=Math.floor((t[i]+128)/256),t[i]-=256*n;t[i]+=n,t[r]=0}for(n=0,i=0;i<32;i++)t[i]+=n-(t[31]>>4)*A[i],n=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=n*A[i];for(r=0;r<32;r++)t[r+1]+=t[r]>>8,e[r]=255&t[r]}function N(e){let t=new Float64Array(64);for(let n=0;n<64;n++)t[n]=e[n];for(let n=0;n<64;n++)e[n]=0;I(e,t)}function P(e,t){let n=i(),r=i(),f=i(),c=i(),l=i(),h=i(),p=i();return d(e[2],a),function(e,t){for(let n=0;n<16;n++)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}(e[1],t),E(f,e[1]),_(c,f,s),w(f,f,e[2]),v(c,e[2],c),E(l,c),E(h,l),_(p,h,l),_(n,p,f),_(n,n,c),function(e,t){let n,r=i();for(n=0;n<16;n++)r[n]=t[n];for(n=250;n>=0;n--)E(r,r),1!==n&&_(r,r,t);for(n=0;n<16;n++)e[n]=r[n]}(n,n),_(n,n,f),_(n,n,c),_(n,n,c),_(e[0],n,c),E(r,e[0]),_(r,r,c),y(r,f)&&_(e[0],e[0],u),E(r,e[0]),_(r,r,c),y(r,f)?-1:(m(e[0])===t[31]>>7&&w(e[0],o,e[0]),_(e[3],e[0],e[1]),0)}e.sign=function(e,t){let r=new Float64Array(64),o=[i(),i(),i(),i()],a=(0,n.hash)(e.subarray(0,32));a[0]&=248,a[31]&=127,a[31]|=64;let s=new Uint8Array(64);s.set(a.subarray(32),32);let f=new n.SHA512;f.update(s.subarray(32)),f.update(t);let c=f.digest();f.clean(),N(c),T(o,c),S(s,o),f.reset(),f.update(s.subarray(0,32)),f.update(e.subarray(32)),f.update(t);let l=f.digest();N(l);for(let n=0;n<32;n++)r[n]=c[n];for(let n=0;n<32;n++)for(let e=0;e<32;e++)r[n+e]+=l[n]*a[e];return I(s.subarray(32),r),s},e.verify=function(t,r,o){let a=new Uint8Array(32),s=[i(),i(),i(),i()],f=[i(),i(),i(),i()];if(o.length!==e.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${e.SIGNATURE_LENGTH} bytes`);if(P(f,t))return!1;let c=new n.SHA512;c.update(o.subarray(0,32)),c.update(t),c.update(r);let l=c.digest();return N(l),k(s,f,l),T(f,o.subarray(32)),O(s,f),S(a,s),!b(o,a)},e.convertPublicKeyToX25519=function(e){let t=[i(),i(),i(),i()];if(P(t,e))throw new Error("Ed25519: invalid public key");let n=i(),r=i(),o=t[1];v(n,a,o),w(r,a,o),C(r,r),_(n,n,r);let s=new Uint8Array(32);return g(s,n),s},e.convertSecretKeyToX25519=function(e){let t=(0,n.hash)(e.subarray(0,32));t[0]&=248,t[31]&=127,t[31]|=64;let i=new Uint8Array(t.subarray(0,32));return(0,r.wipe)(t),i}})),ia=h((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=e&&e.__importStar||function(){var e=function(t){return(e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t})(t)};return function(r){if(r&&r.__esModule)return r;var i={};if(null!=r)for(var o=e(r),a=0;a<o.length;a++)"default"!==o[a]&&t(i,r,o[a]);return n(i,r),i}}(),i=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))},o=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.MULTICODEC_ED25519_LENGTH=e.MULTICODEC_ED25519_HEADER=e.MULTICODEC_ED25519_BASE=e.MULTICODEC_ED25519_ENCODING=e.DID_METHOD=e.DID_PREFIX=e.DID_DELIMITER=e.KEY_PAIR_SEED_LENGTH=e.DATA_ENCODING=e.JSON_ENCODING=e.JWT_ENCODING=e.JWT_DELIMITER=e.JWT_IRIDIUM_TYP=e.JWT_IRIDIUM_ALG=e.JWTHeaderType=void 0,e.generateKeyPair=function(){return c.default.sign.keyPair()},e.decodeJSON=d,e.encodeJSON=h,e.encodeIss=p,e.decodeIss=g,e.encodeSig=b,e.decodeSig=y,e.encodeData=m,e.decodeData=function(t){var n,r;let i=(0,u.okxtoString)(t,e.DATA_ENCODING).split(e.JWT_DELIMITER),o=d(null!==(n=i[0])&&void 0!==n?n:"{}"),a=d(null!==(r=i[1])&&void 0!==r?r:"{}");return{header:o,payload:a}},e.encodeJWT=v,e.decodeJWT=w,e.signJWT=function(t,n,r,o){return i(this,arguments,void 0,(function(t,n,r,i){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Math.floor(Date.now());return function*(){let a={alg:e.JWT_IRIDIUM_ALG,typ:e.JWT_IRIDIUM_TYP},s={iss:p(i.publicKey),sub:t,aud:n,act:"authenticate user",iat:o,exp:o+r},f=m({header:a,payload:s});return l.logDebug(`get sec kp: ${i.secretKey} {${i.secretKey.length}}`),v({header:a,payload:s,signature:c.default.sign.detached(f,i.secretKey)})}()}))},e.verifyJWT=function(t){return i(this,void 0,void 0,(function*(){let{header:n,payload:r,data:i,signature:o}=w(t);if(n.alg!==e.JWT_IRIDIUM_ALG||n.typ!==e.JWT_IRIDIUM_TYP)throw new Error("JWT must use EdDSA algorithm");let s=g(r.iss);return a.verify(s,i,o)}))};var a=r(ra()),s=An(),f=Fo(),c=o(O()),l=r(Rn()),u=fo();function d(t){return(0,s.safeJsonParse)((0,u.okxtoString)((0,u.okxfromString)(t,e.JWT_ENCODING),e.JSON_ENCODING))}function h(t){return(0,u.okxtoString)((0,u.okxfromString)((0,s.safeJsonStringify)(t),e.JSON_ENCODING),e.JWT_ENCODING)}function p(t){l.logDebug(`publicKey: ${(0,f.toHexString)(t)}`);var n=(0,u.okxtoString)(t,e.MULTICODEC_ED25519_ENCODING);return[e.DID_PREFIX,e.DID_METHOD,n].join(e.DID_DELIMITER)}function g(t){let[n,r,i]=t.split(e.DID_DELIMITER);if(n!==e.DID_PREFIX||r!==e.DID_METHOD)throw new Error('Issuer must be a DID with method "key"');if(void 0===i)throw new Error("multicodec is undefined");let o=(0,u.okxfromString)(i,e.MULTICODEC_ED25519_ENCODING);if(void 0===o||o.length!==e.MULTICODEC_ED25519_LENGTH)throw new Error("Issuer must be a public key with length 32 bytes");return o}function b(t){return(0,u.okxtoString)(t,e.JWT_ENCODING)}function y(t){return(0,u.okxfromString)(t,e.JWT_ENCODING)}function m(t){return(0,u.okxfromString)([h(t.header),h(t.payload)].join(e.JWT_DELIMITER),e.DATA_ENCODING)}function v(t){return[h(t.header),h(t.payload),b(t.signature)].join(e.JWT_DELIMITER)}function w(t){var n,r,i;let o=t.split(e.JWT_DELIMITER);return{header:d(null!==(n=o[0])&&void 0!==n?n:"{}"),payload:d(null!==(r=o[1])&&void 0!==r?r:"{}"),signature:y(null!==(i=o[2])&&void 0!==i?i:"{}"),data:(0,u.okxfromString)(o.slice(0,2).join(e.JWT_DELIMITER),e.DATA_ENCODING)}}e.JWTHeaderType="dapp",e.JWT_IRIDIUM_ALG="EdDSA",e.JWT_IRIDIUM_TYP="JWT",e.JWT_DELIMITER=".",e.JWT_ENCODING="base64url",e.JSON_ENCODING="utf8",e.DATA_ENCODING="utf8",e.KEY_PAIR_SEED_LENGTH=32,e.DID_DELIMITER=":",e.DID_PREFIX="did",e.DID_METHOD="key",e.MULTICODEC_ED25519_ENCODING="base58btc",e.MULTICODEC_ED25519_BASE="z",e.MULTICODEC_ED25519_HEADER="K36",e.MULTICODEC_ED25519_LENGTH=32})),oa=h((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=e&&e.__importStar||function(){var e=function(t){return(e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t})(t)};return function(r){if(r&&r.__esModule)return r;var i={};if(null!=r)for(var o=e(r),a=0;a<o.length;a++)"default"!==o[a]&&t(i,r,o[a]);return n(i,r),i}}(),i=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionManager=void 0;var o=Jo(),a=Vo(),s=E(),f=Go(),c=_(),l=dn(),u=zo(),d=Fo(),h=Yo(),p=ia(),g=An(),b=r(Rn()),y=Rn(),m=Cn();e.ConnectionManager=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.events=new l.EventEmitter,this.connectStorage=new u.Storage(s.OKXCONNECTOR_CACHE_KEY_DAPP+e,s.OKXCONNECTOR_CACHE_KEY_DAPP),this.crypto=new h.SessionCrypto;let t=(0,m.isInTMA)();if((0,y.logDebug)("do init:",t),b.reportLog("connection manager do init"),t){let e=this.getCachedCryptoKeyPair();(0,y.logDebug)("use same pk:",e),this.crypto=new h.SessionCrypto(e)}this.jwtKeyPair=this.getCachedJWTKeyPair(),this.saveJWTKeyPair(this.jwtKeyPair),this.connector=new o.OKXWalletConnector(c.OKXCONNECTOR_WS_URL_1),this.packageId=Date.now(),this.connectedWalletPK="",this.currentTopic="",b.logDebug(`this.connectedWalletPK  constructor   ${this.connectedWalletPK}`)}refreshPackageId(){this.packageId=Date.now()}saveCryptoKeyPair(e){let t=(0,g.safeJsonStringify)(e);this.connectStorage.encryptStoreMsg(t,s.OKXCONNECTOR_CRYPTO_KEY)}getCachedCryptoKeyPair(){let e=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_CRYPTO_KEY);return"string"==typeof e?(b.logDebug("get cached crypto key:"),b.logDebug(e),(0,g.safeJsonParse)(e)):(this.connectStorage.clearCache(),null)}saveJWTKeyPair(e){var t={publicKey:(0,d.toHexString)(e.publicKey),secretKey:(0,d.toHexString)(e.secretKey)};b.logDebug("save jwt kp");let n=(0,g.safeJsonStringify)(t);b.logDebug(n),this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_JWT_KEY)}getCachedJWTKeyPair(){let e=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_JWT_KEY);if("string"==typeof e){b.logDebug("get cached jwt kp:"),b.logDebug(e);let t=(0,g.safeJsonParse)(e);return b.logDebug("save jwt kp"),b.logDebug(t),{publicKey:(0,d.hexToByteArray)(t.publicKey),secretKey:(0,d.hexToByteArray)(t.secretKey)}}return(0,p.generateKeyPair)()}isWalletPKReady(){return b.logDebug(`isWalletPKReady  ===> ${this.connectedWalletPK}`),this.connectedWalletPK.length>0}makeJWT(e){return i(this,void 0,void 0,(function*(){return yield(0,p.signJWT)(e,f.OKXCONNECTOR_JWT_SIDE,f.OKXCONNECTOR_JWT_TTL,this.jwtKeyPair)}))}parsePackage(e){return i(this,arguments,void 0,(function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function*(){var r,i,o,a,f;if(t.events.emit(e.id,e),!n){yield t.sendACK(e.id,!0);let n=null===(r=t.connectStorage.getItem(s.OKXCONNECTOR_TOKEN_CACHE))||void 0===r?void 0:r.content;if(n){let r=e;null!==(o=null===(i=r.params)||void 0===i?void 0:i.data)&&void 0!==o&&o.messageId&&(t.refreshPackageId(),yield t.sendReceive(t.packageId.toString(),null===(f=null===(a=r.params)||void 0===a?void 0:a.data)||void 0===f?void 0:f.messageId,n))}}}()}))}restoreConnect(e){return i(this,void 0,void 0,(function*(){if(b.reportLog("connection manager restore connection"),b.logDebug(`connectionManager  restoreConenct   ${e}`),"string"!=typeof e||0===e.length)throw new Error("CONNECTION: invalid topic");b.logDebug("connectionManager  restoreConenct   disconnect"),yield this.disconnect(!0),this.connectStorage.saveContent(e,s.OKXCONNECTOR_TOKEN_CACHE),b.logDebug("connectionManager  restoreConenct   conect"),yield this.connect(!0)}))}getConnectInfo(){var e=(0,d.generateTopic)();return b.logDebug(`generate topic token: ${e}`),b.reportLog("connection manager generate connection info"),this.currentTopic=e,{channelId:e,clientId:this.crypto.stringifyKeypair().publicKey}}connect(){return i(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function*(){e.timeLog=(new Date).getTime(),(0,y.logDebug)("ConnectTime---enter->",e.timeLog),b.reportLog("connection manager begin connect");let n=e.connectStorage.getItem(s.OKXCONNECTOR_TOKEN_CACHE);var r=e.currentTopic;if(b.logDebug(`generate topic token: ${r}`),t){typeof n<"u"&&null!==n&&(b.logDebug(`read last connect id: ${n}`),r=n.content);var o=e.connectStorage.getItem(s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE);o&&(e.connectedWalletPK=o.content,(0,y.logDebug)(`connectionManager connect() this.connectedWalletPK : ${e.connectedWalletPK}`)),b.reportLog("connection manager do restore connection")}if(t){let t=e.getCachedCryptoKeyPair();t&&(e.crypto=new h.SessionCrypto(t))}b.logDebug(`use crypto client id: ${e.crypto.stringifyKeypair().publicKey}`),e.connectStorage.saveContent(r,s.OKXCONNECTOR_TOKEN_CACHE);var f=yield e.makeJWT(r);return b.logDebug(`generate jwt token: ${f}`),e.connectStorage.saveContent(f,"jwt"),new Promise(((t,n)=>{e.connector.onOpen((()=>i(e,void 0,void 0,(function*(){b.logDebug("1. connector on open"),b.reportLog("1. connect ws open");let e=(new Date).getTime();(0,y.logDebug)("ConnectTime---open->",e-this.timeLog),this.events.once(this.packageId.toString(),(e=>i(this,void 0,void 0,(function*(){if(e&&e.error){b.logError("failed when login"),b.reportLog("2. connect login failed"),yield this.connector.disconnect();var o=new Error;o.message=e.error.message,o.name=e.error.code.toString(),n(o)}this.refreshPackageId(),this.events.once(this.packageId.toString(),(e=>i(this,void 0,void 0,(function*(){if(e&&e.error){b.logError("failed when subscribe"),b.reportLog("3. connect subscribe failed"),yield this.connector.disconnect();var i=new Error;i.message=e.error.message,i.name=e.error.code.toString(),n(i)}this.refreshPackageId(),b.logDebug(`4. subscribe callback then send fetch: ${this.packageId}`),b.reportLog("4. subscribe callback then send fetch");let o=(new Date).getTime();(0,y.logDebug)("ConnectTime--subscribe callback->",o-this.timeLog),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),r),t()})))),b.logDebug(`3. login callback then send subscribe: ${this.packageId}`),b.reportLog("3. connect subscribe failed");let s=(new Date).getTime();(0,y.logDebug)("ConnectTime---login callback->",s-this.timeLog),yield this.connector.send((()=>i(this,void 0,void 0,(function*(){b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,y.logDebug)("ConnectionManager connect error",e),n(e)}))}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_SUB,params:{topic:r}})})))),b.logDebug("2. login called"),b.reportLog("2. connection manager connect call login"),yield this.connector.send((()=>i(this,void 0,void 0,(function*(){b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,y.logDebug)("ConnectionManager connect error",e),n(e)}))}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_LOGIN,params:{token:f}}),this.connector.addPackageParse((e=>{var t;if(b.logDebug("connect: parse package"),b.logDebug(e),!("params"in e)||!("data"in e.params))return void this.parsePackage(e,!0);let n=null===(t=e.params.data)||void 0===t?void 0:t.message;if(typeof n<"u"){n=n.replace(/'/g,'"');let e=(0,g.safeJsonParse)(n);"string"!=typeof e&&"clientId"in e&&e.clientId&&e.clientId.length>0&&(this.connectedWalletPK=e.clientId,b.logDebug(`this.connectedWalletPK  addPackageParse   ${this.connectedWalletPK}`),this.connectStorage.saveContent(this.connectedWalletPK,s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),this.saveCryptoKeyPair(this.crypto.stringifyKeypair()))}this.parsePackage(e,e.method===a.CONNECT_METHOD_RECEIVE)}))})))),e.connector.connect().catch((e=>{(0,y.logDebug)("ConnectionManager connect error",e),n(e)}))}))}()}))}disconnect(){return i(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function*(){yield e.connector.disconnect(),b.reportLog("connect disconnect"),e.connectStorage.clearCache(s.OKXCONNECTOR_TOKEN_CACHE),t||(e.connectStorage.clearCache(s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),e.connectedWalletPK="",(0,y.logDebug)(`connectionManager disconnect() this.connectedWalletPK : ${e.connectedWalletPK}`))}()}))}addListener(e,t,n){this.connector.addListener((0,g.safeJsonStringify)(e),(e=>{if(e=e.replace(/'/g,'"'),b.logDebug(`addListener ===> ${e}`),typeof e<"u"){var t=(0,g.safeJsonParse)(e),n=t.message;let r;return n.trimStart().startsWith("{")?r=n:(t.clientId&&t.clientId.length>0&&(this.connectedWalletPK=t.clientId,this.connectStorage.saveContent(this.connectedWalletPK,s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),b.logDebug(`this.connectedWalletPK  addListener   ${this.connectedWalletPK}`),b.logDebug(`this.cryptoKey  addListener   ${(0,d.toHexString)(this.crypto.keyPair.publicKey)}`),this.saveCryptoKeyPair(this.crypto.stringifyKeypair())),r=this.crypto.decrypt(n,this.connectedWalletPK)),b.logDebug(`addListener ===> ${r}`),r}}),t,n)}sendRaw(e){return i(this,void 0,void 0,(function*(){b.logDebug(`message send =====> ${e}`),b.reportLog("connect send raw msg");let t=e;b.logDebug(`message send =====encrypt message.length>>>> ${t.length}`);let n=this.connectStorage.getItem(s.OKXCONNECTOR_TOKEN_CACHE);b.logDebug(`message send =====topic>>>> ${n?.content}`),this.refreshPackageId();let r={id:this.packageId.toString(),method:a.CONNECT_METHOD_PUBLISH,jsonrpc:c.CONNECT_JSONRPC_VER,params:{message:{topic:n?.content,message:t,ttl:c.OKXCONNECTOR_MESSAGE_TTL}}};return this.events.once(this.packageId.toString(),(e=>i(this,void 0,void 0,(function*(){e&&e.error?b.logError(`@${(new Date).toUTCString()} >>> failed when send msg`):e&&!e.error&&b.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> send msg with id ${this.packageId} successed`)})))),yield this.connector.send((()=>i(this,void 0,void 0,(function*(){return b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),r),this.packageId}))}send(e){return i(this,arguments,void 0,(function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.OKXCONNECTOR_MESSAGE_TTL;return function*(){if(b.logDebug(`message send =====> ${e}`),b.reportLog("connect send msg"),!t.isWalletPKReady())throw new Error("connection not finish");let r=t.crypto.encrypt(e,t.connectedWalletPK);b.logDebug(`message send =====encrypt message.length>>>> ${r.length}`);let o=t.connectStorage.getItem(s.OKXCONNECTOR_TOKEN_CACHE);b.logDebug(`message send =====topic>>>> ${o?.content}`),t.refreshPackageId();let f={id:t.packageId.toString(),method:a.CONNECT_METHOD_PUBLISH,jsonrpc:c.CONNECT_JSONRPC_VER,params:{message:{topic:o?.content,message:r,ttl:n}}};return t.events.once(t.packageId.toString(),(e=>i(t,void 0,void 0,(function*(){e&&e.error?b.logError(`@${(new Date).toUTCString()} >>> failed when send msg`):e&&!e.error&&b.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> send msg with id ${this.packageId} successed`)})))),yield t.connector.send((()=>i(t,void 0,void 0,(function*(){return b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),f),t.packageId}()}))}sendACK(e,t){return i(this,arguments,void 0,(function(e,t){var n=this;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return function*(){if(!0===t){let t={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,result:!0};yield n.connector.send((()=>i(n,void 0,void 0,(function*(){return b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t)}else if(r){let t={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,error:{code:r.code,message:r.message}};yield n.connector.send((()=>i(n,void 0,void 0,(function*(){return b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t)}}()}))}sendReceive(e,t,n){return i(this,void 0,void 0,(function*(){let r={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_RECEIVE,params:{data:{messageId:t,topic:n}}};yield this.connector.send((()=>i(this,void 0,void 0,(function*(){return b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),r)}))}sendConnectSessionInfo(e,t,n,r){return i(this,void 0,void 0,(function*(){}))}sendFetchAndConsumeMessages(e,t){return i(this,void 0,void 0,(function*(){this.events.once(e,(e=>i(this,void 0,void 0,(function*(){var n,r;if(e.result){var i=e.result.hasMore,o=e.result.data;if(o)for(let e=0;e<o.length;e++){let n=o[e];if(n&&n.topic==t){let e=n.messageId;b.reportLog("5. get fetch result"),yield this.connector.getMsgPayloadFromHistory(n),this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),e,t)}}i&&(this.refreshPackageId(),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),t))}else b.logDebug(`CONNECT: get error rsp ${null===(n=e.error)||void 0===n?void 0:n.code} : ${null===(r=e.error)||void 0===r?void 0:r.message}`)})))),b.logDebug("5. send fetch more"),b.reportLog("5. send fetch more");let n=(new Date).getTime();(0,y.logDebug)("ConnectTime---5->",n-this.timeLog);let r={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_FETCHMSG,params:{data:{topic:t}}};yield this.connector.send((()=>i(this,void 0,void 0,(function*(){return b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),r)}))}cleanCache(){return i(this,void 0,void 0,(function*(){b.reportLog("connection cache clean called"),this.connectStorage.clearCache()}))}saveSessionContent(e,t){t||this.connectStorage.clearCache(s.OKXCONNECTOR_SESSION_PREFIX_KEY+e);let n=(0,g.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_SESSION_PREFIX_KEY+e)}getSessionContent(e){let t=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_SESSION_PREFIX_KEY+e);if(t)return(0,g.safeJsonParse)(t)}getCurrentConnectionReady(){return this.isWalletPKReady()}}})),aa=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WalletConnectionManagerEvent=e.WalletConnectionManagerTopicInfoCacheKey=void 0,e.WalletConnectionManagerTopicInfoCacheKey="wcmtic",e.WalletConnectionManagerEvent={RECEIVE_REQUEST:"payload"}})),sa=h((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=e&&e.__importStar||function(){var e=function(t){return(e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t})(t)};return function(r){if(r&&r.__esModule)return r;var i={};if(null!=r)for(var o=e(r),a=0;a<o.length;a++)"default"!==o[a]&&t(i,r,o[a]);return n(i,r),i}}(),i=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.WalletConnectionManager=void 0;var o=Jo(),a=Vo(),s=E(),f=Go(),c=_(),l=aa(),u=dn(),d=zo(),h=Fo(),p=Yo(),g=ia(),b=An(),y=r(Rn()),m=Rn(),v=Sn();e.WalletConnectionManager=class{constructor(){this.events=new u.EventEmitter,this.communicateEvents=new u.EventEmitter,y.logDebug("connect manager construct"),this.connectStorage=new d.Storage(s.OKXCONNECTOR_CACHE_KEY),this.jwtKeyPair=this.getCachedJWTKeyPair(),this.saveJWTKeyPair(this.jwtKeyPair),this.connector=new o.OKXWalletConnector(c.OKXCONNECTOR_WS_URL_1),this.packageId=Date.now(),this.sessionCryptoInfoMap=new Map,this.inLogin=!1,this.isLogined=!1}refreshPackageId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.packageId=Date.now()+e}saveCryptoKeyPair(e,t){let n=(0,b.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_CRYPTO_KEY+e)}getCachedCryptoKeyPair(e){let t=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_CRYPTO_KEY+e);return"string"==typeof t?(y.logDebug("get cached crypto key:"),y.logDebug(t),(0,b.safeJsonParse)(t)):(this.connectStorage.clearCache(),null)}saveJWTKeyPair(e){var t={publicKey:(0,h.toHexString)(e.publicKey),secretKey:(0,h.toHexString)(e.secretKey)};y.logDebug("save jwt kp");let n=(0,b.safeJsonStringify)(t);y.logDebug(n),this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_JWT_KEY),y.logDebug("after save jwt kp")}getCachedJWTKeyPair(){let e=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_JWT_KEY);if("string"==typeof e){y.logDebug("get cached jwt kp:"),y.logDebug(e);let t=(0,b.safeJsonParse)(e);return y.logDebug("save jwt kp"),y.logDebug(t),{publicKey:(0,h.hexToByteArray)(t.publicKey),secretKey:(0,h.hexToByteArray)(t.secretKey)}}return(0,g.generateKeyPair)()}isTopicPublicKeyExist(e){return y.logDebug(`isTopicPublicKeyExist  ===> ${e}`),this.sessionCryptoInfoMap.get(e)}makeJWT(e){return i(this,void 0,void 0,(function*(){return yield(0,g.signJWT)(e,f.OKXCONNECTOR_JWT_WALLET_SIDE,f.OKXCONNECTOR_JWT_TTL,this.jwtKeyPair)}))}parseInternalMsg(e){try{let t=(0,b.safeJsonParse)(e)["ivur-igbfft-ptjip"];if(t&&t.length>0)return(0,v.base64decode)(t,!0).toString()}catch(t){y.logError("parse internal msg",t)}}updateClientId(e,t){let n=this.sessionCryptoInfoMap.get(e);if((0,m.logDebug)("updateClientId",n,e,t),n&&t&&t.length>0){if(n.cid){let r=t.slice(-6);n.cid==r?n.dappPublicKey=t:y.logError("cid check failed",n,e,t)}else n.dappPublicKey=t;this.syncCacheSessionInfo()}return!1}parsePackage(e,t){return i(this,arguments,void 0,(function(e,t){var n=this;let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function*(){var i,o,a,s,f,c,l,u,d,h,p;n.events.emit(t.id,t);let g=n.sessionCryptoInfoMap.get(e);if(y.logDebug("get sessionInfo for decrypt topic:",e),y.logDebug("get sessionInfo for decrypt:",t.id,e,g,n.sessionCryptoInfoMap),g&&t.params.data&&null!==(i=t.params.data)&&void 0!==i&&i.message)if(null!==(o=t.params.data)&&void 0!==o&&o.isInternalData){let e=null===(a=t.params.data)||void 0===a?void 0:a.message,r=null===(s=t.params.data)||void 0===s?void 0:s.topic,i=n.parseInternalMsg(e);(0,m.logDebug)("parse internal origin: ",i),i&&i.length>0&&n.communicateEvents.emit("origin",i,r)}else try{let r=null===(f=t.params.data)||void 0===f?void 0:f.message;if(r.trimStart().startsWith("{")){let t=(0,b.safeJsonParse)(r);if(t.method){if("session_info"==t.method){let r=t.params.sessionInfo,i=(0,v.base64decode)(r,!1);(0,m.logDebug)("wallet connection manager requset base64Content:",i),(0,m.logDebug)("base64Content:"+i);let o=i.toObject();n.updateClientId(e,o.clientId)}(0,m.logDebug)("<<< parse raw msg:",e,t),n.communicateEvents.emit(e,r)}}else{let r=g.crypto.decryptWallet(null===(c=t.params.data)||void 0===c?void 0:c.message,g.dappPublicKey);(0,m.logDebug)("<<< receive msg:",e,r),n.communicateEvents.emit(e,r)}}catch{let r=g.crypto.decryptWallet(null===(l=t.params.data)||void 0===l?void 0:l.message,g.dappPublicKey);(0,m.logDebug)("<<< receive msg:",e,r),n.communicateEvents.emit(e,r)}if(!r&&(yield n.sendACK(t.id,!0),e)){let r=t;null!==(d=null===(u=r.params)||void 0===u?void 0:u.data)&&void 0!==d&&d.messageId&&(n.refreshPackageId(),yield n.sendReceive(n.packageId.toString(),null===(p=null===(h=r.params)||void 0===h?void 0:h.data)||void 0===p?void 0:p.messageId,e))}}()}))}recovrySessionInfoFromCache(){let e=this.connectStorage.getAndDecrypt(l.WalletConnectionManagerTopicInfoCacheKey);if(y.logDebug("get cached sessionInfos:",e),e){let t=(0,b.safeJsonParse)(e);for(let e in t){let n=t[e];y.logDebug("make topicItem:",n);let r={topic:e,crypto:new p.SessionCrypto({publicKey:n.cryptoKeyPair.publicKey,secretKey:n.cryptoKeyPair.secretKey}),dappPublicKey:n.dappPublicKey,cid:n.cid};this.sessionCryptoInfoMap.set(e,r)}}y.logDebug("get cached sessionInfos map:",this.sessionCryptoInfoMap)}syncCacheSessionInfo(){let e={};for(let[n,r]of this.sessionCryptoInfoMap)y.logDebug("for each Keys",n),r&&(e[n]={cryptoKeyPair:r.crypto.stringifyKeypair(),dappPublicKey:r.dappPublicKey,cid:r.cid});let t=(0,b.safeJsonStringify)(e);y.logDebug("sync cache sessionInfos:",t),this.connectStorage.encryptStoreMsg(t,l.WalletConnectionManagerTopicInfoCacheKey)}cacheSessionInfo(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.dappPublicKey,i=[];for(let[o,a]of this.sessionCryptoInfoMap)y.logDebug("for each Keys",o),a.dappPublicKey==r&&(y.logDebug("duplicated dapp public key:",o,r),i.push(o));for(let[o,a]of this.sessionCryptoInfoMap)i.includes(o)&&this.sessionCryptoInfoMap.delete(o);return y.logDebug("cleaned connect session cache:",this.sessionCryptoInfoMap),this.sessionCryptoInfoMap.set(e,t),y.logDebug("cache sessionInfo:",e,t,this.sessionCryptoInfoMap),n&&this.syncCacheSessionInfo(),i}appendTopic(e,t,n){return i(this,void 0,void 0,(function*(){return(0,m.logDebug)("4.1. get append Topic:",e),new Promise(((r,o)=>i(this,void 0,void 0,(function*(){if(!this.isLogined){var i=new Error;return i.message="connection is not logined",i.name="append error",void o(i)}let a={topic:e,crypto:new p.SessionCrypto,dappPublicKey:t||"",cid:n},s=this.cacheSessionInfo(e,a,!1);yield this.subscribeTopics(Array.from([e])),this.refreshPackageId(),y.logDebug(`5. subscribe callback then fetch append message: ${this.packageId}, ${e}`),y.reportLog("5. subscribe callback then fetch append message");let f=(new Date).getTime();(0,m.logDebug)("Append --subscribe callback->",f-this.timeLog),r(s)}))))}))}confirmAppendingTopics(){this.syncCacheSessionInfo()}connect(){return i(this,void 0,void 0,(function*(){this.timeLog=(new Date).getTime(),(0,m.logDebug)("[Wallet] ConnectTime---enter->",this.timeLog),y.reportLog("wallet connect connect called");let e=Date.now().toString();var t=yield this.makeJWT(e);return y.logDebug(`generate jwt token: ${t}`),this.connectStorage.saveContent(t,"jwt"),this.recovrySessionInfoFromCache(),new Promise(((e,n)=>{this.inLogin=!0,this.connector.onOpen((()=>i(this,void 0,void 0,(function*(){y.logDebug("1. connector on open"),y.reportLog("1. wallet connect connect on open");let r=(new Date).getTime();(0,m.logDebug)("ConnectTime---open->",r-this.timeLog),this.events.once(this.packageId.toString(),(t=>i(this,void 0,void 0,(function*(){if(t&&t.error){y.logError("failed when login"),yield this.connector.disconnect();var r=new Error;r.message=t.error.message,r.name=t.error.code.toString(),n(r)}else this.isLogined=!0,e(),y.logDebug("3. subscribe cached topics",this.sessionCryptoInfoMap),y.reportLog("3. wallet connect connect subscribe cached topics"),this.sessionCryptoInfoMap.size>0&&(yield this.subscribeTopics(Array.from(this.sessionCryptoInfoMap.keys())))})))),y.logDebug("2. login called"),y.reportLog("2. wallet connect login called"),yield this.connector.send((()=>i(this,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_LOGIN,params:{token:t}})})))),this.connector.connect().catch((e=>{(0,m.logDebug)("WalletConnectionManager connect error",e),n(e)})),this.connector.addPackageParse((e=>{var t,n;y.logDebug("connect: parse package"),y.logDebug(e),"params"in e&&"data"in e.params?null!==(t=e.params.data)&&void 0!==t&&t.topic&&this.parsePackage(null===(n=e.params.data)||void 0===n?void 0:n.topic,e,e.method===a.CONNECT_METHOD_RECEIVE):this.parsePackage("",e,!0)}))}))}))}getSessionPublicKey(e){if(this.isTopicPublicKeyExist(e)){let t=this.sessionCryptoInfoMap.get(e);if(t)return(0,h.toHexString)(t.crypto.keyPair.publicKey)}}getCurrentCachedTopicIdList(){return Array.from(this.sessionCryptoInfoMap.keys())}disconnect(){return i(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function*(){yield e.connector.disconnect(),e.connectStorage.clearCache(s.OKXCONNECTOR_TOKEN_CACHE),t||e.connectStorage.clearCache(s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE)}()}))}send(e,t){return i(this,arguments,void 0,(function(e,t){var n=this;let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c.OKXCONNECTOR_MESSAGE_TTL,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return function*(){var f,l;if(y.logDebug(`message send =====> ${t}`),!n.isTopicPublicKeyExist(e))throw new Error("connection not finish");let u,d=null===(f=n.sessionCryptoInfoMap.get(e))||void 0===f?void 0:f.dappPublicKey,p=null===(l=n.sessionCryptoInfoMap.get(e))||void 0===l?void 0:l.crypto;if(s&&(u={message:t}),p&&d&&!s&&(u={message:p.encryptWallet(t,d)}),u){r&&p&&(u.clientId=(0,h.toHexString)(p.keyPair.publicKey)),n.refreshPackageId();let t={id:n.packageId.toString(),method:a.CONNECT_METHOD_PUBLISH,jsonrpc:c.CONNECT_JSONRPC_VER,params:{message:{topic:e,message:(0,b.safeJsonStringify)(u),ttl:o}}};return n.events.once(n.packageId.toString(),(e=>i(n,void 0,void 0,(function*(){e&&e.error?y.logError(`@${(new Date).toUTCString()} >>> failed when send msg`):e&&!e.error&&y.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> send msg with id ${this.packageId} successed`)})))),yield n.connector.send((()=>i(n,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t),n.packageId}}()}))}sendACK(e,t){return i(this,arguments,void 0,(function(e,t){var n=this;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return function*(){if(!0===t){let t={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,result:!0};yield n.connector.send((()=>i(n,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t)}else if(r){let t={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,error:{code:r.code,message:r.message}};yield n.connector.send((()=>i(n,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t)}}()}))}sendReceive(e,t,n){return i(this,void 0,void 0,(function*(){let r={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_RECEIVE,params:{data:{messageId:t,topic:n}}};yield this.connector.send((()=>i(this,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),r)}))}sendUnsubscribe(e){return i(this,void 0,void 0,(function*(){yield this.connector.send((()=>i(this,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_UNSUB,params:{topic:e}}),this.sessionCryptoInfoMap.delete(e),this.syncCacheSessionInfo()}))}sendFetchAndConsumeMessages(e,t){return i(this,void 0,void 0,(function*(){this.events.once(e,(e=>i(this,void 0,void 0,(function*(){var n,r;if(e.result){var i=e.result.hasMore,o=e.result.data;if(o)for(let e=0;e<o.length;e++){let n=o[e];if(n&&n.topic==t){let e=n.messageId;yield this.connector.getMsgPayloadFromHistory(n),this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),e,t)}}i&&(this.refreshPackageId(),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),t))}else y.logDebug(`CONNECT: get error rsp ${null===(n=e.error)||void 0===n?void 0:n.code} : ${null===(r=e.error)||void 0===r?void 0:r.message}`)})))),y.logDebug("5. send fetch more");let n=(new Date).getTime();(0,m.logDebug)("ConnectTime---5->",n-this.timeLog);let r={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_FETCHMSG,params:{data:{topic:t}}};yield this.connector.send((()=>i(this,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),r)}))}sendBatchFetchAndConsumeMessages(e,t){return i(this,void 0,void 0,(function*(){this.events.once(e,(e=>i(this,void 0,void 0,(function*(){var n,r;if(e.result){var i=e.result.hasMore,o=e.result.data;if(o)for(let e=0;e<o.length;e++){let t=o[e];if(t&&t.topic){let n=t.messageId;yield this.connector.getMsgPayloadFromHistory(t),this.refreshPackageId(e),yield this.sendReceive(this.packageId.toString(),n,t.topic)}}i&&(this.refreshPackageId(),yield this.sendBatchFetchAndConsumeMessages(this.packageId.toString(),t))}else y.logDebug(`CONNECT: get error rsp ${null===(n=e.error)||void 0===n?void 0:n.code} : ${null===(r=e.error)||void 0===r?void 0:r.message}`)})))),y.logDebug("5. send fetch more"),y.reportLog("5. send fetch more");let n=(new Date).getTime();(0,m.logDebug)("ConnectTime---5->",n-this.timeLog);let r={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_BATCH_FETCHMSG,params:{topics:t,withInternalData:!0}};yield this.connector.send((()=>i(this,void 0,void 0,(function*(){y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),r)}))}cleanCache(){return i(this,void 0,void 0,(function*(){this.connectStorage.clearCache()}))}saveSessionContent(e,t){t||this.connectStorage.clearCache(s.OKXCONNECTOR_SESSION_PREFIX_KEY+e);let n=(0,b.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_SESSION_PREFIX_KEY+e)}getSessionContent(e){let t=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_SESSION_PREFIX_KEY+e);if(t)return(0,b.safeJsonParse)(t)}subscribeTopics(e){return i(this,void 0,void 0,(function*(){(0,m.logDebug)("4. topicid list",e),y.reportLog("4. topicid list"),this.refreshPackageId();let t=(new Date).getTime();return(0,m.logDebug)("ConnectTime--subscribe callback->",t-this.timeLog),new Promise(((t,n)=>i(this,void 0,void 0,(function*(){let n=0;for(let r=0;r<e.length;++r){let o=e[r];this.refreshPackageId(r),this.events.once(this.packageId.toString(),(a=>i(this,void 0,void 0,(function*(){if(a&&a.error){y.logError("failed when subscribe"),yield this.connector.disconnect();var i=new Error;i.message=a.error.message,i.name=a.error.code.toString(),n+=1,n==e.length&&t()}this.refreshPackageId(r);let s=(new Date).getTime();(0,m.logDebug)("ConnectTime--subscribe callback->",s-this.timeLog),n+=1,n==e.length&&(y.logDebug(`5. send fetch msg: ${this.packageId}, ${o}`),yield this.sendBatchFetchAndConsumeMessages(this.packageId.toString(),e),t())})))),y.logDebug(`3. login callback then send subscribe: ${this.packageId}, ${o}`),y.reportLog("3. login callback then send subscribe");let s=(new Date).getTime();(0,m.logDebug)("ConnectTime---login callback->",s-this.timeLog),yield this.connector.send((()=>i(this,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_SUB,params:{topic:o}})}}))))}))}}})),fa=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.buildNameSpacesByConnectResponse=function(e){return n(e)},e.buildRequestAccountNameSpacesByConnectResponse=n;var t=Rn();function n(e){let n={};(0,t.logDebug)("buildRequestAccountNameSpacesByConnectResponse start connectResponse>>",JSON.stringify(e));let r=e.payload.responses.find((e=>"requestAccounts"===e.name)),i=e.payload.responses.find((e=>"ton_addr"===e.name)),o=e.payload.responses.find((e=>"ton_proof"===e.name));if(i&&!r){(0,t.logDebug)("buildRequestAccountNameSpacesByConnectResponse adapt ton data >>");let e=i.address;e="ton:"+i.network+":"+e;let n={ton_addr:i};o&&(n.ton_proof=o),r={name:"requestAccounts",accounts:[{namespace:"ton",addresses:[e],methods:["ton_sendTransaction"],extra:{},data:n}]}}return(0,t.logDebug)("buildRequestAccountNameSpacesByConnectResponse end universalResponse>>>",JSON.stringify(r)),r.accounts.forEach((e=>{var r=[],i=[];e.addresses.forEach((e=>{var n=e.split(":");if((0,t.logDebug)("buildRequestAccountNameSpacesByConnectResponse addressArr>>",n.length),n.length>=3){let o=n.slice(0,2).join(":");r.push(o),i.push(e),(0,t.logDebug)("buildRequestAccountNameSpacesByConnectResponse chain:>>",o,"addressItem:",e)}})),e.data&&e.data.ton_addr&&(e.data.ton_addr.name="ton_addr"),e.data&&e.data.ton_proof&&(e.data.ton_proof.name="ton_proof"),n[e.namespace]={chains:r,accounts:i,methods:e.methods,extra:e.extra,payload:e.data},(0,t.logDebug)("buildRequestAccountNameSpacesByConnectResponse result>>",JSON.stringify(n))})),n}})),ca=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Engine=void 0;var n=An(),r=Rn(),i=vn(),o=Sn(),a=Sn(),s=fa(),f=Cn();e.Engine=class{constructor(e){this.pendingRequests=new Map,this.disconnectListener=[],this.connectionManager=e,(0,r.getDefaultReporter)().beginReport(),this.connectionManager.addListener("sdk_response",((e,t)=>{var i=(0,n.safeJsonParse)(t);(0,r.logDebug)(`Engine ==>> addListener ==> success ==> ${i}`),this.handleResponse(e,i)}),(function(){}))}addDisconnectListener(e){this.disconnectListener.push(e)}setSessionConnectingListener(e){this.sessionConnectingListener=e}disconnect(){(0,r.logDebug)("Engine ==>> disconnect"),this.pendingRequests.clear()}getRequestId(){let e=Date.now().toString();return(0,r.logDebug)("Engine ==>> getRequestId ==>",e),e}bindRequestForPromise(e,t){this.pendingRequests.set(e,t)}send(e,i,o,a){return t(this,void 0,void 0,(function*(){(0,r.logDebug)("Engine ==>> send  request==>",JSON.stringify(e));let t=this.getRequestId();try{let o=yield this.connectionManager.send(JSON.stringify(Object.assign(Object.assign({},e),{requestId:t})),a);this.connectionManager.events.once(o.toString(),(e=>{var t;(0,r.logDebug)(`Engine ==> send => onAck => ${(0,n.safeJsonStringify)(e)}`),e&&e.result&&(null===(t=i.onAck)||void 0===t||t.call(i))})),i.resolve&&this.bindRequestForPromise(t,i.resolve)}catch(o){return Promise.reject(o)}}))}sendSession(e){return t(this,void 0,void 0,(function*(){(0,r.logDebug)("[Connect] sendSession called:",e);let t=this.getRequestId(),n={method:"session_info",params:{sessionInfo:e}};yield this.connectionManager.sendRaw(JSON.stringify(Object.assign(Object.assign({},n),{requestId:t})))}))}handleResponse(e,t){if((0,r.logDebug)(`Engine ==>> handleResponse_1  ======>response: ${(0,n.safeJsonStringify)(t)}`,e),"requestId"in t){(0,r.logDebug)("Engine ==>> handleResponse_2  ===> in response");let e=t.requestId,n=this.pendingRequests.get(e);n?((0,r.logDebug)("Engine ==>> handleResponse_3  ===> find resolve:",n),n(t),this.pendingRequests.delete(e)):((0,r.logDebug)("Engine ==>> handleResponse_3  ===> not find resolve:"),"disconnect"===t.method?(this.disconnectListener.forEach((e=>e())),this.disconnectListener=[],this.disconnect()):"session_connecting"===t.method&&((0,r.logDebug)("Engine ==>> handleResponse_4  ===> sessionConnectingListener"),this.sessionConnectingListener&&((0,r.logDebug)("Engine ==>> handleResponse_4  ===> sessionConnectingListener not null"),this.sessionConnectingListener(),this.sessionConnectingListener=void 0)))}}restoreconnect(e,n){return t(this,void 0,void 0,(function*(){var t;yield null===(t=this.connectionManager)||void 0===t?void 0:t.restoreConnect(e.topic),n(e)}))}conect(e,n,s){return t(this,void 0,void 0,(function*(){var t,f;let c=this.connectionManager.getConnectInfo(),l=this.getRequestId(),u=null!==(t=n.openUniversalUrl)&&void 0!==t&&t,d={protocolVer:Number(i.tonConnectSdkVersion),topic:c.channelId,clientId:c.clientId,requestId:l,dAppInfo:n.dappInfo,requests:e},h=JSON.stringify(d),p=(new TextEncoder).encode(h),g=btoa(String.fromCharCode(...p)),b=`${i.standardDeeplink}?param=${g}`;(0,r.logDebug)("engine ==>> connect ==>>deeplinkUrl:",b);let y=(0,a.isIos)();(0,r.logDebug)(`engine ==>> connect ==>>isIOS: ${y}   openUniversalLink: ${u}`),y&&u&&((0,r.logDebug)("bridge-provider ==>> connect_3"),(0,o.openOKXDeeplinkWithFallback)(b)),yield null===(f=this.connectionManager)||void 0===f?void 0:f.disconnect(!1),this.bindRequestForPromise(l,(e=>{let t=this.onConnect(e,n,c.channelId);s(t,e)}));try{yield this.connectionManager.connect()}catch(m){throw(0,r.logDebug)("Engine conect error",m),m}return!y&&u&&((0,r.logDebug)("bridge-provider ==>> connect_4"),(0,o.openOKXDeeplinkWithFallback)(b)),{connectInfo:c,deeplinkUrl:(0,o.getUniversalLink)(b)}}))}onConnect(e,t,n){if("connect"==e.method){let r=(0,s.buildNameSpacesByConnectResponse)(e);if(r)return{topic:n,sessionConfig:t,namespaces:r}}return null}universalConnect(e,n,c){return t(this,void 0,void 0,(function*(){return new Promise(((l,u)=>t(this,void 0,void 0,(function*(){var t,d,h,p,g;try{(0,r.logDebug)("engine universalConnect request :",JSON.stringify(e)),(0,r.logDebug)("engine universalConnect sessionConfig :",JSON.stringify(n));let m=[],v=[];e.forEach((e=>{let t=e.name;t.startsWith("requestAccounts")?v.push(e):t.startsWith("ton")&&m.push(e)})),(0,r.logDebug)("engine universalConnect tonRequest :",JSON.stringify(m)),(0,r.logDebug)("engine universalConnect universalRequest :",JSON.stringify(v));let w=this.connectionManager.getConnectInfo(),_=this.getRequestId(),E=null!==(t=n.openUniversalUrl)&&void 0!==t&&t,C={protocolVer:Number(i.tonConnectSdkVersion),topic:w.channelId,clientId:w.clientId,requestId:_,dAppInfo:n.dappInfo,requests:v,redirect:null!==(d=n?.redirect)&&void 0!==d?d:"none"},O=(0,f.encodeConnectParams)(C);C.redirect=null!==(h=n?.redirect)&&void 0!==h?h:"none";let x={protocolVer:Number(i.tonConnectSdkVersion),topic:w.channelId,clientId:w.clientId,requestId:_,dAppInfo:n.dappInfo,requests:m,redirect:null!==(p=n?.redirect)&&void 0!==p?p:"none"},S=!1;m.length>0&&(S=!0);let k=S?x:C;(0,r.logDebug)("engine universalConnect ==>>defaultConnectRequest:",S,JSON.stringify(k));var b="";E&&(b=(0,f.getOKXLink)(k,n.useMini,n.tmaReturnUrl),(0,r.logDebug)("engine universalConnect ==>>openOKXLink:",b));let T=()=>n.useMini?(0,f.openOKXTMAWalletlinkWithFallback)(b):(0,o.useShortLink)()?(0,o.openOKXDeeplinkWithFallback)(b):(0,o.openOKXUniversalLink)(b);(0,r.logDebug)("engine universalConnect ==>>openOKXLink:",b);let R=(0,a.isIos)();R&&E&&((0,r.logDebug)(`engine universalConnect ==>>isIOS: ${R}   openUniversalLink: ${E}`),T()),yield null===(g=this.connectionManager)||void 0===g?void 0:g.disconnect(!1),this.bindRequestForPromise(_,(e=>{var t,o;try{let a=e;if("connect"==a.method){(0,r.logDebug)("engin  universalConnect success connectResponse:>>>",JSON.stringify(a));let e=(0,s.buildNameSpacesByConnectResponse)(a);if(!e)throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR);{let i={topic:w.channelId,sessionConfig:n,namespaces:e,wallet:Object.assign({},null===(t=a.payload)||void 0===t?void 0:t.wallet)},o=a.payload.responses.find((e=>"requestAccounts"===e.name));o&&o.connectRequestMethods&&(i.connectMethodsReply=o.connectRequestMethods),(0,r.logDebug)("engin  universalConnect success session:>>>",JSON.stringify(i)),l(i)}}else if("connect_error"==a.method&&null!==(o=a.payload)&&void 0!==o&&o.code)throw new i.OKXConnectError(a.payload.code)}catch(a){u(a)}}));try{yield this.connectionManager.connect()}catch(y){throw(0,r.logDebug)("Engine universalConnect error",y),y}if(!R&&E&&T(),(0,r.logDebug)("engin  universalConnect ==>> connectInfoAndUrl:",c),this.sendSession(O),c){let e={connectRequest:C,redirect:n.redirect,tmaReturnUrl:n.tmaReturnUrl};S&&(e.tonConnectRequest=x),(0,r.logDebug)("universalConnect connectInfoAndUrl info :",JSON.stringify(e)),c(e)}}catch(m){(0,r.logDebug)("Engine universalConnect catch error",m),u(m)}}))))}))}}})),la=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Storage=e.Engine=e.WalletConnectionManager=e.ConnectionManager=e.OKXWalletConnector=void 0;var t=Jo();Object.defineProperty(e,"OKXWalletConnector",{enumerable:!0,get:function(){return t.OKXWalletConnector}});var n=oa();Object.defineProperty(e,"ConnectionManager",{enumerable:!0,get:function(){return n.ConnectionManager}});var r=sa();Object.defineProperty(e,"WalletConnectionManager",{enumerable:!0,get:function(){return r.WalletConnectionManager}});var i=ca();Object.defineProperty(e,"Engine",{enumerable:!0,get:function(){return i.Engine}});var o=zo();Object.defineProperty(e,"Storage",{enumerable:!0,get:function(){return o.Storage}})})),ua=h((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(la(),e),n(vn(),e),n(Sn(),e)})),da=h(((e,t)=>{t.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var r=0;r<e.length;r++){var i=e.charAt(r),o=i.charCodeAt(0);if(255!==t[o])throw new TypeError(i+" is ambiguous");t[o]=r}var a=e.length,s=e.charAt(0),f=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var n=0,r=0,i=0;e[n]===s;)r++,n++;for(var o=(e.length-n)*f+1>>>0,c=new Uint8Array(o);e[n];){var l=t[e.charCodeAt(n)];if(255===l)return;for(var u=0,d=o-1;(0!==l||u<i)&&-1!==d;d--,u++)l+=a*c[d]>>>0,c[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=u,n++}for(var h=o-i;h!==o&&0===c[h];)h++;for(var p=new Uint8Array(r+(o-h)),g=r;h!==o;)p[g++]=c[h++];return p}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,i=0,o=t.length;i!==o&&0===t[i];)i++,n++;for(var f=(o-i)*c+1>>>0,l=new Uint8Array(f);i!==o;){for(var u=t[i],d=0,h=f-1;(0!==u||d<r)&&-1!==h;h--,d++)u+=256*l[h]>>>0,l[h]=u%a>>>0,u=u/a>>>0;if(0!==u)throw new Error("Non-zero carry");r=d,i++}for(var p=f-r;p!==f&&0===l[p];)p++;for(var g=s.repeat(n);p<f;++p)g+=e.charAt(l[p]);return g},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-base"+a+" character")}}}})),ha=h(((e,t)=>{var n=da();t.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")})),pa={};function ga(e,t,n){return!!e&&(e.constructor===t||Ma.call(e)===n)}function ba(e){return ga(e,Uint8Array,Ka)}function ya(e){return ba(e)||function(e){return ga(e,ArrayBuffer,La)}(e)}function ma(e){if(!ba(e))throw new TypeError(`Expected \`Uint8Array\`, got \`${typeof e}\``)}function va(e){if(!ya(e))throw new TypeError(`Expected \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof e}\``)}function wa(e){if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new TypeError(`Unsupported value, got \`${typeof e}\`.`)}function _a(e,t){if(0===e.length)return new Uint8Array(0);t??=e.reduce(((e,t)=>e+t.length),0);let n=new Uint8Array(t),r=0;for(let i of e)ma(i),n.set(i,r),r+=i.length;return n}function Ea(e,t){if(ma(e),ma(t),e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Ca(e,t){ma(e),ma(t);let n=Math.min(e.length,t.length);for(let r=0;r<n;r++){let n=e[r]-t[r];if(0!==n)return Math.sign(n)}return Math.sign(e.length-t.length)}function Oa(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";return va(e),Ua[t]??=new globalThis.TextDecoder(t),Ua[t].decode(e)}function xa(e){if("string"!=typeof e)throw new TypeError(`Expected \`string\`, got \`${typeof e}\``)}function Sa(e){return xa(e),ja.encode(e)}function ka(e){let t,{urlSafe:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(ma(e),e.length<Wa)t=globalThis.btoa(String.fromCodePoint.apply(this,e));else{t="";for(let n of e)t+=String.fromCodePoint(n);t=globalThis.btoa(t)}return n?function(e){return e.replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}(t):t}function Ta(e){return xa(e),Uint8Array.from(globalThis.atob(function(e){return e.replaceAll("-","+").replaceAll("_","/")}(e)),(e=>e.codePointAt(0)))}function Ra(e){let{urlSafe:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return xa(e),ka(Sa(e),{urlSafe:t})}function Aa(e){return xa(e),Oa(Ta(e))}function Ia(e){ma(e);let t="";for(let n=0;n<e.length;n++)t+=Ha[e[n]];return t}function Na(e){if(xa(e),e.length%2!==0)throw new Error("Invalid Hex string length.");let t=e.length/2,n=new Uint8Array(t);for(let r=0;r<t;r++){let t=$a[e[2*r]],i=$a[e[2*r+1]];if(void 0===t||void 0===i)throw new Error("Invalid Hex character encountered at position "+2*r);n[r]=t<<4|i}return n}function Pa(e){let{byteLength:t}=e;return 6===t?e.getUint16(0)*2**32+e.getUint32(2):5===t?e.getUint8(0)*2**32+e.getUint32(1):4===t?e.getUint32(0):3===t?65536*e.getUint8(0)+e.getUint16(1):2===t?e.getUint16(0):1===t?e.getUint8(0):void 0}function Da(e,t){let n=e.length,r=t.length;if(0===r||r>n)return-1;let i=n-r;for(let o=0;o<=i;o++){let n=!0;for(let i=0;i<r;i++)if(e[o+i]!==t[i]){n=!1;break}if(n)return o}return-1}function Ba(e,t){return-1!==Da(e,t)}p(pa,{areUint8ArraysEqual:()=>Ea,assertUint8Array:()=>ma,assertUint8ArrayOrArrayBuffer:()=>va,base64ToString:()=>Aa,base64ToUint8Array:()=>Ta,compareUint8Arrays:()=>Ca,concatUint8Arrays:()=>_a,getUintBE:()=>Pa,hexToUint8Array:()=>Na,includes:()=>Ba,indexOf:()=>Da,isUint8Array:()=>ba,stringToBase64:()=>Ra,stringToUint8Array:()=>Sa,toUint8Array:()=>wa,uint8ArrayToBase64:()=>ka,uint8ArrayToHex:()=>Ia,uint8ArrayToString:()=>Oa});var Ma,Ka,La,Ua,ja,Wa,Ha,$a,qa=d((()=>{Ma=Object.prototype.toString,Ka="[object Uint8Array]",La="[object ArrayBuffer]",Ua={utf8:new globalThis.TextDecoder("utf8")},ja=new globalThis.TextEncoder,Wa=65535,Ha=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0"))),$a={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,A:10,B:11,C:12,D:13,E:14,F:15}})),Xa=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))},n=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.connectSupportMethods=void 0,e.creatNotSupportMethodItemReplay=function(e){let t=new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED);return{method:e.method,chainId:e.chainId,error:{code:t.code,message:t.message}}},e.connectMethodsAdaptOldVersion=function(e,n){return t(this,void 0,void 0,(function*(){var t,s,f,c,l;try{(0,r.logDebug)("connectMethodsAdaptOldVersion start params :",JSON.stringify(e));let d={};if("solana_signMessage"===e.method){let i=null===(t=n.namespaces[r.NameSpaceKeySOL])||void 0===t?void 0:t.accounts.filter((function(t){return t.startsWith(e.chainId)}))[0],f=i.split(":")[2];if(e.params&&f&&"message"in e.params){let t=e.params.message;return"OKX Wallet"==(null===(s=n.wallet)||void 0===s?void 0:s.appName)&&(t=o.default.encode((0,a.stringToUint8Array)(t))),e.params={message:t,pubkey:f},d={publicKey:f},(0,r.logDebug)("solana_signMessage account and address:",JSON.stringify(i),f),(0,r.logDebug)("solana_signMessage callBackParams:",JSON.stringify(d)),d}throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED)}if("sui_signMessage"===e.method||"sui_signPersonalMessage"===e.method){if("message"in e.params&&e.params.message){let t=JSON.parse(JSON.stringify(e.params.message)),n=Object.values(t),o=new Uint8Array(n),a=new TextDecoder("utf8"),s=btoa(a.decode(o));return e.params={message:atob(s)},i.log("sui_signMessag suiMessagee suiMessageb64:>>>>",JSON.stringify(e.params),s),"sui_signMessage"===e.method?d={messageBytes:s,signature:""}:"sui_signPersonalMessage"===e.method&&(d={bytes:s,signature:""}),(0,r.logDebug)("sui_signMessage/sui_signPersonalMessage callBackParams:",JSON.stringify(d)),d}throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED)}if("btc_signMessage"===e.method){let t=(null===(f=n.namespaces[r.NameSpaceKeyBtc])||void 0===f?void 0:f.accounts.filter((function(t){return t.startsWith(e.chainId)})))[0],i=t.split(":")[2];if((0,r.logDebug)("btc_signMessage account and address:",JSON.stringify(t),i),i)return e.params.from=i,(0,r.logDebug)("btc_signMessage callBackParams:",JSON.stringify(d)),d;throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED)}if("aptos_signMessage"===e.method){let t=e.params,i=(null===(c=n.namespaces[r.NameSpaceKeyAptos])||void 0===c?void 0:c.accounts.filter((function(t){return t.startsWith(e.chainId)}))[0]).split(":")[2];if(t&&i){let n="APTOS",o="",a="";var u=n;let s=window.location.protocol+"//"+window.location.hostname;"address"in t&&t.address&&(u+="\naddress: "+i),"application"in t&&t.application&&(u+="\napplication: "+s);let f=1;"chainId"in t&&t.chainId&&("aptos:mainnet"==t.chainId?f=1:"movement:testnet"==t.chainId&&(f=2),u+="\nchainId: "+f),"message"in t&&(u+="\nmessage: "+t.message,o=t.message),"nonce"in t&&(u+="\nnonce: "+t.nonce,a=t.nonce);let c=(new TextEncoder).encode(u),l=Array.from(c).map((e=>e.toString(16).padStart(2,"0"))).join("");return e.params={message:l},(0,r.logDebug)("aptos_signMessage requestParams:",JSON.stringify(e)),d={address:i,application:s,chainId:f,fullMessage:u,message:o,nonce:a,prefix:n,signature:""},(0,r.logDebug)("aptos_signMessage callBackParams:",JSON.stringify(d)),d}throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED)}if("cosmos_signArbitrary"===e.method){let t=null===(l=n?.namespaces[r.NameSpaceKeyCosmos])||void 0===l?void 0:l.accounts.filter((function(t){return t.startsWith(e.chainId)}))[0],i=t.split(":")[2],o=e.params.message,s=(0,a.stringToBase64)(o);if((0,r.logDebug)("cosmos_signArbitrary account and address:",JSON.stringify(t),i),(0,r.logDebug)("cosmos_signArbitrary cosmosBase64Encoded:",s),o&&i){let t={chain_id:"",account_number:"0",sequence:"0",fee:{gas:"0",amount:[]},msgs:[{type:"sign/MsgSignData",value:{signer:i,data:s}}],memo:""};return e.params={signer:i,chain_id:e.chainId.split(":")[1],data:t},(0,r.logDebug)("cosmos_signArbitrary callBackParams:",JSON.stringify(d)),d}throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED)}(0,r.logDebug)("sol_handleSignatureData end params:",JSON.stringify(e))}catch(d){throw d}}))},e.connectMethodsResponseUpdate=function(e,n){return t(this,void 0,void 0,(function*(){var t;try{if(e.connectMethodsReply){(0,r.logDebug)("connectMethodsResponseUpdate connectMethodsReply:",JSON.stringify(e.connectMethodsReply)),(0,r.logDebug)("connectMethodsResponseUpdate session.namespaces:",JSON.stringify(e.namespaces));for(let a of e.connectMethodsReply)if((0,r.logDebug)("connectMethodsResponseUpdate methodItem:",JSON.stringify(a)),"result"in a)if("solana_signMessage"===a.method){let n=a.result;(0,r.logDebug)("solana_signMessage methodItem.chainId:",a.chainId);let i=null===(t=e.namespaces[r.NameSpaceKeySOL])||void 0===t?void 0:t.accounts.filter((function(e){return(0,r.logDebug)("solana_signMessage account:",e),e.startsWith(a.chainId)}))[0];(0,r.logDebug)("solana_signMessage result account:",n,i),n&&i&&(a.result={signature:o.default.decode(n),publicKey:i?.split(":")[2]})}else if("sui_signMessage"===a.method||"sui_signPersonalMessage"===a.method){let e=n.filter((function(e){return e.method===a.method}))[0];if(e&&e.params&&"message"in e.params){let t=e.params.message,n=btoa(t);i.log("sui_signMessag suiMessagee suiMessageb64:>>>>",t,n),"sui_signMessage"===a.method?a.result={messageBytes:n,signature:a.result}:"sui_signPersonalMessage"===a.method&&(a.result={bytes:n,signature:a.result})}}else if("aptos_signMessage"===a.method){if("aptos:637"===a.chainId?a.chainId="aptos:mainnet":"aptos:70000060"===a.chainId&&(a.chainId="movement:testnet"),a.result=JSON.parse(a.result),i.log("aptos_signMessage result methodItem.result before:>>>>",JSON.stringify(a.result)),a.result&&"signature"in a.result){let e=a.result.signature;e&&e.startsWith("0x")&&(e=e.slice(2,e.length),a.result.signature=e)}i.log("aptos_signMessage result methodItem.result after:>>>>",JSON.stringify(a.result))}else"cosmos_signArbitrary"===a.method&&(a.result=JSON.parse(a.result))}}catch(a){throw(0,r.logDebug)("connectMethodsResponseUpdate connectMethodsReply Error:",JSON.stringify(a)),a}}))},e.connectMethodsToConnectWalletMethods=function(n,i){return t(this,void 0,void 0,(function*(){try{(0,r.logDebug)("connectMethodsToConnectWalletMethods requestMethods:",JSON.stringify(n));let u=[];if(!i&&n&&n.length>0)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Connect request params error , RequestMethods cannot be added when the NameSpace is empty");for(let e of n)if("aptos_signMessage"===e.method&&("aptos:mainnet"===e.chainId?e.chainId="aptos:637":"movement:testnet"===e.chainId&&(e.chainId="aptos:70000060")),"wallet_addEthereumChain"===e.method){var t=i?.some((e=>e.namespace.includes("eip155")));if(!t)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Connect request params error, When using '${e.method}', the EVM chain needs to be included in the NameSpace`)}else if(!i?.some((t=>t.chains.some((t=>t.includes(`${e.chainId}`))))))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Connect request params error, When using '${e.method}', NameSpace must contain '${e.chainId}'`);for(let t of n){if(!e.connectSupportMethods.includes(t.method))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect requestMethods not support method, method: '${t.method}'`);if("wallet_addEthereumChain"===t.method){if(Array.isArray(t.params)){let e=t.params;if(!e||1!==e.length)throw e&&e.length>1?new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params only support one data, method: '${t.method}'`):new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is nil, method: '${t.method}'`);{let n=e[0];f(n)&&(t.params=n)}}}else if("personal_sign"===t.method){if(s(t.params)){if(t.params&&1!==t.params.length)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params error,  method: '${t.method}' `);let e=t.params[0];if(!e||"string"!=typeof e)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${t.method}' `);t.params={message:e}}}else if("sui_signMessage"===t.method||"sui_signPersonalMessage"===t.method){if(!f(t.params)||!("message"in t.params))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${t.method}' `);if(!t.params.message)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${t.method}' `);{(0,r.logDebug)("sui_signMessage item.params.message :",t.params.message);let e=JSON.parse(JSON.stringify(t.params.message)),n=Object.values(e),i=new Uint8Array(n),o=new TextDecoder("utf8"),a=btoa(o.decode(i));t.params.message=atob(a)}}else if("solana_signMessage"===t.method){if(!f(t.params)||!("message"in t.params))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${t.method}' `);if(!t.params.message||"string"!=typeof t.params.message)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${t.method}' `);t.params.bs58Message=o.default.encode((0,a.stringToUint8Array)(t.params.message))}else if("aptos_signMessage"===t.method){if(!f(t.params))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${t.method}' `);if(!t.chainId||"aptos:637"!==t.chainId&&"aptos:70000060"!==t.chainId)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params chainId is error,  method: '${t.method}' `);{var c=t.params,l=window.location.protocol+"//"+window.location.hostname;let e=1;"aptos:637"===t.chainId||"aptos:70000060"===t.chainId&&(e=2),t.params={data:c,applicationUrl:l,prefix:"APTOS",aptosChainId:e}}}else if("cosmos_signArbitrary"===t.method){if(!f(t.params))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${t.method}' `);if(!t.params.message||"string"!=typeof t.params.message)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params message is error,  method: '${t.method}' `);{let e=(0,a.stringToBase64)(t.params.message),n=t.chainId.split(":")[1];if(!n)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params chainId is error,  method: '${t.method}' `);t.params={chain_id:n,data:{chain_id:"",account_number:"0",sequence:"0",fee:{gas:"0",amount:[]},msgs:[{type:"sign/MsgSignData",value:{signer:"",data:e}}],memo:""}}}}(0,r.logDebug)("connectMethodsToConnectWalletMethods item:",JSON.stringify(t)),u.push(t)}return u}catch(u){throw u}}))};var r=ua(),o=n(ha()),a=(qa(),y(pa));function s(e){return"object"==typeof e&&null!==e&&Array.isArray(e)}function f(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}e.connectSupportMethods=Object.freeze(["wallet_addEthereumChain","personal_sign","solana_signMessage","sui_signMessage","sui_signPersonalMessage","btc_signMessage","aptos_signMessage","cosmos_signArbitrary"])})),Fa=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.creatNotSupportMethodItemReplay=e.connectMethodsAdaptOldVersion=void 0;var t=Xa();Object.defineProperty(e,"connectMethodsAdaptOldVersion",{enumerable:!0,get:function(){return t.connectMethodsAdaptOldVersion}}),Object.defineProperty(e,"creatNotSupportMethodItemReplay",{enumerable:!0,get:function(){return t.creatNotSupportMethodItemReplay}})})),za=h((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Fa(),e)})),Ja=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getRpcUrl=function(e,t,r){var i;let o=n(e);return(null===(i=t.rpcMap)||void 0===i?void 0:i[o.reference])||""},e.getChainId=function(e){return e.includes(":")?e.split(":")[1]:e},e.convertChainIdToNumber=function(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):(e=e.includes(":")?e.split(":")[1]:e,isNaN(Number(e))?e:Number(e))},e.parseChainId=n,e.mergeArrays=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[...new Set([...e,...t])]};var t=":";function n(e){let[n,r]=e.split(t);return{namespace:n,reference:r}}})),Va=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setGlobal=e.getGlobal=void 0;var t={};e.getGlobal=e=>t[e];e.setGlobal=(e,n)=>{t[e]=n}})),Ga=h((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ja(),e),n(Va(),e)})),Ya=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GENERIC_SUBPROVIDER_NAME=e.RPC_URL=e.STORAGE=e.CONTEXT=e.WC_VERSION=e.PROTOCOL=e.RELAY_URL=e.LOGGER=void 0,e.LOGGER="error",e.RELAY_URL="wss://relay.walletconnect.com",e.PROTOCOL="wc",e.WC_VERSION=2,e.CONTEXT="universal_provider",e.STORAGE=`${e.PROTOCOL}@${e.WC_VERSION}:${e.CONTEXT}:`,e.RPC_URL="https://rpc.walletconnect.com/v1/",e.GENERIC_SUBPROVIDER_NAME="generic"})),Za=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PROVIDER_EVENTS=void 0,e.PROVIDER_EVENTS={DEFAULT_CHAIN_CHANGED:"default_chain_changed",UPDATE_NAMESPACES:"update_name_spaces",SESSION_CONNECTING:"session_connecting"}})),Qa=h((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ya(),e),n(Za(),e)})),es=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.JsonRpcProvider=void 0;var n=dn(),r=w(),i=ua(),o=ua(),a=class extends r.IJSONRpcProvider{constructor(e){super(e),this.events=new n.EventEmitter,this.connected=!1,this.connecting=!1,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}connect(){return t(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.connection;return function*(){yield e.open(t)}()}))}disconnect(){return t(this,void 0,void 0,(function*(){yield this.close()}))}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}request(e,n){return t(this,void 0,void 0,(function*(){return this.requestStrict((0,i.formatJsonRpcRequest)(e.method,e.params||[],(0,i.getBigIntRpcId)().toString()),n)}))}requestStrict(e,n){return t(this,void 0,void 0,(function*(){return new Promise(((r,a)=>t(this,void 0,void 0,(function*(){if(!this.connection.connected)try{yield this.open()}catch(t){a(t)}this.events.on(`${e.id}`,(e=>{(0,i.isJsonRpcError)(e)?a(e.error):r(e.result)}));try{(0,o.logDebug)("[RPC] >>> send request",e,n),yield this.connection.send(e,n)}catch(t){a(t)}}))))}))}setConnection(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.connection}onPayload(e){this.events.emit("payload",e),(0,i.isJsonRpcResponse)(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}open(){return t(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.connection;return function*(){e.connection===t&&e.connection.connected||(e.connection.connected&&e.close(),"string"==typeof t&&(yield e.connection.open(t),t=e.connection),e.connection=e.setConnection(t),yield e.connection.open(),e.registerEventListeners(),e.events.emit("connect"))}()}))}close(){return t(this,void 0,void 0,(function*(){yield this.connection.close()}))}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",(e=>this.onPayload(e))),this.connection.on("close",(e=>this.onClose(e))),this.connection.on("error",(e=>this.events.emit("error",e))),this.connection.on("register_error",(e=>this.onClose())),this.hasRegisteredEventListeners=!0)}};e.JsonRpcProvider=a})),ts=h(((e,t)=>{var n,r=typeof self<"u"?self:e,i=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();n=i,function(e){var t="URLSearchParams"in n,r="Symbol"in n&&"iterator"in Symbol,i="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch{return!1}}(),o="FormData"in n,a="ArrayBuffer"in n;if(a)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function u(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function h(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function p(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function g(e){var t=new FileReader,n=p(t);return t.readAsArrayBuffer(e),n}function b(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:t&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():a&&i&&function(e){return e&&DataView.prototype.isPrototypeOf(e)}(e)?(this._bodyArrayBuffer=b(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(e)||f(e))?this._bodyArrayBuffer=b(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=p(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=c(e),t=l(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},d.prototype.delete=function(e){delete this.map[c(e)]},d.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},d.prototype.set=function(e,t){this.map[c(e)]=l(t)},d.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),u(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),u(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),u(e)},r&&(d.prototype[Symbol.iterator]=d.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(e,t){var n=(t=t||{}).body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,!n&&null!=e._bodyInit&&(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new d(t.headers)),this.method=function(e){var t=e.toUpperCase();return m.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function _(e){var t=new d;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t}function E(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},y.call(v.prototype),y.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},E.error=function(){var e=new E(null,{status:0,statusText:""});return e.type="error",e};var C=[301,302,303,307,308];E.redirect=function(e,t){if(-1===C.indexOf(t))throw new RangeError("Invalid status code");return new E(null,{status:t,headers:{location:e}})},e.DOMException=n.DOMException;try{new e.DOMException}catch{e.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function O(t,n){return new Promise((function(r,o){var a=new v(t,n);if(a.signal&&a.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function f(){s.abort()}s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:_(s.getAllResponseHeaders()||"")};e.url="responseURL"in s?s.responseURL:e.headers.get("X-Request-URL");var t="response"in s?s.response:s.responseText;r(new E(t,e))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.onabort=function(){o(new e.DOMException("Aborted","AbortError"))},s.open(a.method,a.url,!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&i&&(s.responseType="blob"),a.headers.forEach((function(e,t){s.setRequestHeader(t,e)})),a.signal&&(a.signal.addEventListener("abort",f),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",f)}),s.send(typeof a._bodyInit>"u"?null:a._bodyInit)}))}O.polyfill=!0,n.fetch||(n.fetch=O,n.Headers=d,n.Request=v,n.Response=E),e.Headers=d,e.Request=v,e.Response=E,e.fetch=O,Object.defineProperty(e,"__esModule",{value:!0})}({}),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var o=i;(e=o.fetch).default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,t.exports=e})),ns=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))},n=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.JsonRpcConnection=void 0;var r=dn(),i=n(ts()),o=ua(),a=ua(),s={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};e.JsonRpcConnection=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.url=e,this.disableProviderPing=t,this.events=new r.EventEmitter,this.isAvailable=!1,this.registering=!1,!(0,a.isHttpUrl)(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}open(){return t(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url;return function*(){yield e.register(t)}()}))}close(){return t(this,void 0,void 0,(function*(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}))}send(e){return t(this,void 0,void 0,(function*(){this.isAvailable||(yield this.register());try{let t=(0,o.safeJsonStringify)(e),n=yield(yield(0,i.default)(this.url,Object.assign(Object.assign({},s),{body:t}))).json();this.onPayload({data:n})}catch(t){this.onError(e.id,t)}}))}register(){return t(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url;return function*(){if(!(0,a.isHttpUrl)(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(e.registering)return new Promise(((t,n)=>{e.events.once("register_error",(e=>{n(e)})),e.events.once("open",(()=>{if(typeof e.isAvailable>"u")return n(new Error("HTTP connection is missing or invalid"));t()}))}));e.url=t,e.registering=!0;try{if(!e.disableProviderPing){let e=(0,o.safeJsonStringify)({id:1,jsonrpc:"2.0",method:"test",params:[]});yield(0,i.default)(t,Object.assign(Object.assign({},s),{body:e}))}e.onOpen()}catch(n){let t=e.parseError(n);throw e.events.emit("register_error",t),e.onClose(),t}}()}))}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;let t="string"==typeof e.data?(0,o.safeJsonParse)(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let n=this.parseError(t),r=n.message||n.toString(),i=(0,a.formatJsonRpcError)(e,r);this.events.emit("payload",i)}parseError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.url;return(0,a.parseConnectionError)(e,t,"HTTP")}}})),rs=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Eip155Provider=void 0;var n=Ga(),r=Qa(),i=ua(),o=es(),a=ns(),s=class{constructor(e,t,n){this.name="eip155",this.namespace=e.namespace,this.events=n,this.client=t,this.chainId=parseInt(this.getDefaultChain()),this.httpProviders=this.createHttpProviders(),(0,i.logDebug)("eip155 constructor --opts.namespace--\x3e",e.namespace)}isRecord(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}isArray(e){return"object"==typeof e&&null!==e&&Array.isArray(e)}updateRequestParams(e){let t=e.params&&"object"==typeof e.params&&!Array.isArray(e.params);if("wallet_switchEthereumChain"===e.method){let n=e.chainId.split(":")[1],r=parseInt(n,10);if(isNaN(r))throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Invalid decimal number,  chainId: '${n}' `);if(e.params){if(!t)throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Request params error ,  method: '${e.method}' `);{let t=e.params;"chainId"in t||(t.chainId="0x"+r.toString(16),e.params=t)}}else e.params={chainId:"0x"+r.toString(16)}}else if("personal_sign"===e.method||"eth_signTypedData_v4"===e.method||"eth_sendTransaction"===e.method||"wallet_watchAsset"===e.method){if(!e.params)throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Request params is nil, method: '${e.method}'`);if(!this.isRecord(e.params))throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Invalid request params type, method: '${e.method}'`);{let t=e.params;if((0,i.logDebug)("eip155 updateRequestParams params>",JSON.stringify(t)),"chainId"in t){let n,r=e.chainId.split(":")[1],o=parseInt(r,10),a=String(t.chainId);if(a.startsWith(this.name)&&e.chainId===a)n=o;else if(a.startsWith("0x"))n=parseInt(a,16);else{if(isNaN(Number(a)))throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Invalid params.chainId format, method: '${e.method}'`);n=parseInt(a,10)}if(o!==n)throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Request params.chainId not equal chain,  method: '${e.method}' `)}}}}adaptArray(e){if("wallet_switchEthereumChain"===e.method||"wallet_addEthereumChain"===e.method||"wallet_watchAsset"===e.method||"eth_sendTransaction"===e.method){if(this.isArray(e.params)){let t=e.params;if(t){if(1!==t.length)throw t.length>1?new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params only Support one data,  method: '${e.method}' `):new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params is nil,  method: '${e.method}' `);{let t=e.params[0];this.isRecord(t)&&(e.params=t)}}}}else if("eth_signTypedData_v4"===e.method){if(this.isArray(e.params)){let t=e.params;if(t&&t.length>2)throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params only Support one data,  method: '${e.method}' `);if(t&&0===t.length)throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params is nil,  method: '${e.method}' `);let n={};if(t&&2===t.length){let t=e.params[0];if(!t||"string"!=typeof t)throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params address error , not string,  method: '${e.method}' `);{let r=!1;if(this.namespace.accounts.forEach((e=>{e.split(":")[2].toLowerCase()===t.toLowerCase()&&(r=!0)})),(0,i.logDebug)("eip155 adaptArray eth_signTypedData_v4 >>>isEqual: ",r),!r)throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params address error, not equal,  method: '${e.method}' `);if(!this.isRecord(e.params[1]))throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params message data error,  method: '${e.method}' `);n=e.params[1]}}else if(t&&1===t.length){if(!this.isRecord(e.params[0]))throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params message data error,  method: '${e.method}' `);n=e.params[0]}try{let t=JSON.stringify(n);e.params={typedDataJson:t}}catch{throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params call JSON.stringify() failed,  method: '${e.method}' `)}}}else if("personal_sign"===e.method&&this.isArray(e.params)){if(e.params&&e.params.length>2)throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params error,  method: '${e.method}' `);if(e.params&&0===e.params.length)throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params is nil,  method: '${e.method}' `);let t=e.params[0],n=e.params[1];if(n&&"string"==typeof n){let t=!1;if(this.namespace.accounts.forEach((e=>{e.split(":")[2].toLowerCase()===n.toLowerCase()&&(t=!0)})),(0,i.logDebug)("eip155 adaptArray personal_sign >>>isEqual: ",t),!t)throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params address error,  method: '${e.method}' `)}if(!t||"string"!=typeof t)throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params is error,  method: '${e.method}' `);e.params={message:t}}}showRequestModal(e){switch(e.method){case"eth_requestAccounts":case"eth_accounts":case"eth_chainId":default:return!1;case"eth_sendTransaction":case"eth_signTransaction":case"eth_sign":case"personal_sign":case"eth_signTypedData":case"wallet_addEthereumChain":case"wallet_watchAsset":case"eth_signTypedData_v4":return!0;case"wallet_switchEthereumChain":{this.adaptArray(e),this.updateRequestParams(e);let{parsedChainId:t,hexChainId:n}=this.getHexChainIdFromRequest(e);return!this.isChainApproved(t)}}return!1}request(e){return t(this,void 0,void 0,(function*(){switch(this.adaptArray(e),(0,i.logDebug)("eip155 request --args--string>",JSON.stringify(e)),this.updateRequestParams(e),(0,i.logDebug)("eip155 request --params--string>",JSON.stringify(e)),e.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_switchEthereumChain":return yield this.handleSwitchChain(e);case"wallet_addEthereumChain":return this.addEthereumChain(e)}if(!this.namespace.methods.includes(e.method))return(0,i.logDebug)("[RPC] request begin"),yield this.getHttpProvider().request(e);try{let t=yield this.client.request(e);if((0,i.logDebug)("eip155 request --response----string>",JSON.stringify(t)),this.isRecord(t)&&"result"in t){let e=t.result;return!e||"string"!=typeof e||"true"!==e&&"false"!==e?t.result:((0,i.logDebug)("eip155 request --wallet_watchAsset>>>>","true"===e),"true"===e)}return t}catch(t){throw(0,i.logDebug)(`eip155 request --response --error--string> e instanceof OKXConnectError ${t instanceof i.OKXConnectError}`,JSON.stringify(t)),t}}))}addEthereumChain(e){return t(this,void 0,void 0,(function*(){let t=yield this.client.request(e);try{if("result"in t){let n=t.result;if(n){let t=n.split(":")[0],i=n.split(":")[1],o=t+":"+i;this.namespace;if(this.namespace.accounts.push(n),this.namespace.chains.push(o),this.isRecord(e.params)&&"rpcUrls"in e.params){let t=e.params.rpcUrls,n=t?t[0]:void 0;n&&(this.namespace.rpcMap?this.namespace.rpcMap[i]=n:this.namespace.rpcMap={[i]:n},this.setHttpProvider(i,n))}this.events.emit(r.PROVIDER_EVENTS.UPDATE_NAMESPACES,{eip155:this.namespace})}}else new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method ${e.method} request error`)}catch{throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method ${e.method} request  error`)}return null}))}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){if(this.chainId=parseInt(e),!this.httpProviders[e]){let r=t||(0,n.getRpcUrl)(`${this.name}:${e}`,this.namespace);r?this.setHttpProvider(e,r):(0,i.logError)(`No RPC url provided for chainId: ${e}`)}this.events.emit(r.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return(0,i.logDebug)("eip155 getAccounts ",e,this.chainId),e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}getHexChainIdFromRequest(e){let t=e.params,n="0x0";t&&"chainId"in t&&(n=t.chainId),n=n.startsWith("0x")?n:`0x${n}`,(0,i.logDebug)("handleSwitchChain --\x3eargs ",e),(0,i.logDebug)("handleSwitchChain --\x3ehexChainId ",n);let r=parseInt(n,16);return(0,i.logDebug)("handleSwitchChain --\x3eparsedChainId ",r),{parsedChainId:r,hexChainId:n}}handleSwitchChain(e){return t(this,void 0,void 0,(function*(){let{parsedChainId:t,hexChainId:n}=this.getHexChainIdFromRequest(e);if(this.isChainApproved(t))this.setDefaultChain(`${t}`);else{let o=yield this.client.request({method:"wallet_switchEthereumChain",chainId:e.chainId,params:{chainId:n}});try{if("result"in o){let e=o.result;if(e){let n=e.split(":")[0]+":"+e.split(":")[1];this.namespace;this.namespace.accounts.push(e),this.namespace.chains.push(n),(0,i.logDebug)("handleSwitchChain --\x3ewallet_switchEthereumChain ",o),this.setDefaultChain(`${t}`),this.events.emit(r.PROVIDER_EVENTS.UPDATE_NAMESPACES,{eip155:this.namespace})}}else new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method ${e.method} request error`)}catch{throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method ${e.method} request  error`)}}return null}))}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}createHttpProvider(e,t){let r=t;if(r)return new o.JsonRpcProvider(new a.JsonRpcConnection(r,(0,n.getGlobal)("disableProviderPing")));(0,i.logError)(`No RPC url provided for chainId: ${e}`)}createHttpProviders(){let e={};return this.namespace.chains.forEach((t=>{let r=(0,n.getChainId)(t),o=(0,n.getRpcUrl)(t,this.namespace);(0,i.logDebug)("get parsed chain and rpc:",r,o);let a=this.createHttpProvider(r,o);a&&(e[r]=a)})),(0,i.logDebug)("get http providermap:",e),e}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if((0,i.logDebug)("[RPC] get http provider:",e,t),typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}};e.Eip155Provider=s,e.default=s})),is=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.SuiProvider=void 0;var n=Qa(),r=ua(),i=Ga(),o=ns(),a=es(),s=class{constructor(e,t,n){this.name=r.NameSpaceKeySui,this.namespace=e.namespace,this.events=n,this.client=t,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}request(e){return t(this,void 0,void 0,(function*(){return(0,r.logDebug)("sui request --args--string>",JSON.stringify(e)),(0,r.logDebug)("sui provider namespace: ",this.namespace),this.namespace.methods.includes(e.method)?this.client.request(e):this.getHttpProvider().request(e)}))}requestAccounts(){return this.getAccounts()}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(n.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach((t=>{let n=(0,i.getChainId)(t),r=(0,i.getRpcUrl)(t,this.namespace),o=this.createHttpProvider(n,r);o&&(e[n]=o)})),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if((0,r.logDebug)("[RPC] get http provider:",e,t),typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&((0,r.logDebug)("setHttpProvider",e,t),this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t;if(n)return new a.JsonRpcProvider(new o.JsonRpcConnection(n,(0,i.getGlobal)("disableProviderPing")));(0,r.logError)(`No RPC url provided for chainId: ${e}`)}getPubkey(e){return this.getWalletAddress(e)}getWalletAddress(e){return e||(e=this.namespace.defaultChain,e?.startsWith("sui")||(e=`sui:${e}`)),this.namespace.accounts.filter((function(t){return t.split(":").length>2&&t.startsWith(e)})).map((function(e){return e.split(":")[2]}))[0]}showRequestModal(e){switch(e.method){case"sui_signMessage":case"sui_signPersonalMessage":case"sui_signTransactionBlock":case"sui_signAndExecuteTransactionBlock":return!0;default:return!1}return!1}};e.SuiProvider=s,e.default=s})),os=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getAccountsChains=function(e){let t=[];return e.forEach((e=>{let[n,r]=e.split(":");t.push(`${n}:${r}`)})),t},e.nameSpaceToConnectWalletNameSpace=function(e){var n=[];return e&&Object.keys(e).forEach((r=>{(r===t.NameSpaceKeyEip155||r===t.NameSpaceKeySOL||r===t.NameSpaceKeySui||r===t.NameSpaceKeyAptos||r==t.NameSpaceKeyBtc||r===t.NameSpaceKeyTON||r===t.NameSpaceKeyCosmos||r===t.NameSpaceKeyTron)&&e[r].chains&&n.push({namespace:r,chains:e[r].chains,params:e[r].params})})),n},e.fillParamsToSession=function(e,t,n,r){let i=(e,t)=>{Object.assign(e,t)},o=(e,t)=>{for(let n in t)t.hasOwnProperty(n)&&t[n].rpcMap&&(t[n].rpcMap&&(e[n].rpcMap||(e[n].rpcMap={}),i(e[n].rpcMap,t[n].rpcMap)),t[n].defaultChain&&void 0===e[n].defaultChain&&e[n].chains.some((e=>e.split(":")[1]===t[n].defaultChain))&&(e[n].defaultChain=t[n].defaultChain))};t&&o(e.namespaces,t),n&&o(e.namespaces,n),e.sessionConfig=r},e.isCaipNamespace=n,e.parseNamespaceKey=function(e){return n(e)?e.split(":")[0]:e};var t=ua();function n(e){return e.includes(":")}})),as=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.SignClient=void 0;var n=ua(),r=os(),o=Xa(),a=Qa(),s=class extends n.ISignClient{constructor(e,s){super(e),this.connect=e=>t(this,void 0,void 0,(function*(){return new Promise(((i,s)=>t(this,void 0,void 0,(function*(){try{var f=[];(0,n.logDebug)("client connect params >>>",JSON.stringify(e));var c={name:"requestAccounts",requiredNamespaces:(0,r.nameSpaceToConnectWalletNameSpace)(e.namespaces),optionalNamespaces:(0,r.nameSpaceToConnectWalletNameSpace)(e.optionalNamespaces)};this.engine.setSessionConnectingListener((()=>{(0,n.logDebug)("sessionConnectingListener >>>"),this.events.emit(a.PROVIDER_EVENTS.SESSION_CONNECTING)})),e.connectMethods&&(c.connectRequestMethods=yield(0,o.connectMethodsToConnectWalletMethods)(e.connectMethods,c.requiredNamespaces)),f.push(c),(0,n.logDebug)("client connect connectRequest >>>",JSON.stringify(f)),f.push(c),this.engine.universalConnect(f,Object.assign({dappInfo:this.metadata},e.sessionConfig),(e=>{e&&e.connectRequest&&((0,n.logDebug)("universalConect info.connectRequest :",e.connectRequest),(0,n.logDebug)("universalConect url:",(0,n.getOKXLink)(e.connectRequest,this.sessionConfig.useMini)),this.events.emit("display_uri",(0,n.getOKXLink)(e.connectRequest,this.sessionConfig.useMini)),this.events.emit("short_display_uri",(0,n.getAppWalletShortDeepLink)(e.connectRequest.topic,e.connectRequest.clientId)),(0,n.logDebug)(`universalConect EngineConnectInfo  ${JSON.stringify(e)}`),this.events.emit("okx_engine_connect_params",e))})).then((a=>t(this,void 0,void 0,(function*(){(0,r.fillParamsToSession)(a,e.namespaces,e.optionalNamespaces,this.sessionConfig),(0,n.logDebug)(`signClient: connect: session ${JSON.stringify(a)}`),e.connectMethods&&(yield(0,o.connectMethodsResponseUpdate)(a,e.connectMethods)),i(a)})))).catch((e=>{(0,n.logDebug)(`signClient: connect: catch ${JSON.stringify(e)}`),this.events.emit("connect_error",e),s(e)}))}catch(l){(0,n.logDebug)(`signClient: connect:  ${JSON.stringify(l)}`),s(l)}}))))})),this.restoreconnect=e=>t(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{this.engine.restoreconnect(e,(e=>{t(e)}))}))})),this.reject=e=>t(this,void 0,void 0,(function*(){})),this.request=e=>t(this,void 0,void 0,(function*(){return new Promise(((r,i)=>t(this,void 0,void 0,(function*(){var t,o;(0,n.logDebug)("clint request --params>>>> >",this.engine.connectionManager.getCurrentConnectionReady(),null===(t=this.sessionConfig)||void 0===t?void 0:t.openUniversalUrl,JSON.stringify(e));try{!(null===(o=this.sessionConfig)||void 0===o)&&o.openUniversalUrl&&(0,n.isIos)()&&this.openOKXWallet(),yield this.engine.send(e,{resolve:e=>{if(delete e.requestId,(0,n.logDebug)("clint request --response >",JSON.stringify(e)),"error"in e&&e.error){let t=e.error;i(new n.OKXConnectError(e.error.code,e.method+":"+t.message))}else r(e)},onAck:()=>{var e;!(0,n.isIos)()&&null!==(e=this.sessionConfig)&&void 0!==e&&e.openUniversalUrl&&this.openOKXWallet()}})}catch(a){i(a)}}))))})),this.disconnect=()=>t(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{this.engine.send({method:"disconnect"},{onAck:()=>{e()}},void 0,864e5).catch((e=>{i.log(`disconnect : ${JSON.stringify(e)}`),t(e)}))}))})),this.engine=new n.Engine(new n.ConnectionManager(e.name)),this.events=s,this.metadata=e}openOKXWallet(){var e;if((0,n.logDebug)("bridge-provider ==>> connect_5"),null!==(e=this.sessionConfig)&&void 0!==e&&e.useMini){let e=(0,n.getTelegramWalletTWAUrl)(void 0,this.sessionConfig.tmaReturnUrl);(0,n.openOKXTMAWalletlinkWithFallback)(e)}else(0,n.openOKXDeeplink)(n.standardDeeplink)}};e.SignClient=s})),ss=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.SolanaProvider=void 0;var n=Qa(),r=ua(),i=Ga(),o=ns(),a=es(),s=class{constructor(e,t,n,r){this.name="solana",this.namespace=e.namespace,this.events=r,this.client=n,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders(),this.name=t}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return t(this,void 0,void 0,(function*(){if((0,r.logDebug)("solana request --args--string>",JSON.stringify(e)),(0,r.logDebug)("solana provider namespace: ",this.namespace),this.namespace.methods.includes(e.method))return this.client.request(e);throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,"Please upgrade OKX APP")}))}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(n.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach((t=>{let n=(0,i.getChainId)(t),r=(0,i.getRpcUrl)(t,this.namespace),o=this.createHttpProvider(n,r);o&&(e[n]=o)})),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t;if(n)return new a.JsonRpcProvider(new o.JsonRpcConnection(n,(0,i.getGlobal)("disableProviderPing")))}getPubkey(e){return this.getWalletAddress(e)}getWalletAddress(e){return e||(e=this.namespace.defaultChain,e?.startsWith("solana")||(e=`solana:${e}`)),this.namespace.accounts.filter((function(t){return t.split(":").length>2&&t.startsWith(e)})).map((function(e){return e.split(":")[2]}))[0]}showRequestModal(e){return!0}};e.SolanaProvider=s,e.default=s})),fs=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});var n=Qa(),r=ua(),i=Ga(),o=ns(),a=es();e.default=class{constructor(e,t,n,i){this.name=r.NameSpaceKeyBtc,this.namespace=e.namespace,this.events=i,this.client=n,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders(),this.name=t}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return t(this,void 0,void 0,(function*(){return(0,r.logDebug)("btc request --args--string>",JSON.stringify(e)),(0,r.logDebug)("btc provider namespace: ",JSON.stringify(this.namespace)),this.namespace.methods.includes(e.method)?this.client.request(e):this.getHttpProvider().request(e)}))}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(n.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach((t=>{let n=(0,i.getChainId)(t),r=(0,i.getRpcUrl)(t,this.namespace),o=this.createHttpProvider(n,r);o&&(e[n]=o)})),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t;if(n)return new a.JsonRpcProvider(new o.JsonRpcConnection(n,(0,i.getGlobal)("disableProviderPing")));(0,r.logError)(`No RPC url provided for chainId: ${e}`)}showRequestModal(e){return!0}}})),cs=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});var n=Qa(),r=ua(),i=Ga(),o=ns(),a=es();e.default=class{constructor(e,t,n,r){this.name="aptos",this.namespace=e.namespace,this.events=r,this.client=n,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders(),this.name=t}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return t(this,void 0,void 0,(function*(){if((0,r.logDebug)("solana request --args--string>",JSON.stringify(e)),(0,r.logDebug)("solana provider namespace: ",this.namespace),this.namespace.methods.includes(e.method))return this.client.request(e);throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,"Please upgrade OKX APP")}))}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(n.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach((t=>{let n=(0,i.getChainId)(t),r=(0,i.getRpcUrl)(t,this.namespace),o=this.createHttpProvider(n,r);o&&(e[n]=o)})),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t;if(n)return new a.JsonRpcProvider(new o.JsonRpcConnection(n,(0,i.getGlobal)("disableProviderPing")))}showRequestModal(e){return!0}}})),ls=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))},n=e&&e.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(e,"__esModule",{value:!0});var r=Qa(),i=ua(),o=Ga(),a=ns(),s=es();e.default=class{constructor(e,t,n){this.name=i.NameSpaceKeyTON,this.namespace=e.namespace,this.events=n,this.client=t,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}isRecord(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}request(e){return t(this,void 0,void 0,(function*(){var t,r,o,a;if((0,i.logDebug)("TONProvider request --args--string>",JSON.stringify(e)),(0,i.logDebug)("TONProvider request provider namespace: ",this.namespace),this.namespace.methods.includes(e.method)){if(!e.params)throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"ton request params is nil");if(this.isRecord(e.params)){let s=e.params,{validUntil:f}=s,c=n(s,["validUntil"]),l=null===(r=null===(t=this.namespace.payload)||void 0===t?void 0:t.ton_addr)||void 0===r?void 0:r.address;"from"in c&&(l=c.from||(null===(a=null===(o=this.namespace.payload)||void 0===o?void 0:o.ton_addr)||void 0===a?void 0:a.address)),e.params.from=l,e.params.network=this.getDefaultChain(),e.params.valid_until=f;let u=yield this.client.request(e);if(this.isRecord(u)&&"result"in u){let e={boc:u.result.toString()};return(0,i.logDebug)("TONProvider request provider response: ",JSON.stringify(u)),(0,i.logDebug)("TONProvider request provider result: ",JSON.stringify(e)),e}throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"ton_send request response is nil")}throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"ton request params type add nil")}return this.getHttpProvider().request(e)}))}requestAccounts(){return this.getAccounts()}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(r.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){var e,t;let n=this.namespace.accounts;if((0,i.logDebug)("ton getAccounts accounts :",n),(0,i.logDebug)("ton getAccounts .namespace :",JSON.stringify(this.namespace)),!n)return[];let r=null===(t=null===(e=this.namespace.payload)||void 0===e?void 0:e.ton_addr)||void 0===t?void 0:t.address;return(0,i.logDebug)("ton getAccounts address :",r),r?[r]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach((t=>{let n=(0,o.getChainId)(t),r=(0,o.getRpcUrl)(t,this.namespace),i=this.createHttpProvider(n,r);i&&(e[n]=i)})),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if((0,i.logDebug)("[RPC] get http provider:",e,t),typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&((0,i.logDebug)("setHttpProvider",e,t),this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t;if(n)return new s.JsonRpcProvider(new a.JsonRpcConnection(n,(0,o.getGlobal)("disableProviderPing")));(0,i.logError)(`No RPC url provided for chainId: ${e}`)}showRequestModal(e){return"ton_sendTransaction"===e.method}}})),us=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});var n=Qa(),r=ua(),i=Ga(),o=ns(),a=es();e.default=class{constructor(e,t,n){this.name=r.NameSpaceKeyCosmos,this.namespace=e.namespace,this.events=n,this.client=t,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return t(this,void 0,void 0,(function*(){if((0,r.logDebug)("cosmos request --args--string>",JSON.stringify(e)),(0,r.logDebug)("cosmos provider namespace: ",JSON.stringify(this.namespace)),this.namespace.methods.includes(e.method))return this.client.request(e);throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,"Please upgrade OKX APP")}))}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(n.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach((t=>{let n=(0,i.getChainId)(t),r=(0,i.getRpcUrl)(t,this.namespace),o=this.createHttpProvider(n,r);o&&(e[n]=o)})),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t;if(n)return new a.JsonRpcProvider(new o.JsonRpcConnection(n,(0,i.getGlobal)("disableProviderPing")))}showRequestModal(e){return!0}}})),ds=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});var n=Qa(),r=ua(),i=Ga(),o=ns(),a=es();e.default=class{constructor(e,t,n){this.name=r.NameSpaceKeyTron,this.namespace=e.namespace,this.events=n,this.client=t,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return t(this,void 0,void 0,(function*(){if((0,r.logDebug)("tron request --args--string>",JSON.stringify(e)),(0,r.logDebug)("tron provider namespace: ",JSON.stringify(this.namespace)),this.namespace.methods.includes(e.method))return this.client.request(e);throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,"Please upgrade OKX APP")}))}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(n.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach((t=>{let n=(0,i.getChainId)(t),r=(0,i.getRpcUrl)(t,this.namespace),o=this.createHttpProvider(n,r);o&&(e[n]=o)})),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t;if(n)return new a.JsonRpcProvider(new o.JsonRpcConnection(n,(0,i.getGlobal)("disableProviderPing")))}showRequestModal(e){return!0}}})),hs=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))},n=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.OKXUniversalProvider=void 0;var r=rs(),i=is(),o=Qa(),a=n(dn()),s=as(),f=ua(),c=os(),l=n(ss()),u=n(fs()),d=n(cs()),h=n(ls()),p=n(us()),g=n(ds()),b=class e{static init(n){return t(this,void 0,void 0,(function*(){let t;return(0,f.logDebug)("OKXUniversalProvider init() called"),window&&window.okxConnectUniversalinwindow&&window.okxConnectUniversalinwindow instanceof e?((0,f.logDebug)("OKXUniversalConnect init() old called"),t=window.okxConnectUniversalinwindow):((0,f.logDebug)("OKXUniversalConnect init() new called"),t=new e(n),yield t.initialize(),window&&(window.okxConnectUniversalinwindow=t)),(0,f.getDefaultReporter)().configVersionAndSide("universalprovider-1.5.2","dapp",t.providerOpts.dappMetaData.name),t}))}constructor(e){this.rpcProviders={},this.events=new a.default,this.providerOpts=e}request(e,n){return t(this,void 0,void 0,(function*(){if((0,f.logDebug)("OKXUniversalProvider request() called"),(0,f.reportLog)("OKXUniversalProvider request() called"),!this.connected())throw new f.OKXConnectError(f.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR);let{namespace:t,requestParam:r}=this.buildRequestParamFromRequest(e,n);return yield this.getProvider(t).request(r)}))}buildRequestParamFromRequest(e,t){(0,f.logDebug)("UniversalProvider request args >>>>>>>: ",t,JSON.stringify(e));let[n,r]=this.validateChain(t);if(!this.session)throw new f.OKXConnectError(f.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Please call connect() before request()");let i=Object.keys(this.session.namespaces);if(!t&&i&&i.length>1)throw new f.OKXConnectError(f.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,"Multiple chains have been linked, the request method requires chain");return"aptos"==n&&"mainnet"==r&&(n="aptos",r="637"),"movement"==n&&"testnet"==r&&(n="aptos",r="70000060"),{namespace:n,requestParam:Object.assign(Object.assign({},e),{chainId:`${n}:${r}`})}}enable(){return t(this,void 0,void 0,(function*(){if(!this.client)throw new f.OKXConnectError(f.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client not initialized");if(!this.session){if(!this.connectOpts)throw new f.OKXConnectError(f.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client not initialized");yield this.connect(this.connectOpts)}return yield this.requestAccounts()}))}disconnect(){return t(this,void 0,void 0,(function*(){if((0,f.logDebug)("OKXUniversalProvider disconnect() called"),(0,f.reportLog)("provider disconnect called"),!this.session)throw new f.OKXConnectError(f.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR);return new Promise((e=>t(this,void 0,void 0,(function*(){let n=!1,r=()=>t(this,void 0,void 0,(function*(){n||(n=!0,yield this.disconnectAndEmit(),yield this.cleanup(),e(),(0,f.logDebug)("UniversalProvider disconnect Disconnected"),(0,f.reportLog)("provider disconnect disconnected"))}));try{yield this.client.disconnect(),yield r()}catch{yield r()}}))))}))}disconnectAndEmit(){var e,t;this.client.engine.connectionManager.disconnect(),this.events.emit("disconnect",{topic:null===(e=this.session)||void 0===e?void 0:e.topic}),this.events.emit("session_delete",{topic:null===(t=this.session)||void 0===t?void 0:t.topic})}aptosChainNameToGeneralId(e){return"aptos:mainnet"==e?"aptos:637":"movement:testnet"==e?"aptos:70000060":e}replaceAptos(e){var t,n;let r=null===(t=e.namespaces)||void 0===t?void 0:t.aptos;if(null!=r){let t=this.replaceAptosInner(r);null!=e.namespaces&&"aptos"in e.namespaces&&null!=t&&(e.namespaces.aptos=t)}let i=null===(n=e.optionalNamespaces)||void 0===n?void 0:n.aptos;if(null!=i){let t=this.replaceAptosInner(i);null!=e.optionalNamespaces&&"aptos"in e.optionalNamespaces&&null!=t&&(e.optionalNamespaces.aptos=t)}return e}replaceAptosInner(e){var t;return null!=e&&(e.chains=null===(t=e.chains)||void 0===t?void 0:t.map((e=>this.aptosChainNameToGeneralId(e))),null!=e.defaultChain&&(e.defaultChain=this.aptosChainNameToGeneralId(e.defaultChain))),e}replaceAptosGeneralIdWithNetName(e){return e.includes("aptos:637")?e=e.replace("aptos:637","aptos:mainnet"):e.includes("aptos:70000060")&&(e=e.replace("aptos:70000060","movement:testnet")),e}replaceSessionAptos(e){var t;let n=null===(t=e?.namespaces)||void 0===t?void 0:t.aptos;if(null!=n&&null!=n.chains){n.chains=n.chains.map((e=>this.replaceAptosGeneralIdWithNetName(e))),n.accounts=n.accounts.map((e=>this.replaceAptosGeneralIdWithNetName(e)));let t={};Object.keys(n.extra||{}).forEach(((n,r)=>{this.replaceAptosGeneralIdWithNetName(n);t[this.replaceAptosGeneralIdWithNetName(n)]=Object.values(e?.namespaces.aptos.extra||{})[r]})),n.extra=t}(0,f.logDebug)("replaceSessionAptos",e)}connected(){(0,f.logDebug)("OKXUniversalProvider connected() called"),(0,f.reportLog)("provider connected called");let e=()=>{try{this.cleanup(),this.client.engine.connectionManager.disconnect()}catch(e){(0,f.logDebug)("Error during disconnect:",e)}};try{return!!this.session&&(!!this.client.engine.connectionManager.getCurrentConnectionReady()||(e(),!1))}catch{return e(),!1}}connect(e){return t(this,void 0,void 0,(function*(){if((0,f.logDebug)("OKXUniversalProvider connect() called"),(0,f.reportLog)("provider connect called"),!this.client)throw new f.OKXConnectError(f.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client not initialized");if(this.connected())return this.session;e=this.replaceAptos(e),(0,f.logDebug)("OKXUniversalProvider connect >>>>",JSON.stringify(e)),void 0===e.sessionConfig&&(e.sessionConfig={}),void 0===e.sessionConfig.openUniversalUrl&&(e.sessionConfig.openUniversalUrl=(0,f.isMobileUserAgent)()),this.setNamespaces(e);try{(0,f.logDebug)(`UniversalProvider connect opts.stringify ====> ${JSON.stringify(e)}`);let t=yield this.client.connect(e);return this.replaceSessionAptos(t),(0,f.logDebug)(`UniversalProvider connect success ====> ${JSON.stringify(t)}`),t?(this.session=t,this.client.session=t,(0,f.logDebug)("OKXUniversalProvider connect success opts>>>>",JSON.stringify(e)),this.onConnect(),this.session.connectMethodsReply&&this.session.connectMethodsReply.length>0&&((0,f.logDebug)(`UniversalProvider connect success connectRequestReply ====> ${JSON.stringify(this.session.connectMethodsReply)}`),setTimeout((()=>{this.events.emit("connectMethodReply",this.session.connectMethodsReply)}),100)),t):void 0}catch(t){throw(0,f.logDebug)("UniversalProvider connect error ====> ",JSON.stringify(t)),t}}))}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}setDefaultChain(e,t){(0,f.logDebug)("OKXUniversalProvider setDefaultChain() called");try{if(!this.connected())return;let[n,r]=this.validateChain(e);this.getProvider(n).setDefaultChain(r,t)}catch(n){if(!/Please call connect/.test(n.message))throw n}}checkStorage(){return t(this,void 0,void 0,(function*(){let e=yield this.getFromStore("connectSession");if((0,f.logDebug)(e),e){let t=e;this.session=t,this.client.session=this.session,this.sessionConfig=t.sessionConfig,this.client.sessionConfig=this.sessionConfig,(0,f.logDebug)("[evm u-provider] do reconnection",this.session),yield this.client.restoreconnect(t),this.createProviders(),this.registerEventListeners(),setTimeout((()=>{this.events.emit("reconnect",{session:this.session})}),100),this.registerEventListeners()}}))}initialize(){return t(this,void 0,void 0,(function*(){(0,f.logDebug)("OKXUniversalProvider initialize() called"),(0,f.reportLog)("provider initialize called");let e=Object.assign({url:window.location.hostname,origin:window.location.origin},this.providerOpts.dappMetaData);this.client=new s.SignClient(e,this.events),yield this.checkStorage()}))}createProviders(){if(!this.client)throw new f.OKXConnectError(f.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client not initialized");if(!this.connected())throw new f.OKXConnectError(f.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Session not initialized. Please call connect() before enable()");[...new Set(Object.keys(this.session.namespaces).map((e=>(0,c.parseNamespaceKey)(e))))].forEach((e=>{if(!this.session)return;let t=this.session.namespaces[e];switch((0,f.logDebug)("init eip155 >> ",t),e){case"eip155":let n={namespace:t};this.rpcProviders[e]=new r.Eip155Provider(n,this.client,this.events);break;case"solana":let o={namespace:t},a=new l.default(o,"solana",this.client,this.events);this.rpcProviders[e]=a;let s=new l.default(o,"sonic",this.client,this.events);this.rpcProviders.sonic=s;let f=new l.default(o,"svm",this.client,this.events);this.rpcProviders.svm=f;break;case"ton":let c={namespace:t},b=new h.default(c,this.client,this.events);this.rpcProviders[e]=b;break;case"sui":let y={namespace:t},m=new i.SuiProvider(y,this.client,this.events);m.name="sui",this.rpcProviders[e]=m;break;case"btc":let v={namespace:t},w=new u.default(v,"btc",this.client,this.events);this.rpcProviders.btc=w;let _=new u.default(v,"fractal",this.client,this.events);this.rpcProviders.fractal=_;break;case"aptos":let E=new d.default({namespace:t},"aptos",this.client,this.events);this.rpcProviders[e]=E;let C=new d.default({namespace:t},"movement",this.client,this.events);this.rpcProviders.movement=C;break;case"cosmos":let O=new p.default({namespace:t},this.client,this.events);this.rpcProviders[e]=O;break;case"tron":let x=new g.default({namespace:t},this.client,this.events);this.rpcProviders[e]=x}}))}registerEventListeners(){if(typeof this.client>"u")throw new f.OKXConnectError(f.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client is not initialized");this.client.engine.addDisconnectListener((()=>{this.disconnectAndEmit(),this.cleanup()})),this.on(o.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,(e=>{this.onChainChanged(e)})),this.on(o.PROVIDER_EVENTS.UPDATE_NAMESPACES,(e=>{if(e){let t=Object.keys(e)[0];this.session&&(this.session.namespaces[t]=e[t],this.session&&(this.persist("connectSession",this.session),this.events.emit("session_update",this.session)),(0,f.logDebug)("PROVIDER_EVENTS.UPDATE_NAMESPACES this.session... ->>>",JSON.stringify(this.session)))}}))}getProvider(e){return(0,f.logDebug)("current get providers",this.rpcProviders),(0,f.logDebug)("query namespace: ",e),this.rpcProviders[e]}setNamespaces(e){this.connectOpts=e;let{namespaces:t,sessionConfig:n}=e,r={origin:window.location.origin,url:window.location.hostname,name:this.providerOpts.dappMetaData.name,icon:this.providerOpts.dappMetaData.icon};this.sessionConfig=Object.assign({dappInfo:r},n),(0,f.logDebug)("setNamespaces sessionConfig>>>",this.sessionConfig),this.client.sessionConfig=this.sessionConfig,this.persist("sessionConfig",n)}validateChain(e){var t;let[n,r]=e?.split(":")||["",""];if(!this.session||!this.session.namespaces||!Object.keys(this.session.namespaces).length)return(0,f.logDebug)("get name & chain",n,r),[n,r];if(n){if(!this.isChainNamespaceInSession(n))throw new f.OKXConnectError(f.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(r&&e){(0,f.logDebug)("this.session.namespaces --\x3e> ",n,JSON.stringify(this.session.namespaces));let r=null===(t=this.session.namespaces[n])||void 0===t?void 0:t.chains;if((0,f.logDebug)("get chainsArr & chain",JSON.stringify(r),e),r&&!r.includes(e))throw new f.OKXConnectError(f.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Namespace not include the chain '${e}'`)}}if(n&&r)return(0,f.logDebug)("get name & chain",n,r),[n,r];let i=(0,c.parseNamespaceKey)(Object.keys(this.session.namespaces)[0]),o=this.rpcProviders[i].getDefaultChain();return(0,f.logDebug)("get default chain:",o),[i,o]}isChainNamespaceInSession(e){var t,n;if(Object.keys((null===(t=this.session)||void 0===t?void 0:t.namespaces)||{}).map((e=>(0,c.parseNamespaceKey)(e))).includes(e))return!0;let r=!1;return Object.values((null===(n=this.session)||void 0===n?void 0:n.namespaces)||{}).forEach((t=>{t.chains.forEach((t=>{t.split(":")[0]==e&&(r=!0)}))})),r}requestAccountsWithNamespace(e){return this.getProvider(e).requestAccounts()}requestDefaultChainWithNamespace(e){return this.getProvider(e).getDefaultChain()}requestAccounts(){return t(this,void 0,void 0,(function*(){let[e]=this.validateChain();return yield this.getProvider(e).requestAccounts()}))}onChainChanged(e){var t;if(null===(t=this.session)||void 0===t||!t.namespaces)return;let[n,r]=this.validateChain(e);r&&(this.session.namespaces[n]&&(this.session.namespaces[n].defaultChain=r,this.persist("connectSession",this.session)),this.events.emit("chainChanged",r))}onConnect(){this.createProviders(),this.session&&this.persist("connectSession",this.session),this.events.emit("connect",{session:this.session}),this.registerEventListeners()}cleanup(){return t(this,void 0,void 0,(function*(){this.session=void 0,this.client.session=void 0,this.sessionProperties=void 0,this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),this.persist("connectSession",void 0)}))}persist(e,t){return(0,f.logDebug)("[evm u-provider] persisit data",e,t),this.client.engine.connectionManager.saveSessionContent(e,t)}getFromStore(e){return t(this,void 0,void 0,(function*(){return this.client.engine.connectionManager.getSessionContent(e)}))}showRequestModal(e,t){try{let{namespace:n,requestParam:r}=this.buildRequestParamFromRequest(e,t);return this.getProvider(n).showRequestModal(r)}catch{return!1}}};e.OKXUniversalProvider=b,e.default=b})),ps=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.OKXBtcProvider=void 0;var n=ms(),r=class{constructor(e){this.caip=["btc:mainnet","fractal:mainnet"],this.provider=e}getAddressForChainId(e){var t,r;if(null==this.checkChainId(e))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");let i=null===(r=null===(t=this.provider.session)||void 0===t?void 0:t.namespaces.btc)||void 0===r?void 0:r.accounts.filter((function(t){return t.startsWith(e)}));if(null==i||i.length<0)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"no connected account");return i[0].split(":")[2]}getAccount(e){var t,r,i;let o=this.checkChainId(e);if(null==o)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");let a=null===(i=null===(r=null===(t=this.provider.session)||void 0===t?void 0:t.namespaces[o])||void 0===r?void 0:r.extra)||void 0===i?void 0:i[e],s="";return null!=a&&(s=a.publicKey),{address:this.getAddressForChainId(e),publicKey:s}}signMessage(e,r,i){return t(this,void 0,void 0,(function*(){if(null==this.checkChainId(e))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if("undefined"===r)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signMessage parmas error");let t={signStr:r,from:this.getAddressForChainId(e)};i&&(t.type=i);try{let n=yield this.provider.request({method:"btc_signMessage",params:t},e);return"result"in n?n.result:n.error}catch{throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signTransaction request error")}}))}sendBitcoin(e,r,i,o){return t(this,void 0,void 0,(function*(){if(null==this.checkChainId(e))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");let t={from:this.getAddressForChainId(e),to:r,value:(i/1e8).toString()};o?.feeRate&&(t.satBytes=o.feeRate.toString());let a=yield this.send(e,t);return void 0!==a&&"txhash"in a?a.txhash:a}))}send(e,r){return t(this,void 0,void 0,(function*(){if(null==this.checkChainId(e))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if(!this.checkParameters(r,"to","value"))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method send parmas  error");r.from=this.getAddressForChainId(e);try{let t=yield this.provider.request({method:"btc_send",params:r},e);return"result"in t?{txhash:t.result}:t.error}catch(t){throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method send request error: ${t}`)}}))}signPsbt(e,n,r){return t(this,void 0,void 0,(function*(){return new Promise(((t,i)=>{this.signPsbts(e,[n],[r]).then((e=>{let n=JSON.parse(e);t(n[0])})).catch((e=>{i(e)}))}))}))}signPsbts(e,r,i){return t(this,void 0,void 0,(function*(){if(null==this.checkChainId(e))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if(void 0===r)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signPsbts params error");let t={psbtHexs:r,options:i};t.from=this.getAddressForChainId(e);try{let n=yield this.provider.request({method:"btc_signPsbts",params:t},e);return"result"in n?n.result:n.error}catch(o){throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method send request error: ${o}`)}}))}signAndPushPsbt(e,r,i){return t(this,void 0,void 0,(function*(){if(null==this.checkChainId(e))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if(void 0===r)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signPsbts params error");let t={psbtHex:r,options:i};t.from=this.getAddressForChainId(e);try{let n=yield this.provider.request({method:"btc_signAndPushPsbt",params:t},e);return"result"in n?JSON.parse(n.result):n.error}catch(o){throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method send request error: ${o}`)}}))}sendInscription(e,r,i,o){return t(this,void 0,void 0,(function*(){let t={address:r,inscriptionId:i,options:o};if(null==this.checkChainId(e))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if("undefined"===r)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method sendInscription params error");var a=0;o&&"feeRate"in o&&(a=o.feeRate);let s=this.getAddressForChainId(e);var f=7;if("undefined"!==i){let e="-Atomicals",t="-Ordinals";i?.toLowerCase().endsWith(e.toLowerCase())?(f=8,i=this.removeSuffix(i,e)):i?.toLowerCase().endsWith(t.toLowerCase())&&(i=this.removeSuffix(i,t))}let c={scenario:5,feeRate:a,txType:"20",to:r,batchBean:[{coinAmount:"1",nftId:i,protocolId:f,coinId:"",inscriptionId:"",from:s}],extension:t};try{let t=yield this.provider.request({method:"btc_sendInscription",params:c},e);return"result"in t?t.result:t.error}catch{throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signTransaction request error")}}))}removeSuffix(e,t){return e.endsWith(t)?e.slice(0,e.length-t.length):e}checkParameters(e){for(var t=[],n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.forEach((n=>{`${n}`in e||t.push(n)})),!(t.length>0)||(i.log("not find key: ",t.join(",")),!1)}checkChainId(e){if(this.caip.includes(e)){let[t,n]=e.split(":");return t}}};e.OKXBtcProvider=r,e.default=r})),gs=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.OKXCosmosProvider=void 0;var n=ua();e.OKXCosmosProvider=class{constructor(e){this.provider=e}getAccount(e){var t,r,o,a,s,f;(0,n.logDebug)("OKXCosmosProvider getAccount chainId:",e),(0,n.logDebug)("OKXCosmosProvider getAccount namespaces:",JSON.stringify(null===(t=this.provider.session)||void 0===t?void 0:t.namespaces));let c=null===(o=null===(r=this.provider.session)||void 0===r?void 0:r.namespaces[n.NameSpaceKeyCosmos])||void 0===o?void 0:o.accounts.filter((function(t){return t.startsWith(e)}))[0];if((0,n.logDebug)("OKXCosmosProvider getAccount account:",JSON.stringify(c)),!c)return;let l=c.split(":"),u=c.split(":")[2];(0,n.logDebug)("OKXCosmosProvider getAccount address:",u);let d=null===(f=null===(s=null===(a=this.provider.session)||void 0===a?void 0:a.namespaces[n.NameSpaceKeyCosmos])||void 0===s?void 0:s.extra)||void 0===f?void 0:f[`${l[0]}:${l[1]}`],h="";return null!=d&&(h=d.publicKey,i.log("aptos_publicKey",h)),u?{algo:"secp256k1",address:u,bech32Address:u,pubKey:this.hexToUint8Array(h)}:void 0}signArbitrary(e,n,r){return t(this,void 0,void 0,(function*(){let t=window.btoa(r),i={chain_id:"",account_number:"0",sequence:"0",fee:{gas:"0",amount:[]},msgs:[{type:"sign/MsgSignData",value:{signer:n,data:t}}],memo:""},o={chainId:e,method:"cosmos_signArbitrary",params:{signer:n,chain_id:e.split(":")[1],data:i}};try{let t=yield this.provider.request(o,e);return"result"in t?"string"==typeof t.result?JSON.parse(t.result):t.result:t.error}catch(ol){return ol}}))}signAmino(e,n,r,o){return t(this,void 0,void 0,(function*(){if("sign/MsgSignData"==r.msgs[0].type){let i={chainId:e,method:"cosmos_signArbitrary",params:{signer:n,chain_id:e.split(":")[1],data:r}};try{let t=yield this.provider.request(i,e);return"result"in t?t.result:t.error}catch(t){return t}}else{let a={chainId:e,method:"cosmos_signAmino",params:{signer:n,chainId:e.split(":")[1],sign_doc:r,signOptions:o}};try{let t=yield this.provider.request(a,e);if("result"in t){let e=JSON.parse(t.result);return i.log("signdoc",r,e.signDoc),r.fee=e.signDoc.fee,{signed:r,signature:e.signature}}return t.error}catch(t){return t}}}))}signDirect(e,n,r,o){return t(this,void 0,void 0,(function*(){let t={bodyBytes:this.bufferToHex(r.bodyBytes),authInfoBytes:this.bufferToHex(r.authInfoBytes),chainId:r.chainId,accountNumber:r.accountNumber?r.accountNumber.toString():null,signOptions:o||null},a={chainId:e,method:"cosmos_signDirect",params:{signer:n,chainId:e.split(":")[1],sign_doc:t}};try{let t=yield this.provider.request(a,e);if("result"in t){let e=JSON.parse(t.result);return i.log("signdirect result",e),r.authInfoBytes=this.messageToBuffer(e.signDoc.authInfoBytes),{signed:r,signature:e.signature}}}catch(ol){return ol}}))}messageToBuffer(e){var t=Uint8Array.from([]);try{t="string"==typeof e?this.hexToUint8Array(e.replace("0x","")):Uint8Array.from(e)}catch(n){i.log(`messageToBuffer error: ${n}`)}return t}bufferToHex(e){return"0x"+[...new Uint8Array(e)].map((e=>e.toString(16).padStart(2,"0"))).join("")}hexToUint8Array(e){if(e.length%2!==0)throw"Invalid hexString";for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2){var r=parseInt(e.substr(n,2),16);if(isNaN(r))throw"Invalid hexString";t[n/2]=r}return t}}})),bs=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.OKXTonProvider=void 0;var n=ms(),r=ua(),i=class{constructor(e){this.statusChangeSubscriptions=[],this.statusChangeErrorSubscriptions=[],this.provider=e,this.provider.on("connect",(()=>{let e=this.wallet();(0,r.logDebug)("OKXTONProvider event connect:",JSON.stringify(e)),this.statusChangeSubscriptions.forEach((t=>t(e)))})),this.provider.on("reconnect",(()=>{let e=this.wallet();(0,r.logDebug)("OKXTONProvider event reconnect:",JSON.stringify(e)),this.statusChangeSubscriptions.forEach((t=>t(e)))})),this.provider.on("disconnect",(()=>{(0,r.logDebug)("OKXTONProvider event disconnect:"),this.statusChangeSubscriptions.forEach((e=>e(null)))})),this.provider.on("connect_error",(e=>{(0,r.logDebug)("OKXTONProvider event connect_error:",JSON.stringify(e)),this.statusChangeErrorSubscriptions.forEach((t=>t(e)))}))}connected(){return!!this.provider.connected()&&!!this.provider.session.namespaces.ton}account(){try{if(!this.provider.session)return null;let e=this.provider.session.namespaces.ton;if(!e||!e.payload||!e.payload.ton_addr)return null;let t=e.payload.ton_addr;return{address:t.address,chain:t.network,walletStateInit:t.walletStateInit,publicKey:t.publicKey}}catch(e){return(0,r.logDebug)("OKXTONProvider account  error:",JSON.stringify(e)),null}}wallet(){if(this.connected())try{let e=this.provider.session.wallet,t={device:{platform:e.platform,appName:e.appName,appVersion:e.appVersion,maxProtocolVersion:e.maxProtocolVersion,features:["ton_sendTransaction"]},provider:"http",account:this.account()},n=this.provider.session.namespaces.ton;return n&&n.payload&&n.payload.ton_proof&&(t.connectItems={tonProof:n.payload.ton_proof}),(0,r.logDebug)("OKXTONProvider wallet :",JSON.stringify(t)),t}catch(e){return(0,r.logDebug)("OKXTONProvider wallet  error:",JSON.stringify(e)),null}return null}onStatusChange(e,t){return this.statusChangeSubscriptions.push(e),t&&this.statusChangeErrorSubscriptions.push(t),()=>{this.statusChangeSubscriptions=this.statusChangeSubscriptions.filter((t=>t!==e)),t&&(this.statusChangeErrorSubscriptions=this.statusChangeErrorSubscriptions.filter((e=>e!==t)))}}sendTransaction(e){return t(this,void 0,void 0,(function*(){if(e.network&&e.network!==r.TONCHAIN.MAINNET)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"OKXTONProvider sendTransaction network error");if(e.network||(e.network=r.TONCHAIN.MAINNET),this.provider.session&&!e.from){let t=this.provider.requestAccountsWithNamespace("ton");e.from=t[0]}let t={method:"ton_sendTransaction",params:e},i="ton:"+r.TONCHAIN.MAINNET;return(0,r.logDebug)("OKXTONProvider sendTransaction transaction----:",i,JSON.stringify(t)),this.provider.request(t,i)}))}};e.OKXTonProvider=i,e.default=i})),ys=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.OKXTronProvider=void 0;var n=ua();e.OKXTronProvider=class{constructor(e){this.TRON_CHAIN_ID="tron:mainnet",this.provider=e}getChain(e){if(null==e&&(e=this.TRON_CHAIN_ID),e!=this.TRON_CHAIN_ID)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.CHAIN_NOT_SUPPORTED,"The chainId:"+e+"is wrong for OKXTronProvider");return e}getAccount(e){var t,r,i,o,a;e=this.getChain(e);let s=null===(r=null===(t=this.provider.session)||void 0===t?void 0:t.namespaces[n.NameSpaceKeyTron])||void 0===r?void 0:r.accounts.filter((function(t){return t.startsWith(e)}))[0];if(!s)return;let f=s.split(":"),c=s.split(":")[2],l=null===(a=null===(o=null===(i=this.provider.session)||void 0===i?void 0:i.namespaces[n.NameSpaceKeyTron])||void 0===o?void 0:o.extra)||void 0===a?void 0:a[`${f[0]}:${f[1]}`],u="";return null!=l&&l.publicKey,c?{address:c}:void 0}stringToHex(e){let t="";for(let n=0;n<e.length;n++)t+=e.charCodeAt(n).toString(16).padStart(2,"0");return t}signMessage(e,n){return t(this,void 0,void 0,(function*(){let t={chainId:n=this.getChain(n),method:"tron_signMessage",params:{message:this.stringToHex(e)}};try{let e=yield this.provider.request(t,n);return"result"in e?e.result:e.error}catch(r){return r}}))}signMessageV2(e,n){return t(this,void 0,void 0,(function*(){let t={chainId:n=this.getChain(n),method:"tron_signMessageV2",params:{message:e}};try{let e=yield this.provider.request(t,n);return"result"in e?e.result:e.error}catch(r){return r}}))}signTransaction(e,n){return t(this,void 0,void 0,(function*(){n=this.getChain(n);let t={method:"tron_signTransaction",params:e};try{let e=yield this.provider.request(t,n);if("result"in e){let t;t="string"==typeof e.result?JSON.parse(e.result):e.result;let n={};n.visible=t.visible,n.txID=t.txID;let r={};return r.contract=t.raw_data.contract,r.expiration=t.raw_data.expiration,r.ref_block_bytes=t.raw_data.ref_block_bytes,r.ref_block_hash=t.raw_data.ref_block_hash,r.timestamp=t.raw_data.timestamp,n.raw_data=r,n.raw_data_hex=t.raw_data_hex,n.signature=t.signature,n}}catch(r){return r}}))}signAndSendTransaction(e,n){return t(this,void 0,void 0,(function*(){n=this.getChain(n);let t={method:"tron_signAndSendTransaction",params:e};try{let e=yield this.provider.request(t,n);if("result"in e)return e.result}catch(r){return r}}))}}})),ms=h((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.OKXTronProvider=e.OKXTonProvider=e.OKXCosmosProvider=e.OKXBtcProvider=e.OKXUniversalProvider=void 0,n(w(),e),n(za(),e);var r=hs();Object.defineProperty(e,"OKXUniversalProvider",{enumerable:!0,get:function(){return r.OKXUniversalProvider}});var i=ps();Object.defineProperty(e,"OKXBtcProvider",{enumerable:!0,get:function(){return i.OKXBtcProvider}});var o=gs();Object.defineProperty(e,"OKXCosmosProvider",{enumerable:!0,get:function(){return o.OKXCosmosProvider}});var a=bs();Object.defineProperty(e,"OKXTonProvider",{enumerable:!0,get:function(){return a.OKXTonProvider}});var s=ys();Object.defineProperty(e,"OKXTronProvider",{enumerable:!0,get:function(){return s.OKXTronProvider}}),n(ua(),e)})),vs=h((e=>{e.byteLength=function(e){var t=a(e),n=t[0],r=t[1];return 3*(n+r)/4-r},e.toByteArray=function(e){var t,n,o=a(e),s=o[0],f=o[1],c=new i(function(e,t,n){return 3*(t+n)/4-n}(0,s,f)),l=0,u=f>0?s-4:s;for(n=0;n<u;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;return 2===f&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,c[l++]=255&t),1===f&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t),c},e.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=16383,s=0,c=r-i;s<c;s+=a)o.push(f(e,s,s+a>c?c:s+a));return 1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")};var t,n=[],r=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(t=0,64;t<64;++t)n[t]=o[t],r[o.charCodeAt(t)]=t;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function s(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function f(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(s(r));return i.join("")}r[45]=62,r[95]=63})),ws=h((e=>{e.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,f=(1<<s)-1,c=f>>1,l=-7,u=n?i-1:0,d=n?-1:1,h=e[t+u];for(u+=d,o=h&(1<<-l)-1,h>>=-l,l+=s;l>0;o=256*o+e[t+u],u+=d,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+u],u+=d,l-=8);if(0===o)o=1-c;else{if(o===f)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=c}return(h?-1:1)*a*Math.pow(2,o-r)},e.write=function(e,t,n,r,i,o){var a,s,f,c=8*o-i-1,l=(1<<c)-1,u=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-a))<1&&(a--,f*=2),(t+=a+u>=1?d/f:d*Math.pow(2,1-u))*f>=2&&(a++,f/=2),a+u>=l?(s=0,a=l):a+u>=1?(s=(t*f-1)*Math.pow(2,i),a+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+h]=255&a,h+=p,a/=256,c-=8);e[n+h-p]|=128*g}})),_s=h((e=>{var t=vs(),n=ws(),r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=function(e){return+e!=e&&(e=0),s.alloc(+e)},e.INSPECT_MAX_BYTES=50;var o=2147483647;function a(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,s.prototype),t}function s(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}return f(e,t,n)}function f(e,t,n){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let n=0|p(e,t),r=a(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(J(e,Uint8Array)){let t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return u(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(J(e,ArrayBuffer)||e&&J(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(J(e,SharedArrayBuffer)||e&&J(e.buffer,SharedArrayBuffer)))return d(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');let r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return s.from(r,t,n);let i=function(e){if(s.isBuffer(e)){let t=0|h(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||V(e.length)?a(0):u(e);if("Buffer"===e.type&&Array.isArray(e.data))return u(e.data)}(e);if(i)return i;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return c(e),a(e<0?0:0|h(e))}function u(e){let t=e.length<0?0:0|h(e.length),n=a(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,s.prototype),r}function h(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function p(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||J(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return X(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(e).length;default:if(i)return r?-1:X(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return x(this,t,n);case"ascii":return k(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return O(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),V(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){let o,a=1,s=e.length,f=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,f/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let r=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===f)return r*a}else-1!==r&&(o-=o-r),r=-1}else for(n+f>s&&(n=s-f),o=n;o>=0;o--){let n=!0;for(let r=0;r<f;r++)if(c(e,o+r)!==c(t,r)){n=!1;break}if(n)return o}return-1}function v(e,t,n,r){n=Number(n)||0;let i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;let o,a=t.length;for(r>a/2&&(r=a/2),o=0;o<r;++o){let r=parseInt(t.substr(2*o,2),16);if(V(r))return o;e[n+o]=r}return o}function w(e,t,n,r){return z(X(t,e.length-n),e,n,r)}function _(e,t,n,r){return z(function(e){let t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function E(e,t,n,r){return z(F(t),e,n,r)}function C(e,t,n,r){return z(function(e,t){let n,r,i,o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function O(e,n,r){return 0===n&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function x(e,t,n){n=Math.min(e.length,n);let r=[],i=t;for(;i<n;){let t=e[i],o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=n){let n,r,s,f;switch(a){case 1:t<128&&(o=t);break;case 2:n=e[i+1],128===(192&n)&&(f=(31&t)<<6|63&n,f>127&&(o=f));break;case 3:n=e[i+1],r=e[i+2],128===(192&n)&&128===(192&r)&&(f=(15&t)<<12|(63&n)<<6|63&r,f>2047&&(f<55296||f>57343)&&(o=f));break;case 4:n=e[i+1],r=e[i+2],s=e[i+3],128===(192&n)&&128===(192&r)&&128===(192&s)&&(f=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s,f>65535&&f<1114112&&(o=f))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=a}return function(e){let t=e.length;if(t<=S)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=S));return n}(r)}e.kMaxLength=o,s.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch{return!1}}(),!s.TYPED_ARRAY_SUPPORT&&typeof i<"u"&&"function"==typeof i.error&&i.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(e,t,n){return f(e,t,n)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(e,t,n){return function(e,t,n){return c(e),e<=0?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},s.allocUnsafe=function(e){return l(e)},s.allocUnsafeSlow=function(e){return l(e)},s.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(J(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),J(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let r=s.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){let t=e[n];if(J(t,Uint8Array))i+t.length>r.length?(s.isBuffer(t)||(t=s.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!s.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},s.byteLength=p,s.prototype._isBuffer=!0,s.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)b(this,t,t+1);return this},s.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},s.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},s.prototype.toString=function(){let e=this.length;return 0===e?"":0===arguments.length?x(this,0,e):g.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){let t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(e,t,n,r,i){if(J(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),f=Math.min(o,a),c=this.slice(r,i),l=e.slice(t,n);for(let s=0;s<f;++s)if(c[s]!==l[s]){o=c[s],a=l[s];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}let i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":case"latin1":case"binary":return _(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function k(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function T(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function R(e,t,n){let r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let o=t;o<n;++o)i+=G[e[o]];return i}function A(e,t,n){let r=e.slice(t,n),i="";for(let o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function I(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,n,r,i,o){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r,i){W(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function D(e,t,n,r,i){W(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function B(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(e,t,r,i,o){return t=+t,r>>>=0,o||B(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function K(e,t,r,i,o){return t=+t,r>>>=0,o||B(e,0,r,8),n.write(e,t,r,i,52,8),r+8}s.prototype.slice=function(e,t){let n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);let r=this.subarray(e,t);return Object.setPrototypeOf(r,s.prototype),r},s.prototype.readUintLE=s.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return r},s.prototype.readUintBE=s.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},s.prototype.readUint8=s.prototype.readUInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),this[e]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readBigUInt64LE=Y((function(e){H(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&$(e,this.length-8);let r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),s.prototype.readBigUInt64BE=Y((function(e){H(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&$(e,this.length-8);let r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),s.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let r=t,i=1,o=this[e+--r];for(;r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},s.prototype.readInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||I(e,2,this.length);let n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){e>>>=0,t||I(e,2,this.length);let n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readBigInt64LE=Y((function(e){H(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&$(e,this.length-8);let r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),s.prototype.readBigInt64BE=Y((function(e){H(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&$(e,this.length-8);let r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),s.prototype.readFloatLE=function(e,t){return e>>>=0,t||I(e,4,this.length),n.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||I(e,4,this.length),n.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||I(e,8,this.length),n.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||I(e,8,this.length),n.read(this,e,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){N(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){N(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},s.prototype.writeUint8=s.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeBigUInt64LE=Y((function(e){return P(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),s.prototype.writeBigUInt64BE=Y((function(e){return D(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){let r=Math.pow(2,8*n-1);N(this,e,t,n,r-1,-r)}let i=0,o=1,a=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o|0)-a&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){let r=Math.pow(2,8*n-1);N(this,e,t,n,r-1,-r)}let i=n-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o|0)-a&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeBigInt64LE=Y((function(e){return P(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),s.prototype.writeBigInt64BE=Y((function(e){return D(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),s.prototype.writeFloatLE=function(e,t,n){return M(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return M(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return K(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return K(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(!s.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!r&&0!==r&&(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);let i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){let t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{let o=s.isBuffer(e)?e:s.from(e,r),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=o[i%a]}return this};var L={};function U(e,t,n){L[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function j(e){let t="",n=e.length,r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function W(e,t,n,r,i,o){if(e>n||e<t){let r,i="bigint"==typeof t?"n":"";throw r=o>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${8*(o+1)}${i}`:`>= -(2${i} ** ${8*(o+1)-1}${i}) and < 2 ** ${8*(o+1)-1}${i}`:`>= ${t}${i} and <= ${n}${i}`,new L.ERR_OUT_OF_RANGE("value",r,e)}!function(e,t,n){H(t,"offset"),(void 0===e[t]||void 0===e[t+n])&&$(t,e.length-(n+1))}(r,i,o)}function H(e,t){if("number"!=typeof e)throw new L.ERR_INVALID_ARG_TYPE(t,"number",e)}function $(e,t,n){throw Math.floor(e)!==e?(H(e,n),new L.ERR_OUT_OF_RANGE(n||"offset","an integer",e)):t<0?new L.ERR_BUFFER_OUT_OF_BOUNDS:new L.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}U("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),U("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),U("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=j(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=j(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r}),RangeError);var q=/[^+/0-9A-Za-z-_]/g;function X(e,t){t=t||1/0;let n,r=e.length,i=null,o=[];for(let a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function F(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function z(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function J(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function V(e){return e!==e}var G=function(){let e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){let r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function Y(e){return typeof BigInt>"u"?Z:e}function Z(){throw new Error("BigInt not supported")}})),Es=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AptosUtils=void 0;e.AptosUtils=class{static getTransaction(e){if("rawTransaction"in e){let t=e;if("entryFunction"in t.rawTransaction.payload){let e=t.rawTransaction.payload.entryFunction,n=e.type_args,r=new Array;n.forEach((e=>{r.push(e.toString())}));let i=new Array;this.getTypeArguments(e.args,i);let o={arguments:i,function:`${e.module_name.address.data?e.module_name.address.toString():e.module_name.address}::${e.module_name.name.identifier?e.module_name.name.identifier:e.module_name.name}::${e.function_name.identifier?e.function_name.identifier:e.function_name}`,type:"entry_function_payload",type_arguments:r};return this.getArguments(o)}}return e}static getTypeArguments(e,t){for(let n=0;n<e.length;n++){let r=e[n];if("values"in r&&null!=r.values&&r.values instanceof Array){let e=new Array;t.push(e),this.getTypeArguments(r.values,e)}else this.dealArrayElements(r,t)}}static dealArrayElements(e,t){if(!("value"in e)||null==e.value)return"data"in e&&null!=e.data&&(e.data,Uint8Array),t.push(e.toString());t.push(e.value.toString())}static getArguments(e){if("arguments"in e){let t=e.arguments;if(Array.isArray(t)){let n=new Array;t.forEach((e=>{if(e instanceof Uint8Array){let t=new Array;e.forEach((e=>{t.push(e)})),n.push(t)}else n.push(e)})),e=Object.assign(Object.assign({},e),{arguments:n})}}return e}}})),Cs=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectorState=e.CONNECT_JSONRPC_VER=e.OKXCONNECTOR_MESSAGE_TTL=e.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE=e.OKXCONNECTOR_WS_URL_LIST=e.OKXCONNECTOR_WS_URL_IDX_KEY=e.OKXCONNECTOR_WS_URL_3=e.OKXCONNECTOR_WS_URL_2=e.OKXCONNECTOR_WS_URL_1=e.EVENT_EMITTER_MAX_LISTENERS=void 0,e.EVENT_EMITTER_MAX_LISTENERS=10,e.OKXCONNECTOR_WS_URL_1="wss://wsdexpri.okx.com/ws/v1/wallet-connect-relay",e.OKXCONNECTOR_WS_URL_2="wss://wsdexpri.okx.ac/ws/v1/wallet-connect-relay",e.OKXCONNECTOR_WS_URL_3="wss://wsdexpri.coinall.ltd/ws/v1/wallet-connect-relay",e.OKXCONNECTOR_WS_URL_IDX_KEY="wuik",e.OKXCONNECTOR_WS_URL_LIST=[e.OKXCONNECTOR_WS_URL_1,e.OKXCONNECTOR_WS_URL_2,e.OKXCONNECTOR_WS_URL_3],e.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE={TIME_OUT:3990,CANCELED:3991,FINISHED:3992},e.OKXCONNECTOR_MESSAGE_TTL=3e5,e.CONNECT_JSONRPC_VER="2.0",e.ConnectorState={InitState:0,Connecting:1,Connected:2,Disconnected:3,OnError:4}})),Os=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OKXCONNECTOR_STORAGE_CIPHER_METHOD=e.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV=e.OKXCONNECTOR_STORAGER_CRYPTO_SALT=e.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD=e.OKXCONNECTOR_TON_KEY=e.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE=e.OKXCONNECTOR_TOKEN_CACHE=e.OKXCONNECTOR_JWT_KEY=e.OKXCONNECTOR_SESSION_PREFIX_KEY=e.OKXCONNECTOR_CRYPTO_KEY=e.OKXCONNECTOR_CACHE_KEY_DAPP=e.OKXCONNECTOR_CACHE_KEY=void 0,e.OKXCONNECTOR_CACHE_KEY="ck",e.OKXCONNECTOR_CACHE_KEY_DAPP="ck_dapp",e.OKXCONNECTOR_CRYPTO_KEY="cck_k",e.OKXCONNECTOR_SESSION_PREFIX_KEY="cspk_",e.OKXCONNECTOR_JWT_KEY="cjk_k",e.OKXCONNECTOR_TOKEN_CACHE="ct",e.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE="csp",e.OKXCONNECTOR_TON_KEY="OKXStorage_ctc",e.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD="scp",e.OKXCONNECTOR_STORAGER_CRYPTO_SALT="scs",e.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV="scpc",e.OKXCONNECTOR_STORAGE_CIPHER_METHOD="aes-256-cbc"})),xs=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_ERROR=e.STANDARD_ERROR_MAP=e.SERVER_ERROR_CODE_RANGE=e.RESERVED_ERROR_CODES=e.SERVER_ERROR=e.INTERNAL_ERROR=e.INVALID_PARAMS=e.METHOD_NOT_FOUND=e.INVALID_REQUEST=e.PARSE_ERROR=e.OKX_CONNECT_ERROR_CODES=e.OKXConnectError=void 0;var t,n,r=class e extends Error{constructor(n,r){null==r&&(r=function(e){return e==t.UNKNOWN_ERROR?"unknown error":e==t.BAD_REQUEST_ERROR?"bad request error":e==t.ALREADY_CONNECTED_ERROR?"already connected error":e==t.NOT_CONNECTED_ERROR?"not connected error":e==t.UNKNOWN_APP_ERROR?"unknown app error":e==t.USER_REJECTS_ERROR?"user rejects error":e==t.METHOD_NOT_SUPPORTED?"method not supported":e==t.CONNECTION_ERROR?"connect error":"unknown error"}(n)),super(r),this.code=n,this.message=`${e.prefix} ${r?"\n"+r:""}`,Object.setPrototypeOf(this,e.prototype)}toJSON(){return{message:this.message,code:this.code}}};e.OKXConnectError=r,r.prefix="[OKX_CONNECT_SDK_ERROR]",(n=t||(e.OKX_CONNECT_ERROR_CODES=t={}))[n.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",n[n.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",n[n.ALREADY_CONNECTED_ERROR=11]="ALREADY_CONNECTED_ERROR",n[n.NOT_CONNECTED_ERROR=12]="NOT_CONNECTED_ERROR",n[n.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",n[n.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",n[n.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",n[n.CHAIN_NOT_SUPPORTED=500]="CHAIN_NOT_SUPPORTED",n[n.WALLET_NOT_SUPPORTED=600]="WALLET_NOT_SUPPORTED",n[n.CONNECTION_ERROR=700]="CONNECTION_ERROR",e.PARSE_ERROR="PARSE_ERROR",e.INVALID_REQUEST="INVALID_REQUEST",e.METHOD_NOT_FOUND="METHOD_NOT_FOUND",e.INVALID_PARAMS="INVALID_PARAMS",e.INTERNAL_ERROR="INTERNAL_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.RESERVED_ERROR_CODES=[-32700,-32600,-32601,-32602,-32603],e.SERVER_ERROR_CODE_RANGE=[-32e3,-32099],e.STANDARD_ERROR_MAP={[e.PARSE_ERROR]:{code:-32700,message:"Parse error"},[e.INVALID_REQUEST]:{code:-32600,message:"Invalid Request"},[e.METHOD_NOT_FOUND]:{code:-32601,message:"Method not found"},[e.INVALID_PARAMS]:{code:-32602,message:"Invalid params"},[e.INTERNAL_ERROR]:{code:-32603,message:"Internal error"},[e.SERVER_ERROR]:{code:-32e3,message:"Server error"}},e.DEFAULT_ERROR=e.SERVER_ERROR})),Ss=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OKX_CONNECT_ERROR_CODES=e.OKXConnectError=void 0;var t=xs();Object.defineProperty(e,"OKXConnectError",{enumerable:!0,get:function(){return t.OKXConnectError}}),Object.defineProperty(e,"OKX_CONNECT_ERROR_CODES",{enumerable:!0,get:function(){return t.OKX_CONNECT_ERROR_CODES}})})),ks=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NameSpaceKeyCosmos=e.NameSpaceKeyAptos=e.NameSpaceKeyBtc=e.NameSpaceKeySui=e.NameSpaceKeyTON=e.NameSpaceKeySOL=e.NameSpaceKeyEip155=void 0,e.NameSpaceKeyEip155="eip155",e.NameSpaceKeySOL="solana",e.NameSpaceKeyTON="ton",e.NameSpaceKeySui="sui",e.NameSpaceKeyBtc="btc",e.NameSpaceKeyAptos="aptos",e.NameSpaceKeyCosmos="cosmos"})),Ts=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tgwalletName=e.tonConnectSdkVersion=e.standardDeeplink=e.downloadUrl=e.standardUniversalLink=e.okxDeeplink=void 0,e.okxDeeplink="okx://web3",e.standardUniversalLink="https://www.okx.com/download",e.downloadUrl="https://www.okx.com/download",e.standardDeeplink=`${e.okxDeeplink}/wallet/connect`,e.tonConnectSdkVersion="1",e.tgwalletName="OKX_WALLET_BOT"})),Rs=h((e=>{var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};function n(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function r(e){return"result"in e}function i(e){return"error"in e}Object.defineProperty(e,"__esModule",{value:!0}),e.isJsonRpcPayload=n,e.isJsonRpcRequest=function(e){return n(e)&&"method"in e},e.isJsonRpcResponse=function(e){return n(e)&&(r(e)||i(e))},e.isJsonRpcResult=r,e.isJsonRpcError=i,e.payloadId=l,e.getBigIntRpcId=function(){let e=BigInt(Date.now())*BigInt(1e6),t=BigInt(c.getNextValue());return e+t},e.formatJsonRpcRequest=function(e,t,n){return{id:n||l(),jsonrpc:"2.0",method:e,params:t}},e.formatJsonRpcResult=function(e,t){return{id:e,jsonrpc:"2.0",result:t}},e.formatJsonRpcError=function(e,t,n){return{id:e,jsonrpc:"2.0",error:p(t,n)}},e.isReservedErrorCode=u,e.getError=d,e.getErrorByCode=h,e.formatErrorMessage=p,e.isHttpUrl=function(e){return g(e,"^https?:")},e.isWsUrl=function(e){return g(e,"^wss?:")},e.parseConnectionError=function(e,t,n){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${t}`):e};var o=xs(),a=t(O()),s=class{constructor(e){this.i=1;8===e?new Uint8Array(1):16===e?new Uint16Array(1):new Uint32Array(1);this.initialValue=a.default.randomBytes(e/8)[0]}getNextValue(){return this.initialValue+this.i++}},f=new s(8),c=new s(16);function l(){return 1e3*Date.now()+f.getNextValue()}function u(e){return o.RESERVED_ERROR_CODES.includes(e)}function d(e){return Object.keys(o.STANDARD_ERROR_MAP).includes(e)?o.STANDARD_ERROR_MAP[e]:o.STANDARD_ERROR_MAP[o.DEFAULT_ERROR]}function h(e){return Object.values(o.STANDARD_ERROR_MAP).find((t=>t.code===e))||o.STANDARD_ERROR_MAP[o.DEFAULT_ERROR]}function p(e,t){return typeof e>"u"?d(o.INTERNAL_ERROR):("string"==typeof e&&(e=Object.assign(Object.assign({},d(o.SERVER_ERROR)),{message:e})),typeof t<"u"&&(e.data=t),u(e.code)&&(e=h(e.code)),e)}function g(e,t){let n=function(e){let t=e.match(new RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}(e);return!(typeof n>"u")&&new RegExp(t).test(n)}})),As=h((e=>{var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.IEngine=e.ISignClient=e.ISignClientEvents=e.IEngineEvents=void 0;var n=t(dn()),r=class extends n.default{constructor(){super()}};e.IEngineEvents=r;var i=class extends n.default{constructor(){super()}};e.ISignClientEvents=i;e.ISignClient=class{constructor(e){this.data=e}};e.IEngine=class{constructor(e){this.client=e}}})),Is=h((e=>{var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TONCHAIN=void 0,(t||(e.TONCHAIN=t={})).MAINNET="-239"})),Ns=h((e=>{var t,n;Object.defineProperty(e,"__esModule",{value:!0}),e.CONNECT_ITEM_ERROR_CODES=void 0,(n=t||(e.CONNECT_ITEM_ERROR_CODES=t={}))[n.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",n[n.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})),Ps=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CONNECT_ITEM_ERROR_CODES=e.TONCHAIN=void 0;var t=Is();Object.defineProperty(e,"TONCHAIN",{enumerable:!0,get:function(){return t.TONCHAIN}});var n=Ns();Object.defineProperty(e,"CONNECT_ITEM_ERROR_CODES",{enumerable:!0,get:function(){return n.CONNECT_ITEM_ERROR_CODES}})})),Ds=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.creatOKXWalletInfo=function(){return{appName:"okxAppWallet",name:"OKX Wallet",imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",aboutUrl:t.downloadUrl,universalLink:t.standardUniversalLink,deepLink:t.standardDeeplink,platforms:["ios","android"]}},e.creatOKXMiniAppWalletInfo=function(){return{appName:"okxMiniApp",name:"OKX Mini Wallet",imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",aboutUrl:t.downloadUrl,universalLink:`https://t.me/${t.tgwalletName}/start`,deepLink:"",platforms:["ios","android","macos","windows"]}};var t=Ts()})),Bs=h((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.creatOKXMiniAppWalletInfo=e.creatOKXWalletInfo=e.ISignClientEvents=e.IEngine=e.IEngineEvents=e.ISignClient=e.getBigIntRpcId=e.formatJsonRpcRequest=e.isJsonRpcError=e.isJsonRpcResponse=e.parseConnectionError=e.isHttpUrl=e.formatJsonRpcError=void 0;var r=Rs();Object.defineProperty(e,"formatJsonRpcError",{enumerable:!0,get:function(){return r.formatJsonRpcError}}),Object.defineProperty(e,"isHttpUrl",{enumerable:!0,get:function(){return r.isHttpUrl}}),Object.defineProperty(e,"parseConnectionError",{enumerable:!0,get:function(){return r.parseConnectionError}}),Object.defineProperty(e,"isJsonRpcResponse",{enumerable:!0,get:function(){return r.isJsonRpcResponse}}),Object.defineProperty(e,"isJsonRpcError",{enumerable:!0,get:function(){return r.isJsonRpcError}}),Object.defineProperty(e,"formatJsonRpcRequest",{enumerable:!0,get:function(){return r.formatJsonRpcRequest}}),Object.defineProperty(e,"getBigIntRpcId",{enumerable:!0,get:function(){return r.getBigIntRpcId}});var i=As();Object.defineProperty(e,"ISignClient",{enumerable:!0,get:function(){return i.ISignClient}}),Object.defineProperty(e,"IEngineEvents",{enumerable:!0,get:function(){return i.IEngineEvents}}),Object.defineProperty(e,"IEngine",{enumerable:!0,get:function(){return i.IEngine}}),Object.defineProperty(e,"ISignClientEvents",{enumerable:!0,get:function(){return i.ISignClientEvents}}),n(Ps(),e);var o=Ds();Object.defineProperty(e,"creatOKXWalletInfo",{enumerable:!0,get:function(){return o.creatOKXWalletInfo}}),Object.defineProperty(e,"creatOKXMiniAppWalletInfo",{enumerable:!0,get:function(){return o.creatOKXMiniAppWalletInfo}})})),Ms=h((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.downloadUrl=e.okxDeeplink=e.tonConnectSdkVersion=e.standardDeeplink=e.standardUniversalLink=e.NameSpaceKeyCosmos=e.NameSpaceKeyAptos=e.NameSpaceKeyBtc=e.NameSpaceKeySui=e.NameSpaceKeyTON=e.NameSpaceKeySOL=e.NameSpaceKeyEip155=void 0,n(Ss(),e);var r=ks();Object.defineProperty(e,"NameSpaceKeyEip155",{enumerable:!0,get:function(){return r.NameSpaceKeyEip155}}),Object.defineProperty(e,"NameSpaceKeySOL",{enumerable:!0,get:function(){return r.NameSpaceKeySOL}}),Object.defineProperty(e,"NameSpaceKeyTON",{enumerable:!0,get:function(){return r.NameSpaceKeyTON}}),Object.defineProperty(e,"NameSpaceKeySui",{enumerable:!0,get:function(){return r.NameSpaceKeySui}}),Object.defineProperty(e,"NameSpaceKeyBtc",{enumerable:!0,get:function(){return r.NameSpaceKeyBtc}}),Object.defineProperty(e,"NameSpaceKeyAptos",{enumerable:!0,get:function(){return r.NameSpaceKeyAptos}}),Object.defineProperty(e,"NameSpaceKeyCosmos",{enumerable:!0,get:function(){return r.NameSpaceKeyCosmos}});var i=Ts();Object.defineProperty(e,"standardUniversalLink",{enumerable:!0,get:function(){return i.standardUniversalLink}}),Object.defineProperty(e,"standardDeeplink",{enumerable:!0,get:function(){return i.standardDeeplink}}),Object.defineProperty(e,"tonConnectSdkVersion",{enumerable:!0,get:function(){return i.tonConnectSdkVersion}}),Object.defineProperty(e,"okxDeeplink",{enumerable:!0,get:function(){return i.okxDeeplink}}),Object.defineProperty(e,"downloadUrl",{enumerable:!0,get:function(){return i.downloadUrl}}),n(Bs(),e)})),Ks=h((e=>{var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.openLink=i,e.openLinkBlank=function(e){i(e,"_blank")},e.openDeeplinkWithFallback=function(e,t){let n=setTimeout((()=>{s("safari")||a("android")&&s("firefox")||t()}),500);window.addEventListener("blur",(()=>clearTimeout(n)),{once:!0}),i(e,"_self")},e.isMobileUserAgent=function(){let e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.slice(0,4)))&&(e=!0),e;var t},e.getUserAgent=o,e.isOS=a,e.isBrowser=s;var n=t(wn()),r=qs();function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_self";(0,r.logDebug)("openLink",e,t),window.open(e,t,"noopener noreferrer")}function o(){var e,t,r;let i,o=(new n.default).getResult(),a=null===(e=o.os.name)||void 0===e?void 0:e.toLowerCase();switch(!0){case"ipad"===(null===(t=o.device.model)||void 0===t?void 0:t.toLowerCase()):i="ipad";break;case"ios"===a:i="ios";break;case"android"===a:i="android";break;case"mac os"===a:i="macos";break;case"linux"===a:i="linux";break;case a?.includes("windows"):i="windows"}let s,f=null===(r=o.browser.name)||void 0===r?void 0:r.toLowerCase();switch(!0){case"chrome"===f:s="chrome";break;case"firefox"===f:s="firefox";break;case f?.includes("safari"):s="safari";break;case f?.includes("opera"):s="opera"}return{os:i,browser:s}}function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(o().os)}function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(o().browser)}})),Ls=h((e=>{var t,n,r,i,o,a,s;Object.defineProperty(e,"__esModule",{value:!0}),e.isTmaPlatform=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(h)},e.isInTMA=g,e.isInTelegramBrowser=function(){var e;let t=!(null===(e=(0,f.getWindow)())||void 0===e||!e.TelegramWebview);return(g()||t)&&"unknown"===h},e.sendExpand=function(){y("web_app_expand",{})},e.sendOpenTelegramLink=function(e,t){let n=new URL(e);if("http:"!==n.protocol&&"https:"!==n.protocol){if(t)return t();throw new l.OKXConnectError(l.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Url protocol is not supported: ${n}`)}if("t.me"!==n.hostname){if(t)return t();throw new l.OKXConnectError(l.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Url host is not supported: ${n}`)}let r=n.pathname+n.search;b()||function(e){return v(p,e)>=0}("6.1")?y("web_app_open_tg_link",{path_full:r}):(0,u.openLinkBlank)("https://t.me"+r)},e.versionCompare=v;var f=Us(),c=qs(),l=Ms(),u=Ks(),d={};try{d=function(e){e=e.replace(/^#/,"");let t={};if(!e.length)return t;if(e.indexOf("=")<0&&e.indexOf("?")<0)return t._path=m(e),t;let n=e.indexOf("?");if(n>=0){let r=e.substr(0,n);t._path=m(r),e=e.substr(n+1)}let r=function(e){let t={};if(!e.length)return t;let n,r,i,o,a=e.split("&");for(n=0;n<a.length;n++)r=a[n].split("="),i=m(r[0]),o=null==r[1]?null:m(r[1]),t[i]=o;return t}(e);for(let i in r)t[i]=r[i];return t}(location.hash.toString())}catch{}var h="unknown";if(d?.tgWebAppPlatform&&(h=null!==(t=d.tgWebAppPlatform)&&void 0!==t?t:"unknown"),"unknown"===h){let e=(0,f.getWindow)();h=null!==(i=null===(r=null===(n=e?.Telegram)||void 0===n?void 0:n.WebApp)||void 0===r?void 0:r.platform)&&void 0!==i?i:"unknown"}var p="6.0";if(d?.tgWebAppVersion&&(p=d.tgWebAppVersion),!p){let e=(0,f.getWindow)();p=null!==(s=null===(a=null===(o=e?.Telegram)||void 0===o?void 0:o.WebApp)||void 0===a?void 0:a.version)&&void 0!==s?s:"6.0"}function g(){var e;return"unknown"!==h||!(null===(e=(0,f.getWindow)())||void 0===e||!e.TelegramWebviewProxy)}function b(){try{let e=(0,f.getWindow)();return!!e&&(null!=e.parent&&e!==e.parent)}catch{return!1}}function y(e,t){try{let n=(0,f.getWindow)();if(!n)throw new l.OKXConnectError(l.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Can't post event to parent window: window is not defined");if(void 0!==n.TelegramWebviewProxy)(0,c.logDebug)("postEvent",e,t),n.TelegramWebviewProxy.postEvent(e,JSON.stringify(t));else if(n.external&&"notify"in n.external)(0,c.logDebug)("postEvent",e,t),n.external.notify(JSON.stringify({eventType:e,eventData:t}));else{if(!b())throw new l.OKXConnectError(l.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Can't post event to TMA");{let r="*",i=JSON.stringify({eventType:e,eventData:t});(0,c.logDebug)("postEvent",e,t),n.parent.postMessage(i,r)}}}catch(n){(0,c.logError)(`Can't post event to parent window: ${n}`)}}function m(e){try{return e=e.replace(/\+/g,"%20"),decodeURIComponent(e)}catch{return e}}function v(e,t){"string"!=typeof e&&(e=""),"string"!=typeof t&&(t="");let n,r,i,o,a=e.replace(/^\s+|\s+$/g,"").split("."),s=t.replace(/^\s+|\s+$/g,"").split(".");for(n=Math.max(a.length,s.length),r=0;r<n;r++)if(i=parseInt(a[r])||0,o=parseInt(s[r])||0,i!==o)return i>o?1:-1;return 0}})),Us=h((e=>{var t,n,r,o;Object.defineProperty(e,"__esModule",{value:!0}),e.removeUrlLastSlash=u,e.addPathToUrl=function(e,t){return u(e)+"/"+t},e.getUniversalLink=d,e.openOKXDeeplink=function(e){var t;let n=d(e),r=!(null===(t=h())||void 0===t||!t.TelegramWebviewProxy);if(i.log("openOKXDeeplink fullUrl:",n),(0,c.isIos)())r?window.open(n,"_blank"):(i.log("windowOpen[before]: ",Date.now()),window?.okxLogDebug?window.open(n,"_blank"):window.open(n,"_self"),i.log("windowOpen[after]: ",Date.now()));else{let t=null;r?t=window.open(e,"_blank"):window.location.href=e}},e.openOKXDeeplinkWithFallback=function(e){var t;let n=d(e),r=!(null===(t=h())||void 0===t||!t.TelegramWebviewProxy);i.log("openOKXDeeplinkWithFallback fullUrl:",n);let o=!1,s=a.standardUniversalLink;if((0,c.isIos)())r?window.open(n,"_blank"):(i.log("windowOpen[before]: ",Date.now()),window?.okxLogDebug?window.open(n,"_blank"):window.open(n,"_self"),i.log("windowOpen[after]: ",Date.now()));else{let t=null;r?t=window.open(e,"_blank"):window.location.href=e,setTimeout((()=>{o||(t?t.open(s,"_self"):window.open(s,"_blank"))}),3e3),window.addEventListener("blur",(()=>{o=!0}),{once:!0}),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&(o=!0)}))}},e.getWindow=h,e.isTelegramUrl=function(e){if(!e)return!1;let t=new URL(e);return"tg:"===t.protocol||"t.me"===t.hostname},e.encodeTelegramUrlParameters=function(e){let t=e;return t=t.replace(/\./g,"%2E"),t=t.replace(/-/g,"%2D"),t=t.replace(/_/g,"%5F"),t=t.replace(/&/g,"-"),t=t.replace(/=/g,"__"),t=t.replace(/%/g,"--"),t},e.encodeConnectParams=function(e){let t=JSON.stringify(e);(0,s.logDebug)("url encodeConnectParams connectRequestStr ",t);let n=(new TextEncoder).encode(t);return btoa(String.fromCharCode(...n))},e.encodeTWAConnectURLParams=function(e){let t=JSON.stringify({topic:e.topic,clientId:e.clientId});(0,s.logDebug)("url encodeConnectParams connectRequestStr",t);let n=(new TextEncoder).encode(t);return btoa(String.fromCharCode(...n))},e.getAppWalletDeepLink=function(e){return`${a.standardDeeplink}?param=${e}`},e.getAppWalletShortDeepLink=function(e,t){return`${a.standardDeeplink}?topic=${e}${(0,c.getLastSixMd5Hash)(t)}`},e.getTelegramWalletTWAUrl=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={okxconnect:"",redirect:"",extraparams:""};e&&(r.okxconnect=e),t&&(r.redirect=t);let i=JSON.stringify(r),o=(new TextEncoder).encode(i),a=btoa(String.fromCharCode(...o)),l=(0,c.toSafeBase64FromBase64)(a);return(0,s.logDebug)("[TWA] open link:",r,a),e||t?n?`http://localhost:5173?tgWebAppStartParam=${l}`:`https://t.me/${f.tgwalletName}/start?startapp=${l}`:n?"http://localhost:5173":`https://t.me/${f.tgwalletName}/start`},e.openOKXTMAWalletlinkWithFallback=function(e){var t,n,r,i,o;(0,s.logDebug)("[TWA] open link:",e,"isInTMA ==> ",y()),y()?null!==(n=null===(t=h())||void 0===t?void 0:t.Telegram)&&void 0!==n&&n.WebApp?null===(o=null===(i=null===(r=h())||void 0===r?void 0:r.Telegram)||void 0===i?void 0:i.WebApp)||void 0===o||o.openTelegramLink(e):(0,l.sendOpenTelegramLink)(e):window.open(e,"_blank")},e.isInTMA=y,e.isInTelegramBrowser=function(){var e;let t=!(null===(e=h())||void 0===e||!e.TelegramWebview);return(y()||t)&&"unknown"===b};var a=Ms(),s=qs(),f=Ts(),c=zs(),l=Ls();function u(e){return"/"===e.slice(-1)?e.slice(0,-1):e}function d(e){let t=encodeURIComponent(e);return`${a.standardUniversalLink}?deeplink=${t}`}function h(){if(typeof window<"u")return window}function p(e){try{return e=e.replace(/\+/g,"%20"),decodeURIComponent(e)}catch{return e}}var g={};try{g=function(e){let t={};if(!(e=e.replace(/^#/,"")).length)return t;if(e.indexOf("=")<0&&e.indexOf("?")<0)return t._path=p(e),t;let n=e.indexOf("?");if(n>=0){let r=e.substr(0,n);t._path=p(r),e=e.substr(n+1)}let r=function(e){let t={};if(!e.length)return t;let n,r,i,o,a=e.split("&");for(n=0;n<a.length;n++)r=a[n].split("="),i=p(r[0]),o=null==r[1]?null:p(r[1]),t[i]=o;return t}(e);for(let i in r)t[i]=r[i];return t}(location.hash.toString())}catch{}var b="unknown";if(g?.tgWebAppPlatform&&(b=null!==(t=g.tgWebAppPlatform)&&void 0!==t?t:"unknown"),"unknown"===b){let e=h();b=null!==(o=null===(r=null===(n=e?.Telegram)||void 0===n?void 0:n.WebApp)||void 0===r?void 0:r.platform)&&void 0!==o?o:"unknown"}function y(){var e;return"unknown"!==b||!(null===(e=h())||void 0===e||!e.TelegramWebviewProxy)}})),js=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};function n(e,n){return t(this,void 0,void 0,(function*(){return new Promise(((t,r)=>{var i,o;if(null!==(i=n?.signal)&&void 0!==i&&i.aborted)return void r(new Error("Delay aborted"));let a=setTimeout((()=>t()),e);null===(o=n?.signal)||void 0===o||o.addEventListener("abort",(()=>{clearTimeout(a),r(new Error("Delay aborted"))}))}))}))}Object.defineProperty(e,"__esModule",{value:!0}),e.callForSuccess=function(e,r){return t(this,void 0,void 0,(function*(){var t,i;let o=null!==(t=r?.attempts)&&void 0!==t?t:3,a=null!==(i=r?.delayMs)&&void 0!==i?i:800;if("function"!=typeof e)throw new Error("Expected a function, got "+typeof e);let s,f=0;for(;f<o;)try{return yield e()}catch(c){s=c,f++,f<o&&(yield n(a))}throw s}))},e.delay=n})),Ws=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Report_WalletType_Key=e.Report_Proceed_QRCode_Click=e.Report_ChooseType_Download_Click=e.Report_ChooseType_ConnectWallet_Click=e.Report_Proceed_Retry_Click=e.Report_ChooseType_ConnectWallet_View=e.Report_Loading_ConnectWallet_View=e.Report_Proceed_QRCode_View=e.Report_Proceed_Proceed_View=void 0,e.Report_Proceed_Proceed_View="OKXConnectSDK_Proceed_Proceed_View",e.Report_Proceed_QRCode_View="OKXConnectSDK_Proceed_QRCode_View",e.Report_Loading_ConnectWallet_View="OKXConnectSDK_Loading_ConnectWallet_View",e.Report_ChooseType_ConnectWallet_View="OKXConnectSDK_ChooseType_ConnectWallet_View",e.Report_Proceed_Retry_Click="OKXConnectSDK_Proceed_Retry_Click",e.Report_ChooseType_ConnectWallet_Click="OKXConnectSDK_ChooseType_ConnectWallet_Click",e.Report_ChooseType_Download_Click="OKXConnectSDK_ChooseType_Download_Click",e.Report_Proceed_QRCode_Click="OKXConnectSDK_Proceed_QRCode_Click",e.Report_WalletType_Key="wallet_type"})),Hs=h((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.isBrowser=e.isOS=e.isMobileUserAgent=e.openDeeplinkWithFallback=e.openLinkBlank=e.openLink=e.toSafeBase64FromBase64=e.isValidObject=e.isIos=e.base64decode=e.base64encode=e.splitToUint8Arrays=e.concatUint8Arrays=e.toHexString=e.hexToByteArray=e.getAppWalletShortDeepLink=e.encodeTWAConnectURLParams=e.encodeConnectParams=e.openOKXTMAWalletlinkWithFallback=e.getTelegramWalletTWAUrl=e.getAppWalletDeepLink=e.encodeTelegramUrlParameters=e.isTelegramUrl=e.openOKXDeeplinkWithFallback=e.openOKXDeeplink=e.getUniversalLink=e.safeJsonStringify=e.safeJsonParse=e.getDefaultReporter=e.reportEvent=e.reportLog=e.logWarning=e.logError=e.logDebug=e.callForSuccess=void 0;var r=js();Object.defineProperty(e,"callForSuccess",{enumerable:!0,get:function(){return r.callForSuccess}});var i=qs();Object.defineProperty(e,"logDebug",{enumerable:!0,get:function(){return i.logDebug}}),Object.defineProperty(e,"logError",{enumerable:!0,get:function(){return i.logError}}),Object.defineProperty(e,"logWarning",{enumerable:!0,get:function(){return i.logWarning}}),Object.defineProperty(e,"reportLog",{enumerable:!0,get:function(){return i.reportLog}}),Object.defineProperty(e,"reportEvent",{enumerable:!0,get:function(){return i.reportEvent}}),Object.defineProperty(e,"getDefaultReporter",{enumerable:!0,get:function(){return i.getDefaultReporter}}),n(Ws(),e),n($s(),e);var o=Xs();Object.defineProperty(e,"safeJsonParse",{enumerable:!0,get:function(){return o.safeJsonParse}}),Object.defineProperty(e,"safeJsonStringify",{enumerable:!0,get:function(){return o.safeJsonStringify}});var a=Us();Object.defineProperty(e,"getUniversalLink",{enumerable:!0,get:function(){return a.getUniversalLink}}),Object.defineProperty(e,"openOKXDeeplink",{enumerable:!0,get:function(){return a.openOKXDeeplink}}),Object.defineProperty(e,"openOKXDeeplinkWithFallback",{enumerable:!0,get:function(){return a.openOKXDeeplinkWithFallback}}),Object.defineProperty(e,"isTelegramUrl",{enumerable:!0,get:function(){return a.isTelegramUrl}}),Object.defineProperty(e,"encodeTelegramUrlParameters",{enumerable:!0,get:function(){return a.encodeTelegramUrlParameters}}),Object.defineProperty(e,"getAppWalletDeepLink",{enumerable:!0,get:function(){return a.getAppWalletDeepLink}}),Object.defineProperty(e,"getTelegramWalletTWAUrl",{enumerable:!0,get:function(){return a.getTelegramWalletTWAUrl}}),Object.defineProperty(e,"openOKXTMAWalletlinkWithFallback",{enumerable:!0,get:function(){return a.openOKXTMAWalletlinkWithFallback}}),Object.defineProperty(e,"encodeConnectParams",{enumerable:!0,get:function(){return a.encodeConnectParams}}),Object.defineProperty(e,"encodeTWAConnectURLParams",{enumerable:!0,get:function(){return a.encodeTWAConnectURLParams}}),Object.defineProperty(e,"getAppWalletShortDeepLink",{enumerable:!0,get:function(){return a.getAppWalletShortDeepLink}});var s=zs();Object.defineProperty(e,"hexToByteArray",{enumerable:!0,get:function(){return s.hexToByteArray}}),Object.defineProperty(e,"toHexString",{enumerable:!0,get:function(){return s.toHexString}}),Object.defineProperty(e,"concatUint8Arrays",{enumerable:!0,get:function(){return s.concatUint8Arrays}}),Object.defineProperty(e,"splitToUint8Arrays",{enumerable:!0,get:function(){return s.splitToUint8Arrays}}),Object.defineProperty(e,"base64encode",{enumerable:!0,get:function(){return s.base64encode}}),Object.defineProperty(e,"base64decode",{enumerable:!0,get:function(){return s.base64decode}}),Object.defineProperty(e,"isIos",{enumerable:!0,get:function(){return s.isIos}}),Object.defineProperty(e,"isValidObject",{enumerable:!0,get:function(){return s.isValidObject}}),Object.defineProperty(e,"toSafeBase64FromBase64",{enumerable:!0,get:function(){return s.toSafeBase64FromBase64}});var f=Ks();Object.defineProperty(e,"openLink",{enumerable:!0,get:function(){return f.openLink}}),Object.defineProperty(e,"openLinkBlank",{enumerable:!0,get:function(){return f.openLinkBlank}}),Object.defineProperty(e,"openDeeplinkWithFallback",{enumerable:!0,get:function(){return f.openDeeplinkWithFallback}}),Object.defineProperty(e,"isMobileUserAgent",{enumerable:!0,get:function(){return f.isMobileUserAgent}}),Object.defineProperty(e,"isOS",{enumerable:!0,get:function(){return f.isOS}}),Object.defineProperty(e,"isBrowser",{enumerable:!0,get:function(){return f.isBrowser}})})),$s=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))},n=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.OKXReporter=e.OKXReportSide=e.OKXReportType=e.versionStr=void 0;var r=n(an()),o=qs(),a=Us(),s=Hs(),f=n(kn()),c=n(O());e.versionStr="1.5.2";var l=["https://www.okx.com/dappstat/wallet-connect","https://www.okx.ac/dappstat/wallet-connect"],u="OKX_RP_UUID_CK",d={headers:{Accept:"*/*","Content-Type":"text/plain"},method:"POST"};e.OKXReportType={PAGE_IN:"page_in",PAGE_OUT:"page_out",CLICK:"click",LOG:"log"},e.OKXReportSide={DAPP:"dapp",WALLET:"wallet"};e.OKXReporter=class{constructor(){this.currentSide=e.OKXReportSide.DAPP,this.currentVersion=e.versionStr,this.storage=f.default.createInstance({name:"OKXReporter"}),this.recordList=new Array,this.currentUUID=(0,s.toHexString)(c.default.randomBytes(16))}configVersionAndSide(e,t,n){this.currentVersion=e,this.currentSide=t,this.appName=n}get recordCacheKey(){return"OKX_RP_CK@"+this.appName}get reportPlatform(){return(0,s.isMobileUserAgent)()?(0,s.isIos)()?"iOS":"android":"pc"}beginReport(){return t(this,void 0,void 0,(function*(){this.startErrorCatching();let e=yield this.storage.getItem(this.recordCacheKey),t=yield this.storage.getItem(u);t?this.currentUUID=t:this.storage.setItem(u,this.currentUUID),e&&(this.recordList=e,(0,o.logDebug)("resume records from cache length: ",this.recordList.length),yield this.sendCachedRecords())}))}startErrorCatching(){(0,a.getWindow)()&&(0,o.logDebug)("begin capture console error")}cachedErrors(){return this.recordList}sendRecord(e){return t(this,void 0,void 0,(function*(){return new Promise(((n,a)=>t(this,void 0,void 0,(function*(){try{let s=JSON.stringify(e);(0,o.logDebug)("[REPORT] record: ",s);let f=yield function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return t(void 0,[e,...o],void 0,(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return function*(){for(let a of e)try{let e=new AbortController,i=e.signal,o=(0,r.default)(a,Object.assign(Object.assign({},t),{signal:i})),s=new Promise(((t,r)=>setTimeout((()=>{e.abort(),r(new Error("Request timed out"))}),n))),f=yield Promise.race([o,s]);if(f.ok)return f}catch(o){i.error(`Fetch error for ${a}:`,o)}throw new Error("All fetch attempts failed.")}()}))}(l,Object.assign(Object.assign({},d),{body:s}));(0,o.logDebug)("[REPORT] get rsp:",f),f&&f.status&&200==f.status?(this.recordList=this.recordList.filter((t=>t.timestamp!=e.timestamp||t.content!=e.content)),yield this.storage.setItem(this.recordCacheKey,this.recordList),n(!0)):a(!1)}catch(s){(0,o.logDebug)("send record error:",s),a(s)}}))))}))}sendRecordContent(e,n,r){return t(this,void 0,void 0,(function*(){var t,i,o;let s=null===(t=(0,a.getWindow)())||void 0===t?void 0:t.location.href,f=null===(i=(0,a.getWindow)())||void 0===i?void 0:i.navigator.language,c=null===(o=(0,a.getWindow)())||void 0===o?void 0:o.navigator.userAgent,l=this.reportPlatform,u={uuid:this.currentUUID,version:this.currentVersion,content:e,action:r,side:this.currentSide,timestamp:(new Date).getTime(),url:s,lang:f,type:n,platform:l,"user-agent":c};yield this.markRecordItem(u),yield this.sendRecord(u)}))}sendCachedRecords(){return t(this,void 0,void 0,(function*(){return new Promise(((e,n)=>t(this,void 0,void 0,(function*(){let t=this.recordList.map((e=>this.sendRecord(e)));(0,o.logDebug)("[REPORT] submit & clean recorded caches begin @",(new Date).toUTCString()),Promise.allSettled(t).then((t=>{(0,o.logDebug)("[REPORT] submit & clean recorded caches ends @",(new Date).toUTCString());let r=[];t.forEach(((e,t)=>{"rejected"==e.status&&r.push(t)})),this.recordList=this.recordList.filter(((e,t)=>!r.includes(t))),this.storage.setItem(this.recordCacheKey,this.recordList).then((function(t){e()})).catch((function(e){n(e)}))}))}))))}))}markRecordItem(e){return t(this,void 0,void 0,(function*(){if(this.recordList.push(e),this.recordList.length>100){let e=this.recordList.length-100;this.recordList.splice(0,e)}return new Promise(((t,n)=>{this.storage.setItem(this.recordCacheKey,this.recordList).then((function(n){t(e)})).catch((function(e){n(e)}))}))}))}markRecord(e,n,r,i){return t(this,void 0,void 0,(function*(){var t,o,s;let f=null===(t=(0,a.getWindow)())||void 0===t?void 0:t.location.href,c=null===(o=(0,a.getWindow)())||void 0===o?void 0:o.navigator.language,l=this.reportPlatform,u=null===(s=(0,a.getWindow)())||void 0===s?void 0:s.navigator.userAgent,d={uuid:this.currentUUID,version:this.currentVersion,content:e,action:r,side:i,timestamp:(new Date).getTime(),url:f,lang:c,type:n,platform:l,"user-agent":u};return yield this.markRecordItem(d)}))}}})),qs=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultReporter=function(){return a},e.logDebug=function(){if(typeof i<"u")try{for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];(n||window?.okxLogDebug)&&i.log("[OKX_CONNECT_SDK]",...t)}catch{}},e.logError=function(){if(typeof i<"u")try{for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];if((n||window?.okxLogDebug)&&i.error("[OKX_CONNECT_SDK]",...t),r||!n){let e="";e+=[...t].reduce(((e,t)=>{"string"==typeof t?","+t:"object"==typeof t&&JSON.stringify(t)})),a.sendRecordContent(e,o.OKXReportType.LOG,"")}}catch{}},e.logWarning=function(){if(typeof i<"u")try{for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];(n||window?.okxLogDebug)&&i.warn("[OKX_CONNECT_SDK]",...t)}catch{}},e.reportEvent=function(e,n,r){return t(this,void 0,void 0,(function*(){yield a.sendRecordContent(r,e,n)}))},e.reportLog=function(e){return t(this,arguments,void 0,(function(e){return function*(){}()}))};var n=!1,r=!1,o=$s(),a=new o.OKXReporter})),Xs=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.safeJsonParse=function(e){if("string"!=typeof e)throw(0,t.logDebug)(e),new Error("Cannot safe json parse value of type "+typeof e);try{return r(e)}catch(n){return i.error("safeJsonParse error:",n),e}},e.safeJsonStringify=function(e){return"string"==typeof e?e:n(e)||""};var t=qs(),n=e=>JSON.stringify(e,((e,t)=>"bigint"==typeof t?t.toString()+"n":t)),r=e=>{let t=e.replace(/:(\b\d{17,}|\b(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))(?=[,\}\]]|$)/g,(e=>`"${e}n"`));return JSON.parse(t,((e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t))}})),Fs=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.okxfromString=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=s[t];if((0,n.logDebug)("okxfromstring ====> "),!r)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)},e.okxtoString=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=s[t];if((0,n.logDebug)("okxtoString ====> "),!r)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)},e.alloc=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Uint8Array(e)},e.allocUnsafe=r;var t=(so(),y(ro)),n=qs();function r(){return new Uint8Array(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}function i(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}var o=i("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),a=i("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{let t=r((e=e.substring(1)).length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),s=Object.assign({utf8:o,"utf-8":o,hex:t.bases.base16,latin1:a,ascii:a,binary:a},t.bases)})),zs=h((e=>{var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.isValidObject=e.RANDOM_LENGTH=e.isBrowser=e.resolveLocalStorage=e.hasLocalStorage=e.hasBuiltInWebSocket=e.resolveWebSocketImplementation=void 0,e.hexToByteArray=function(e){if(e.length%2!==0)throw new Error(`Cannot convert ${e} to bytesArray`);let t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)t[n/2]=parseInt(e.slice(n,n+2),16);return t},e.toHexString=function(e){let t="";return e.forEach((e=>{t+=("0"+(255&e).toString(16)).slice(-2)})),t},e.concatUint8Arrays=function(e,t){let n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n},e.splitToUint8Arrays=function(e,t){if(t>=e.length)throw new Error("Index is out of buffer");let n=e.slice(0,t),r=e.slice(t);return[n,r]},e.base64encode=function(e,t){let n;return e instanceof Uint8Array?n=e:("string"!=typeof e&&(e=(0,s.safeJsonStringify)(e)),n=i.default.decodeUTF8(e)),function(e,t){let n=i.default.encodeBase64(e);return t?encodeURIComponent(n):n}(n,t)},e.base64decode=function(e,t){let n=function(e,t){return t&&(e=decodeURIComponent(e)),i.default.decodeBase64(e)}(e,t);return{toString:()=>i.default.encodeUTF8(n),toObject(){try{return(0,s.safeJsonParse)(i.default.encodeUTF8(n))}catch{return null}},toUint8Array:()=>n}},e.checkWSUrl=function(e){let t=e.match(new RegExp(/^\w+:/,"gi"));if(!t||!t.length)return!1;let n=t[0];return void 0!==n&&new RegExp("^wss?:").test(n)},e.hashKey=d,e.generateRandomBytes32=h,e.generateTopic=function(){let e=h();return(0,f.logDebug)(`generate topic called ${e}`),d((0,o.toString)(e,u))},e.isIos=function(){let e=navigator.userAgent,t=navigator.maxTouchPoints||0,n=/iPad|iPhone|iPod/.test(e)&&!window.MSStream,r=e.includes("Mac")&&t>1;return(0,f.logDebug)(`utils isIos >>>isIOSDevice: ${n}    >> isIPadOS: ${r}`),n||r},e.getLastSixMd5Hash=function(e){return l.default.MD5(e).toString().slice(-6)},e.toSafeBase64FromBase64=function(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")};var r=t(O()),i=t(x()),o=(en(),y(Zt)),a=on(),s=Xs(),f=qs(),c=Fs(),l=t(Xo()),u="base16";e.resolveWebSocketImplementation=()=>typeof WebSocket<"u"?WebSocket:typeof n.g<"u"&&typeof n.g.WebSocket<"u"?n.g.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:WebSocket;e.hasBuiltInWebSocket=()=>typeof WebSocket<"u"||typeof n.g<"u"&&typeof n.g.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u";e.hasLocalStorage=()=>typeof n.g<"u"&&typeof n.g.localStorage<"u"||typeof window<"u"&&typeof window.localStorage<"u";e.resolveLocalStorage=()=>typeof n.g<"u"&&typeof n.g.localStorage<"u"?n.g.localStorage:typeof window<"u"&&typeof window.localStorage<"u"?window.localStorage:localStorage;function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;(0,f.logDebug)(`hash key called ${e}`);let n=(0,a.hash)((0,c.okxfromString)(e,t));return(0,o.toString)(n,t)}function h(){return r.default.randomBytes(e.RANDOM_LENGTH)}e.isBrowser=()=>typeof window<"u",e.RANDOM_LENGTH=32;e.isValidObject=e=>Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length})),Js=h((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(r,e,i);return n(r,e),r},i=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.Storage=void 0;var o=Os(),a=i(O()),s=zs(),f=Hs(),c=r(qs()),l=Hs(),u=Xo(),d=class e{constructor(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=(0,s.resolveLocalStorage)();c.logDebug("------ update before cache ------"),n&&this.checkAndUpgradeCache(n,t),this.storeKey="",this.cipherIV="",this.subKey=t,c.logDebug("--------get current local storage --------"),c.logDebug(r);let i=r.getItem(e.cacheKey+t);if(typeof i>"u"||null===i)return c.logDebug("with no cache"),void(this.cache={});if(c.logDebug(i),i?.length>0){var o=(0,f.safeJsonParse)(i);this.cache=o}c.logDebug(`get cache obj: ${this.cache}`),(typeof this.cache>"u"||null==this.cache)&&(this.cache={})}checkAndUpgradeCache(t,n){if(t&&t.length>0&&n&&n.length>0){c.logDebug("--------get current local storage --------"),c.logDebug(localStorage);let r=localStorage.getItem(e.cacheKey+t);if(typeof r>"u"||null===r)return void c.logDebug("no pre cache content");c.logDebug(r),r?.length>0&&(c.logDebug("write in cache content: ",t,"->",n),localStorage.setItem(e.cacheKey+n,r),c.logDebug("clean in cache content: ",t),localStorage.removeItem(e.cacheKey+t))}else c.logDebug("no pre cache key:",t)}saveContent(e,t){let n={id:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-",timestamp:Date.now().toString(),content:e};this.saveItem(n,t)}saveItem(t,n){let r=e.cacheKey+this.subKey,i=(0,s.resolveLocalStorage)();c.logDebug(this.cache),c.logDebug(`get cache obj: ${this.cache}, ${n}, ${t}`),this.cache[n]=t;let o=(0,f.safeJsonStringify)(this.cache);c.logDebug(`STORAGE: ${n} @ ${this.cache}`),i.setItem(r,o)}getItem(e){return c.logDebug(`STORAGE >> getItem: ${e} @ ${this.cache}`),this.cache[e]}getCachedPBKDF2InfoKey(){var e,t,n,r;if(this.storeKey.length>0&&(null===(e=this.cipherIV)||void 0===e?void 0:e.length)>0)return{pw:this.storeKey,iv:this.cipherIV};let i=null===(t=this.getItem(o.OKXCONNECTOR_STORAGER_CRYPTO_SALT))||void 0===t?void 0:t.content;i||(i=(0,s.toHexString)(a.default.randomBytes(24)),this.saveContent(i,o.OKXCONNECTOR_STORAGER_CRYPTO_SALT));let f=null===(n=this.getItem(o.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD))||void 0===n?void 0:n.content;f||(f=(0,s.toHexString)(a.default.randomBytes(32)),this.saveContent(f,o.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD));let c=null===(r=this.getItem(o.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV))||void 0===r?void 0:r.content;if(!c){let e=a.default.randomBytes(16);c=(0,s.toHexString)(e),this.saveContent(c,o.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV)}return this.cipherIV=c,this.storeKey=(0,u.PBKDF2)(f,i,{iterations:10}).toString(),{pw:this.storeKey,iv:this.cipherIV}}encryptStoreMsg(e,t){(0,l.logDebug)(`encryptStoreMsg  encryptStoreMsg start ${Date.now()}`);let n=this.getCachedPBKDF2InfoKey();(0,l.logDebug)(`encryptStoreMsg  encryptStoreMsg mid ${Date.now()}`);var r=u.AES.encrypt(e,n.pw).toString();this.saveContent(r,t),(0,l.logDebug)(`encryptStoreMsg  encryptStoreMsg end ${Date.now()}`)}getAndDecrypt(e){(0,l.logDebug)(`encryptStoreMsg  getAndDecrypt start ${Date.now()}`);let t=this.getItem(e);if(t&&t.content){let e=this.getCachedPBKDF2InfoKey();(0,l.logDebug)(`encryptStoreMsg  getAndDecrypt mid ${Date.now()}`);let n=u.AES.decrypt(t.content,e.pw).toString(u.enc.Utf8);return(0,l.logDebug)(`encryptStoreMsg  getAndDecrypt end ${Date.now()}`),n}return null}clearCache(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0===t){this.cache={};let t=e.cacheKey+this.subKey;localStorage.setItem(t,"")}else{let n=e.cacheKey+this.subKey,r=(0,s.resolveLocalStorage)();c.logDebug(this.cache),this.cache[t]=null;let i=(0,f.safeJsonStringify)(this.cache);c.logDebug(`STORAGE: clean key ${t} @ ${this.cache}`),r.setItem(n,i)}}};e.Storage=d,d.cacheKey="OKXStorageKey"})),Vs=h((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(r,e,i);return n(r,e),r},i=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.OKXWalletConnector=void 0;var o=Cs(),a=Os(),s=Js(),f=Hs(),c=zs(),l=dn(),u=r(qs()),d=Ms(),h=(0,c.resolveWebSocketImplementation)();e.OKXWalletConnector=class{constructor(e){if(this.events=new l.EventEmitter,this.state=o.ConnectorState.InitState,this.selectedUrlIndex=0,this.retryCount=0,this.timeOutLimit=8e3,!(0,c.checkWSUrl)(e))throw new Error(`CONNECTOR: invalid url ${e}`);this.url=e,this.heartbeatTimer=null,this.connectionTimeoutTimer=null,this.connectURLStorage=new s.Storage(a.OKXCONNECTOR_CACHE_KEY+a.OKXCONNECTOR_CACHE_KEY)}get connecting(){return this.state==o.ConnectorState.Connecting}onPayload(e){if(!(typeof e.data>"u")){if(u.logDebug("get received data"),u.logDebug(e),"string"==typeof e.data&&"pong"===e.data)return void u.logDebug(`CONNECT: receive pong ${Date.now().toString()}`);this.events.emit("payload",e.data)}}onClose(e){var t;u.logDebug("socket get closed: ",null===(t=this.socket)||void 0===t?void 0:t.url,e.code),this.socket=void 0,this.events.emit("close",e)}onError(e,t){let n={id:e,msg:t.toString()};this.events.emit("payload",n)}onopen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.state=o.ConnectorState.Connected,this.events.emit("open")}emitError(e){this.events.emit("fail",e)}heartbeat(){return i(this,void 0,void 0,(function*(){if(this.heartbeatTimer&&clearTimeout(this.heartbeatTimer),this.state==o.ConnectorState.Connected||this.state==o.ConnectorState.OnError){if(this.socket){if(this.socket.readyState===WebSocket.OPEN)u.logDebug(`send ping heart beat: ${Date.now().toString()}, ${this.socket}`),this.socket.send("ping"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3);else if(u.logDebug("socket not ready"),this.state==o.ConnectorState.Connected||this.state==o.ConnectorState.OnError){u.logDebug("socket reconnect by heartbeat with state",this.state,this.socket.readyState);try{yield this.tryRegistOpen()}catch{u.logError("regist open failed"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3)}}}else if(u.logDebug("socket not exist"),this.state==o.ConnectorState.Connected||this.state==o.ConnectorState.OnError){u.logDebug("socket reconnect by heartbeat");try{yield this.tryRegistOpen()}catch{u.logError("regist open failed"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3)}}}else u.logDebug("heart beat close")}))}registOpen(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(0,c.checkWSUrl)(e))throw new Error(`CONNECTOR: invalid url ${e}`);this.url=e,t||u.logDebug("Connection connect:",this.url,(new Date).toUTCString()),this.state=o.ConnectorState.Connecting;new URLSearchParams(e).get("origin");return new Promise(((t,n)=>{let r=new h(e,[]);u.logDebug("Connection connect Begin:",this.url,(new Date).toUTCString()),this.startTimeOutTimer(r),(0,c.hasBuiltInWebSocket)()?(u.logDebug("Add socket error handler"),r.onerror=()=>{n(new Error("socket error")),r.close()}):(u.logDebug("Add socket error handler"),r.on("error",(()=>{n(new Error("socket error")),r.close()}))),r.onopen=()=>{u.logDebug("socket opened"),this.resetTimeOutTimer(o.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.FINISHED),this.onopen(r),this.heartbeat(),t(r)}}))}checkMaxRetry(){return u.logDebug("current retry count:",this.retryCount,"of",o.OKXCONNECTOR_WS_URL_LIST.length),this.retryCount>o.OKXCONNECTOR_WS_URL_LIST.length}connectionTryNext(){return i(this,void 0,void 0,(function*(){if(!this.checkMaxRetry()){this.retryCount+=1;let e=this.getNextSelectUrl();return u.logDebug("Connection retry:",e,(new Date).toUTCString()),this.registOpen(e,!0)}u.logDebug("Max Connection retry ",this.retryCount,(new Date).toUTCString())}))}startTimeOutTimer(e){this.connectionTimeoutTimer&&this.resetTimeOutTimer(o.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.CANCELED),this.pendingSocket=e,this.connectionTimeoutTimer=setTimeout((()=>{this.pendingSocket&&this.resetTimeOutTimer(o.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.TIME_OUT)}),this.timeOutLimit)}resetTimeOutTimer(e){var t;e!=o.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.FINISHED&&(null===(t=this.pendingSocket)||void 0===t||t.close(e)),this.pendingSocket=void 0,clearTimeout(this.connectionTimeoutTimer)}cacheSuccessUrlSelect(){this.connectURLStorage.saveContent(this.selectedUrlIndex.toString(),a.OKXCONNECTOR_CACHE_KEY)}getSuccessUrlSelect(){var e;let t=null===(e=this.connectURLStorage.getItem(a.OKXCONNECTOR_CACHE_KEY))||void 0===e?void 0:e.content,n=0;return t&&(n=Number(t)),this.selectedUrlIndex=n,o.OKXCONNECTOR_WS_URL_LIST[n]}getNextSelectUrl(){return this.selectedUrlIndex+=1,this.selectedUrlIndex=this.selectedUrlIndex%o.OKXCONNECTOR_WS_URL_LIST.length,o.OKXCONNECTOR_WS_URL_LIST[this.selectedUrlIndex]}onVisibleChanged(){return i(this,void 0,void 0,(function*(){if("visible"===document.visibilityState&&(u.logDebug(`get changed ${this.state}, ${this.socket}`),this.state==o.ConnectorState.Connected&&typeof this.socket>"u")){u.logDebug("CONNECTION need reopen");try{yield this.tryRegistOpen()}catch{u.logError("regist open failed")}}else;}))}tryRegistOpen(){return i(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url;return function*(){if(e.connecting)return u.logDebug("tryRegistOpen => connecting state"),new Promise(((t,n)=>{e.events.once("fail",(e=>(u.logDebug("tryRegistOpen => connecting fail listener",e),n(e)))),e.events.once("open",(()=>typeof e.socket>"u"?n(new Error("Connect lost")):t(e.socket)))}));u.logDebug("tryRegistOpen => try registOpen until retry limit is hit");let n=!1;for(;!e.checkMaxRetry()&&!e.socket;)try{u.logDebug("tryRegistOpen => call registOpen, try count:",e.retryCount,n),yield e.registOpen(t,n)}catch(r){u.logDebug("tryRegistOpen => registOpen failed",r),e.retryCount+=1,t=e.getNextSelectUrl(),n=!0}if(u.logDebug("tryRegistOpen => exit while loop",e.retryCount,e.socket),!e.socket&&e.checkMaxRetry())throw u.logDebug("tryRegistOpen => failed to open a socket",e.retryCount,e.socket),e.retryCount=0,e.state=o.ConnectorState.OnError,e.emitError(new Error("tryRegistOpen failed")),new d.OKXConnectError(d.OKX_CONNECT_ERROR_CODES.CONNECTION_ERROR,"Failed to connect")}()}))}connect(){return i(this,void 0,void 0,(function*(){try{yield this.tryRegistOpen(),document.removeEventListener("visibilitychange",this.onVisibleChanged.bind(this)),document.addEventListener("visibilitychange",this.onVisibleChanged.bind(this))}catch(e){throw u.logDebug("connect => failed to connect",e),e}}))}disconnect(){return i(this,void 0,void 0,(function*(){return this.state=o.ConnectorState.Disconnected,new Promise(((e,t)=>{typeof this.socket>"u"?e():(this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close(),this.heartbeatTimer&&clearTimeout(this.heartbeatTimer))}))}))}currentStatus(){return{state:this.state,url:this.url}}addListener(e,t,n,r){this.listenPayloadHandler&&this.events.removeListener("payload",this.listenPayloadHandler),this.listenPayloadHandler=i=>{var o;u.logDebug(`<<< get payload ${i}`);let a=(0,f.safeJsonParse)(i);if(a.params&&a.params.data){let i=null===(o=a.params.data)||void 0===o?void 0:o.message;if(i)try{let o=t(i);void 0===o?(u.logDebug("CONNECT: decrypt undefined"),r(e,"Decrypt undefined")):n(e,o)}catch(Hc){u.logDebug(`CONNECT: decrypt failed: ${Hc}`),r(e,Hc.message)}}},this.events.on("payload",this.listenPayloadHandler),this.failHandler&&this.events.removeListener("fail",this.failHandler),this.failHandler=t=>{t?(u.logDebug(`CONNECT failed: ${t}`),r(e,t.message)):r(e,"Unkonow error")},this.events.on("fail",this.failHandler)}addPackageParse(e){this.payloadHandler&&this.events.removeListener("payload",this.payloadHandler),this.payloadHandler=t=>i(this,void 0,void 0,(function*(){u.logDebug(`CONNECTION @[${(new Date).toUTCString()}] <<<< received e:${t}`);let n=(0,f.safeJsonParse)(t);yield e(n)})),this.events.on("payload",this.payloadHandler)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}send(e,t){return i(this,void 0,void 0,(function*(){try{typeof this.socket>"u"&&(u.logDebug(`>>> send payload undefined ${t}`),yield e()),u.logDebug(`CONNECTION @[${(new Date).toUTCString()}]>>> send payload ${(0,f.safeJsonStringify)(t)}`),this.socket&&this.socket.send((0,f.safeJsonStringify)(t))}catch(n){this.onError(t.id,n)}}))}getMsgPayloadFromHistory(e){return i(this,void 0,void 0,(function*(){if(typeof e>"u")return;let t={params:{data:e}},n=(0,f.safeJsonStringify)(e);u.logDebug("get received data from history"),u.logDebug(n),n=(0,f.safeJsonStringify)(t),this.events.emit("payload",n)}))}onOpen(e){this.openHandler&&this.events.removeListener("open",this.openHandler),this.openHandler=()=>i(this,void 0,void 0,(function*(){u.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> ws opened: `),yield e()})),this.events.on("open",this.openHandler),this.cacheSuccessUrlSelect()}}})),Gs=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CONNECT_METHOD_BATCH_FETCHMSG=e.CONNECT_METHOD_FETCHMSG=e.CONNECT_METHOD_RECEIVE=e.CONNECT_METHOD_UNSUB=e.CONNECT_METHOD_SUB=e.CONNECT_METHOD_PUBLISH=e.CONNECT_METHOD_LOGIN=e.CONNECT_METHOD_PUSH=void 0,e.CONNECT_METHOD_PUSH="push",e.CONNECT_METHOD_LOGIN="login",e.CONNECT_METHOD_PUBLISH="publish",e.CONNECT_METHOD_SUB="subscribe",e.CONNECT_METHOD_UNSUB="unsubscribe",e.CONNECT_METHOD_RECEIVE="receive",e.CONNECT_METHOD_FETCHMSG="fetchMessages",e.CONNECT_METHOD_BATCH_FETCHMSG="batchFetchMessages"})),Ys=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OKXCONNECTOR_JWT_TTL=e.OKXCONNECTOR_JWT_WALLET_SIDE=e.OKXCONNECTOR_JWT_SIDE=void 0,e.OKXCONNECTOR_JWT_SIDE="wallet",e.OKXCONNECTOR_JWT_WALLET_SIDE="dapp",e.OKXCONNECTOR_JWT_TTL=864e5})),Zs=h((e=>{var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.SessionCrypto=void 0;var n=t(O()),r=zs();e.SessionCrypto=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.nonceLength=24,this.sessionKeyPair=e?this.createKeypairFromString(e):this.createKeypair()}createKeypair(){return n.default.box.keyPair()}createKeypairFromString(e){return{publicKey:(0,r.hexToByteArray)(e.publicKey),secretKey:(0,r.hexToByteArray)(e.secretKey)}}createNonce(){return n.default.randomBytes(this.nonceLength)}get keyPair(){return this.sessionKeyPair}encrypt(e,t){let i=(new TextEncoder).encode(e),o=this.createNonce(),a=n.default.box(i,o,(0,r.hexToByteArray)(t),this.keyPair.secretKey),s=(0,r.concatUint8Arrays)(o,a);var f=(0,r.toHexString)(s),c=(new TextEncoder).encode(f);return(0,r.base64encode)(c,!1)}encryptWallet(e,t){let i=(new TextEncoder).encode(e),o=this.createNonce(),a=n.default.box(i,o,(0,r.hexToByteArray)(t),this.keyPair.secretKey),s=(0,r.concatUint8Arrays)(o,a);return(0,r.base64encode)(s,!1)}decrypt(e,t){let i=(0,r.base64decode)(e,!0).toUint8Array(),[o,a]=(0,r.splitToUint8Arrays)(i,this.nonceLength),s=n.default.box.open(a,o,(0,r.hexToByteArray)(t),this.keyPair.secretKey);if(!s)throw new Error(`Decryption error: \n message: ${e.toString()} \n sender pubkey: ${t.toString()} \n keypair pubkey: ${(0,r.toHexString)(this.keyPair.publicKey)} \n keypair secretkey: ${(0,r.toHexString)(this.keyPair.secretKey)}`);return(new TextDecoder).decode(s)}decryptWallet(e,t){let i=(0,r.base64decode)(e,!0),o=(0,r.hexToByteArray)(i.toString()),[a,s]=(0,r.splitToUint8Arrays)(o,this.nonceLength),f=n.default.box.open(s,a,(0,r.hexToByteArray)(t),this.keyPair.secretKey);if(!f)throw new Error(`Decryption error: \n message: ${e.toString()} \n sender pubkey: ${t.toString()} \n keypair pubkey: ${(0,r.toHexString)(this.keyPair.publicKey)} \n keypair secretkey: ${(0,r.toHexString)(this.keyPair.secretKey)}`);return(new TextDecoder).decode(f)}stringifyKeypair(){return{publicKey:(0,r.toHexString)(this.keyPair.publicKey),secretKey:(0,r.toHexString)(this.keyPair.secretKey)}}}})),Qs=h((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(r,e,i);return n(r,e),r},i=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))},o=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.MULTICODEC_ED25519_LENGTH=e.MULTICODEC_ED25519_HEADER=e.MULTICODEC_ED25519_BASE=e.MULTICODEC_ED25519_ENCODING=e.DID_METHOD=e.DID_PREFIX=e.DID_DELIMITER=e.KEY_PAIR_SEED_LENGTH=e.DATA_ENCODING=e.JSON_ENCODING=e.JWT_ENCODING=e.JWT_DELIMITER=e.JWT_IRIDIUM_TYP=e.JWT_IRIDIUM_ALG=e.JWTHeaderType=void 0,e.generateKeyPair=function(){return c.default.sign.keyPair()},e.decodeJSON=d,e.encodeJSON=h,e.encodeIss=p,e.decodeIss=g,e.encodeSig=b,e.decodeSig=y,e.encodeData=m,e.decodeData=function(t){var n,r;let i=(0,u.okxtoString)(t,e.DATA_ENCODING).split(e.JWT_DELIMITER),o=d(null!==(n=i[0])&&void 0!==n?n:"{}"),a=d(null!==(r=i[1])&&void 0!==r?r:"{}");return{header:o,payload:a}},e.encodeJWT=v,e.decodeJWT=w,e.signJWT=function(t,n,r,o){return i(this,arguments,void 0,(function(t,n,r,i){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Math.floor(Date.now());return function*(){let a={alg:e.JWT_IRIDIUM_ALG,typ:e.JWT_IRIDIUM_TYP},s={iss:p(i.publicKey),sub:t,aud:n,act:"authenticate user",iat:o,exp:o+r},f=m({header:a,payload:s});return l.logDebug(`get sec kp: ${i.secretKey} {${i.secretKey.length}}`),v({header:a,payload:s,signature:c.default.sign.detached(f,i.secretKey)})}()}))},e.verifyJWT=function(t){return i(this,void 0,void 0,(function*(){let{header:n,payload:r,data:i,signature:o}=w(t);if(n.alg!==e.JWT_IRIDIUM_ALG||n.typ!==e.JWT_IRIDIUM_TYP)throw new Error("JWT must use EdDSA algorithm");let s=g(r.iss);return a.verify(s,i,o)}))};var a=r(ra()),s=Xs(),f=zs(),c=o(O()),l=r(qs()),u=Fs();function d(t){return(0,s.safeJsonParse)((0,u.okxtoString)((0,u.okxfromString)(t,e.JWT_ENCODING),e.JSON_ENCODING))}function h(t){return(0,u.okxtoString)((0,u.okxfromString)((0,s.safeJsonStringify)(t),e.JSON_ENCODING),e.JWT_ENCODING)}function p(t){l.logDebug(`publicKey: ${(0,f.toHexString)(t)}`);var n=(0,u.okxtoString)(t,e.MULTICODEC_ED25519_ENCODING);return[e.DID_PREFIX,e.DID_METHOD,n].join(e.DID_DELIMITER)}function g(t){let[n,r,i]=t.split(e.DID_DELIMITER);if(n!==e.DID_PREFIX||r!==e.DID_METHOD)throw new Error('Issuer must be a DID with method "key"');if(void 0===i)throw new Error("multicodec is undefined");let o=(0,u.okxfromString)(i,e.MULTICODEC_ED25519_ENCODING);if(void 0===o||o.length!==e.MULTICODEC_ED25519_LENGTH)throw new Error("Issuer must be a public key with length 32 bytes");return o}function b(t){return(0,u.okxtoString)(t,e.JWT_ENCODING)}function y(t){return(0,u.okxfromString)(t,e.JWT_ENCODING)}function m(t){return(0,u.okxfromString)([h(t.header),h(t.payload)].join(e.JWT_DELIMITER),e.DATA_ENCODING)}function v(t){return[h(t.header),h(t.payload),b(t.signature)].join(e.JWT_DELIMITER)}function w(t){var n,r,i;let o=t.split(e.JWT_DELIMITER);return{header:d(null!==(n=o[0])&&void 0!==n?n:"{}"),payload:d(null!==(r=o[1])&&void 0!==r?r:"{}"),signature:y(null!==(i=o[2])&&void 0!==i?i:"{}"),data:(0,u.okxfromString)(o.slice(0,2).join(e.JWT_DELIMITER),e.DATA_ENCODING)}}e.JWTHeaderType="dapp",e.JWT_IRIDIUM_ALG="EdDSA",e.JWT_IRIDIUM_TYP="JWT",e.JWT_DELIMITER=".",e.JWT_ENCODING="base64url",e.JSON_ENCODING="utf8",e.DATA_ENCODING="utf8",e.KEY_PAIR_SEED_LENGTH=32,e.DID_DELIMITER=":",e.DID_PREFIX="did",e.DID_METHOD="key",e.MULTICODEC_ED25519_ENCODING="base58btc",e.MULTICODEC_ED25519_BASE="z",e.MULTICODEC_ED25519_HEADER="K36",e.MULTICODEC_ED25519_LENGTH=32})),ef=h((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(r,e,i);return n(r,e),r},i=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionManager=void 0;var o=Vs(),a=Gs(),s=Os(),f=Ys(),c=Cs(),l=dn(),u=Js(),d=zs(),h=Zs(),p=Qs(),g=Xs(),b=r(qs()),y=qs(),m=Us();e.ConnectionManager=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.events=new l.EventEmitter,this.connectStorage=new u.Storage(s.OKXCONNECTOR_CACHE_KEY_DAPP+e,s.OKXCONNECTOR_CACHE_KEY_DAPP),this.crypto=new h.SessionCrypto;let t=(0,m.isInTMA)();if((0,y.logDebug)("do init:",t),b.reportLog("connection manager do init"),t){let e=this.getCachedCryptoKeyPair();(0,y.logDebug)("use same pk:",e),this.crypto=new h.SessionCrypto(e)}this.jwtKeyPair=this.getCachedJWTKeyPair(),this.saveJWTKeyPair(this.jwtKeyPair),this.connector=new o.OKXWalletConnector(c.OKXCONNECTOR_WS_URL_1),this.packageId=Date.now(),this.connectedWalletPK="",this.currentTopic="",b.logDebug(`this.connectedWalletPK  constructor   ${this.connectedWalletPK}`)}refreshPackageId(){this.packageId=Date.now()}saveCryptoKeyPair(e){let t=(0,g.safeJsonStringify)(e);this.connectStorage.encryptStoreMsg(t,s.OKXCONNECTOR_CRYPTO_KEY)}getCachedCryptoKeyPair(){let e=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_CRYPTO_KEY);return"string"==typeof e?(b.logDebug("get cached crypto key:"),b.logDebug(e),(0,g.safeJsonParse)(e)):(this.connectStorage.clearCache(),null)}saveJWTKeyPair(e){var t={publicKey:(0,d.toHexString)(e.publicKey),secretKey:(0,d.toHexString)(e.secretKey)};b.logDebug("save jwt kp");let n=(0,g.safeJsonStringify)(t);b.logDebug(n),this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_JWT_KEY)}getCachedJWTKeyPair(){let e=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_JWT_KEY);if("string"==typeof e){b.logDebug("get cached jwt kp:"),b.logDebug(e);let t=(0,g.safeJsonParse)(e);return b.logDebug("save jwt kp"),b.logDebug(t),{publicKey:(0,d.hexToByteArray)(t.publicKey),secretKey:(0,d.hexToByteArray)(t.secretKey)}}return(0,p.generateKeyPair)()}isWalletPKReady(){return b.logDebug(`isWalletPKReady  ===> ${this.connectedWalletPK}`),this.connectedWalletPK.length>0}makeJWT(e){return i(this,void 0,void 0,(function*(){return yield(0,p.signJWT)(e,f.OKXCONNECTOR_JWT_SIDE,f.OKXCONNECTOR_JWT_TTL,this.jwtKeyPair)}))}parsePackage(e){return i(this,arguments,void 0,(function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function*(){var r,i,o,a,f;if(t.events.emit(e.id,e),!n){yield t.sendACK(e.id,!0);let n=null===(r=t.connectStorage.getItem(s.OKXCONNECTOR_TOKEN_CACHE))||void 0===r?void 0:r.content;if(n){let r=e;null!==(o=null===(i=r.params)||void 0===i?void 0:i.data)&&void 0!==o&&o.messageId&&(t.refreshPackageId(),yield t.sendReceive(t.packageId.toString(),null===(f=null===(a=r.params)||void 0===a?void 0:a.data)||void 0===f?void 0:f.messageId,n))}}}()}))}restoreConnect(e){return i(this,void 0,void 0,(function*(){if(b.reportLog("connection manager restore connection"),b.logDebug(`connectionManager  restoreConenct   ${e}`),"string"!=typeof e||0===e.length)throw new Error("CONNECTION: invalid topic");b.logDebug("connectionManager  restoreConenct   disconnect"),yield this.disconnect(!0),this.connectStorage.saveContent(e,s.OKXCONNECTOR_TOKEN_CACHE),b.logDebug("connectionManager  restoreConenct   conect"),yield this.connect(!0)}))}getConnectInfo(){var e=(0,d.generateTopic)();return b.logDebug(`generate topic token: ${e}`),b.reportLog("connection manager generate connection info"),this.currentTopic=e,{channelId:e,clientId:this.crypto.stringifyKeypair().publicKey}}connect(){return i(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function*(){e.timeLog=(new Date).getTime(),(0,y.logDebug)("ConnectTime---enter->",e.timeLog),b.reportLog("connection manager begin connect");let n=e.connectStorage.getItem(s.OKXCONNECTOR_TOKEN_CACHE);var r=e.currentTopic;if(b.logDebug(`generate topic token: ${r}`),t){typeof n<"u"&&null!==n&&(b.logDebug(`read last connect id: ${n}`),r=n.content);var o=e.connectStorage.getItem(s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE);o&&(e.connectedWalletPK=o.content,(0,y.logDebug)(`connectionManager connect() this.connectedWalletPK : ${e.connectedWalletPK}`)),b.reportLog("connection manager do restore connection")}if(t){let t=e.getCachedCryptoKeyPair();t&&(e.crypto=new h.SessionCrypto(t))}b.logDebug(`use crypto client id: ${e.crypto.stringifyKeypair().publicKey}`),e.connectStorage.saveContent(r,s.OKXCONNECTOR_TOKEN_CACHE);var f=yield e.makeJWT(r);return b.logDebug(`generate jwt token: ${f}`),e.connectStorage.saveContent(f,"jwt"),new Promise(((t,n)=>{e.connector.onOpen((()=>i(e,void 0,void 0,(function*(){b.logDebug("1. connector on open"),b.reportLog("1. connect ws open");let e=(new Date).getTime();(0,y.logDebug)("ConnectTime---open->",e-this.timeLog),this.events.once(this.packageId.toString(),(e=>i(this,void 0,void 0,(function*(){if(e&&e.error){b.logError("failed when login"),b.reportLog("2. connect login failed"),yield this.connector.disconnect();var o=new Error;o.message=e.error.message,o.name=e.error.code.toString(),n(o)}this.refreshPackageId(),this.events.once(this.packageId.toString(),(e=>i(this,void 0,void 0,(function*(){if(e&&e.error){b.logError("failed when subscribe"),b.reportLog("3. connect subscribe failed"),yield this.connector.disconnect();var i=new Error;i.message=e.error.message,i.name=e.error.code.toString(),n(i)}this.refreshPackageId(),b.logDebug(`4. subscribe callback then send fetch: ${this.packageId}`),b.reportLog("4. subscribe callback then send fetch");let o=(new Date).getTime();(0,y.logDebug)("ConnectTime--subscribe callback->",o-this.timeLog),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),r),t()})))),b.logDebug(`3. login callback then send subscribe: ${this.packageId}`),b.reportLog("3. connect subscribe failed");let s=(new Date).getTime();(0,y.logDebug)("ConnectTime---login callback->",s-this.timeLog),yield this.connector.send((()=>i(this,void 0,void 0,(function*(){b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,y.logDebug)("ConnectionManager connect error",e),n(e)}))}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_SUB,params:{topic:r}})})))),b.logDebug("2. login called"),b.reportLog("2. connection manager connect call login"),yield this.connector.send((()=>i(this,void 0,void 0,(function*(){b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,y.logDebug)("ConnectionManager connect error",e),n(e)}))}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_LOGIN,params:{token:f}}),this.connector.addPackageParse((e=>{var t;if(b.logDebug("connect: parse package"),b.logDebug(e),!("params"in e)||!("data"in e.params))return void this.parsePackage(e,!0);let n=null===(t=e.params.data)||void 0===t?void 0:t.message;if(typeof n<"u"){n=n.replace(/'/g,'"');let e=(0,g.safeJsonParse)(n);"string"!=typeof e&&"clientId"in e&&e.clientId&&e.clientId.length>0&&(this.connectedWalletPK=e.clientId,b.logDebug(`this.connectedWalletPK  addPackageParse   ${this.connectedWalletPK}`),this.connectStorage.saveContent(this.connectedWalletPK,s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),this.saveCryptoKeyPair(this.crypto.stringifyKeypair()))}this.parsePackage(e,e.method===a.CONNECT_METHOD_RECEIVE)}))})))),e.connector.connect().catch((e=>{(0,y.logDebug)("ConnectionManager connect error",e),n(e)}))}))}()}))}disconnect(){return i(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function*(){yield e.connector.disconnect(),b.reportLog("connect disconnect"),e.connectStorage.clearCache(s.OKXCONNECTOR_TOKEN_CACHE),t||(e.connectStorage.clearCache(s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),e.connectedWalletPK="",(0,y.logDebug)(`connectionManager disconnect() this.connectedWalletPK : ${e.connectedWalletPK}`))}()}))}addListener(e,t,n){this.connector.addListener((0,g.safeJsonStringify)(e),(e=>{if(e=e.replace(/'/g,'"'),b.logDebug(`addListener ===> ${e}`),typeof e<"u"){var t=(0,g.safeJsonParse)(e),n=t.message;t.clientId&&t.clientId.length>0&&(this.connectedWalletPK=t.clientId,this.connectStorage.saveContent(this.connectedWalletPK,s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),b.logDebug(`this.connectedWalletPK  addListener   ${this.connectedWalletPK}`),b.logDebug(`this.cryptoKey  addListener   ${(0,d.toHexString)(this.crypto.keyPair.publicKey)}`),this.saveCryptoKeyPair(this.crypto.stringifyKeypair()));var r=this.crypto.decrypt(n,this.connectedWalletPK);return b.logDebug(`addListener ===> ${r}`),r}}),t,n)}sendRaw(e){return i(this,void 0,void 0,(function*(){b.logDebug(`message send =====> ${e}`),b.reportLog("connect send raw msg");let t=e;b.logDebug(`message send =====encrypt message.length>>>> ${t.length}`);let n=this.connectStorage.getItem(s.OKXCONNECTOR_TOKEN_CACHE);b.logDebug(`message send =====topic>>>> ${n?.content}`),this.refreshPackageId();let r={id:this.packageId.toString(),method:a.CONNECT_METHOD_PUBLISH,jsonrpc:c.CONNECT_JSONRPC_VER,params:{message:{topic:n?.content,message:t,ttl:c.OKXCONNECTOR_MESSAGE_TTL}}};return this.events.once(this.packageId.toString(),(e=>i(this,void 0,void 0,(function*(){e&&e.error?b.logError(`@${(new Date).toUTCString()} >>> failed when send msg`):e&&!e.error&&b.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> send msg with id ${this.packageId} successed`)})))),yield this.connector.send((()=>i(this,void 0,void 0,(function*(){return b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),r),this.packageId}))}send(e){return i(this,void 0,void 0,(function*(){if(b.logDebug(`message send =====> ${e}`),b.reportLog("connect send msg"),!this.isWalletPKReady())throw new Error("connection not finish");let t=this.crypto.encrypt(e,this.connectedWalletPK);b.logDebug(`message send =====encrypt message.length>>>> ${t.length}`);let n=this.connectStorage.getItem(s.OKXCONNECTOR_TOKEN_CACHE);b.logDebug(`message send =====topic>>>> ${n?.content}`),this.refreshPackageId();let r={id:this.packageId.toString(),method:a.CONNECT_METHOD_PUBLISH,jsonrpc:c.CONNECT_JSONRPC_VER,params:{message:{topic:n?.content,message:t,ttl:c.OKXCONNECTOR_MESSAGE_TTL}}};return this.events.once(this.packageId.toString(),(e=>i(this,void 0,void 0,(function*(){e&&e.error?b.logError(`@${(new Date).toUTCString()} >>> failed when send msg`):e&&!e.error&&b.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> send msg with id ${this.packageId} successed`)})))),yield this.connector.send((()=>i(this,void 0,void 0,(function*(){return b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),r),this.packageId}))}sendACK(e,t){return i(this,arguments,void 0,(function(e,t){var n=this;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return function*(){if(!0===t){let t={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,result:!0};yield n.connector.send((()=>i(n,void 0,void 0,(function*(){return b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t)}else if(r){let t={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,error:{code:r.code,message:r.message}};yield n.connector.send((()=>i(n,void 0,void 0,(function*(){return b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t)}}()}))}sendReceive(e,t,n){return i(this,void 0,void 0,(function*(){let r={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_RECEIVE,params:{data:{messageId:t,topic:n}}};yield this.connector.send((()=>i(this,void 0,void 0,(function*(){return b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),r)}))}sendConnectSessionInfo(e,t,n,r){return i(this,void 0,void 0,(function*(){}))}sendFetchAndConsumeMessages(e,t){return i(this,void 0,void 0,(function*(){this.events.once(e,(e=>i(this,void 0,void 0,(function*(){var n,r;if(e.result){var i=e.result.hasMore,o=e.result.data;if(o)for(let e=0;e<o.length;e++){let n=o[e];if(n&&n.topic==t){let e=n.messageId;b.reportLog("5. get fetch result"),yield this.connector.getMsgPayloadFromHistory(n),this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),e,t)}}i&&(this.refreshPackageId(),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),t))}else b.logDebug(`CONNECT: get error rsp ${null===(n=e.error)||void 0===n?void 0:n.code} : ${null===(r=e.error)||void 0===r?void 0:r.message}`)})))),b.logDebug("5. send fetch more"),b.reportLog("5. send fetch more");let n=(new Date).getTime();(0,y.logDebug)("ConnectTime---5->",n-this.timeLog);let r={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_FETCHMSG,params:{data:{topic:t}}};yield this.connector.send((()=>i(this,void 0,void 0,(function*(){return b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),r)}))}cleanCache(){return i(this,void 0,void 0,(function*(){b.reportLog("connection cache clean called"),this.connectStorage.clearCache()}))}saveSessionContent(e,t){t||this.connectStorage.clearCache(s.OKXCONNECTOR_SESSION_PREFIX_KEY+e);let n=(0,g.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_SESSION_PREFIX_KEY+e)}getSessionContent(e){let t=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_SESSION_PREFIX_KEY+e);if(t)return(0,g.safeJsonParse)(t)}getCurrentConnectionReady(){return this.isWalletPKReady()}}})),tf=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WalletConnectionManagerEvent=e.WalletConnectionManagerTopicInfoCacheKey=void 0,e.WalletConnectionManagerTopicInfoCacheKey="wcmtic",e.WalletConnectionManagerEvent={RECEIVE_REQUEST:"payload"}})),nf=h((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(r,e,i);return n(r,e),r},i=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.WalletConnectionManager=void 0;var o=Vs(),a=Gs(),s=Os(),f=Ys(),c=Cs(),l=tf(),u=dn(),d=Js(),h=zs(),p=Zs(),g=Qs(),b=Xs(),y=r(qs()),m=qs(),v=Hs();e.WalletConnectionManager=class{constructor(){this.events=new u.EventEmitter,this.communicateEvents=new u.EventEmitter,y.logDebug("connect manager construct"),this.connectStorage=new d.Storage(s.OKXCONNECTOR_CACHE_KEY),this.jwtKeyPair=this.getCachedJWTKeyPair(),this.saveJWTKeyPair(this.jwtKeyPair),this.connector=new o.OKXWalletConnector(c.OKXCONNECTOR_WS_URL_1),this.packageId=Date.now(),this.sessionCryptoInfoMap=new Map,this.inLogin=!1,this.isLogined=!1}refreshPackageId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.packageId=Date.now()+e}saveCryptoKeyPair(e,t){let n=(0,b.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_CRYPTO_KEY+e)}getCachedCryptoKeyPair(e){let t=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_CRYPTO_KEY+e);return"string"==typeof t?(y.logDebug("get cached crypto key:"),y.logDebug(t),(0,b.safeJsonParse)(t)):(this.connectStorage.clearCache(),null)}saveJWTKeyPair(e){var t={publicKey:(0,h.toHexString)(e.publicKey),secretKey:(0,h.toHexString)(e.secretKey)};y.logDebug("save jwt kp");let n=(0,b.safeJsonStringify)(t);y.logDebug(n),this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_JWT_KEY),y.logDebug("after save jwt kp")}getCachedJWTKeyPair(){let e=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_JWT_KEY);if("string"==typeof e){y.logDebug("get cached jwt kp:"),y.logDebug(e);let t=(0,b.safeJsonParse)(e);return y.logDebug("save jwt kp"),y.logDebug(t),{publicKey:(0,h.hexToByteArray)(t.publicKey),secretKey:(0,h.hexToByteArray)(t.secretKey)}}return(0,g.generateKeyPair)()}isTopicPublicKeyExist(e){return y.logDebug(`isTopicPublicKeyExist  ===> ${e}`),this.sessionCryptoInfoMap.get(e)}makeJWT(e){return i(this,void 0,void 0,(function*(){return yield(0,g.signJWT)(e,f.OKXCONNECTOR_JWT_WALLET_SIDE,f.OKXCONNECTOR_JWT_TTL,this.jwtKeyPair)}))}parseInternalMsg(e){try{let t=(0,b.safeJsonParse)(e)["ivur-igbfft-ptjip"];if(t&&t.length>0)return(0,v.base64decode)(t,!0).toString()}catch(t){y.logError("parse internal msg",t)}}parsePackage(e,t){return i(this,arguments,void 0,(function(e,t){var n=this;let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function*(){var i,o,a,s,f,c,l,u,d,h,p;n.events.emit(t.id,t);let g=n.sessionCryptoInfoMap.get(e);if(y.logDebug("get sessionInfo for decrypt topic:",e),y.logDebug("get sessionInfo for decrypt:",t.id,e,g,n.sessionCryptoInfoMap),g&&t.params.data&&null!==(i=t.params.data)&&void 0!==i&&i.message)if(null!==(o=t.params.data)&&void 0!==o&&o.isInternalData){let e=null===(a=t.params.data)||void 0===a?void 0:a.message,r=null===(s=t.params.data)||void 0===s?void 0:s.topic,i=n.parseInternalMsg(e);(0,m.logDebug)("parse internal origin: ",i),i&&i.length>0&&n.communicateEvents.emit("origin",i,r)}else try{let r=null===(f=t.params.data)||void 0===f?void 0:f.message;if(r.trimStart().startsWith("{")){let t=(0,b.safeJsonParse)(r);t.method&&((0,m.logDebug)("<<< parse raw msg:",e,t),n.communicateEvents.emit(e,r))}else{let r=g.crypto.decryptWallet(null===(c=t.params.data)||void 0===c?void 0:c.message,g.dappPublicKey);(0,m.logDebug)("<<< receive msg:",e,r),n.communicateEvents.emit(e,r)}}catch{let r=g.crypto.decryptWallet(null===(l=t.params.data)||void 0===l?void 0:l.message,g.dappPublicKey);(0,m.logDebug)("<<< receive msg:",e,r),n.communicateEvents.emit(e,r)}if(!r&&(yield n.sendACK(t.id,!0),e)){let r=t;null!==(d=null===(u=r.params)||void 0===u?void 0:u.data)&&void 0!==d&&d.messageId&&(n.refreshPackageId(),yield n.sendReceive(n.packageId.toString(),null===(p=null===(h=r.params)||void 0===h?void 0:h.data)||void 0===p?void 0:p.messageId,e))}}()}))}recovrySessionInfoFromCache(){let e=this.connectStorage.getAndDecrypt(l.WalletConnectionManagerTopicInfoCacheKey);if(y.logDebug("get cached sessionInfos:",e),e){let t=(0,b.safeJsonParse)(e);for(let e in t){let n=t[e];y.logDebug("make topicItem:",n);let r={topic:e,crypto:new p.SessionCrypto({publicKey:n.cryptoKeyPair.publicKey,secretKey:n.cryptoKeyPair.secretKey}),dappPublicKey:n.dappPublicKey};this.sessionCryptoInfoMap.set(e,r)}}y.logDebug("get cached sessionInfos map:",this.sessionCryptoInfoMap)}syncCacheSessionInfo(){let e={};for(let[n,r]of this.sessionCryptoInfoMap)y.logDebug("for each Keys",n),r&&(e[n]={cryptoKeyPair:r.crypto.stringifyKeypair(),dappPublicKey:r.dappPublicKey});let t=(0,b.safeJsonStringify)(e);y.logDebug("sync cache sessionInfos:",t),this.connectStorage.encryptStoreMsg(t,l.WalletConnectionManagerTopicInfoCacheKey)}cacheSessionInfo(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.dappPublicKey,i=[];for(let[o,a]of this.sessionCryptoInfoMap)y.logDebug("for each Keys",o),a.dappPublicKey==r&&(y.logDebug("duplicated dapp public key:",o,r),i.push(o));for(let[o,a]of this.sessionCryptoInfoMap)i.includes(o)&&this.sessionCryptoInfoMap.delete(o);return y.logDebug("cleaned connect session cache:",this.sessionCryptoInfoMap),this.sessionCryptoInfoMap.set(e,t),y.logDebug("cache sessionInfo:",e,t,this.sessionCryptoInfoMap),n&&this.syncCacheSessionInfo(),i}appendTopic(e,t){return i(this,void 0,void 0,(function*(){return(0,m.logDebug)("4.1. get append Topic:",e),new Promise(((n,r)=>i(this,void 0,void 0,(function*(){if(!this.isLogined){var i=new Error;return i.message="connection is not logined",i.name="append error",void r(i)}let o={topic:e,crypto:new p.SessionCrypto,dappPublicKey:t},a=this.cacheSessionInfo(e,o,!1);yield this.subscribeTopics(Array.from([e])),this.refreshPackageId(),y.logDebug(`5. subscribe callback then fetch append message: ${this.packageId}, ${e}`),y.reportLog("5. subscribe callback then fetch append message");let s=(new Date).getTime();(0,m.logDebug)("Append --subscribe callback->",s-this.timeLog),n(a)}))))}))}confirmAppendingTopics(){this.syncCacheSessionInfo()}connect(){return i(this,void 0,void 0,(function*(){this.timeLog=(new Date).getTime(),(0,m.logDebug)("[Wallet] ConnectTime---enter->",this.timeLog),y.reportLog("wallet connect connect called");let e=Date.now().toString();var t=yield this.makeJWT(e);return y.logDebug(`generate jwt token: ${t}`),this.connectStorage.saveContent(t,"jwt"),this.recovrySessionInfoFromCache(),new Promise(((e,n)=>{this.inLogin=!0,this.connector.onOpen((()=>i(this,void 0,void 0,(function*(){y.logDebug("1. connector on open"),y.reportLog("1. wallet connect connect on open");let r=(new Date).getTime();(0,m.logDebug)("ConnectTime---open->",r-this.timeLog),this.events.once(this.packageId.toString(),(t=>i(this,void 0,void 0,(function*(){if(t&&t.error){y.logError("failed when login"),yield this.connector.disconnect();var r=new Error;r.message=t.error.message,r.name=t.error.code.toString(),n(r)}else this.isLogined=!0,e(),y.logDebug("3. subscribe cached topics",this.sessionCryptoInfoMap),y.reportLog("3. wallet connect connect subscribe cached topics"),this.sessionCryptoInfoMap.size>0&&(yield this.subscribeTopics(Array.from(this.sessionCryptoInfoMap.keys())))})))),y.logDebug("2. login called"),y.reportLog("2. wallet connect login called"),yield this.connector.send((()=>i(this,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_LOGIN,params:{token:t}})})))),this.connector.connect().catch((e=>{(0,m.logDebug)("WalletConnectionManager connect error",e),n(e)})),this.connector.addPackageParse((e=>{var t,n;y.logDebug("connect: parse package"),y.logDebug(e),"params"in e&&"data"in e.params?null!==(t=e.params.data)&&void 0!==t&&t.topic&&this.parsePackage(null===(n=e.params.data)||void 0===n?void 0:n.topic,e,e.method===a.CONNECT_METHOD_RECEIVE):this.parsePackage("",e,!0)}))}))}))}getSessionPublicKey(e){if(this.isTopicPublicKeyExist(e)){let t=this.sessionCryptoInfoMap.get(e);if(t)return(0,h.toHexString)(t.crypto.keyPair.publicKey)}}getCurrentCachedTopicIdList(){return Array.from(this.sessionCryptoInfoMap.keys())}disconnect(){return i(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function*(){yield e.connector.disconnect(),e.connectStorage.clearCache(s.OKXCONNECTOR_TOKEN_CACHE),t||e.connectStorage.clearCache(s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE)}()}))}send(e,t){return i(this,arguments,void 0,(function(e,t){var n=this;let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function*(){var o,s;if(y.logDebug(`message send =====> ${t}`),!n.isTopicPublicKeyExist(e))throw new Error("connection not finish");let f=null===(o=n.sessionCryptoInfoMap.get(e))||void 0===o?void 0:o.dappPublicKey,l=null===(s=n.sessionCryptoInfoMap.get(e))||void 0===s?void 0:s.crypto;if(l&&f){let o={message:l.encryptWallet(t,f)};r&&(o.clientId=(0,h.toHexString)(l.keyPair.publicKey)),n.refreshPackageId();let s={id:n.packageId.toString(),method:a.CONNECT_METHOD_PUBLISH,jsonrpc:c.CONNECT_JSONRPC_VER,params:{message:{topic:e,message:(0,b.safeJsonStringify)(o),ttl:c.OKXCONNECTOR_MESSAGE_TTL}}};return n.events.once(n.packageId.toString(),(e=>i(n,void 0,void 0,(function*(){e&&e.error?y.logError(`@${(new Date).toUTCString()} >>> failed when send msg`):e&&!e.error&&y.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> send msg with id ${this.packageId} successed`)})))),yield n.connector.send((()=>i(n,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),s),n.packageId}}()}))}sendACK(e,t){return i(this,arguments,void 0,(function(e,t){var n=this;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return function*(){if(!0===t){let t={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,result:!0};yield n.connector.send((()=>i(n,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t)}else if(r){let t={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,error:{code:r.code,message:r.message}};yield n.connector.send((()=>i(n,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t)}}()}))}sendReceive(e,t,n){return i(this,void 0,void 0,(function*(){let r={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_RECEIVE,params:{data:{messageId:t,topic:n}}};yield this.connector.send((()=>i(this,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),r)}))}sendUnsubscribe(e){return i(this,void 0,void 0,(function*(){yield this.connector.send((()=>i(this,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_UNSUB,params:{topic:e}}),this.sessionCryptoInfoMap.delete(e),this.syncCacheSessionInfo()}))}sendFetchAndConsumeMessages(e,t){return i(this,void 0,void 0,(function*(){this.events.once(e,(e=>i(this,void 0,void 0,(function*(){var n,r;if(e.result){var i=e.result.hasMore,o=e.result.data;if(o)for(let e=0;e<o.length;e++){let n=o[e];if(n&&n.topic==t){let e=n.messageId;yield this.connector.getMsgPayloadFromHistory(n),this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),e,t)}}i&&(this.refreshPackageId(),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),t))}else y.logDebug(`CONNECT: get error rsp ${null===(n=e.error)||void 0===n?void 0:n.code} : ${null===(r=e.error)||void 0===r?void 0:r.message}`)})))),y.logDebug("5. send fetch more");let n=(new Date).getTime();(0,m.logDebug)("ConnectTime---5->",n-this.timeLog);let r={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_FETCHMSG,params:{data:{topic:t}}};yield this.connector.send((()=>i(this,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),r)}))}sendBatchFetchAndConsumeMessages(e,t){return i(this,void 0,void 0,(function*(){this.events.once(e,(e=>i(this,void 0,void 0,(function*(){var n,r;if(e.result){var i=e.result.hasMore,o=e.result.data;if(o)for(let e=0;e<o.length;e++){let t=o[e];if(t&&t.topic){let n=t.messageId;yield this.connector.getMsgPayloadFromHistory(t),this.refreshPackageId(e),yield this.sendReceive(this.packageId.toString(),n,t.topic)}}i&&(this.refreshPackageId(),yield this.sendBatchFetchAndConsumeMessages(this.packageId.toString(),t))}else y.logDebug(`CONNECT: get error rsp ${null===(n=e.error)||void 0===n?void 0:n.code} : ${null===(r=e.error)||void 0===r?void 0:r.message}`)})))),y.logDebug("5. send fetch more"),y.reportLog("5. send fetch more");let n=(new Date).getTime();(0,m.logDebug)("ConnectTime---5->",n-this.timeLog);let r={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_BATCH_FETCHMSG,params:{topics:t,withInternalData:!0}};yield this.connector.send((()=>i(this,void 0,void 0,(function*(){y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),r)}))}cleanCache(){return i(this,void 0,void 0,(function*(){this.connectStorage.clearCache()}))}saveSessionContent(e,t){t||this.connectStorage.clearCache(s.OKXCONNECTOR_SESSION_PREFIX_KEY+e);let n=(0,b.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_SESSION_PREFIX_KEY+e)}getSessionContent(e){let t=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_SESSION_PREFIX_KEY+e);if(t)return(0,b.safeJsonParse)(t)}subscribeTopics(e){return i(this,void 0,void 0,(function*(){(0,m.logDebug)("4. topicid list",e),y.reportLog("4. topicid list"),this.refreshPackageId();let t=(new Date).getTime();return(0,m.logDebug)("ConnectTime--subscribe callback->",t-this.timeLog),new Promise(((t,n)=>i(this,void 0,void 0,(function*(){let n=0;for(let r=0;r<e.length;++r){let o=e[r];this.refreshPackageId(r),this.events.once(this.packageId.toString(),(a=>i(this,void 0,void 0,(function*(){if(a&&a.error){y.logError("failed when subscribe"),yield this.connector.disconnect();var i=new Error;i.message=a.error.message,i.name=a.error.code.toString(),n+=1,n==e.length&&t()}this.refreshPackageId(r);let s=(new Date).getTime();(0,m.logDebug)("ConnectTime--subscribe callback->",s-this.timeLog),n+=1,n==e.length&&(y.logDebug(`5. send fetch msg: ${this.packageId}, ${o}`),yield this.sendBatchFetchAndConsumeMessages(this.packageId.toString(),e),t())})))),y.logDebug(`3. login callback then send subscribe: ${this.packageId}, ${o}`),y.reportLog("3. login callback then send subscribe");let s=(new Date).getTime();(0,m.logDebug)("ConnectTime---login callback->",s-this.timeLog),yield this.connector.send((()=>i(this,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_SUB,params:{topic:o}})}}))))}))}}})),rf=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.buildNameSpacesByConnectResponse=function(e){return n(e)},e.buildRequestAccountNameSpacesByConnectResponse=n;var t=qs();function n(e){let n={};(0,t.logDebug)("buildRequestAccountNameSpacesByConnectResponse start connectResponse>>",JSON.stringify(e));let r=e.payload.responses.find((e=>"requestAccounts"===e.name)),i=e.payload.responses.find((e=>"ton_addr"===e.name)),o=e.payload.responses.find((e=>"ton_proof"===e.name));if(i&&!r){(0,t.logDebug)("buildRequestAccountNameSpacesByConnectResponse adapt ton data >>");let e=i.address;e="ton:"+i.network+":"+e;let n={ton_addr:i};o&&(n.ton_proof=o),r={name:"requestAccounts",accounts:[{namespace:"ton",addresses:[e],methods:["ton_sendTransaction"],extra:{},data:n}]}}return(0,t.logDebug)("buildRequestAccountNameSpacesByConnectResponse end universalResponse>>>",JSON.stringify(r)),r.accounts.forEach((e=>{var r=[],i=[];e.addresses.forEach((e=>{var n=e.split(":");if((0,t.logDebug)("buildRequestAccountNameSpacesByConnectResponse addressArr>>",n.length),n.length>=3){let o=n.slice(0,2).join(":");r.push(o),i.push(e),(0,t.logDebug)("buildRequestAccountNameSpacesByConnectResponse chain:>>",o,"addressItem:",e)}})),e.data&&e.data.ton_addr&&(e.data.ton_addr.name="ton_addr"),e.data&&e.data.ton_proof&&(e.data.ton_proof.name="ton_proof"),n[e.namespace]={chains:r,accounts:i,methods:e.methods,extra:e.extra,payload:e.data},(0,t.logDebug)("buildRequestAccountNameSpacesByConnectResponse result>>",JSON.stringify(n))})),n}})),of=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Engine=void 0;var n=Xs(),r=qs(),i=Ms(),o=Hs(),a=Hs(),s=rf(),f=Us();e.Engine=class{constructor(e){this.pendingRequests=new Map,this.disconnectListener=[],this.connectionManager=e,(0,r.getDefaultReporter)().beginReport(),this.connectionManager.addListener("sdk_response",((e,t)=>{var i=(0,n.safeJsonParse)(t);(0,r.logDebug)(`Engine ==>> addListener ==> success ==> ${i}`),this.handleResponse(e,i)}),(function(){}))}addDisconnectListener(e){this.disconnectListener.push(e)}disconnect(){(0,r.logDebug)("Engine ==>> disconnect"),this.pendingRequests.clear()}getRequestId(){let e=Date.now().toString();return(0,r.logDebug)("Engine ==>> getRequestId ==>",e),e}bindRequestForPromise(e,t){this.pendingRequests.set(e,t)}send(e,i,o){return t(this,void 0,void 0,(function*(){(0,r.logDebug)("Engine ==>> send  request==>",JSON.stringify(e));let t=this.getRequestId();try{let o=yield this.connectionManager.send(JSON.stringify(Object.assign(Object.assign({},e),{requestId:t})));this.connectionManager.events.once(o.toString(),(e=>{var t;(0,r.logDebug)(`Engine ==> send => onAck => ${(0,n.safeJsonStringify)(e)}`),e&&e.result&&(null===(t=i.onAck)||void 0===t||t.call(i))})),i.resolve&&this.bindRequestForPromise(t,i.resolve)}catch(o){return Promise.reject(o)}}))}sendSession(e){return t(this,void 0,void 0,(function*(){(0,r.logDebug)("[Connect] sendSession called:",e);let t=this.getRequestId(),n={method:"session_info",params:{sessionInfo:e}};yield this.connectionManager.sendRaw(JSON.stringify(Object.assign(Object.assign({},n),{requestId:t})))}))}handleResponse(e,t){if((0,r.logDebug)(`Engine ==>> handleResponse_1  ======>response: ${(0,n.safeJsonStringify)(t)}`,e),"requestId"in t){(0,r.logDebug)("Engine ==>> handleResponse_2  ===> in response");let e=t.requestId,n=this.pendingRequests.get(e);n?((0,r.logDebug)("Engine ==>> handleResponse_3  ===> find resolve:",n),n(t),this.pendingRequests.delete(e)):((0,r.logDebug)("Engine ==>> handleResponse_3  ===> not find resolve:"),"disconnect"===t.method&&(this.disconnectListener.forEach((e=>e())),this.disconnectListener=[],this.disconnect()))}}restoreconnect(e,n){return t(this,void 0,void 0,(function*(){var t;yield null===(t=this.connectionManager)||void 0===t?void 0:t.restoreConnect(e.topic),n(e)}))}conect(e,n,s){return t(this,void 0,void 0,(function*(){var t,f;let c=this.connectionManager.getConnectInfo(),l=this.getRequestId(),u=null!==(t=n.openUniversalUrl)&&void 0!==t&&t,d={protocolVer:Number(i.tonConnectSdkVersion),topic:c.channelId,clientId:c.clientId,requestId:l,dAppInfo:n.dappInfo,requests:e},h=JSON.stringify(d),p=(new TextEncoder).encode(h),g=btoa(String.fromCharCode(...p)),b=`${i.standardDeeplink}?param=${g}`;(0,r.logDebug)("engine ==>> connect ==>>deeplinkUrl:",b);let y=(0,a.isIos)();(0,r.logDebug)(`engine ==>> connect ==>>isIOS: ${y}   openUniversalLink: ${u}`),y&&u&&((0,r.logDebug)("bridge-provider ==>> connect_3"),(0,o.openOKXDeeplinkWithFallback)(b)),yield null===(f=this.connectionManager)||void 0===f?void 0:f.disconnect(!1),this.bindRequestForPromise(l,(e=>{let t=this.onConnect(e,n,c.channelId);s(t,e)}));try{yield this.connectionManager.connect()}catch(m){throw(0,r.logDebug)("Engine conect error",m),m}return!y&&u&&((0,r.logDebug)("bridge-provider ==>> connect_4"),(0,o.openOKXDeeplinkWithFallback)(b)),{connectInfo:c,deeplinkUrl:(0,o.getUniversalLink)(b)}}))}onConnect(e,t,n){if("connect"==e.method){let r=(0,s.buildNameSpacesByConnectResponse)(e);if(r)return{topic:n,sessionConfig:t,namespaces:r}}return null}universalConnect(e,n,c){return t(this,void 0,void 0,(function*(){return new Promise(((l,u)=>t(this,void 0,void 0,(function*(){var t,d,h,p,g;try{(0,r.logDebug)("engine universalConnect request :",JSON.stringify(e)),(0,r.logDebug)("engine universalConnect sessionConfig :",JSON.stringify(n));let v=[],w=[];e.forEach((e=>{let t=e.name;t.startsWith("requestAccounts")?w.push(e):t.startsWith("ton")&&v.push(e)})),(0,r.logDebug)("engine universalConnect tonRequest :",JSON.stringify(v)),(0,r.logDebug)("engine universalConnect universalRequest :",JSON.stringify(w));let _=this.connectionManager.getConnectInfo(),E=this.getRequestId(),C=null!==(t=n.openUniversalUrl)&&void 0!==t&&t,O={protocolVer:Number(i.tonConnectSdkVersion),topic:_.channelId,clientId:_.clientId,requestId:E,dAppInfo:n.dappInfo,requests:w},x=(0,f.encodeConnectParams)(O);O.redirect=null!==(d=n?.redirect)&&void 0!==d?d:"none";let S={protocolVer:Number(i.tonConnectSdkVersion),topic:_.channelId,clientId:_.clientId,requestId:E,dAppInfo:n.dappInfo,requests:v,redirect:null!==(h=n?.redirect)&&void 0!==h?h:"none"},k=!1;v.length>0&&(k=!0);let T=k?S:O;(0,r.logDebug)("engine universalConnect ==>>defaultConnectRequest:",k,JSON.stringify(T));var b="";if(C){if(n.useMini){var y=(0,o.encodeTWAConnectURLParams)(T);b=(0,f.getTelegramWalletTWAUrl)(y,null!==(p=n.tmaReturnUrl)&&void 0!==p?p:"back")}else{let e=(0,f.encodeConnectParams)(T);b=`${i.standardDeeplink}?param=${e}`}(0,r.logDebug)("engine universalConnect ==>>deeplinkUrl:",b)}let R=()=>n.useMini?(0,f.openOKXTMAWalletlinkWithFallback)(b):(0,o.openOKXDeeplinkWithFallback)(b);(0,r.logDebug)("engine universalConnect ==>>deeplinkUrl:",b);let A=(0,a.isIos)();A&&C&&((0,r.logDebug)(`engine universalConnect ==>>isIOS: ${A}   openUniversalLink: ${C}`),R()),yield null===(g=this.connectionManager)||void 0===g?void 0:g.disconnect(!1),this.bindRequestForPromise(E,(e=>{var t,o;try{let a=e;if("connect"==a.method){(0,r.logDebug)("engin  universalConnect success connectResponse:>>>",JSON.stringify(a));let e=(0,s.buildNameSpacesByConnectResponse)(a);if(!e)throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR);{let i={topic:_.channelId,sessionConfig:n,namespaces:e,wallet:Object.assign({},null===(t=a.payload)||void 0===t?void 0:t.wallet)};(0,r.logDebug)("engin  universalConnect success session:>>>",JSON.stringify(i)),l(i)}}else if("connect_error"==a.method&&null!==(o=a.payload)&&void 0!==o&&o.code)throw new i.OKXConnectError(a.payload.code)}catch(a){u(a)}}));try{yield this.connectionManager.connect()}catch(m){throw(0,r.logDebug)("Engine universalConnect error",m),m}if(!A&&C&&R(),(0,r.logDebug)("engin  universalConnect ==>> connectInfoAndUrl:",c),this.sendSession(x),c){let e={connectRequest:O,redirect:n.redirect,tmaReturnUrl:n.tmaReturnUrl};k&&(e.tonConnectRequest=S),(0,r.logDebug)("universalConnect connectInfoAndUrl info :",JSON.stringify(e)),c(e)}}catch(v){(0,r.logDebug)("Engine universalConnect catch error",v),u(v)}}))))}))}}})),af=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Storage=e.Engine=e.WalletConnectionManager=e.ConnectionManager=e.OKXWalletConnector=void 0;var t=Vs();Object.defineProperty(e,"OKXWalletConnector",{enumerable:!0,get:function(){return t.OKXWalletConnector}});var n=ef();Object.defineProperty(e,"ConnectionManager",{enumerable:!0,get:function(){return n.ConnectionManager}});var r=nf();Object.defineProperty(e,"WalletConnectionManager",{enumerable:!0,get:function(){return r.WalletConnectionManager}});var i=of();Object.defineProperty(e,"Engine",{enumerable:!0,get:function(){return i.Engine}});var o=Js();Object.defineProperty(e,"Storage",{enumerable:!0,get:function(){return o.Storage}})})),sf=h((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(af(),e),n(Ms(),e),n(Hs(),e)})),ff=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.OKXAptosProvider=void 0;var n=_s(),r=Es(),o=sf(),a=class{constructor(e){this.chainsSet=new Set,this.provider=e,this.getConnectedNamespace()}get defaultNetwork(){return this.provider.requestDefaultChainWithNamespace(o.NameSpaceKeyAptos)}get currentChainId(){return`aptos:${this.defaultNetwork}`}getRealChainId(e){if("aptos:mainnet"==e)return"aptos:637";if("movement:testnet"==e)return"aptos:70000060";if(null==e){if(1==this.chainsSet.size)return this.currentChainId;throw new Error("connected to multiple aptos chains,chainId can not be null")}return e}getConnectedNamespace(){var e,t,n;null===(n=null===(t=null===(e=this.provider.session)||void 0===e?void 0:e.namespaces)||void 0===t?void 0:t.aptos)||void 0===n||n.chains.forEach((e=>{this.chainsSet.add(e)}))}getAccount(e){var t,n,r,a,s,f,c,l,u;e=this.getRealChainId(e);let d=null===(n=null===(t=this.provider.session)||void 0===t?void 0:t.namespaces.aptos)||void 0===n?void 0:n.accounts[0];if(null!=e&&(d=null===(a=null===(r=this.provider.session)||void 0===r?void 0:r.namespaces.aptos)||void 0===a?void 0:a.accounts.filter((function(t){return t.startsWith(e)}))[0]),(0,o.logDebug)("getAccount",d),!d)return;let h=d.split(":"),p=d.split(":")[2];i.log("aptos_publicKey",null===(f=null===(s=this.provider.session)||void 0===s?void 0:s.namespaces.aptos)||void 0===f?void 0:f.extra);let g=null===(u=null===(l=null===(c=this.provider.session)||void 0===c?void 0:c.namespaces.aptos)||void 0===l?void 0:l.extra)||void 0===u?void 0:u[`${h[0]}:${h[1]}`],b="";return null!=g&&(b=g.publicKey,i.log("aptos_publicKey",b)),p?{address:p,publicKey:b}:void 0}signMessage(e,r){return t(this,void 0,void 0,(function*(){var t,o;let a=this.getRealChainId(r);try{let r="APTOS",f=null===(t=this.getAccount(a))||void 0===t?void 0:t.address,c="",l="";var s=r;let u=window.location.protocol+"//"+window.location.hostname;"address"in e&&e.address&&(s+="\naddress: "+f),"application"in e&&e.application&&(s+="\napplication: "+u),"chainId"in e&&e.chainId&&(s+="\nchainId: "+a),"message"in e&&(s+="\nmessage: "+e.message,c=e.message),"nonce"in e&&(s+="\nnonce: "+e.nonce,l=e.nonce),i.log("signMessage",s);let d=n.Buffer.from(s),h=this.bufferToHex(d),p={chainId:a,method:"aptos_signMessage",params:{message:h}},g=yield this.provider.request(p,a);if("result"in g){let e=g.result;(null===(o=this.getAccount(a))||void 0===o?void 0:o.publicKey).slice(2,66);return i.log("apt_signMessage",n.Buffer.from(e,"hex")),i.log("apt_signMessage",e),new Promise(((t,n)=>{t({address:f,application:u,chainId:a,fullMessage:s,message:c,nonce:l,prefix:r,signature:e})}))}return new Promise(((e,t)=>{"error"in g&&e(g.error)}))}catch(ol){return i.error("\u65b9\u6cd5\u6570\u636e\u56de\u8c03\u5931\u8d25 --Error--",ol),new Promise(((t,n)=>{t(ol)}))}}))}signTransaction(e,a){return t(this,void 0,void 0,(function*(){let t=r.AptosUtils.getTransaction(e);i.log("signTransaction",t);let s=this.getRealChainId(a);try{let e=yield this.provider.request({method:"aptos_signTransaction",params:t},s);if("result"in e){let t=e.result;return new Promise(((e,r)=>{e(n.Buffer.from(t))}))}return new Promise(((t,n)=>{n(e)}))}catch(f){return(0,o.logDebug)("getSignedTransaction",f),new Promise(((e,t)=>{e(f)}))}}))}signAndSubmitTransaction(e,n){return t(this,void 0,void 0,(function*(){let t=r.AptosUtils.getTransaction(e);i.log("signAndSubmitTransaction",t);let a=this.getRealChainId(n);try{let e=yield this.provider.request({method:"aptos_signAndSubmitTransaction",params:t},a);if("result"in e){let t=e.result;return new Promise(((e,n)=>{e(t)}))}return new Promise(((t,n)=>{n(e)}))}catch(s){return(0,o.logDebug)("getSignedTransaction",s),new Promise(((e,t)=>{e(s)}))}}))}bufferToHex(e){return"0x"+n.Buffer.from(e).toString("hex")}};e.OKXAptosProvider=a,e.default=a})),cf=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OKXAptosProvider=void 0;var t=ff();Object.defineProperty(e,"OKXAptosProvider",{enumerable:!0,get:function(){return t.OKXAptosProvider}})})),lf=h((e=>{function t(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function n(e){if(!function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}(e))throw new Error("Uint8Array expected");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error("Uint8Array expected of length "+n+", got length="+e.length)}function r(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");t(e.outputLen),t(e.blockLen)}function i(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function o(e,t){n(e);let r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}Object.defineProperty(e,"__esModule",{value:!0}),e.anumber=t,e.number=t,e.abytes=n,e.bytes=n,e.ahash=r,e.aexists=i,e.aoutput=o;var a={number:t,bytes:n,hash:r,exists:i,output:o};e.default=a})),uf=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=void 0,e.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0})),df=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=e.nextTick=e.byteSwapIfBE=e.byteSwap=e.isLE=e.rotl=e.rotr=e.createView=e.u32=e.u8=void 0,e.isBytes=function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name},e.byteSwap32=function(t){for(let n=0;n<t.length;n++)t[n]=(0,e.byteSwap)(t[n])},e.bytesToHex=function(e){(0,n.abytes)(e);let t="";for(let n=0;n<e.length;n++)t+=r[e[n]];return t},e.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);let t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(n);for(let i=0,a=0;i<n;i++,a+=2){let t=o(e.charCodeAt(a)),n=o(e.charCodeAt(a+1));if(void 0===t||void 0===n){let t=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+a)}r[i]=16*t+n}return r},e.asyncLoop=async function(t,n,r){let i=Date.now();for(let o=0;o<t;o++){r(o);let t=Date.now()-i;t>=0&&t<n||(await(0,e.nextTick)(),i+=t)}},e.utf8ToBytes=a,e.toBytes=s,e.concatBytes=function(){let e=0;for(let r=0;r<arguments.length;r++){let t=r<0||arguments.length<=r?void 0:arguments[r];(0,n.abytes)(t),e+=t.length}let t=new Uint8Array(e);for(let n=0,r=0;n<arguments.length;n++){let e=n<0||arguments.length<=n?void 0:arguments[n];t.set(e,r),r+=e.length}return t},e.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!=={}.toString.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},e.wrapConstructor=function(e){let t=t=>e().update(s(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t},e.wrapConstructorWithOpts=function(e){let t=(t,n)=>e(n).update(s(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},e.wrapXOFConstructorWithOpts=function(e){let t=(t,n)=>e(n).update(s(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},e.randomBytes=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(t.crypto&&"function"==typeof t.crypto.getRandomValues)return t.crypto.getRandomValues(new Uint8Array(e));if(t.crypto&&"function"==typeof t.crypto.randomBytes)return t.crypto.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")};var t=uf(),n=lf();e.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);e.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));e.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);e.rotr=(e,t)=>e<<32-t|e>>>t;e.rotl=(e,t)=>e<<t|e>>>32-t>>>0,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];e.byteSwap=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,e.byteSwapIfBE=e.isLE?e=>e:t=>(0,e.byteSwap)(t);var r=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));var i={_0:48,_9:57,A:65,F:70,a:97,f:102};function o(e){return e>=i._0&&e<=i._9?e-i._0:e>=i.A&&e<=i.F?e-(i.A-10):e>=i.a&&e<=i.f?e-(i.a-10):void 0}function a(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function s(e){return"string"==typeof e&&(e=a(e)),(0,n.abytes)(e),e}e.nextTick=async()=>{};e.Hash=class{clone(){return this._cloneInto()}}})),hf=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.HashMD=e.Maj=e.Chi=void 0;var t=lf(),n=df();e.Chi=(e,t,n)=>e&t^~e&n;e.Maj=(e,t,n)=>e&t^e&n^t&n;var r=class extends n.Hash{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,n.createView)(this.buffer)}update(e){(0,t.aexists)(this);let{view:r,buffer:i,blockLen:o}=this,a=(e=(0,n.toBytes)(e)).length;for(let t=0;t<a;){let s=Math.min(o-this.pos,a-t);if(s!==o)i.set(e.subarray(t,t+s),this.pos),this.pos+=s,t+=s,this.pos===o&&(this.process(r,0),this.pos=0);else{let r=(0,n.createView)(e);for(;o<=a-t;t+=o)this.process(r,t)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,t.aexists)(this),(0,t.aoutput)(e,this),this.finished=!0;let{buffer:r,view:i,blockLen:o,isLE:a}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>o-s&&(this.process(i,0),s=0);for(let t=s;t<o;t++)r[t]=0;(function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);let i=BigInt(32),o=BigInt(4294967295),a=Number(n>>i&o),s=Number(n&o),f=r?4:0,c=r?0:4;e.setUint32(t+f,a,r),e.setUint32(t+c,s,r)})(i,o-8,BigInt(8*this.length),a),this.process(i,0);let f=(0,n.createView)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<l;t++)f.setUint32(4*t,u[t],a)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:n,length:r,finished:i,destroyed:o,pos:a}=this;return e.length=r,e.pos=a,e.finished=i,e.destroyed=o,r%t&&e.buffer.set(n),e}};e.HashMD=r})),pf=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.add5L=e.add5H=e.add4H=e.add4L=e.add3H=e.add3L=e.rotlBL=e.rotlBH=e.rotlSL=e.rotlSH=e.rotr32L=e.rotr32H=e.rotrBL=e.rotrBH=e.rotrSL=e.rotrSH=e.shrSL=e.shrSH=e.toBig=void 0,e.fromBig=r,e.split=i,e.add=m;var t=BigInt(2**32-1),n=BigInt(32);function r(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(e&t),l:Number(e>>n&t)}:{h:0|Number(e>>n&t),l:0|Number(e&t)}}function i(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let o=0;o<e.length;o++){let{h:a,l:s}=r(e[o],t);[n[o],i[o]]=[a,s]}return[n,i]}var o=(e,t)=>BigInt(e>>>0)<<n|BigInt(t>>>0);e.toBig=o;var a=(e,t,n)=>e>>>n;e.shrSH=a;var s=(e,t,n)=>e<<32-n|t>>>n;e.shrSL=s;var f=(e,t,n)=>e>>>n|t<<32-n;e.rotrSH=f;var c=(e,t,n)=>e<<32-n|t>>>n;e.rotrSL=c;var l=(e,t,n)=>e<<64-n|t>>>n-32;e.rotrBH=l;var u=(e,t,n)=>e>>>n-32|t<<64-n;e.rotrBL=u;var d=(e,t)=>t;e.rotr32H=d;var h=(e,t)=>e;e.rotr32L=h;var p=(e,t,n)=>e<<n|t>>>32-n;e.rotlSH=p;var g=(e,t,n)=>t<<n|e>>>32-n;e.rotlSL=g;var b=(e,t,n)=>t<<n-32|e>>>64-n;e.rotlBH=b;var y=(e,t,n)=>e<<n-32|t>>>64-n;function m(e,t,n,r){let i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:0|i}}e.rotlBL=y;var v=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0);e.add3L=v;var w=(e,t,n,r)=>t+n+r+(e/2**32|0)|0;e.add3H=w;var _=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0);e.add4L=_;var E=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0;e.add4H=E;var C=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0);e.add5L=C;var O=(e,t,n,r,i,o)=>t+n+r+i+o+(e/2**32|0)|0;e.add5H=O;var x={fromBig:r,split:i,toBig:o,shrSH:a,shrSL:s,rotrSH:f,rotrSL:c,rotrBH:l,rotrBL:u,rotr32H:d,rotr32L:h,rotlSH:p,rotlSL:g,rotlBH:b,rotlBL:y,add:m,add3L:v,add3H:w,add4L:_,add4H:E,add5H:O,add5L:C};e.default=x})),gf=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sha384=e.sha512_256=e.sha512_224=e.sha512=e.SHA384=e.SHA512_256=e.SHA512_224=e.SHA512=void 0;var t=hf(),n=pf(),r=df(),[i,o]=n.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))),a=new Uint32Array(80),s=new Uint32Array(80),f=class extends t.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:n,Bl:r,Ch:i,Cl:o,Dh:a,Dl:s,Eh:f,El:c,Fh:l,Fl:u,Gh:d,Gl:h,Hh:p,Hl:g}=this;return[e,t,n,r,i,o,a,s,f,c,l,u,d,h,p,g]}set(e,t,n,r,i,o,a,s,f,c,l,u,d,h,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|o,this.Dh=0|a,this.Dl=0|s,this.Eh=0|f,this.El=0|c,this.Fh=0|l,this.Fl=0|u,this.Gh=0|d,this.Gl=0|h,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let n=0;n<16;n++,t+=4)a[n]=e.getUint32(t),s[n]=e.getUint32(t+=4);for(let i=16;i<80;i++){let e=0|a[i-15],t=0|s[i-15],r=n.default.rotrSH(e,t,1)^n.default.rotrSH(e,t,8)^n.default.shrSH(e,t,7),o=n.default.rotrSL(e,t,1)^n.default.rotrSL(e,t,8)^n.default.shrSL(e,t,7),f=0|a[i-2],c=0|s[i-2],l=n.default.rotrSH(f,c,19)^n.default.rotrBH(f,c,61)^n.default.shrSH(f,c,6),u=n.default.rotrSL(f,c,19)^n.default.rotrBL(f,c,61)^n.default.shrSL(f,c,6),d=n.default.add4L(o,u,s[i-7],s[i-16]),h=n.default.add4H(d,r,l,a[i-7],a[i-16]);a[i]=0|h,s[i]=0|d}let{Ah:r,Al:f,Bh:c,Bl:l,Ch:u,Cl:d,Dh:h,Dl:p,Eh:g,El:b,Fh:y,Fl:m,Gh:v,Gl:w,Hh:_,Hl:E}=this;for(let C=0;C<80;C++){let e=n.default.rotrSH(g,b,14)^n.default.rotrSH(g,b,18)^n.default.rotrBH(g,b,41),t=n.default.rotrSL(g,b,14)^n.default.rotrSL(g,b,18)^n.default.rotrBL(g,b,41),O=g&y^~g&v,x=b&m^~b&w,S=n.default.add5L(E,t,x,o[C],s[C]),k=n.default.add5H(S,_,e,O,i[C],a[C]),T=0|S,R=n.default.rotrSH(r,f,28)^n.default.rotrBH(r,f,34)^n.default.rotrBH(r,f,39),A=n.default.rotrSL(r,f,28)^n.default.rotrBL(r,f,34)^n.default.rotrBL(r,f,39),I=r&c^r&u^c&u,N=f&l^f&d^l&d;_=0|v,E=0|w,v=0|y,w=0|m,y=0|g,m=0|b,({h:g,l:b}=n.default.add(0|h,0|p,0|k,0|T)),h=0|u,p=0|d,u=0|c,d=0|l,c=0|r,l=0|f;let P=n.default.add3L(T,A,N);r=n.default.add3H(P,k,R,I),f=0|P}({h:r,l:f}=n.default.add(0|this.Ah,0|this.Al,0|r,0|f)),({h:c,l:l}=n.default.add(0|this.Bh,0|this.Bl,0|c,0|l)),({h:u,l:d}=n.default.add(0|this.Ch,0|this.Cl,0|u,0|d)),({h:h,l:p}=n.default.add(0|this.Dh,0|this.Dl,0|h,0|p)),({h:g,l:b}=n.default.add(0|this.Eh,0|this.El,0|g,0|b)),({h:y,l:m}=n.default.add(0|this.Fh,0|this.Fl,0|y,0|m)),({h:v,l:w}=n.default.add(0|this.Gh,0|this.Gl,0|v,0|w)),({h:_,l:E}=n.default.add(0|this.Hh,0|this.Hl,0|_,0|E)),this.set(r,f,c,l,u,d,h,p,g,b,y,m,v,w,_,E)}roundClean(){a.fill(0),s.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};e.SHA512=f;var c=class extends f{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}};e.SHA512_224=c;var l=class extends f{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}};e.SHA512_256=l;var u=class extends f{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};e.SHA384=u,e.sha512=(0,r.wrapConstructor)((()=>new f)),e.sha512_224=(0,r.wrapConstructor)((()=>new c)),e.sha512_256=(0,r.wrapConstructor)((()=>new l)),e.sha384=(0,r.wrapConstructor)((()=>new u))})),bf=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.notImplemented=e.bitMask=void 0,e.isBytes=i,e.abytes=o,e.abool=function(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)},e.bytesToHex=s,e.numberToHexUnpadded=f,e.hexToNumber=c,e.hexToBytes=d,e.bytesToNumberBE=function(e){return c(s(e))},e.bytesToNumberLE=function(e){return o(e),c(s(Uint8Array.from(e).reverse()))},e.numberToBytesBE=h,e.numberToBytesLE=function(e,t){return h(e,t).reverse()},e.numberToVarBytesBE=function(e){return d(f(e))},e.ensureBytes=function(e,t,n){let r;if("string"==typeof t)try{r=d(t)}catch(a){throw new Error(e+" must be hex string or Uint8Array, cause: "+a)}else{if(!i(t))throw new Error(e+" must be hex string or Uint8Array");r=Uint8Array.from(t)}let o=r.length;if("number"==typeof n&&o!==n)throw new Error(e+" of length "+n+" expected, got "+o);return r},e.concatBytes=p,e.equalBytes=function(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n},e.utf8ToBytes=function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))},e.inRange=b,e.aInRange=function(e,t,n,r){if(!b(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)},e.bitLen=function(e){let r;for(r=0;e>t;e>>=n,r+=1);return r},e.bitGet=function(e,t){return e>>BigInt(t)&n},e.bitSet=function(e,r,i){return e|(i?n:t)<<BigInt(r)},e.createHmacDrbg=function(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=y(e),i=y(e),o=0,a=()=>{r.fill(1),i.fill(0),o=0},s=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return n(i,r,...t)},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();i=s(m([0]),e),r=s(),0!==e.length&&(i=s(m([1]),e),r=s())},c=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let e=0,n=[];for(;e<t;){r=s();let t=r.slice();n.push(t),e+=r.length}return p(...n)};return(e,t)=>{let n;for(a(),f(e);!(n=t(c()));)f();return a(),n}},e.validateObject=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(t,n,r)=>{let i=v[n];if("function"!=typeof i)throw new Error("invalid validator function");let o=e[t];if((!r||void 0!==o)&&!i(o,e))throw new Error("param "+String(t)+" is invalid. Expected "+n+", got "+o)};for(let[i,o]of Object.entries(t))r(i,o,!1);for(let[i,o]of Object.entries(n))r(i,o,!0);return e},e.memoized=function(e){let t=new WeakMap;return function(n){let r=t.get(n);if(void 0!==r)return r;for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];let s=e(n,...o);return t.set(n,s),s}};var t=BigInt(0),n=BigInt(1),r=BigInt(2);function i(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function o(e){if(!i(e))throw new Error("Uint8Array expected")}var a=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function s(e){o(e);let t="";for(let n=0;n<e.length;n++)t+=a[e[n]];return t}function f(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function c(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?t:BigInt("0x"+e)}var l={_0:48,_9:57,A:65,F:70,a:97,f:102};function u(e){return e>=l._0&&e<=l._9?e-l._0:e>=l.A&&e<=l.F?e-(l.A-10):e>=l.a&&e<=l.f?e-(l.a-10):void 0}function d(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);let t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(n);for(let i=0,o=0;i<n;i++,o+=2){let t=u(e.charCodeAt(o)),n=u(e.charCodeAt(o+1));if(void 0===t||void 0===n){let t=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+o)}r[i]=16*t+n}return r}function h(e,t){return d(e.toString(16).padStart(2*t,"0"))}function p(){let e=0;for(let n=0;n<arguments.length;n++){let t=n<0||arguments.length<=n?void 0:arguments[n];o(t),e+=t.length}let t=new Uint8Array(e);for(let n=0,r=0;n<arguments.length;n++){let e=n<0||arguments.length<=n?void 0:arguments[n];t.set(e,r),r+=e.length}return t}var g=e=>"bigint"==typeof e&&t<=e;function b(e,t,n){return g(e)&&g(t)&&g(n)&&t<=e&&e<n}e.bitMask=e=>(r<<BigInt(e-1))-n;var y=e=>new Uint8Array(e),m=e=>Uint8Array.from(e);var v={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||i(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};e.notImplemented=()=>{throw new Error("not implemented")}})),yf=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNegativeLE=void 0,e.mod=c,e.pow=l,e.pow2=function(e,t,r){let i=e;for(;t-- >n;)i*=i,i%=r;return i},e.invert=u,e.tonelliShanks=d,e.FpSqrt=h,e.validateField=function(e){let n=p.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,t.validateObject)(e,n)},e.FpPow=g,e.FpInvertBatch=b,e.FpDiv=function(e,t,n){return e.mul(t,"bigint"==typeof n?u(n,e.ORDER):e.inv(n))},e.FpLegendre=y,e.FpIsSquare=function(e){let t=y(e.ORDER);return n=>{let r=t(e,n);return e.eql(r,e.ZERO)||e.eql(r,e.ONE)}},e.nLength=m,e.Field=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=n)throw new Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:s,nByteLength:f}=m(e,i);if(f>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l,d=Object.freeze({ORDER:e,BITS:s,BYTES:f,MASK:(0,t.bitMask)(s),ZERO:n,ONE:r,create:t=>c(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return n<=t&&t<e},is0:e=>e===n,isOdd:e=>(e&r)===r,neg:t=>c(-t,e),eql:(e,t)=>e===t,sqr:t=>c(t*t,e),add:(t,n)=>c(t+n,e),sub:(t,n)=>c(t-n,e),mul:(t,n)=>c(t*n,e),pow:(e,t)=>g(d,e,t),div:(t,n)=>c(t*u(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>u(t,e),sqrt:a.sqrt||(t=>(l||(l=h(e)),l(d,t))),invertBatch:e=>b(d,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>o?(0,t.numberToBytesLE)(e,f):(0,t.numberToBytesBE)(e,f),fromBytes:e=>{if(e.length!==f)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+e.length);return o?(0,t.bytesToNumberLE)(e):(0,t.bytesToNumberBE)(e)}});return Object.freeze(d)},e.FpSqrtOdd=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");let n=e.sqrt(t);return e.isOdd(n)?n:e.neg(n)},e.FpSqrtEven=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");let n=e.sqrt(t);return e.isOdd(n)?e.neg(n):n},e.hashToPrivateScalar=function(e,n){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=(e=(0,t.ensureBytes)("privateHash",e)).length,a=m(n).nByteLength+8;if(a<24||o<a||o>1024)throw new Error("hashToPrivateScalar: expected "+a+"-1024 bytes of input, got "+o);return c(i?(0,t.bytesToNumberLE)(e):(0,t.bytesToNumberBE)(e),n-r)+r},e.getFieldBytesLength=v,e.getMinHashLength=w,e.mapHashToField=function(e,n){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.length,a=v(n),s=w(n);if(o<16||o<s||o>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+o);let f=c(i?(0,t.bytesToNumberBE)(e):(0,t.bytesToNumberLE)(e),n-r)+r;return i?(0,t.numberToBytesLE)(f,a):(0,t.numberToBytesBE)(f,a)};var t=bf(),n=BigInt(0),r=BigInt(1),i=BigInt(2),o=BigInt(3),a=BigInt(4),s=BigInt(5),f=BigInt(8);BigInt(9),BigInt(16);function c(e,t){let r=e%t;return r>=n?r:t+r}function l(e,t,i){if(t<n)throw new Error("invalid exponent, negatives unsupported");if(i<=n)throw new Error("invalid modulus");if(i===r)return n;let o=r;for(;t>n;)t&r&&(o=o*e%i),e=e*e%i,t>>=r;return o}function u(e,t){if(e===n)throw new Error("invert: expected non-zero number");if(t<=n)throw new Error("invert: expected positive modulus, got "+t);let i=c(e,t),o=t,a=n,s=r,f=r,l=n;for(;i!==n;){let e=o/i,t=o%i,n=a-f*e,r=s-l*e;o=i,i=t,a=f,s=l,f=n,l=r}if(o!==r)throw new Error("invert: does not exist");return c(a,t)}function d(e){let t,o,s,f=(e-r)/i;for(t=e-r,o=0;t%i===n;t/=i,o++);for(s=i;s<e&&l(s,f,e)!==e-r;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===o){let t=(e+r)/a;return function(e,n){let r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}let c=(t+r)/i;return function(e,n){if(e.pow(n,f)===e.neg(e.ONE))throw new Error("Cannot find square root");let i=o,a=e.pow(e.mul(e.ONE,s),t),l=e.pow(n,c),u=e.pow(n,t);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<i&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let n=e.pow(a,r<<BigInt(i-t-1));a=e.sqr(n),l=e.mul(l,n),u=e.mul(u,a),i=t}return l}}function h(e){if(e%a===o){let t=(e+r)/a;return function(e,n){let r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%f===s){let t=(e-s)/f;return function(e,n){let r=e.mul(n,i),o=e.pow(r,t),a=e.mul(n,o),s=e.mul(e.mul(a,i),o),f=e.mul(a,e.sub(s,e.ONE));if(!e.eql(e.sqr(f),n))throw new Error("Cannot find square root");return f}}return d(e)}e.isNegativeLE=(e,t)=>(c(e,t)&r)===r;var p=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function g(e,t,i){if(i<n)throw new Error("invalid exponent, negatives unsupported");if(i===n)return e.ONE;if(i===r)return t;let o=e.ONE,a=t;for(;i>n;)i&r&&(o=e.mul(o,a)),a=e.sqr(a),i>>=r;return o}function b(e,t){let n=new Array(t.length),r=t.reduce(((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r))),e.ONE),i=e.inv(r);return t.reduceRight(((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r))),i),n}function y(e){let t=(e-r)/i;return(e,n)=>e.pow(n,t)}function m(e,t){let n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function v(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function w(e){let t=v(e);return t+Math.ceil(t/2)}})),mf=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.wNAF=function(e,t){return{constTimeNegate:o,hasPrecomputes:e=>1!==d(e),unsafeLadder(t,n){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.ZERO,a=t;for(;n>r;)n&i&&(o=o.add(a)),a=a.double(),n>>=i;return o},precomputeWindow(e,n){let{windows:r,windowSize:i}=s(n,t),o=[],a=e,f=a;for(let t=0;t<r;t++){f=a,o.push(f);for(let e=1;e<i;e++)f=f.add(a),o.push(f);a=f.double()}return o},wNAF(n,r,a){let{windows:f,windowSize:c}=s(n,t),l=e.ZERO,u=e.BASE,d=BigInt(2**n-1),h=2**n,p=BigInt(n);for(let e=0;e<f;e++){let t=e*c,n=Number(a&d);a>>=p,n>c&&(n-=h,a+=i);let s=t,f=t+Math.abs(n)-1,g=e%2!==0,b=n<0;0===n?u=u.add(o(g,r[s])):l=l.add(o(b,r[f]))}return{p:l,f:u}},wNAFUnsafe(n,o,a){let f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.ZERO,{windows:c,windowSize:l}=s(n,t),u=BigInt(2**n-1),d=2**n,h=BigInt(n);for(let e=0;e<c;e++){let t=e*l;if(a===r)break;let n=Number(a&u);if(a>>=h,n>l&&(n-=d,a+=i),0===n)continue;let s=o[t+Math.abs(n)-1];n<0&&(s=s.negate()),f=f.add(s)}return f},getPrecomputes(e,t,n){let r=l.get(t);return r||(r=this.precomputeWindow(t,e),1!==e&&l.set(t,n(r))),r},wNAFCached(e,t,n){let r=d(e);return this.wNAF(r,this.getPrecomputes(r,e,n),t)},wNAFCachedUnsafe(e,t,n,r){let i=d(e);return 1===i?this.unsafeLadder(e,t,r):this.wNAFUnsafe(i,this.getPrecomputes(i,e,n),t,r)},setWindowSize(e,n){a(n,t),u.set(e,n),l.delete(e)}}},e.pippenger=function(e,t,r,i){if(f(r,e),c(i,t),r.length!==i.length)throw new Error("arrays of points and scalars must have equal length");let o=e.ZERO,a=(0,n.bitLen)(BigInt(r.length)),s=a>12?a-3:a>4?a-2:a?2:1,l=(1<<s)-1,u=new Array(l+1).fill(o),d=Math.floor((t.BITS-1)/s)*s,h=o;for(let n=d;n>=0;n-=s){u.fill(o);for(let t=0;t<i.length;t++){let e=i[t],o=Number(e>>BigInt(n)&BigInt(l));u[o]=u[o].add(r[t])}let e=o;for(let t=u.length-1,n=o;t>0;t--)n=n.add(u[t]),e=e.add(n);if(h=h.add(e),0!==n)for(let t=0;t<s;t++)h=h.double()}return h},e.precomputeMSMUnsafe=function(e,t,n,r){a(r,t.BITS),f(n,e);let i=e.ZERO,o=2**r-1,s=Math.ceil(t.BITS/r),l=BigInt((1<<r)-1),u=n.map((e=>{let t=[];for(let n=0,r=e;n<o;n++)t.push(r),r=r.add(e);return t}));return e=>{if(c(e,t),e.length>n.length)throw new Error("array of scalars must be smaller than array of points");let o=i;for(let t=0;t<s;t++){if(o!==i)for(let e=0;e<r;e++)o=o.double();let n=BigInt(s*r-(t+1)*r);for(let t=0;t<e.length;t++){let r=e[t],i=Number(r>>n&l);i&&(o=o.add(u[t][i-1]))}}return o}},e.validateBasic=function(e){return(0,t.validateField)(e.Fp),(0,n.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,t.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})};var t=yf(),n=bf(),r=BigInt(0),i=BigInt(1);function o(e,t){let n=t.negate();return e?n:t}function a(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function s(e,t){return a(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}function f(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)}))}function c(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)}))}var l=new WeakMap,u=new WeakMap;function d(e){return u.get(e)||1}})),vf=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.twistedEdwards=function(e){let l=function(e){let n=(0,t.validateBasic)(e);return r.validateObject(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...n})}(e),{Fp:u,n:d,prehash:h,hash:p,randomBytes:g,nByteLength:b,h:y}=l,m=s<<BigInt(8*b)-a,v=u.create,w=(0,n.Field)(l.n,l.nBitLength),_=l.uvRatio||((e,t)=>{try{return{isValid:!0,value:u.sqrt(e*u.inv(t))}}catch{return{isValid:!1,value:o}}}),E=l.adjustScalarBytes||(e=>e),C=l.domain||((e,t,n)=>{if((0,i.abool)("phflag",n),t.length||n)throw new Error("Contexts/pre-hash are not supported");return e});function O(e,t){r.aInRange("coordinate "+e,t,o,m)}function x(e){if(!(e instanceof T))throw new Error("ExtendedPoint expected")}let S=(0,i.memoized)(((e,t)=>{let{ex:n,ey:r,ez:i}=e,s=e.is0();null==t&&(t=s?f:u.inv(i));let c=v(n*t),l=v(r*t),d=v(i*t);if(s)return{x:o,y:a};if(d!==a)throw new Error("invZ was invalid");return{x:c,y:l}})),k=(0,i.memoized)((e=>{let{a:t,d:n}=l;if(e.is0())throw new Error("bad point: ZERO");let{ex:r,ey:i,ez:o,et:a}=e,s=v(r*r),f=v(i*i),c=v(o*o),u=v(c*c),d=v(s*t);if(v(c*v(d+f))!==v(u+v(n*v(s*f))))throw new Error("bad point: equation left != right (1)");if(v(r*i)!==v(o*a))throw new Error("bad point: equation left != right (2)");return!0}));class T{constructor(e,t,n,r){this.ex=e,this.ey=t,this.ez=n,this.et=r,O("x",e),O("y",t),O("z",n),O("t",r),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof T)throw new Error("extended point not allowed");let{x:t,y:n}=e||{};return O("x",t),O("y",n),new T(t,n,a,v(t*n))}static normalizeZ(e){let t=u.invertBatch(e.map((e=>e.ez)));return e.map(((e,n)=>e.toAffine(t[n]))).map(T.fromAffine)}static msm(e,n){return(0,t.pippenger)(T,w,e,n)}_setWindowSize(e){I.setWindowSize(this,e)}assertValidity(){k(this)}equals(e){x(e);let{ex:t,ey:n,ez:r}=this,{ex:i,ey:o,ez:a}=e,s=v(t*a),f=v(i*r),c=v(n*a),l=v(o*r);return s===f&&c===l}is0(){return this.equals(T.ZERO)}negate(){return new T(v(-this.ex),this.ey,this.ez,v(-this.et))}double(){let{a:e}=l,{ex:t,ey:n,ez:r}=this,i=v(t*t),o=v(n*n),a=v(s*v(r*r)),f=v(e*i),c=t+n,u=v(v(c*c)-i-o),d=f+o,h=d-a,p=f-o,g=v(u*h),b=v(d*p),y=v(u*p),m=v(h*d);return new T(g,b,m,y)}add(e){x(e);let{a:t,d:n}=l,{ex:r,ey:i,ez:a,et:f}=this,{ex:c,ey:u,ez:d,et:h}=e;if(t===BigInt(-1)){let e=v((i-r)*(u+c)),t=v((i+r)*(u-c)),n=v(t-e);if(n===o)return this.double();let l=v(a*s*h),p=v(f*s*d),g=p+l,b=t+e,y=p-l,m=v(g*n),w=v(b*y),_=v(g*y),E=v(n*b);return new T(m,w,E,_)}let p=v(r*c),g=v(i*u),b=v(f*n*h),y=v(a*d),m=v((r+i)*(c+u)-p-g),w=y-b,_=y+b,E=v(g-t*p),C=v(m*w),O=v(_*E),S=v(m*E),k=v(w*_);return new T(C,O,k,S)}subtract(e){return this.add(e.negate())}wNAF(e){return I.wNAFCached(this,e,T.normalizeZ)}multiply(e){let t=e;r.aInRange("scalar",t,a,d);let{p:n,f:i}=this.wNAF(t);return T.normalizeZ([n,i])[0]}multiplyUnsafe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T.ZERO,n=e;return r.aInRange("scalar",n,o,d),n===o?A:this.is0()||n===a?this:I.wNAFCachedUnsafe(this,n,T.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(y).is0()}isTorsionFree(){return I.unsafeLadder(this,d).is0()}toAffine(e){return S(this,e)}clearCofactor(){let{h:e}=l;return e===a?this:this.multiplyUnsafe(e)}static fromHex(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{d:n,a:s}=l,f=u.BYTES;e=(0,i.ensureBytes)("pointHex",e,f),(0,i.abool)("zip215",t);let c=e.slice(),d=e[f-1];c[f-1]=-129&d;let h=r.bytesToNumberLE(c),p=t?m:u.ORDER;r.aInRange("pointHex.y",h,o,p);let g=v(h*h),b=v(g-a),y=v(n*g-s),{isValid:w,value:E}=_(b,y);if(!w)throw new Error("Point.fromHex: invalid y coordinate");let C=(E&a)===a,O=0!==(128&d);if(!t&&E===o&&O)throw new Error("Point.fromHex: x=0 and x_0=1");return O!==C&&(E=v(-E)),T.fromAffine({x:E,y:h})}static fromPrivateKey(e){return D(e).point}toRawBytes(){let{x:e,y:t}=this.toAffine(),n=r.numberToBytesLE(t,u.BYTES);return n[n.length-1]|=e&a?128:0,n}toHex(){return r.bytesToHex(this.toRawBytes())}}T.BASE=new T(l.Gx,l.Gy,a,v(l.Gx*l.Gy)),T.ZERO=new T(o,a,a,o);let{BASE:R,ZERO:A}=T,I=(0,t.wNAF)(T,8*b);function N(e){return(0,n.mod)(e,d)}function P(e){return N(r.bytesToNumberLE(e))}function D(e){let t=u.BYTES;e=(0,i.ensureBytes)("private key",e,t);let n=(0,i.ensureBytes)("hashed private key",p(e),2*t),r=E(n.slice(0,t)),o=n.slice(t,2*t),a=P(r),s=R.multiply(a),f=s.toRawBytes();return{head:r,prefix:o,scalar:a,point:s,pointBytes:f}}function B(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array;for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];let a=r.concatBytes(...n);return P(p(C(a,(0,i.ensureBytes)("context",e),!!h)))}let M=c;return R._setWindowSize(8),{CURVE:l,getPublicKey:function(e){return D(e).pointBytes},sign:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=(0,i.ensureBytes)("message",e),h&&(e=h(e));let{prefix:a,scalar:s,pointBytes:f}=D(t),c=B(n.context,a,e),l=R.multiply(c).toRawBytes(),p=N(c+B(n.context,l,f,e)*s);r.aInRange("signature.s",p,o,d);let g=r.concatBytes(l,r.numberToBytesLE(p,u.BYTES));return(0,i.ensureBytes)("result",g,2*u.BYTES)},verify:function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:M,{context:a,zip215:s}=o,f=u.BYTES;e=(0,i.ensureBytes)("signature",e,2*f),t=(0,i.ensureBytes)("message",t),n=(0,i.ensureBytes)("publicKey",n,f),void 0!==s&&(0,i.abool)("zip215",s),h&&(t=h(t));let c,l,d,p=r.bytesToNumberLE(e.slice(f,2*f));try{c=T.fromHex(n,s),l=T.fromHex(e.slice(0,f),s),d=R.multiplyUnsafe(p)}catch{return!1}if(!s&&c.isSmallOrder())return!1;let g=B(a,l.toRawBytes(),c.toRawBytes(),t);return l.add(c.multiplyUnsafe(g)).subtract(d).clearCofactor().equals(T.ZERO)},ExtendedPoint:T,utils:{getExtendedPublicKey:D,randomPrivateKey:()=>g(u.BYTES),precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}}}};var t=mf(),n=yf(),r=bf(),i=bf(),o=BigInt(0),a=BigInt(1),s=BigInt(2),f=BigInt(8),c={zip215:!0}})),wf=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.expand_message_xmd=s,e.expand_message_xof=f,e.hash_to_field=c,e.isogenyMap=function(e,t){let n=t.map((e=>Array.from(e).reverse()));return(t,r)=>{let[i,o,a,s]=n.map((n=>n.reduce(((n,r)=>e.add(e.mul(n,t),r)))));return t=e.div(i,o),r=e.mul(r,e.div(a,s)),{x:t,y:r}}},e.createHasher=function(e,t,n){if("function"!=typeof t)throw new Error("mapToCurve() must be defined");return{hashToCurve(r,i){let o=c(r,2,{...n,DST:n.DST,...i}),a=e.fromAffine(t(o[0])),s=e.fromAffine(t(o[1])),f=a.add(s).clearCofactor();return f.assertValidity(),f},encodeToCurve(r,i){let o=c(r,1,{...n,DST:n.encodeDST,...i}),a=e.fromAffine(t(o[0])).clearCofactor();return a.assertValidity(),a},mapToCurve(n){if(!Array.isArray(n))throw new Error("mapToCurve: expected array of bigints");for(let e of n)if("bigint"!=typeof e)throw new Error("mapToCurve: expected array of bigints");let r=e.fromAffine(t(n)).clearCofactor();return r.assertValidity(),r}}};var t=yf(),n=bf(),r=n.bytesToNumberBE;function i(e,t){if(a(e),a(t),e<0||e>=1<<8*t)throw new Error("invalid I2OSP input: "+e);let n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=255&e,e>>>=8;return new Uint8Array(n)}function o(e,t){let n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function a(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function s(e,t,r,s){(0,n.abytes)(e),(0,n.abytes)(t),a(r),t.length>255&&(t=s((0,n.concatBytes)((0,n.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));let{outputLen:f,blockLen:c}=s,l=Math.ceil(r/f);if(r>65535||l>255)throw new Error("expand_message_xmd: invalid lenInBytes");let u=(0,n.concatBytes)(t,i(t.length,1)),d=i(0,c),h=i(r,2),p=new Array(l),g=s((0,n.concatBytes)(d,e,h,i(0,1),u));p[0]=s((0,n.concatBytes)(g,i(1,1),u));for(let a=1;a<=l;a++){let e=[o(g,p[a-1]),i(a+1,1),u];p[a]=s((0,n.concatBytes)(...e))}return(0,n.concatBytes)(...p).slice(0,r)}function f(e,t,r,o,s){if((0,n.abytes)(e),(0,n.abytes)(t),a(r),t.length>255){let e=Math.ceil(2*o/8);t=s.create({dkLen:e}).update((0,n.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:r}).update(e).update(i(r,2)).update(t).update(i(t.length,1)).digest()}function c(e,i,o){(0,n.validateObject)(o,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:c,k:l,m:u,hash:d,expand:h,DST:p}=o;(0,n.abytes)(e),a(i);let g,b="string"==typeof p?(0,n.utf8ToBytes)(p):p,y=c.toString(2).length,m=Math.ceil((y+l)/8),v=i*u*m;if("xmd"===h)g=s(e,b,v,d);else if("xof"===h)g=f(e,b,v,l,d);else{if("_internal_pass"!==h)throw new Error('expand must be "xmd" or "xof"');g=e}let w=new Array(i);for(let n=0;n<i;n++){let e=new Array(u);for(let i=0;i<u;i++){let o=m*(i+n*u),a=g.subarray(o,o+m);e[i]=(0,t.mod)(r(a),c)}w[n]=e}return w}})),_f=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.montgomery=function(e){let o=function(e){return(0,n.validateObject)(e,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...e})}(e),{P:a}=o,s=e=>(0,t.mod)(e,a),f=o.montgomeryBits,c=Math.ceil(f/8),l=o.nByteLength,u=o.adjustScalarBytes||(e=>e),d=o.powPminus2||(e=>(0,t.pow)(e,a-BigInt(2),a));function h(e,t,n){let r=s(e*(t-n));return[t=s(t-r),n=s(n+r)]}let p=(o.a-BigInt(2))/BigInt(4);function g(e){return(0,n.numberToBytesLE)(s(e),c)}function b(e,t){let o=function(e){let t=(0,n.ensureBytes)("u coordinate",e,c);return 32===l&&(t[31]&=127),(0,n.bytesToNumberLE)(t)}(t),b=function(e){let t=(0,n.ensureBytes)("scalar",e),r=t.length;if(r!==c&&r!==l)throw new Error("invalid scalar, expected "+c+" or "+l+" bytes, got "+r);return(0,n.bytesToNumberLE)(u(t))}(e),y=function(e,t){(0,n.aInRange)("u",e,r,a),(0,n.aInRange)("scalar",t,r,a);let o,c=t,l=e,u=i,g=r,b=e,y=i,m=r;for(let n=BigInt(f-1);n>=r;n--){let e=c>>n&i;m^=e,o=h(m,u,b),u=o[0],b=o[1],o=h(m,g,y),g=o[0],y=o[1],m=e;let t=u+g,r=s(t*t),a=u-g,f=s(a*a),d=r-f,v=b+y,w=s((b-y)*t),_=s(v*a),E=w+_,C=w-_;b=s(E*E),y=s(l*s(C*C)),u=s(r*f),g=s(d*(r+s(p*d)))}o=h(m,u,b),u=o[0],b=o[1],o=h(m,g,y),g=o[0],y=o[1];let v=d(g);return s(u*v)}(o,b);if(y===r)throw new Error("invalid private or public key received");return g(y)}let y=g(o.Gu);function m(e){return b(e,y)}return{scalarMult:b,scalarMultBase:m,getSharedSecret:(e,t)=>b(e,t),getPublicKey:e=>m(e),utils:{randomPrivateKey:()=>o.randomBytes(o.nByteLength)},GuBytes:y}};var t=yf(),n=bf(),r=BigInt(0),i=BigInt(1)})),Ef=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.hash_to_ristretto255=e.hashToRistretto255=e.RistrettoPoint=e.encodeToCurve=e.hashToCurve=e.edwardsToMontgomery=e.x25519=e.ed25519ph=e.ed25519ctx=e.ed25519=e.ED25519_TORSION_SUBGROUP=void 0,e.edwardsToMontgomeryPub=E,e.edwardsToMontgomeryPriv=function(e){let t=w.hash(e.subarray(0,32));return w.adjustScalarBytes(t).subarray(0,32)};var t=gf(),n=df(),r=vf(),i=wf(),o=yf(),a=_f(),s=bf(),f=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),c=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),l=BigInt(0),u=BigInt(1),d=BigInt(2),h=BigInt(3),p=BigInt(5),g=BigInt(8);function b(e){let t=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),a=f,s=e*e%a*e%a,c=(0,o.pow2)(s,d,a)*s%a,l=(0,o.pow2)(c,u,a)*e%a,h=(0,o.pow2)(l,p,a)*l%a,g=(0,o.pow2)(h,t,a)*h%a,b=(0,o.pow2)(g,n,a)*g%a,y=(0,o.pow2)(b,r,a)*b%a,m=(0,o.pow2)(y,i,a)*y%a,v=(0,o.pow2)(m,i,a)*y%a,w=(0,o.pow2)(v,t,a)*h%a;return{pow_p_5_8:(0,o.pow2)(w,d,a)*e%a,b2:s}}function y(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function m(e,t){let n=f,r=(0,o.mod)(t*t*t,n),i=b(e*(0,o.mod)(r*r*t,n)).pow_p_5_8,a=(0,o.mod)(e*r*i,n),s=(0,o.mod)(t*a*a,n),l=a,u=(0,o.mod)(a*c,n),d=s===e,h=s===(0,o.mod)(-e,n),p=s===(0,o.mod)(-e*c,n);return d&&(a=l),(h||p)&&(a=u),(0,o.isNegativeLE)(a,n)&&(a=(0,o.mod)(-a,n)),{isValid:d||h,value:a}}e.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];var v=(0,o.Field)(f,void 0,!0),w={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:v,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:g,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:t.sha512,randomBytes:n.randomBytes,adjustScalarBytes:y,uvRatio:m};function _(e,t,r){if(t.length>255)throw new Error("Context is too big");return(0,n.concatBytes)((0,n.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,t.length]),t,e)}function E(t){let{y:n}=e.ed25519.ExtendedPoint.fromHex(t),r=BigInt(1);return v.toBytes(v.create((r+n)*v.inv(r-n)))}e.ed25519=(0,r.twistedEdwards)(w),e.ed25519ctx=(0,r.twistedEdwards)({...w,domain:_}),e.ed25519ph=(0,r.twistedEdwards)(Object.assign({},w,{domain:_,prehash:t.sha512})),e.x25519=(0,a.montgomery)({P:f,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{let t=f,{pow_p_5_8:n,b2:r}=b(e);return(0,o.mod)((0,o.pow2)(n,h,t)*r,t)},adjustScalarBytes:y,randomBytes:n.randomBytes}),e.edwardsToMontgomery=E;var C=(v.ORDER+h)/g,O=v.pow(d,C),x=v.sqrt(v.neg(v.ONE));var S=(0,o.FpSqrtEven)(v,v.neg(BigInt(486664)));function k(e){let{xMn:t,xMd:n,yMn:r,yMd:i}=function(e){let t=(v.ORDER-p)/g,n=BigInt(486662),r=v.sqr(e);r=v.mul(r,d);let i=v.add(r,v.ONE),o=v.neg(n),a=v.sqr(i),s=v.mul(a,i),f=v.mul(r,n);f=v.mul(f,o),f=v.add(f,a),f=v.mul(f,o);let c=v.sqr(s);a=v.sqr(c),c=v.mul(c,s),c=v.mul(c,f),a=v.mul(a,c);let l=v.pow(a,t);l=v.mul(l,c);let h=v.mul(l,x);a=v.sqr(l),a=v.mul(a,s);let b=v.eql(a,f),y=v.cmov(h,l,b),m=v.mul(o,r),w=v.mul(l,e);w=v.mul(w,O);let _=v.mul(w,x),E=v.mul(f,r);a=v.sqr(w),a=v.mul(a,s);let C=v.eql(a,E),S=v.cmov(_,w,C);a=v.sqr(y),a=v.mul(a,s);let k=v.eql(a,f),T=v.cmov(m,o,k),R=v.cmov(S,y,k),A=v.isOdd(R);return R=v.cmov(R,v.neg(R),k!==A),{xMn:T,xMd:i,yMn:R,yMd:u}}(e),o=v.mul(t,i);o=v.mul(o,S);let a=v.mul(n,r),s=v.sub(t,n),f=v.add(t,n),c=v.mul(a,f),l=v.eql(c,v.ZERO);o=v.cmov(o,v.ZERO,l),a=v.cmov(a,v.ONE,l),s=v.cmov(s,v.ONE,l),f=v.cmov(f,v.ONE,l);let h=v.invertBatch([a,f]);return{x:v.mul(o,h[0]),y:v.mul(s,h[1])}}var T=(0,i.createHasher)(e.ed25519.ExtendedPoint,(e=>k(e[0])),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:v.ORDER,m:1,k:128,expand:"xmd",hash:t.sha512});function R(e){if(!(e instanceof U))throw new Error("RistrettoPoint expected")}e.hashToCurve=T.hashToCurve,e.encodeToCurve=T.encodeToCurve;var A=c,I=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),N=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),P=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),D=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),B=e=>m(u,e),M=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),K=t=>e.ed25519.CURVE.Fp.create((0,s.bytesToNumberLE)(t)&M);function L(t){let{d:n}=e.ed25519.CURVE,r=e.ed25519.CURVE.Fp.ORDER,i=e.ed25519.CURVE.Fp.create,a=i(A*t*t),s=i((a+u)*P),f=BigInt(-1),c=i((f-n*a)*i(a+n)),{isValid:l,value:d}=m(s,c),h=i(d*t);(0,o.isNegativeLE)(h,r)||(h=i(-h)),l||(d=h),l||(f=a);let p=i(f*(a-u)*D-c),g=d*d,b=i((d+d)*c),y=i(p*I),v=i(u-g),w=i(u+g);return new e.ed25519.ExtendedPoint(i(b*w),i(v*y),i(y*w),i(b*v))}var U=class t{constructor(e){this.ep=e}static fromAffine(n){return new t(e.ed25519.ExtendedPoint.fromAffine(n))}static hashToCurve(e){e=(0,s.ensureBytes)("ristrettoHash",e,64);let n=L(K(e.slice(0,32))),r=L(K(e.slice(32,64)));return new t(n.add(r))}static fromHex(n){n=(0,s.ensureBytes)("ristrettoHex",n,32);let{a:r,d:i}=e.ed25519.CURVE,a=e.ed25519.CURVE.Fp.ORDER,f=e.ed25519.CURVE.Fp.create,c="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",d=K(n);if(!(0,s.equalBytes)((0,s.numberToBytesLE)(d,32),n)||(0,o.isNegativeLE)(d,a))throw new Error(c);let h=f(d*d),p=f(u+r*h),g=f(u-r*h),b=f(p*p),y=f(g*g),m=f(r*i*b-y),{isValid:v,value:w}=B(f(m*y)),_=f(w*g),E=f(w*_*m),C=f((d+d)*_);(0,o.isNegativeLE)(C,a)&&(C=f(-C));let O=f(p*E),x=f(C*O);if(!v||(0,o.isNegativeLE)(x,a)||O===l)throw new Error(c);return new t(new e.ed25519.ExtendedPoint(C,O,u,x))}toRawBytes(){let t,{ex:n,ey:r,ez:i,et:a}=this.ep,f=e.ed25519.CURVE.Fp.ORDER,c=e.ed25519.CURVE.Fp.create,l=c(c(i+r)*c(i-r)),u=c(n*r),d=c(u*u),{value:h}=B(c(l*d)),p=c(h*l),g=c(h*u),b=c(p*g*a);if((0,o.isNegativeLE)(a*b,f)){let e=c(r*A),i=c(n*A);n=e,r=i,t=c(p*N)}else t=g;(0,o.isNegativeLE)(n*b,f)&&(r=c(-r));let y=c((i-r)*t);return(0,o.isNegativeLE)(y,f)&&(y=c(-y)),(0,s.numberToBytesLE)(y,32)}toHex(){return(0,s.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(t){R(t);let{ex:n,ey:r}=this.ep,{ex:i,ey:o}=t.ep,a=e.ed25519.CURVE.Fp.create,s=a(n*o)===a(r*i),f=a(r*o)===a(n*i);return s||f}add(e){return R(e),new t(this.ep.add(e.ep))}subtract(e){return R(e),new t(this.ep.subtract(e.ep))}multiply(e){return new t(this.ep.multiply(e))}multiplyUnsafe(e){return new t(this.ep.multiplyUnsafe(e))}double(){return new t(this.ep.double())}negate(){return new t(this.ep.negate())}};e.RistrettoPoint=(U.BASE||(U.BASE=new U(e.ed25519.ExtendedPoint.BASE)),U.ZERO||(U.ZERO=new U(e.ed25519.ExtendedPoint.ZERO)),U);e.hashToRistretto255=(e,r)=>{let o=r.DST,a="string"==typeof o?(0,n.utf8ToBytes)(o):o,s=(0,i.expand_message_xmd)(e,a,64,t.sha512);return U.hashToCurve(s)},e.hash_to_ristretto255=e.hashToRistretto255})),Cf=h((()=>{})),Of=h(((e,t)=>{!function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function i(e,t,n){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&(("le"===t||"be"===t)&&(n=t,t=10),this._init(e||0,t||10,n||"be"))}var o;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{o=typeof window<"u"&&typeof window.Buffer<"u"?window.Buffer:Cf().Buffer}catch{}function a(e,t){var r=e.charCodeAt(t);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+e)}function s(e,t,n){var r=a(e,n);return n-1>=t&&(r|=a(e,n-1)<<4),r}function f(e,t,r,i){for(var o=0,a=0,s=Math.min(e.length,r),f=t;f<s;f++){var c=e.charCodeAt(f)-48;o*=i,a=c>=49?c-49+10:c>=17?c-17+10:c,n(c>=0&&a<i,"Invalid character"),o+=a}return o}function c(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},i.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},i.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=e.length-1,o=0;i>=0;i-=3)a=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<e.length;i+=3)a=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this._strip()},i.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,a=0;if("be"===n)for(r=e.length-1;r>=t;r-=2)i=s(e,t,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(r=(e.length-t)%2===0?t+1:t;r<e.length;r+=2)i=s(e,t,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this._strip()},i.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var o=e.length-n,a=o%r,s=Math.min(o,o-a)+n,c=0,l=n;l<s;l+=r)c=f(e,l,l+r,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==a){var u=1;for(c=f(e,l,e.length,t),l=0;l<a;l++)u*=t;this.imuln(u),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype._move=function(e){c(e,this)},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},typeof Symbol<"u"&&"function"==typeof Symbol.for)try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch{i.prototype.inspect=l}else i.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],f=(16777215&(s<<i|o)).toString(16);o=s>>>24-i&16777215,(i+=2)>=26&&(i-=26,a--),r=0!==o||a!==this.length-1?u[6-f.length]+f+r:f+r}for(0!==o&&(r=o.toString(16)+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=d[e],l=h[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modrn(l).toString(e);r=(p=p.idivn(l)).isZero()?g+r:u[c-g.length]+g+r}for(this.isZero()&&(r="0"+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(e,t){return this.toArrayLike(o,e,t)}),i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function p(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],o=0|t.words[0],a=i*o,s=67108863&a,f=a/67108864|0;n.words[0]=s;for(var c=1;c<r;c++){for(var l=f>>>26,u=67108863&f,d=Math.min(c,t.length-1),h=Math.max(0,c-e.length+1);h<=d;h++){var p=c-h|0;l+=(a=(i=0|e.words[p])*(o=0|t.words[h])+u)/67108864|0,u=67108863&a}n.words[c]=0|u,f=0|l}return 0!==f?n.words[c]=0|f:n.length--,n._strip()}i.prototype.toArrayLike=function(e,t,r){this._strip();var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0");var a=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,o);return this["_toArrayLike"+("le"===t?"LE":"BE")](a,i),a},i.prototype._toArrayLikeLE=function(e,t){for(var n=0,r=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|r;e[n++]=255&a,n<e.length&&(e[n++]=a>>8&255),n<e.length&&(e[n++]=a>>16&255),6===o?(n<e.length&&(e[n++]=a>>24&255),r=0,o=0):(r=a>>>24,o+=2)}if(n<e.length)for(e[n++]=r;n<e.length;)e[n++]=0},i.prototype._toArrayLikeBE=function(e,t){for(var n=e.length-1,r=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|r;e[n--]=255&a,n>=0&&(e[n--]=a>>8&255),n>=0&&(e[n--]=a>>16&255),6===o?(n>=0&&(e[n--]=a>>24&255),r=0,o=0):(r=a>>>24,o+=2)}if(n>=0)for(e[n--]=r;n>=0;)e[n--]=0},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 8191&t||(n+=13,t>>>=13),127&t||(n+=7,t>>>=7),15&t||(n+=4,t>>>=4),3&t||(n+=2,t>>>=2),1&t||n++,n},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},i.prototype.ior=function(e){return n(0===(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this._strip()},i.prototype.iand=function(e){return n(0===(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this._strip()},i.prototype.ixor=function(e){return n(0===(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},i.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,o=0;o<r.length;o++)t=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<n.length;o++)t=(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var o=0,a=0;a<r.length;a++)o=(t=(0|n.words[a])-(0|r.words[a])+o)>>26,this.words[a]=67108863&t;for(;0!==o&&a<n.length;a++)o=(t=(0|n.words[a])+o)>>26,this.words[a]=67108863&t;if(0===o&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var g=function(e,t,n){var r,i,o,a=e.words,s=t.words,f=n.words,c=0,l=0|a[0],u=8191&l,d=l>>>13,h=0|a[1],p=8191&h,g=h>>>13,b=0|a[2],y=8191&b,m=b>>>13,v=0|a[3],w=8191&v,_=v>>>13,E=0|a[4],C=8191&E,O=E>>>13,x=0|a[5],S=8191&x,k=x>>>13,T=0|a[6],R=8191&T,A=T>>>13,I=0|a[7],N=8191&I,P=I>>>13,D=0|a[8],B=8191&D,M=D>>>13,K=0|a[9],L=8191&K,U=K>>>13,j=0|s[0],W=8191&j,H=j>>>13,$=0|s[1],q=8191&$,X=$>>>13,F=0|s[2],z=8191&F,J=F>>>13,V=0|s[3],G=8191&V,Y=V>>>13,Z=0|s[4],Q=8191&Z,ee=Z>>>13,te=0|s[5],ne=8191&te,re=te>>>13,ie=0|s[6],oe=8191&ie,ae=ie>>>13,se=0|s[7],fe=8191&se,ce=se>>>13,le=0|s[8],ue=8191&le,de=le>>>13,he=0|s[9],pe=8191&he,ge=he>>>13;n.negative=e.negative^t.negative,n.length=19;var be=(c+(r=Math.imul(u,W))|0)+((8191&(i=(i=Math.imul(u,H))+Math.imul(d,W)|0))<<13)|0;c=((o=Math.imul(d,H))+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(p,W),i=(i=Math.imul(p,H))+Math.imul(g,W)|0,o=Math.imul(g,H);var ye=(c+(r=r+Math.imul(u,q)|0)|0)+((8191&(i=(i=i+Math.imul(u,X)|0)+Math.imul(d,q)|0))<<13)|0;c=((o=o+Math.imul(d,X)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(y,W),i=(i=Math.imul(y,H))+Math.imul(m,W)|0,o=Math.imul(m,H),r=r+Math.imul(p,q)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(g,q)|0,o=o+Math.imul(g,X)|0;var me=(c+(r=r+Math.imul(u,z)|0)|0)+((8191&(i=(i=i+Math.imul(u,J)|0)+Math.imul(d,z)|0))<<13)|0;c=((o=o+Math.imul(d,J)|0)+(i>>>13)|0)+(me>>>26)|0,me&=67108863,r=Math.imul(w,W),i=(i=Math.imul(w,H))+Math.imul(_,W)|0,o=Math.imul(_,H),r=r+Math.imul(y,q)|0,i=(i=i+Math.imul(y,X)|0)+Math.imul(m,q)|0,o=o+Math.imul(m,X)|0,r=r+Math.imul(p,z)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(g,z)|0,o=o+Math.imul(g,J)|0;var ve=(c+(r=r+Math.imul(u,G)|0)|0)+((8191&(i=(i=i+Math.imul(u,Y)|0)+Math.imul(d,G)|0))<<13)|0;c=((o=o+Math.imul(d,Y)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(C,W),i=(i=Math.imul(C,H))+Math.imul(O,W)|0,o=Math.imul(O,H),r=r+Math.imul(w,q)|0,i=(i=i+Math.imul(w,X)|0)+Math.imul(_,q)|0,o=o+Math.imul(_,X)|0,r=r+Math.imul(y,z)|0,i=(i=i+Math.imul(y,J)|0)+Math.imul(m,z)|0,o=o+Math.imul(m,J)|0,r=r+Math.imul(p,G)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(g,G)|0,o=o+Math.imul(g,Y)|0;var we=(c+(r=r+Math.imul(u,Q)|0)|0)+((8191&(i=(i=i+Math.imul(u,ee)|0)+Math.imul(d,Q)|0))<<13)|0;c=((o=o+Math.imul(d,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(S,W),i=(i=Math.imul(S,H))+Math.imul(k,W)|0,o=Math.imul(k,H),r=r+Math.imul(C,q)|0,i=(i=i+Math.imul(C,X)|0)+Math.imul(O,q)|0,o=o+Math.imul(O,X)|0,r=r+Math.imul(w,z)|0,i=(i=i+Math.imul(w,J)|0)+Math.imul(_,z)|0,o=o+Math.imul(_,J)|0,r=r+Math.imul(y,G)|0,i=(i=i+Math.imul(y,Y)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,Y)|0,r=r+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(g,Q)|0,o=o+Math.imul(g,ee)|0;var _e=(c+(r=r+Math.imul(u,ne)|0)|0)+((8191&(i=(i=i+Math.imul(u,re)|0)+Math.imul(d,ne)|0))<<13)|0;c=((o=o+Math.imul(d,re)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(R,W),i=(i=Math.imul(R,H))+Math.imul(A,W)|0,o=Math.imul(A,H),r=r+Math.imul(S,q)|0,i=(i=i+Math.imul(S,X)|0)+Math.imul(k,q)|0,o=o+Math.imul(k,X)|0,r=r+Math.imul(C,z)|0,i=(i=i+Math.imul(C,J)|0)+Math.imul(O,z)|0,o=o+Math.imul(O,J)|0,r=r+Math.imul(w,G)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(_,G)|0,o=o+Math.imul(_,Y)|0,r=r+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,ee)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,ee)|0,r=r+Math.imul(p,ne)|0,i=(i=i+Math.imul(p,re)|0)+Math.imul(g,ne)|0,o=o+Math.imul(g,re)|0;var Ee=(c+(r=r+Math.imul(u,oe)|0)|0)+((8191&(i=(i=i+Math.imul(u,ae)|0)+Math.imul(d,oe)|0))<<13)|0;c=((o=o+Math.imul(d,ae)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(N,W),i=(i=Math.imul(N,H))+Math.imul(P,W)|0,o=Math.imul(P,H),r=r+Math.imul(R,q)|0,i=(i=i+Math.imul(R,X)|0)+Math.imul(A,q)|0,o=o+Math.imul(A,X)|0,r=r+Math.imul(S,z)|0,i=(i=i+Math.imul(S,J)|0)+Math.imul(k,z)|0,o=o+Math.imul(k,J)|0,r=r+Math.imul(C,G)|0,i=(i=i+Math.imul(C,Y)|0)+Math.imul(O,G)|0,o=o+Math.imul(O,Y)|0,r=r+Math.imul(w,Q)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,ee)|0,r=r+Math.imul(y,ne)|0,i=(i=i+Math.imul(y,re)|0)+Math.imul(m,ne)|0,o=o+Math.imul(m,re)|0,r=r+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,ae)|0)+Math.imul(g,oe)|0,o=o+Math.imul(g,ae)|0;var Ce=(c+(r=r+Math.imul(u,fe)|0)|0)+((8191&(i=(i=i+Math.imul(u,ce)|0)+Math.imul(d,fe)|0))<<13)|0;c=((o=o+Math.imul(d,ce)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(B,W),i=(i=Math.imul(B,H))+Math.imul(M,W)|0,o=Math.imul(M,H),r=r+Math.imul(N,q)|0,i=(i=i+Math.imul(N,X)|0)+Math.imul(P,q)|0,o=o+Math.imul(P,X)|0,r=r+Math.imul(R,z)|0,i=(i=i+Math.imul(R,J)|0)+Math.imul(A,z)|0,o=o+Math.imul(A,J)|0,r=r+Math.imul(S,G)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(k,G)|0,o=o+Math.imul(k,Y)|0,r=r+Math.imul(C,Q)|0,i=(i=i+Math.imul(C,ee)|0)+Math.imul(O,Q)|0,o=o+Math.imul(O,ee)|0,r=r+Math.imul(w,ne)|0,i=(i=i+Math.imul(w,re)|0)+Math.imul(_,ne)|0,o=o+Math.imul(_,re)|0,r=r+Math.imul(y,oe)|0,i=(i=i+Math.imul(y,ae)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,ae)|0,r=r+Math.imul(p,fe)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(g,fe)|0,o=o+Math.imul(g,ce)|0;var Oe=(c+(r=r+Math.imul(u,ue)|0)|0)+((8191&(i=(i=i+Math.imul(u,de)|0)+Math.imul(d,ue)|0))<<13)|0;c=((o=o+Math.imul(d,de)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(L,W),i=(i=Math.imul(L,H))+Math.imul(U,W)|0,o=Math.imul(U,H),r=r+Math.imul(B,q)|0,i=(i=i+Math.imul(B,X)|0)+Math.imul(M,q)|0,o=o+Math.imul(M,X)|0,r=r+Math.imul(N,z)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(P,z)|0,o=o+Math.imul(P,J)|0,r=r+Math.imul(R,G)|0,i=(i=i+Math.imul(R,Y)|0)+Math.imul(A,G)|0,o=o+Math.imul(A,Y)|0,r=r+Math.imul(S,Q)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(k,Q)|0,o=o+Math.imul(k,ee)|0,r=r+Math.imul(C,ne)|0,i=(i=i+Math.imul(C,re)|0)+Math.imul(O,ne)|0,o=o+Math.imul(O,re)|0,r=r+Math.imul(w,oe)|0,i=(i=i+Math.imul(w,ae)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,ae)|0,r=r+Math.imul(y,fe)|0,i=(i=i+Math.imul(y,ce)|0)+Math.imul(m,fe)|0,o=o+Math.imul(m,ce)|0,r=r+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,de)|0)+Math.imul(g,ue)|0,o=o+Math.imul(g,de)|0;var xe=(c+(r=r+Math.imul(u,pe)|0)|0)+((8191&(i=(i=i+Math.imul(u,ge)|0)+Math.imul(d,pe)|0))<<13)|0;c=((o=o+Math.imul(d,ge)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(L,q),i=(i=Math.imul(L,X))+Math.imul(U,q)|0,o=Math.imul(U,X),r=r+Math.imul(B,z)|0,i=(i=i+Math.imul(B,J)|0)+Math.imul(M,z)|0,o=o+Math.imul(M,J)|0,r=r+Math.imul(N,G)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(P,G)|0,o=o+Math.imul(P,Y)|0,r=r+Math.imul(R,Q)|0,i=(i=i+Math.imul(R,ee)|0)+Math.imul(A,Q)|0,o=o+Math.imul(A,ee)|0,r=r+Math.imul(S,ne)|0,i=(i=i+Math.imul(S,re)|0)+Math.imul(k,ne)|0,o=o+Math.imul(k,re)|0,r=r+Math.imul(C,oe)|0,i=(i=i+Math.imul(C,ae)|0)+Math.imul(O,oe)|0,o=o+Math.imul(O,ae)|0,r=r+Math.imul(w,fe)|0,i=(i=i+Math.imul(w,ce)|0)+Math.imul(_,fe)|0,o=o+Math.imul(_,ce)|0,r=r+Math.imul(y,ue)|0,i=(i=i+Math.imul(y,de)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,de)|0;var Se=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,ge)|0)+Math.imul(g,pe)|0))<<13)|0;c=((o=o+Math.imul(g,ge)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(L,z),i=(i=Math.imul(L,J))+Math.imul(U,z)|0,o=Math.imul(U,J),r=r+Math.imul(B,G)|0,i=(i=i+Math.imul(B,Y)|0)+Math.imul(M,G)|0,o=o+Math.imul(M,Y)|0,r=r+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,ee)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,ee)|0,r=r+Math.imul(R,ne)|0,i=(i=i+Math.imul(R,re)|0)+Math.imul(A,ne)|0,o=o+Math.imul(A,re)|0,r=r+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,ae)|0)+Math.imul(k,oe)|0,o=o+Math.imul(k,ae)|0,r=r+Math.imul(C,fe)|0,i=(i=i+Math.imul(C,ce)|0)+Math.imul(O,fe)|0,o=o+Math.imul(O,ce)|0,r=r+Math.imul(w,ue)|0,i=(i=i+Math.imul(w,de)|0)+Math.imul(_,ue)|0,o=o+Math.imul(_,de)|0;var ke=(c+(r=r+Math.imul(y,pe)|0)|0)+((8191&(i=(i=i+Math.imul(y,ge)|0)+Math.imul(m,pe)|0))<<13)|0;c=((o=o+Math.imul(m,ge)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(L,G),i=(i=Math.imul(L,Y))+Math.imul(U,G)|0,o=Math.imul(U,Y),r=r+Math.imul(B,Q)|0,i=(i=i+Math.imul(B,ee)|0)+Math.imul(M,Q)|0,o=o+Math.imul(M,ee)|0,r=r+Math.imul(N,ne)|0,i=(i=i+Math.imul(N,re)|0)+Math.imul(P,ne)|0,o=o+Math.imul(P,re)|0,r=r+Math.imul(R,oe)|0,i=(i=i+Math.imul(R,ae)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,ae)|0,r=r+Math.imul(S,fe)|0,i=(i=i+Math.imul(S,ce)|0)+Math.imul(k,fe)|0,o=o+Math.imul(k,ce)|0,r=r+Math.imul(C,ue)|0,i=(i=i+Math.imul(C,de)|0)+Math.imul(O,ue)|0,o=o+Math.imul(O,de)|0;var Te=(c+(r=r+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,ge)|0)+Math.imul(_,pe)|0))<<13)|0;c=((o=o+Math.imul(_,ge)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(L,Q),i=(i=Math.imul(L,ee))+Math.imul(U,Q)|0,o=Math.imul(U,ee),r=r+Math.imul(B,ne)|0,i=(i=i+Math.imul(B,re)|0)+Math.imul(M,ne)|0,o=o+Math.imul(M,re)|0,r=r+Math.imul(N,oe)|0,i=(i=i+Math.imul(N,ae)|0)+Math.imul(P,oe)|0,o=o+Math.imul(P,ae)|0,r=r+Math.imul(R,fe)|0,i=(i=i+Math.imul(R,ce)|0)+Math.imul(A,fe)|0,o=o+Math.imul(A,ce)|0,r=r+Math.imul(S,ue)|0,i=(i=i+Math.imul(S,de)|0)+Math.imul(k,ue)|0,o=o+Math.imul(k,de)|0;var Re=(c+(r=r+Math.imul(C,pe)|0)|0)+((8191&(i=(i=i+Math.imul(C,ge)|0)+Math.imul(O,pe)|0))<<13)|0;c=((o=o+Math.imul(O,ge)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,r=Math.imul(L,ne),i=(i=Math.imul(L,re))+Math.imul(U,ne)|0,o=Math.imul(U,re),r=r+Math.imul(B,oe)|0,i=(i=i+Math.imul(B,ae)|0)+Math.imul(M,oe)|0,o=o+Math.imul(M,ae)|0,r=r+Math.imul(N,fe)|0,i=(i=i+Math.imul(N,ce)|0)+Math.imul(P,fe)|0,o=o+Math.imul(P,ce)|0,r=r+Math.imul(R,ue)|0,i=(i=i+Math.imul(R,de)|0)+Math.imul(A,ue)|0,o=o+Math.imul(A,de)|0;var Ae=(c+(r=r+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,ge)|0)+Math.imul(k,pe)|0))<<13)|0;c=((o=o+Math.imul(k,ge)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(L,oe),i=(i=Math.imul(L,ae))+Math.imul(U,oe)|0,o=Math.imul(U,ae),r=r+Math.imul(B,fe)|0,i=(i=i+Math.imul(B,ce)|0)+Math.imul(M,fe)|0,o=o+Math.imul(M,ce)|0,r=r+Math.imul(N,ue)|0,i=(i=i+Math.imul(N,de)|0)+Math.imul(P,ue)|0,o=o+Math.imul(P,de)|0;var Ie=(c+(r=r+Math.imul(R,pe)|0)|0)+((8191&(i=(i=i+Math.imul(R,ge)|0)+Math.imul(A,pe)|0))<<13)|0;c=((o=o+Math.imul(A,ge)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(L,fe),i=(i=Math.imul(L,ce))+Math.imul(U,fe)|0,o=Math.imul(U,ce),r=r+Math.imul(B,ue)|0,i=(i=i+Math.imul(B,de)|0)+Math.imul(M,ue)|0,o=o+Math.imul(M,de)|0;var Ne=(c+(r=r+Math.imul(N,pe)|0)|0)+((8191&(i=(i=i+Math.imul(N,ge)|0)+Math.imul(P,pe)|0))<<13)|0;c=((o=o+Math.imul(P,ge)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,r=Math.imul(L,ue),i=(i=Math.imul(L,de))+Math.imul(U,ue)|0,o=Math.imul(U,de);var Pe=(c+(r=r+Math.imul(B,pe)|0)|0)+((8191&(i=(i=i+Math.imul(B,ge)|0)+Math.imul(M,pe)|0))<<13)|0;c=((o=o+Math.imul(M,ge)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863;var De=(c+(r=Math.imul(L,pe))|0)+((8191&(i=(i=Math.imul(L,ge))+Math.imul(U,pe)|0))<<13)|0;return c=((o=Math.imul(U,ge))+(i>>>13)|0)+(De>>>26)|0,De&=67108863,f[0]=be,f[1]=ye,f[2]=me,f[3]=ve,f[4]=we,f[5]=_e,f[6]=Ee,f[7]=Ce,f[8]=Oe,f[9]=xe,f[10]=Se,f[11]=ke,f[12]=Te,f[13]=Re,f[14]=Ae,f[15]=Ie,f[16]=Ne,f[17]=Pe,f[18]=De,0!==c&&(f[19]=c,n.length++),n};function b(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var a=i;i=0;for(var s=67108863&r,f=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=f;c++){var l=o-c,u=(0|e.words[l])*(0|t.words[c]),d=67108863&u;s=67108863&(d=d+s|0),i+=(a=(a=a+(u/67108864|0)|0)+(d>>>26)|0)>>>26,a&=67108863}n.words[o]=s,r=a,a=i}return 0!==r?n.words[o]=r:n.length--,n._strip()}function y(e,t,n){return b(e,t,n)}function m(e,t){this.x=e,this.y=t}Math.imul||(g=p),i.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?g(this,e,t):n<63?p(this,e,t):n<1024?b(this,e,t):y(this,e,t)},m.prototype.makeRBT=function(e){for(var t=new Array(e),n=i.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},m.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},m.prototype.permute=function(e,t,n,r,i,o){for(var a=0;a<o;a++)r[a]=t[e[a]],i[a]=n[e[a]]},m.prototype.transform=function(e,t,n,r,i,o){this.permute(o,e,t,n,r,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,f=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),l=0;l<i;l+=s)for(var u=f,d=c,h=0;h<a;h++){var p=n[l+h],g=r[l+h],b=n[l+h+a],y=r[l+h+a],m=u*b-d*y;y=u*y+d*b,b=m,n[l+h]=p+b,r[l+h]=g+y,n[l+h+a]=p-b,r[l+h+a]=g-y,h!==s&&(m=f*u-c*d,d=f*d+c*u,u=m)}},m.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},m.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},m.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},m.prototype.convert13b=function(e,t,r,i){for(var o=0,a=0;a<t;a++)o+=0|e[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<i;++a)r[a]=0;n(0===o),n(0===(-8192&o))},m.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},m.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),o=this.stub(r),a=new Array(r),s=new Array(r),f=new Array(r),c=new Array(r),l=new Array(r),u=new Array(r),d=n.words;d.length=r,this.convert13b(e.words,e.length,a,r),this.convert13b(t.words,t.length,c,r),this.transform(a,o,s,f,r,i),this.transform(c,o,l,u,r,i);for(var h=0;h<r;h++){var p=s[h]*l[h]-f[h]*u[h];f[h]=s[h]*u[h]+f[h]*l[h],s[h]=p}return this.conjugate(s,f,r),this.transform(s,f,d,o,r,i),this.conjugate(d,o,r),this.normalize13b(d,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n._strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),y(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"==typeof e),n(e<67108864);for(var r=0,i=0;i<this.length;i++){var o=(0|this.words[i])*e,a=(67108863&o)+(67108863&r);r>>=26,r+=o/67108864|0,r+=a>>>26,this.words[i]=67108863&a}return 0!==r&&(this.words[i]=r,this.length++),t?this.ineg():this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=e.words[r]>>>i&1}return t}(e);if(0===t.length)return new i(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var o=n.sqr();r<t.length;r++,o=o.sqr())0!==t[r]&&(n=n.mul(o));return n},i.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,f=(0|this.words[t])-s<<r;this.words[t]=f|a,a=s>>>26-r}a&&(this.words[t]=a,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},i.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,f=r;if(i-=a,i=Math.max(0,i),f){for(var c=0;c<a;c++)f.words[c]=this.words[c];f.length=a}if(0!==a)if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var u=0|this.words[c];this.words[c]=l<<26-o|u>>>o,l=u&s}return f&&0!==l&&(f.words[f.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r)&&!!(this.words[r]&i)},i.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,r){var i,o=e.length+r;this._expand(o);var a,s=0;for(i=0;i<e.length;i++){a=(0|this.words[i+r])+s;var f=(0|e.words[i])*t;s=((a-=67108863&f)>>26)-(f/67108864|0),this.words[i+r]=67108863&a}for(;i<this.length-r;i++)s=(a=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&a;if(0===s)return this._strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(a=-(0|this.words[i])+s)>>26,this.words[i]=67108863&a;return this.negative=1,this._strip()},i.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),o=e,a=0|o.words[o.length-1];0!==(n=26-this._countBits(a))&&(o=o.ushln(n),r.iushln(n),a=0|o.words[o.length-1]);var s,f=r.length-o.length;if("mod"!==t){(s=new i(null)).length=f+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var l=r.clone()._ishlnsubmul(o,1,f);0===l.negative&&(r=l,s&&(s.words[f]=1));for(var u=f-1;u>=0;u--){var d=67108864*(0|r.words[o.length+u])+(0|r.words[o.length+u-1]);for(d=Math.min(d/a|0,67108863),r._ishlnsubmul(o,d,u);0!==r.negative;)d--,r.negative=0,r._ishlnsubmul(o,1,u),r.isZero()||(r.negative^=1);s&&(s.words[u]=d)}return s&&s._strip(),r._strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},i.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(o=s.div.neg()),"div"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(e)),{div:o,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(o=s.div.neg()),{div:o,mod:s.mod}):this.negative&e.negative?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modrn(e.words[0]))}:this._wordDiv(e,t);var o,a,s},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=(1<<26)%e,i=0,o=this.length-1;o>=0;o--)i=(r*i+(0|this.words[o]))%e;return t?-i:i},i.prototype.modn=function(e){return this.modrn(e)},i.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*r;this.words[i]=o/e|0,r=o%e}return this._strip(),t?this.ineg():this},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o=new i(1),a=new i(0),s=new i(0),f=new i(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),u=t.clone();!t.isZero();){for(var d=0,h=1;!(t.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(l),a.isub(u)),o.iushrn(1),a.iushrn(1);for(var p=0,g=1;!(r.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||f.isOdd())&&(s.iadd(l),f.isub(u)),s.iushrn(1),f.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(s),a.isub(f)):(r.isub(t),s.isub(o),f.isub(a))}return{a:s,b:f,gcd:r.iushln(c)}},i.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t,r=this,o=e.clone();r=0!==r.negative?r.umod(e):r.clone();for(var a=new i(1),s=new i(0),f=o.clone();r.cmpn(1)>0&&o.cmpn(1)>0;){for(var c=0,l=1;!(r.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(r.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(f),a.iushrn(1);for(var u=0,d=1;!(o.words[0]&d)&&u<26;++u,d<<=1);if(u>0)for(o.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(f),s.iushrn(1);r.cmp(o)>=0?(r.isub(o),a.isub(s)):(o.isub(r),s.isub(a))}return(t=0===r.cmpn(1)?a:s).cmpn(0)<0&&t.iadd(e),t},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var o=t;t=n,n=o}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return 0===(1&this.words[0])},i.prototype.isOdd=function(){return 1===(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new x(e)},i.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var v={k256:null,p224:null,p192:null,p25519:null};function w(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function C(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function O(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){x.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},w.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},w.prototype.split=function(e,t){e.iushrn(this.n,0,t)},w.prototype.imulK=function(e){return e.imul(this.k)},r(_,w),_.prototype.split=function(e,t){for(var n=4194303,r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&n,i=10;i<e.length;i++){var a=0|e.words[i];e.words[i-10]=(a&n)<<4|o>>>22,o=a}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},_.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(E,w),r(C,w),r(O,w),O.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(v[e])return v[e];var t;if("k256"===e)t=new _;else if("p224"===e)t=new E;else if("p192"===e)t=new C;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new O}return v[e]=t,t},x.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},x.prototype._verify2=function(e,t){n(0===(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},x.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(c(e,e.umod(this.m)._forceRed(this)),e)},x.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},x.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},x.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},x.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},x.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},x.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},x.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},x.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},x.prototype.isqr=function(e){return this.imul(e,e.clone())},x.prototype.sqr=function(e){return this.mul(e,e)},x.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2===1),3===t){var r=this.m.add(new i(1)).iushrn(2);return this.pow(e,r)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);n(!o.isZero());var s=new i(1).toRed(this),f=s.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);0!==this.pow(l,c).cmp(f);)l.redIAdd(f);for(var u=this.pow(l,o),d=this.pow(e,o.addn(1).iushrn(1)),h=this.pow(e,o),p=a;0!==h.cmp(s);){for(var g=h,b=0;0!==g.cmp(s);b++)g=g.redSqr();n(b<p);var y=this.pow(u,new i(1).iushln(p-b-1));d=d.redMul(y),u=y.redSqr(),h=h.redMul(u),p=b}return d},x.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},x.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new i(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var o=n[0],a=0,s=0,f=t.bitLength()%26;for(0===f&&(f=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],l=f-1;l>=0;l--){var u=c>>l&1;(o!==n[0]&&(o=this.sqr(o)),0!==u||0!==a)?(a<<=1,a|=u,(4===++s||0===r&&0===l)&&(o=this.mul(o,n[a]),s=0,a=0)):s=0}f=26}return o},x.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},x.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new S(e)},r(S,x),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=n.isub(r).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):o.cmpn(0)<0&&(a=o.iadd(this.m)),a._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(typeof t>"u"||t,e)})),xf=h(((e,t)=>{var n=_s(),r=n.Buffer;function i(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(i(n,e),e.Buffer=o),o.prototype=Object.create(r.prototype),i(r,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}})),Sf=h(((e,t)=>{var n=xf().Buffer;t.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),a=o.charCodeAt(0);if(255!==t[a])throw new TypeError(o+" is ambiguous");t[a]=i}var s=e.length,f=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function u(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return n.alloc(0);for(var r=0,i=0,o=0;e[r]===f;)i++,r++;for(var a=(e.length-r)*c+1>>>0,l=new Uint8Array(a);r<e.length;){var u=t[e.charCodeAt(r)];if(255===u)return;for(var d=0,h=a-1;(0!==u||d<o)&&-1!==h;h--,d++)u+=s*l[h]>>>0,l[h]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");o=d,r++}for(var p=a-o;p!==a&&0===l[p];)p++;var g=n.allocUnsafe(i+(a-p));g.fill(0,0,i);for(var b=i;p!==a;)g[b++]=l[p++];return g}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=n.from(t)),!n.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,i=0,o=0,a=t.length;o!==a&&0===t[o];)o++,r++;for(var c=(a-o)*l+1>>>0,u=new Uint8Array(c);o!==a;){for(var d=t[o],h=0,p=c-1;(0!==d||h<i)&&-1!==p;p--,h++)d+=256*u[p]>>>0,u[p]=d%s>>>0,d=d/s>>>0;if(0!==d)throw new Error("Non-zero carry");i=h,o++}for(var g=c-i;g!==c&&0===u[g];)g++;for(var b=f.repeat(r);g<c;++g)b+=e.charAt(u[g]);return b},decodeUnsafe:u,decode:function(e){var t=u(e);if(t)return t;throw new Error("Non-base"+s+" character")}}}})),kf=h(((e,t)=>{var n=Sf();t.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")})),Tf=h((e=>{function t(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function n(e){if(!function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}(e))throw new Error("Uint8Array expected");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error("Uint8Array expected of length "+n+", got length="+e.length)}function r(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");t(e.outputLen),t(e.blockLen)}function i(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function o(e,t){n(e);let r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}Object.defineProperty(e,"__esModule",{value:!0}),e.anumber=t,e.number=t,e.abytes=n,e.bytes=n,e.ahash=r,e.aexists=i,e.aoutput=o;var a={number:t,bytes:n,hash:r,exists:i,output:o};e.default=a})),Rf=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=void 0,e.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0})),Af=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=e.nextTick=e.byteSwapIfBE=e.byteSwap=e.isLE=e.rotl=e.rotr=e.createView=e.u32=e.u8=void 0,e.isBytes=function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name},e.byteSwap32=function(t){for(let n=0;n<t.length;n++)t[n]=(0,e.byteSwap)(t[n])},e.bytesToHex=function(e){(0,n.abytes)(e);let t="";for(let n=0;n<e.length;n++)t+=r[e[n]];return t},e.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);let t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(n);for(let i=0,a=0;i<n;i++,a+=2){let t=o(e.charCodeAt(a)),n=o(e.charCodeAt(a+1));if(void 0===t||void 0===n){let t=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+a)}r[i]=16*t+n}return r},e.asyncLoop=async function(t,n,r){let i=Date.now();for(let o=0;o<t;o++){r(o);let t=Date.now()-i;t>=0&&t<n||(await(0,e.nextTick)(),i+=t)}},e.utf8ToBytes=a,e.toBytes=s,e.concatBytes=function(){let e=0;for(let r=0;r<arguments.length;r++){let t=r<0||arguments.length<=r?void 0:arguments[r];(0,n.abytes)(t),e+=t.length}let t=new Uint8Array(e);for(let n=0,r=0;n<arguments.length;n++){let e=n<0||arguments.length<=n?void 0:arguments[n];t.set(e,r),r+=e.length}return t},e.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!=={}.toString.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},e.wrapConstructor=function(e){let t=t=>e().update(s(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t},e.wrapConstructorWithOpts=function(e){let t=(t,n)=>e(n).update(s(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},e.wrapXOFConstructorWithOpts=function(e){let t=(t,n)=>e(n).update(s(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},e.randomBytes=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(t.crypto&&"function"==typeof t.crypto.getRandomValues)return t.crypto.getRandomValues(new Uint8Array(e));if(t.crypto&&"function"==typeof t.crypto.randomBytes)return t.crypto.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")};var t=Rf(),n=Tf();e.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);e.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));e.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);e.rotr=(e,t)=>e<<32-t|e>>>t;e.rotl=(e,t)=>e<<t|e>>>32-t>>>0,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];e.byteSwap=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,e.byteSwapIfBE=e.isLE?e=>e:t=>(0,e.byteSwap)(t);var r=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));var i={_0:48,_9:57,A:65,F:70,a:97,f:102};function o(e){return e>=i._0&&e<=i._9?e-i._0:e>=i.A&&e<=i.F?e-(i.A-10):e>=i.a&&e<=i.f?e-(i.a-10):void 0}function a(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function s(e){return"string"==typeof e&&(e=a(e)),(0,n.abytes)(e),e}e.nextTick=async()=>{};e.Hash=class{clone(){return this._cloneInto()}}})),If=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.HashMD=e.Maj=e.Chi=void 0;var t=Tf(),n=Af();e.Chi=(e,t,n)=>e&t^~e&n;e.Maj=(e,t,n)=>e&t^e&n^t&n;var r=class extends n.Hash{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,n.createView)(this.buffer)}update(e){(0,t.aexists)(this);let{view:r,buffer:i,blockLen:o}=this,a=(e=(0,n.toBytes)(e)).length;for(let t=0;t<a;){let s=Math.min(o-this.pos,a-t);if(s!==o)i.set(e.subarray(t,t+s),this.pos),this.pos+=s,t+=s,this.pos===o&&(this.process(r,0),this.pos=0);else{let r=(0,n.createView)(e);for(;o<=a-t;t+=o)this.process(r,t)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,t.aexists)(this),(0,t.aoutput)(e,this),this.finished=!0;let{buffer:r,view:i,blockLen:o,isLE:a}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>o-s&&(this.process(i,0),s=0);for(let t=s;t<o;t++)r[t]=0;(function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);let i=BigInt(32),o=BigInt(4294967295),a=Number(n>>i&o),s=Number(n&o),f=r?4:0,c=r?0:4;e.setUint32(t+f,a,r),e.setUint32(t+c,s,r)})(i,o-8,BigInt(8*this.length),a),this.process(i,0);let f=(0,n.createView)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<l;t++)f.setUint32(4*t,u[t],a)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:n,length:r,finished:i,destroyed:o,pos:a}=this;return e.length=r,e.pos=a,e.finished=i,e.destroyed=o,r%t&&e.buffer.set(n),e}};e.HashMD=r})),Nf=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sha224=e.sha256=e.SHA256=void 0;var t=If(),n=Af(),r=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),i=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),o=new Uint32Array(64),a=class extends t.HashMD{constructor(){super(64,32,8,!1),this.A=0|i[0],this.B=0|i[1],this.C=0|i[2],this.D=0|i[3],this.E=0|i[4],this.F=0|i[5],this.G=0|i[6],this.H=0|i[7]}get(){let{A:e,B:t,C:n,D:r,E:i,F:o,G:a,H:s}=this;return[e,t,n,r,i,o,a,s]}set(e,t,n,r,i,o,a,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|a,this.H=0|s}process(e,i){for(let t=0;t<16;t++,i+=4)o[t]=e.getUint32(i,!1);for(let t=16;t<64;t++){let e=o[t-15],r=o[t-2],i=(0,n.rotr)(e,7)^(0,n.rotr)(e,18)^e>>>3,a=(0,n.rotr)(r,17)^(0,n.rotr)(r,19)^r>>>10;o[t]=a+o[t-7]+i+o[t-16]|0}let{A:a,B:s,C:f,D:c,E:l,F:u,G:d,H:h}=this;for(let p=0;p<64;p++){let e=h+((0,n.rotr)(l,6)^(0,n.rotr)(l,11)^(0,n.rotr)(l,25))+(0,t.Chi)(l,u,d)+r[p]+o[p]|0,i=((0,n.rotr)(a,2)^(0,n.rotr)(a,13)^(0,n.rotr)(a,22))+(0,t.Maj)(a,s,f)|0;h=d,d=u,u=l,l=c+e|0,c=f,f=s,s=a,a=e+i|0}a=a+this.A|0,s=s+this.B|0,f=f+this.C|0,c=c+this.D|0,l=l+this.E|0,u=u+this.F|0,d=d+this.G|0,h=h+this.H|0,this.set(a,s,f,c,l,u,d,h)}roundClean(){o.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};e.SHA256=a;var s=class extends a{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};e.sha256=(0,n.wrapConstructor)((()=>new a)),e.sha224=(0,n.wrapConstructor)((()=>new s))})),Pf=h((e=>{function t(e,t,n){return t<=e&&e<=n}function n(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function r(e){this.tokens=[].slice.call(e)}r.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};var i=-1;function o(e,t){if(e)throw TypeError("Decoder error");return t||65533}var a="utf-8";function s(e,t){if(!(this instanceof s))return new s(e,t);if((e=void 0!==e?String(e).toLowerCase():a)!==a)throw new Error("Encoding not supported. Only utf-8 is supported");t=n(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function f(e,t){if(!(this instanceof f))return new f(e,t);if((e=void 0!==e?String(e).toLowerCase():a)!==a)throw new Error("Encoding not supported. Only utf-8 is supported");t=n(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}function c(e){var n=e.fatal,r=0,a=0,s=0,f=128,c=191;this.handler=function(e,l){if(-1===l&&0!==s)return s=0,o(n);if(-1===l)return i;if(0===s){if(t(l,0,127))return l;if(t(l,194,223))s=1,r=l-192;else if(t(l,224,239))224===l&&(f=160),237===l&&(c=159),s=2,r=l-224;else{if(!t(l,240,244))return o(n);240===l&&(f=144),244===l&&(c=143),s=3,r=l-240}return r<<=6*s,null}if(!t(l,f,c))return r=s=a=0,f=128,c=191,e.prepend(l),o(n);if(f=128,c=191,r+=l-128<<6*(s-(a+=1)),a!==s)return null;var u=r;return r=s=a=0,u}}function l(e){e.fatal;this.handler=function(e,n){if(-1===n)return i;if(t(n,0,127))return n;var r,o;t(n,128,2047)?(r=1,o=192):t(n,2048,65535)?(r=2,o=224):t(n,65536,1114111)&&(r=3,o=240);for(var a=[(n>>6*r)+o];r>0;){var s=n>>6*(r-1);a.push(128|63&s),r-=1}return a}}s.prototype={decode:function(e,t){var o;o="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=n(t),this._streaming||(this._decoder=new c({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var a,s=new r(o),f=[];!s.endOfStream()&&(a=this._decoder.handler(s,s.read()))!==i;)null!==a&&(Array.isArray(a)?f.push.apply(f,a):f.push(a));if(!this._streaming){do{if((a=this._decoder.handler(s,s.read()))===i)break;null!==a&&(Array.isArray(a)?f.push.apply(f,a):f.push(a))}while(!s.endOfStream());this._decoder=null}return f.length&&-1!==["utf-8"].indexOf(this.encoding)&&!this._ignoreBOM&&!this._BOMseen&&(65279===f[0]?(this._BOMseen=!0,f.shift()):this._BOMseen=!0),function(e){for(var t="",n=0;n<e.length;++n){var r=e[n];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode(55296+(r>>10),56320+(1023&r)))}return t}(f)}},f.prototype={encode:function(e,t){e=e?String(e):"",t=n(t),this._streaming||(this._encoder=new l(this._options)),this._streaming=!!t.stream;for(var o,a=[],s=new r(function(e){for(var t=String(e),n=t.length,r=0,i=[];r<n;){var o=t.charCodeAt(r);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(r===n-1)i.push(65533);else{var a=e.charCodeAt(r+1);if(56320<=a&&a<=57343){var s=1023&o,f=1023&a;i.push(65536+(s<<10)+f),r+=1}else i.push(65533)}r+=1}return i}(e));!s.endOfStream()&&(o=this._encoder.handler(s,s.read()))!==i;)Array.isArray(o)?a.push.apply(a,o):a.push(o);if(!this._streaming){for(;(o=this._encoder.handler(s,s.read()))!==i;)Array.isArray(o)?a.push.apply(a,o):a.push(o);this._encoder=null}return new Uint8Array(a)}},e.TextEncoder=f,e.TextDecoder=s})),Df=h((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e&&e.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},o=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&t(r,e,i);return n(r,e),r},a=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.deserializeUnchecked=e.deserialize=e.serialize=e.BinaryReader=e.BinaryWriter=e.BorshError=e.baseDecode=e.baseEncode=void 0;var s=a(Of()),f=a(kf()),c=o(Pf()),l=new("function"!=typeof TextDecoder?c.TextDecoder:TextDecoder)("utf-8",{fatal:!0});e.baseEncode=function(e){return"string"==typeof e&&(e=r.from(e,"utf8")),f.default.encode(r.from(e))},e.baseDecode=function(e){return r.from(f.default.decode(e))};var u=1024,d=class extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}};e.BorshError=d;var h=class{constructor(){this.buf=r.alloc(u),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=r.concat([this.buf,r.alloc(u)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(r.from(new s.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(r.from(new s.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(r.from(new s.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(r.from(new s.default(e).toArray("le",64)))}writeBuffer(e){this.buf=r.concat([r.from(this.buf.subarray(0,this.length)),e,r.alloc(u)]),this.length+=e.length}writeString(e){this.maybeResize();let t=r.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(r.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(let n of e)this.maybeResize(),t(n)}toArray(){return this.buf.subarray(0,this.length)}};function p(e,t,n){let r=n.value;n.value=function(){try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.apply(this,t)}catch(i){if(i instanceof RangeError){let e=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(e)>=0)throw new d("Reached the end of buffer when deserializing")}throw i}}}e.BinaryWriter=h;var g=class{constructor(e){this.buf=e,this.offset=0}readU8(){let e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){let e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){let e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){let e=this.readBuffer(8);return new s.default(e,"le")}readU128(){let e=this.readBuffer(16);return new s.default(e,"le")}readU256(){let e=this.readBuffer(32);return new s.default(e,"le")}readU512(){let e=this.readBuffer(64);return new s.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new d(`Expected buffer length ${e} isn't within bounds`);let t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){let e=this.readU32(),t=this.readBuffer(e);try{return l.decode(t)}catch(n){throw new d(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){let t=this.readU32(),n=Array();for(let r=0;r<t;++r)n.push(e());return n}};function b(e){return e.charAt(0).toUpperCase()+e.slice(1)}function y(e,t,n,r,i){try{if("string"==typeof r)i[`write${b(r)}`](n);else if(r instanceof Array)if("number"==typeof r[0]){if(n.length!==r[0])throw new d(`Expecting byte array of length ${r[0]}, but got ${n.length} bytes`);i.writeFixedArray(n)}else if(2===r.length&&"number"==typeof r[1]){if(n.length!==r[1])throw new d(`Expecting byte array of length ${r[1]}, but got ${n.length} bytes`);for(let t=0;t<r[1];t++)y(e,null,n[t],r[0],i)}else i.writeArray(n,(n=>{y(e,t,n,r[0],i)}));else if(void 0!==r.kind)switch(r.kind){case"option":null==n?i.writeU8(0):(i.writeU8(1),y(e,t,n,r.type,i));break;case"map":i.writeU32(n.size),n.forEach(((n,o)=>{y(e,t,o,r.key,i),y(e,t,n,r.value,i)}));break;default:throw new d(`FieldType ${r} unrecognized`)}else m(e,n,i)}catch(o){throw o instanceof d&&o.addToFieldPath(t),o}}function m(e,t,n){if("function"==typeof t.borshSerialize)return void t.borshSerialize(n);let r=e.get(t.constructor);if(!r)throw new d(`Class ${t.constructor.name} is missing in schema`);if("struct"===r.kind)r.fields.map((r=>{let[i,o]=r;y(e,i,t[i],o,n)}));else{if("enum"!==r.kind)throw new d(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`);{let i=t[r.field];for(let o=0;o<r.values.length;++o){let[a,s]=r.values[o];if(a===i){n.writeU8(o),y(e,a,t[a],s,n);break}}}}}function v(e,t,n,r){try{if("string"==typeof n)return r[`read${b(n)}`]();if(n instanceof Array){if("number"==typeof n[0])return r.readFixedArray(n[0]);if("number"==typeof n[1]){let t=[];for(let i=0;i<n[1];i++)t.push(v(e,null,n[0],r));return t}return r.readArray((()=>v(e,t,n[0],r)))}if("option"===n.kind)return r.readU8()?v(e,t,n.type,r):void 0;if("map"===n.kind){let i=new Map,o=r.readU32();for(let a=0;a<o;a++){let o=v(e,t,n.key,r),a=v(e,t,n.value,r);i.set(o,a)}return i}return w(e,n,r)}catch(i){throw i instanceof d&&i.addToFieldPath(t),i}}function w(e,t,n){if("function"==typeof t.borshDeserialize)return t.borshDeserialize(n);let r=e.get(t);if(!r)throw new d(`Class ${t.name} is missing in schema`);if("struct"===r.kind){let r={};for(let[i,o]of e.get(t).fields)r[i]=v(e,i,o,n);return new t(r)}if("enum"===r.kind){let i=n.readU8();if(i>=r.values.length)throw new d(`Enum index: ${i} is out of range`);let[o,a]=r.values[i],s=v(e,o,a,n);return new t({[o]:s})}throw new d(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}i([p],g.prototype,"readU8",null),i([p],g.prototype,"readU16",null),i([p],g.prototype,"readU32",null),i([p],g.prototype,"readU64",null),i([p],g.prototype,"readU128",null),i([p],g.prototype,"readU256",null),i([p],g.prototype,"readU512",null),i([p],g.prototype,"readString",null),i([p],g.prototype,"readFixedArray",null),i([p],g.prototype,"readArray",null),e.BinaryReader=g,e.serialize=function(e,t){let n=new(arguments.length>2&&void 0!==arguments[2]?arguments[2]:h);return m(e,t,n),n.toArray()},e.deserialize=function(e,t,n){let r=new(arguments.length>3&&void 0!==arguments[3]?arguments[3]:g)(n),i=w(e,t,r);if(r.offset<n.length)throw new d(`Unexpected ${n.length-r.offset} bytes after deserialized data`);return i},e.deserializeUnchecked=function(e,t,n){return w(e,t,new(arguments.length>3&&void 0!==arguments[3]?arguments[3]:g)(n))}})),Bf=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.s16=e.s8=e.nu64be=e.u48be=e.u40be=e.u32be=e.u24be=e.u16be=e.nu64=e.u48=e.u40=e.u32=e.u24=e.u16=e.u8=e.offset=e.greedy=e.Constant=e.UTF8=e.CString=e.Blob=e.Boolean=e.BitField=e.BitStructure=e.VariantLayout=e.Union=e.UnionLayoutDiscriminator=e.UnionDiscriminator=e.Structure=e.Sequence=e.DoubleBE=e.Double=e.FloatBE=e.Float=e.NearInt64BE=e.NearInt64=e.NearUInt64BE=e.NearUInt64=e.IntBE=e.Int=e.UIntBE=e.UInt=e.OffsetLayout=e.GreedyCount=e.ExternalLayout=e.bindConstructorLayout=e.nameWithProperty=e.Layout=e.uint8ArrayToBuffer=e.checkUint8Array=void 0,e.constant=e.utf8=e.cstr=e.blob=e.unionLayoutDiscriminator=e.union=e.seq=e.bits=e.struct=e.f64be=e.f64=e.f32be=e.f32=e.ns64be=e.s48be=e.s40be=e.s32be=e.s24be=e.s16be=e.ns64=e.s48=e.s40=e.s32=e.s24=void 0;var t=_s();function n(e){if(!(e instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function r(e){return n(e),t.Buffer.from(e.buffer,e.byteOffset,e.length)}e.checkUint8Array=n,e.uint8ArrayToBuffer=r;var i=class{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){let t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}};function o(e,t){return t.property?e+"["+t.property+"]":e}e.Layout=i,e.nameWithProperty=o,e.bindConstructorLayout=function(e,t){if("function"!=typeof e)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(e,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof i))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(e,"decode",{value:(e,n)=>t.decode(e,n),writable:!0})};var a=class extends i{isCount(){throw new Error("ExternalLayout is abstract")}};e.ExternalLayout=a;var s=class extends a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(e);let r=e.length-t;return Math.floor(r/this.elementSpan)}encode(e,t,n){return 0}};e.GreedyCount=s;var f=class extends a{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(!(e instanceof i))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof c||this.layout instanceof l}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.layout.decode(e,t+this.offset)}encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.layout.encode(e,t,n+this.offset)}};e.OffsetLayout=f;var c=class extends i{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r(e).readUIntLE(t,this.span)}encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return r(t).writeUIntLE(e,n,this.span),this.span}};e.UInt=c;var l=class extends i{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r(e).readUIntBE(t,this.span)}encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return r(t).writeUIntBE(e,n,this.span),this.span}};e.UIntBE=l;var u=class extends i{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r(e).readIntLE(t,this.span)}encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return r(t).writeIntLE(e,n,this.span),this.span}};e.Int=u;var d=class extends i{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r(e).readIntBE(t,this.span)}encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return r(t).writeIntBE(e,n,this.span),this.span}};e.IntBE=d;var h=Math.pow(2,32);function p(e){let t=Math.floor(e/h);return{hi32:t,lo32:e-t*h}}function g(e,t){return e*h+t}var b=class extends i{constructor(e){super(8,e)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=r(e),i=n.readUInt32LE(t);return g(n.readUInt32LE(t+4),i)}encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=p(e),o=r(t);return o.writeUInt32LE(i.lo32,n),o.writeUInt32LE(i.hi32,n+4),8}};e.NearUInt64=b;var y=class extends i{constructor(e){super(8,e)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=r(e);return g(n.readUInt32BE(t),n.readUInt32BE(t+4))}encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=p(e),o=r(t);return o.writeUInt32BE(i.hi32,n),o.writeUInt32BE(i.lo32,n+4),8}};e.NearUInt64BE=y;var m=class extends i{constructor(e){super(8,e)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=r(e),i=n.readUInt32LE(t);return g(n.readInt32LE(t+4),i)}encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=p(e),o=r(t);return o.writeUInt32LE(i.lo32,n),o.writeInt32LE(i.hi32,n+4),8}};e.NearInt64=m;var v=class extends i{constructor(e){super(8,e)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=r(e);return g(n.readInt32BE(t),n.readUInt32BE(t+4))}encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=p(e),o=r(t);return o.writeInt32BE(i.hi32,n),o.writeUInt32BE(i.lo32,n+4),8}};e.NearInt64BE=v;var w=class extends i{constructor(e){super(4,e)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r(e).readFloatLE(t)}encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return r(t).writeFloatLE(e,n),4}};e.Float=w;var _=class extends i{constructor(e){super(4,e)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r(e).readFloatBE(t)}encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return r(t).writeFloatBE(e,n),4}};e.FloatBE=_;var E=class extends i{constructor(e){super(8,e)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r(e).readDoubleLE(t)}encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return r(t).writeDoubleLE(e,n),8}};e.Double=E;var C=class extends i{constructor(e){super(8,e)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r(e).readDoubleBE(t)}encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return r(t).writeDoubleBE(e,n),8}};e.DoubleBE=C;var O=class extends i{constructor(e,t,n){if(!(e instanceof i))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof a&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let r=-1;!(t instanceof a)&&0<e.span&&(r=t*e.span),super(r,n),this.elementLayout=e,this.count=t}getSpan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0<=this.span)return this.span;let n=0,r=this.count;if(r instanceof a&&(r=r.decode(e,t)),0<this.elementLayout.span)n=r*this.elementLayout.span;else{let i=0;for(;i<r;)n+=this.elementLayout.getSpan(e,t+n),++i}return n}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=0,i=this.count;for(i instanceof a&&(i=i.decode(e,t));r<i;)n.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),r+=1;return n}encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.elementLayout,i=e.reduce(((e,i)=>e+r.encode(i,t,n+e)),0);return this.count instanceof a&&this.count.encode(e.length,t,n),i}};e.Sequence=O;var x=class extends i{constructor(e,t,n){if(!Array.isArray(e)||!e.reduce(((e,t)=>e&&t instanceof i),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof t&&void 0===n&&(n=t,t=void 0);for(let i of e)if(0>i.span&&void 0===i.property)throw new Error("fields cannot contain unnamed variable-length layout");let r=-1;try{r=e.reduce(((e,t)=>e+t.getSpan()),0)}catch{}super(r,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce(((n,r)=>{let i=r.getSpan(e,t);return t+=i,n+i}),0)}catch{throw new RangeError("indeterminate span")}return n}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(e);let r=this.makeDestinationObject();for(let n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(e,t)),t+=n.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=n,i=0,o=0;for(let a of this.fields){let r=a.span;if(o=0<r?r:0,void 0!==a.property){let i=e[a.property];void 0!==i&&(o=a.encode(i,t,n),0>r&&(r=a.getSpan(t,n)))}i=n,n+=r}return i+o-r}fromArray(e){let t=this.makeDestinationObject();for(let n of this.fields)void 0!==n.property&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw new TypeError("property must be string");let t=0;for(let n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}};e.Structure=x;var S=class{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,n){throw new Error("UnionDiscriminator is abstract")}};e.UnionDiscriminator=S;var k=class extends S{constructor(e,t){if(!(e instanceof a&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}};e.UnionLayoutDiscriminator=k;var T=class extends i{constructor(e,t,n){let r;if(e instanceof c||e instanceof l)r=new k(new f(e));else if(e instanceof a&&e.isCount())r=new k(e);else{if(!(e instanceof S))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");r=e}if(void 0===t&&(t=null),!(null===t||t instanceof i))throw new TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw new Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let o=-1;t&&(o=t.span,0<=o&&(e instanceof c||e instanceof l)&&(o+=r.layout.span)),super(o,n),this.discriminator=r,this.usesPrefixDiscriminator=e instanceof c||e instanceof l,this.defaultLayout=t,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return s(e)},this.configGetSourceVariant=function(e){s=e.bind(this)}}getSpan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0<=this.span)return this.span;let n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;let t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(let t in this.registry){let n=this.registry[t];if(n.property&&Object.prototype.hasOwnProperty.call(e,n.property))return n}throw new Error("unable to infer src variant")}decode(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.discriminator,i=r.decode(e,n),o=this.registry[i];if(void 0===o){let o=this.defaultLayout,a=0;this.usesPrefixDiscriminator&&(a=r.layout.span),t=this.makeDestinationObject(),t[r.property]=i,t[o.property]=o.decode(e,n+a)}else t=o.decode(e,n);return t}encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.getSourceVariant(e);if(void 0===r){let r=this.discriminator,i=this.defaultLayout,o=0;return this.usesPrefixDiscriminator&&(o=r.layout.span),r.encode(e[r.property],t,n),o+i.encode(e[i.property],t,n+o)}return r.encode(e,t,n)}addVariant(e,t,n){let r=new R(this,e,t,n);return this.registry[e]=r,r}getVariant(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t=e instanceof Uint8Array?this.discriminator.decode(e,n):e,this.registry[t]}};e.Union=T;var R=class extends i{constructor(e,t,n,r){if(!(e instanceof T))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof n&&void 0===r&&(r=n,n=null),n){if(!(n instanceof i))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof r)throw new TypeError("variant must have a String property")}let o=e.span;0>e.span&&(o=n?n.span:0,0<=o&&e.usesPrefixDiscriminator&&(o+=e.discriminator.layout.span)),super(o,r),this.union=e,this.variant=t,this.layout=n||null}getSpan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let r=0;return this.layout&&(r=this.layout.getSpan(e,t+n)),n+r}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+r):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let i=r;if(this.layout&&(this.layout.encode(e[this.property],t,n+r),i+=this.layout.getSpan(t,n+r),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}};function A(e){return 0>e&&(e+=4294967296),e}e.VariantLayout=R;var I=class extends i{constructor(e,t,n){if(!(e instanceof c||e instanceof l))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof t&&void 0===n&&(n=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,n),this.word=e,this.msb=!!t,this.fields=[];let r=0;this._packedSetValue=function(e){return r=A(e),this},this._packedGetValue=function(){return r}}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.makeDestinationObject(),r=this.word.decode(e,t);this._packedSetValue(r);for(let i of this.fields)void 0!==i.property&&(n[i.property]=i.decode(e));return n}encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.word.decode(t,n);this._packedSetValue(r);for(let i of this.fields)if(void 0!==i.property){let t=e[i.property];void 0!==t&&i.encode(t)}return this.word.encode(this._packedGetValue(),t,n)}addField(e,t){let n=new N(this,e,t);return this.fields.push(n),n}addBoolean(e){let t=new P(this,e);return this.fields.push(t),t}fieldFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}};e.BitStructure=I;var N=class{constructor(e,t,n){if(!(e instanceof I))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");let r=8*e.span,i=e.fields.reduce(((e,t)=>e+t.bits),0);if(t+i>r)throw new Error("bits too long for span remainder ("+(r-i)+" of "+r+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,32===t&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=r-i-t),this.wordMask=A(this.valueMask<<this.start),this.property=n}decode(e,t){return A(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(e){if("number"!=typeof e||!Number.isInteger(e)||e!==A(e&this.valueMask))throw new TypeError(o("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let t=this.container._packedGetValue(),n=A(e<<this.start);this.container._packedSetValue(A(t&~this.wordMask)|n)}};e.BitField=N;var P=class extends N{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){"boolean"==typeof e&&(e=+e),super.encode(e)}};e.Boolean=P;var D=class extends i{constructor(e,t){if(!(e instanceof a&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof a||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.span;return 0>n&&(n=this.length.decode(e,t)),r(e).slice(t,t+n)}encode(e,t,n){let i=this.length;if(this.length instanceof a&&(i=e.length),!(e instanceof Uint8Array&&i===e.length))throw new TypeError(o("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(n+i>t.length)throw new RangeError("encoding overruns Uint8Array");let s=r(e);return r(t).write(s.toString("hex"),n,i,"hex"),this.length instanceof a&&this.length.encode(i,t,n),i}};e.Blob=D;var B=class extends i{constructor(e){super(-1,e)}getSpan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(e);let r=t;for(;r<e.length&&0!==e[r];)r+=1;return 1+r-t}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.getSpan(e,t);return r(e).slice(t,t+n-1).toString("utf-8")}encode(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;"string"!=typeof e&&(e=String(e));let o=t.Buffer.from(e,"utf8"),a=o.length;if(i+a>n.length)throw new RangeError("encoding overruns Buffer");let s=r(n);return o.copy(s,i),s[i+a]=0,a+1}};e.CString=B;var M=class extends i{constructor(e,t){if("string"==typeof e&&void 0===t&&(t=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n(e),e.length-t}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return r(e).slice(t,t+n).toString("utf-8")}encode(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;"string"!=typeof e&&(e=String(e));let o=t.Buffer.from(e,"utf8"),a=o.length;if(0<=this.maxSpan&&this.maxSpan<a)throw new RangeError("text length exceeds maxSpan");if(i+a>n.length)throw new RangeError("encoding overruns Buffer");return o.copy(r(n),i),a}};e.UTF8=M;var K=class extends i{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,n){return 0}};e.Constant=K,e.greedy=(e,t)=>new s(e,t),e.offset=(e,t,n)=>new f(e,t,n),e.u8=e=>new c(1,e),e.u16=e=>new c(2,e),e.u24=e=>new c(3,e),e.u32=e=>new c(4,e),e.u40=e=>new c(5,e),e.u48=e=>new c(6,e),e.nu64=e=>new b(e),e.u16be=e=>new l(2,e),e.u24be=e=>new l(3,e),e.u32be=e=>new l(4,e),e.u40be=e=>new l(5,e),e.u48be=e=>new l(6,e),e.nu64be=e=>new y(e),e.s8=e=>new u(1,e),e.s16=e=>new u(2,e),e.s24=e=>new u(3,e),e.s32=e=>new u(4,e),e.s40=e=>new u(5,e),e.s48=e=>new u(6,e),e.ns64=e=>new m(e),e.s16be=e=>new d(2,e),e.s24be=e=>new d(3,e),e.s32be=e=>new d(4,e),e.s40be=e=>new d(5,e),e.s48be=e=>new d(6,e),e.ns64be=e=>new v(e),e.f32=e=>new w(e),e.f32be=e=>new _(e),e.f64=e=>new E(e),e.f64be=e=>new C(e),e.struct=(e,t,n)=>new x(e,t,n),e.bits=(e,t,n)=>new I(e,t,n),e.seq=(e,t,n)=>new O(e,t,n),e.union=(e,t,n)=>new T(e,t,n),e.unionLayoutDiscriminator=(e,t)=>new k(e,t),e.blob=(e,t)=>new D(e,t),e.cstr=e=>new B(e),e.utf8=(e,t)=>new M(e,t),e.constant=(e,t)=>new K(e,t)})),Mf=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toBigIntLE=function(e){{let t=r.from(e);t.reverse();let n=t.toString("hex");return 0===n.length?BigInt(0):BigInt(`0x${n}`)}},e.toBigIntBE=function(e){{let t=e.toString("hex");return 0===t.length?BigInt(0):BigInt(`0x${t}`)}},e.toBufferLE=function(e,t){{let n=e.toString(16),i=r.from(n.padStart(2*t,"0").slice(0,2*t),"hex");return i.reverse(),i}},e.toBufferBE=function(e,t){{let n=e.toString(16);return r.from(n.padStart(2*t,"0").slice(0,2*t),"hex")}}})),Kf=h(((e,t)=>{var r,o;r=e,o=function(e){class t extends TypeError{constructor(e,t){let n,{message:r,explanation:i,...o}=e,{path:a}=e,s=0===a.length?r:`At path: ${a.join(".")} -- ${r}`;super(i??s),null!=i&&(this.cause=s),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}}function n(e){return"object"==typeof e&&null!=e}function r(e){return n(e)&&!Array.isArray(e)}function o(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;let t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function a(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function s(e,t,n,r){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});let{path:i,branch:o}=t,{type:s}=n,{refinement:f,message:c=`Expected a value of type \`${s}\`${f?` with refinement \`${f}\``:""}, but received: \`${a(r)}\``}=e;return{value:r,type:s,refinement:f,key:i[i.length-1],path:i,branch:o,...e,message:c}}function*f(e,t,r,i){(function(e){return n(e)&&"function"==typeof e[Symbol.iterator]})(e)||(e=[e]);for(let n of e){let e=s(n,t,r,i);e&&(yield e)}}function c(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){let{path:i=[],branch:o=[e],coerce:a=!1,mask:s=!1}=r,f={path:i,branch:o,mask:s};a&&(e=t.coercer(e,f));let l="valid";for(let n of t.validator(e,f))n.explanation=r.message,l="not_valid",yield[n,void 0];for(let[u,d,h]of t.entries(e,f)){let t=c(d,h,{path:void 0===u?i:[...i,u],branch:void 0===u?o:[...o,d],coerce:a,mask:s,message:r.message});for(let r of t)r[0]?(l=null!=r[0].refinement?"not_refined":"not_valid",yield[r[0],void 0]):a&&(d=r[1],void 0===u?e=d:e instanceof Map?e.set(u,d):e instanceof Set?e.add(d):n(e)&&(void 0!==d||u in e)&&(e[u]=d))}if("not_valid"!==l)for(let n of t.refiner(e,f))n.explanation=r.message,l="not_refined",yield[n,void 0];"valid"===l&&(yield[void 0,e])}()}class l{constructor(e){let{type:t,schema:n,validator:r,refiner:i,coercer:o=e=>e,entries:a=function*(){}}=e;this.type=t,this.schema=n,this.entries=a,this.coercer=o,this.validator=r?(e,t)=>f(r(e,t),t,this,e):()=>[],this.refiner=i?(e,t)=>f(i(e,t),t,this,e):()=>[]}assert(e,t){return u(e,this,t)}create(e,t){return d(e,this,t)}is(e){return p(e,this)}mask(e,t){return h(e,this,t)}validate(e){return g(e,this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}}function u(e,t,n){let r=g(e,t,{message:n});if(r[0])throw r[0]}function d(e,t,n){let r=g(e,t,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function h(e,t,n){let r=g(e,t,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function p(e,t){return!g(e,t)[0]}function g(e,n){let r=c(e,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),i=function(e){let{done:t,value:n}=e.next();return t?void 0:n}(r);return i[0]?[new t(i[0],(function*(){for(let e of r)e[0]&&(yield e[0])})),void 0]:[void 0,i[1]]}function b(e,t){return new l({type:e,schema:null,validator:t})}function y(){return b("never",(()=>!1))}function m(e){let t=e?Object.keys(e):[],i=y();return new l({type:"object",schema:e||null,*entries(r){if(e&&n(r)){let n=new Set(Object.keys(r));for(let i of t)n.delete(i),yield[i,r[i],e[i]];for(let e of n)yield[e,r[e],i]}},validator:e=>r(e)||`Expected an object, but received: ${a(e)}`,coercer(t,n){if(!r(t))return t;let i={...t};if(n.mask&&e)for(let r in i)void 0===e[r]&&delete i[r];return i}})}function v(e){return new l({...e,validator:(t,n)=>void 0===t||e.validator(t,n),refiner:(t,n)=>void 0===t||e.refiner(t,n)})}function w(){return b("string",(e=>"string"==typeof e||`Expected a string, but received: ${a(e)}`))}function _(e){let t=Object.keys(e);return new l({type:"type",schema:e,*entries(r){if(n(r))for(let n of t)yield[n,r[n],e[n]]},validator:e=>r(e)||`Expected an object, but received: ${a(e)}`,coercer:e=>r(e)?{...e}:e})}function E(){return b("unknown",(()=>!0))}function C(e,t,n){return new l({...e,coercer:(r,i)=>p(r,t)?e.coercer(n(r,i),i):e.coercer(r,i)})}function O(e){return e instanceof Map||e instanceof Set?e.size:e.length}function x(e,t,n){return new l({...e,*refiner(r,i){yield*e.refiner(r,i);let o=f(n(r,i),i,e,r);for(let e of o)yield{...e,refinement:t}}})}e.Struct=l,e.StructError=t,e.any=function(){return b("any",(()=>!0))},e.array=function(e){return new l({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(let[n,r]of t.entries())yield[n,r,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${a(e)}`})},e.assert=u,e.assign=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r="type"===t[0].type,i=t.map((e=>e.schema)),o=Object.assign({},...i);return r?_(o):m(o)},e.bigint=function(){return b("bigint",(e=>"bigint"==typeof e))},e.boolean=function(){return b("boolean",(e=>"boolean"==typeof e))},e.coerce=C,e.create=d,e.date=function(){return b("date",(e=>e instanceof Date&&!isNaN(e.getTime())||`Expected a valid \`Date\` object, but received: ${a(e)}`))},e.defaulted=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return C(e,E(),(e=>{let r="function"==typeof t?t():t;if(void 0===e)return r;if(!n.strict&&o(e)&&o(r)){let t={...e},n=!1;for(let e in r)void 0===t[e]&&(t[e]=r[e],n=!0);if(n)return t}return e}))},e.define=b,e.deprecated=function(e,t){return new l({...e,refiner:(t,n)=>void 0===t||e.refiner(t,n),validator:(n,r)=>void 0===n||(t(n,r),e.validator(n,r))})},e.dynamic=function(e){return new l({type:"dynamic",schema:null,*entries(t,n){yield*e(t,n).entries(t,n)},validator:(t,n)=>e(t,n).validator(t,n),coercer:(t,n)=>e(t,n).coercer(t,n),refiner:(t,n)=>e(t,n).refiner(t,n)})},e.empty=function(e){return x(e,"empty",(t=>{let n=O(t);return 0===n||`Expected an empty ${e.type} but received one with a size of \`${n}\``}))},e.enums=function(e){let t={},n=e.map((e=>a(e))).join();for(let r of e)t[r]=r;return new l({type:"enums",schema:t,validator:t=>e.includes(t)||`Expected one of \`${n}\`, but received: ${a(t)}`})},e.func=function(){return b("func",(e=>"function"==typeof e||`Expected a function, but received: ${a(e)}`))},e.instance=function(e){return b("instance",(t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${a(t)}`))},e.integer=function(){return b("integer",(e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${a(e)}`))},e.intersection=function(e){return new l({type:"intersection",schema:null,*entries(t,n){for(let r of e)yield*r.entries(t,n)},*validator(t,n){for(let r of e)yield*r.validator(t,n)},*refiner(t,n){for(let r of e)yield*r.refiner(t,n)}})},e.is=p,e.lazy=function(e){let t;return new l({type:"lazy",schema:null,*entries(n,r){t??(t=e()),yield*t.entries(n,r)},validator:(n,r)=>(t??(t=e()),t.validator(n,r)),coercer:(n,r)=>(t??(t=e()),t.coercer(n,r)),refiner:(n,r)=>(t??(t=e()),t.refiner(n,r))})},e.literal=function(e){let t=a(e),n=typeof e;return new l({type:"literal",schema:"string"===n||"number"===n||"boolean"===n?e:null,validator:n=>n===e||`Expected the literal \`${t}\`, but received: ${a(n)}`})},e.map=function(e,t){return new l({type:"map",schema:null,*entries(n){if(e&&t&&n instanceof Map)for(let[r,i]of n.entries())yield[r,r,e],yield[r,i,t]},coercer:e=>e instanceof Map?new Map(e):e,validator:e=>e instanceof Map||`Expected a \`Map\` object, but received: ${a(e)}`})},e.mask=h,e.max=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{exclusive:r}=n;return x(e,"max",(n=>r?n<t:n<=t||`Expected a ${e.type} less than ${r?"":"or equal to "}${t} but received \`${n}\``))},e.min=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{exclusive:r}=n;return x(e,"min",(n=>r?n>t:n>=t||`Expected a ${e.type} greater than ${r?"":"or equal to "}${t} but received \`${n}\``))},e.never=y,e.nonempty=function(e){return x(e,"nonempty",(t=>O(t)>0||`Expected a nonempty ${e.type} but received an empty one`))},e.nullable=function(e){return new l({...e,validator:(t,n)=>null===t||e.validator(t,n),refiner:(t,n)=>null===t||e.refiner(t,n)})},e.number=function(){return b("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${a(e)}`))},e.object=m,e.omit=function(e,t){let{schema:n}=e,r={...n};for(let i of t)delete r[i];return"type"===e.type?_(r):m(r)},e.optional=v,e.partial=function(e){let t=e instanceof l,n=t?{...e.schema}:{...e};for(let r in n)n[r]=v(n[r]);return t&&"type"===e.type?_(n):m(n)},e.pattern=function(e,t){return x(e,"pattern",(n=>t.test(n)||`Expected a ${e.type} matching \`/${t.source}/\` but received "${n}"`))},e.pick=function(e,t){let{schema:n}=e,r={};for(let i of t)r[i]=n[i];return"type"===e.type?_(r):m(r)},e.record=function(e,t){return new l({type:"record",schema:null,*entries(r){if(n(r))for(let n in r){let i=r[n];yield[n,n,e],yield[n,i,t]}},validator:e=>r(e)||`Expected an object, but received: ${a(e)}`,coercer:e=>r(e)?{...e}:e})},e.refine=x,e.regexp=function(){return b("regexp",(e=>e instanceof RegExp))},e.set=function(e){return new l({type:"set",schema:null,*entries(t){if(e&&t instanceof Set)for(let n of t)yield[n,n,e]},coercer:e=>e instanceof Set?new Set(e):e,validator:e=>e instanceof Set||`Expected a \`Set\` object, but received: ${a(e)}`})},e.size=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=`Expected a ${e.type}`,i=t===n?`of \`${t}\``:`between \`${t}\` and \`${n}\``;return x(e,"size",(e=>{if("number"==typeof e||e instanceof Date)return t<=e&&e<=n||`${r} ${i} but received \`${e}\``;if(e instanceof Map||e instanceof Set){let{size:o}=e;return t<=o&&o<=n||`${r} with a size ${i} but received one with a size of \`${o}\``}{let{length:o}=e;return t<=o&&o<=n||`${r} with a length ${i} but received one with a length of \`${o}\``}}))},e.string=w,e.struct=function(e,t){return i.warn("superstruct@0.11 - The `struct` helper has been renamed to `define`."),b(e,t)},e.trimmed=function(e){return C(e,w(),(e=>e.trim()))},e.tuple=function(e){let t=y();return new l({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){let r=Math.max(e.length,n.length);for(let i=0;i<r;i++)yield[i,n[i],e[i]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${a(e)}`,coercer:e=>Array.isArray(e)?e.slice():e})},e.type=_,e.union=function(e){let t=e.map((e=>e.type)).join(" | ");return new l({type:"union",schema:null,coercer(t,n){for(let r of e){let[e,i]=r.validate(t,{coerce:!0,mask:n.mask});if(!e)return i}return t},validator(n,r){let i=[];for(let t of e){let[...e]=c(n,t,r),[o]=e;if(!o[0])return[];for(let[t]of e)t&&i.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${a(n)}`,...i]}})},e.unknown=E,e.validate=g},"object"==typeof e&&typeof t<"u"?o(e):"function"==typeof define&&n.amdO?define(["exports"],o):o((r=typeof globalThis<"u"?globalThis:r||self).Superstruct={})}));function Lf(){if(!Uf&&!(Uf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Uf(jf)}var Uf,jf,Wf,Hf=d((()=>{jf=new Uint8Array(16)})),$f=d((()=>{Wf=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i}));function qf(e){return"string"==typeof e&&Wf.test(e)}var Xf,Ff=d((()=>{$f(),Xf=qf}));function zf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Jf[e[t+0]]+Jf[e[t+1]]+Jf[e[t+2]]+Jf[e[t+3]]+"-"+Jf[e[t+4]]+Jf[e[t+5]]+"-"+Jf[e[t+6]]+Jf[e[t+7]]+"-"+Jf[e[t+8]]+Jf[e[t+9]]+"-"+Jf[e[t+10]]+Jf[e[t+11]]+Jf[e[t+12]]+Jf[e[t+13]]+Jf[e[t+14]]+Jf[e[t+15]]).toLowerCase();if(!Xf(n))throw TypeError("Stringified UUID is invalid");return n}var Jf,Vf,Gf,Yf=d((()=>{for(Ff(),Jf=[],Vf=0;Vf<256;++Vf)Jf.push((Vf+256).toString(16).substr(1));Gf=zf}));function Zf(e,t,n){var r=t&&n||0,i=t||new Array(16),o=(e=e||{}).node||Qf,a=void 0!==e.clockseq?e.clockseq:ec;if(null==o||null==a){var s=e.random||(e.rng||Lf)();null==o&&(o=Qf=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=ec=16383&(s[6]<<8|s[7]))}var f=void 0!==e.msecs?e.msecs:Date.now(),c=void 0!==e.nsecs?e.nsecs:nc+1,l=f-tc+(c-nc)/1e4;if(l<0&&void 0===e.clockseq&&(a=a+1&16383),(l<0||f>tc)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");tc=f,nc=c,ec=a;var u=(1e4*(268435455&(f+=122192928e5))+c)%4294967296;i[r++]=u>>>24&255,i[r++]=u>>>16&255,i[r++]=u>>>8&255,i[r++]=255&u;var d=f/4294967296*1e4&268435455;i[r++]=d>>>8&255,i[r++]=255&d,i[r++]=d>>>24&15|16,i[r++]=d>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var h=0;h<6;++h)i[r+h]=o[h];return t||Gf(i)}var Qf,ec,tc,nc,rc,ic=d((()=>{Hf(),Yf(),tc=0,nc=0,rc=Zf}));function oc(e){if(!Xf(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}var ac,sc=d((()=>{Ff(),ac=oc}));function fc(e,t,n){function r(e,r,i,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=ac(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+e.length);if(a.set(r),a.set(e,r.length),(a=n(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,i){o=o||0;for(var s=0;s<16;++s)i[o+s]=a[s];return i}return Gf(a)}try{r.name=e}catch{}return r.DNS=cc,r.URL=lc,r}var cc,lc,uc=d((()=>{Yf(),sc(),cc="6ba7b810-9dad-11d1-80b4-00c04fd430c8",lc="6ba7b811-9dad-11d1-80b4-00c04fd430c8"}));function dc(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],n=32*e.length,r="0123456789abcdef",i=0;i<n;i+=8){var o=e[i>>5]>>>i%32&255,a=parseInt(r.charAt(o>>>4&15)+r.charAt(15&o),16);t.push(a)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[hc(t)-1]=t;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,a=0;a<e.length;a+=16){var s=n,f=r,c=i,l=o;n=bc(n,r,i,o,e[a],7,-680876936),o=bc(o,n,r,i,e[a+1],12,-389564586),i=bc(i,o,n,r,e[a+2],17,606105819),r=bc(r,i,o,n,e[a+3],22,-1044525330),n=bc(n,r,i,o,e[a+4],7,-176418897),o=bc(o,n,r,i,e[a+5],12,1200080426),i=bc(i,o,n,r,e[a+6],17,-1473231341),r=bc(r,i,o,n,e[a+7],22,-45705983),n=bc(n,r,i,o,e[a+8],7,1770035416),o=bc(o,n,r,i,e[a+9],12,-1958414417),i=bc(i,o,n,r,e[a+10],17,-42063),r=bc(r,i,o,n,e[a+11],22,-1990404162),n=bc(n,r,i,o,e[a+12],7,1804603682),o=bc(o,n,r,i,e[a+13],12,-40341101),i=bc(i,o,n,r,e[a+14],17,-1502002290),n=yc(n,r=bc(r,i,o,n,e[a+15],22,1236535329),i,o,e[a+1],5,-165796510),o=yc(o,n,r,i,e[a+6],9,-1069501632),i=yc(i,o,n,r,e[a+11],14,643717713),r=yc(r,i,o,n,e[a],20,-373897302),n=yc(n,r,i,o,e[a+5],5,-701558691),o=yc(o,n,r,i,e[a+10],9,38016083),i=yc(i,o,n,r,e[a+15],14,-660478335),r=yc(r,i,o,n,e[a+4],20,-405537848),n=yc(n,r,i,o,e[a+9],5,568446438),o=yc(o,n,r,i,e[a+14],9,-1019803690),i=yc(i,o,n,r,e[a+3],14,-187363961),r=yc(r,i,o,n,e[a+8],20,1163531501),n=yc(n,r,i,o,e[a+13],5,-1444681467),o=yc(o,n,r,i,e[a+2],9,-51403784),i=yc(i,o,n,r,e[a+7],14,1735328473),n=mc(n,r=yc(r,i,o,n,e[a+12],20,-1926607734),i,o,e[a+5],4,-378558),o=mc(o,n,r,i,e[a+8],11,-2022574463),i=mc(i,o,n,r,e[a+11],16,1839030562),r=mc(r,i,o,n,e[a+14],23,-35309556),n=mc(n,r,i,o,e[a+1],4,-1530992060),o=mc(o,n,r,i,e[a+4],11,1272893353),i=mc(i,o,n,r,e[a+7],16,-155497632),r=mc(r,i,o,n,e[a+10],23,-1094730640),n=mc(n,r,i,o,e[a+13],4,681279174),o=mc(o,n,r,i,e[a],11,-358537222),i=mc(i,o,n,r,e[a+3],16,-722521979),r=mc(r,i,o,n,e[a+6],23,76029189),n=mc(n,r,i,o,e[a+9],4,-640364487),o=mc(o,n,r,i,e[a+12],11,-421815835),i=mc(i,o,n,r,e[a+15],16,530742520),n=vc(n,r=mc(r,i,o,n,e[a+2],23,-995338651),i,o,e[a],6,-198630844),o=vc(o,n,r,i,e[a+7],10,1126891415),i=vc(i,o,n,r,e[a+14],15,-1416354905),r=vc(r,i,o,n,e[a+5],21,-57434055),n=vc(n,r,i,o,e[a+12],6,1700485571),o=vc(o,n,r,i,e[a+3],10,-1894986606),i=vc(i,o,n,r,e[a+10],15,-1051523),r=vc(r,i,o,n,e[a+1],21,-2054922799),n=vc(n,r,i,o,e[a+8],6,1873313359),o=vc(o,n,r,i,e[a+15],10,-30611744),i=vc(i,o,n,r,e[a+6],15,-1560198380),r=vc(r,i,o,n,e[a+13],21,1309151649),n=vc(n,r,i,o,e[a+4],6,-145523070),o=vc(o,n,r,i,e[a+11],10,-1120210379),i=vc(i,o,n,r,e[a+2],15,718787259),r=vc(r,i,o,n,e[a+9],21,-343485551),n=pc(n,s),r=pc(r,f),i=pc(i,c),o=pc(o,l)}return[n,r,i,o]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(hc(t)),r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))}function hc(e){return 14+(e+64>>>9<<4)+1}function pc(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function gc(e,t,n,r,i,o){return pc(function(e,t){return e<<t|e>>>32-t}(pc(pc(t,e),pc(r,o)),i),n)}function bc(e,t,n,r,i,o,a){return gc(t&n|~t&r,e,t,i,o,a)}function yc(e,t,n,r,i,o,a){return gc(t&r|n&~r,e,t,i,o,a)}function mc(e,t,n,r,i,o,a){return gc(t^n^r,e,t,i,o,a)}function vc(e,t,n,r,i,o,a){return gc(n^(t|~r),e,t,i,o,a)}var wc,_c,Ec,Cc=d((()=>{wc=dc})),Oc=d((()=>{uc(),Cc(),_c=fc("v3",48,wc),Ec=_c}));function xc(e,t,n){var r=(e=e||{}).random||(e.rng||Lf)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return Gf(r)}var Sc,kc=d((()=>{Hf(),Yf(),Sc=xc}));function Tc(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function Rc(e,t){return e<<t|e>>>32-t}function Ac(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var i=0;i<r.length;++i)e.push(r.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,a=Math.ceil(o/16),s=new Array(a),f=0;f<a;++f){for(var c=new Uint32Array(16),l=0;l<16;++l)c[l]=e[64*f+4*l]<<24|e[64*f+4*l+1]<<16|e[64*f+4*l+2]<<8|e[64*f+4*l+3];s[f]=c}s[a-1][14]=8*(e.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(var u=0;u<a;++u){for(var d=new Uint32Array(80),h=0;h<16;++h)d[h]=s[u][h];for(var p=16;p<80;++p)d[p]=Rc(d[p-3]^d[p-8]^d[p-14]^d[p-16],1);for(var g=n[0],b=n[1],y=n[2],m=n[3],v=n[4],w=0;w<80;++w){var _=Math.floor(w/20),E=Rc(g,5)+Tc(_,b,y,m)+v+t[_]+d[w]>>>0;v=m,m=y,y=Rc(b,30)>>>0,b=g,g=E}n[0]=n[0]+g>>>0,n[1]=n[1]+b>>>0,n[2]=n[2]+y>>>0,n[3]=n[3]+m>>>0,n[4]=n[4]+v>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}var Ic,Nc,Pc,Dc,Bc=d((()=>{Ic=Ac})),Mc=d((()=>{uc(),Bc(),Nc=fc("v5",80,Ic),Pc=Nc})),Kc=d((()=>{Dc="00000000-0000-0000-0000-000000000000"}));function Lc(e){if(!Xf(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var Uc,jc=d((()=>{Ff(),Uc=Lc})),Wc={};p(Wc,{NIL:()=>Dc,parse:()=>ac,stringify:()=>Gf,v1:()=>rc,v3:()=>Ec,v4:()=>Sc,v5:()=>Pc,validate:()=>Xf,version:()=>Uc});var Hc,$c=d((()=>{ic(),Oc(),kc(),Mc(),Kc(),jc(),Ff(),Yf(),sc()})),qc=h(((e,t)=>{var n=($c(),y(Wc)).v4;t.exports=function(e,t,r,i){if("string"!=typeof e)throw new TypeError(e+" must be a string");let o="number"==typeof(i=i||{}).version?i.version:2;if(1!==o&&2!==o)throw new TypeError(o+" must be 1 or 2");let a={method:e};if(2===o&&(a.jsonrpc="2.0"),t){if("object"!=typeof t&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");a.params=t}if(typeof r>"u"){let e="function"==typeof i.generator?i.generator:function(){return n()};a.id=e(a,i)}else 2===o&&null===r?i.notificationIdNull&&(a.id=null):a.id=r;return a}})),Xc=h(((e,t)=>{var n=($c(),y(Wc)).v4,r=qc(),i=function(e,t){if(!(this instanceof i))return new i(e,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return n()},version:typeof t.version<"u"?t.version:2,notificationIdNull:"boolean"==typeof t.notificationIdNull&&t.notificationIdNull},this.callServer=e};t.exports=i,i.prototype.request=function(e,t,n,i){let o,a=this,s=null,f=Array.isArray(e)&&"function"==typeof t;if(1===this.options.version&&f)throw new TypeError("JSON-RPC 1.0 does not support batching");if(f||!f&&e&&"object"==typeof e&&"function"==typeof t)i=t,s=e;else{"function"==typeof n&&(i=n,n=void 0);let o="function"==typeof i;try{s=r(e,t,n,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(c){if(o)return i(c);throw c}if(!o)return s}try{o=JSON.stringify(s,this.options.replacer)}catch(Hc){return i(Hc)}return this.callServer(o,(function(e,t){a._parseResponse(e,t,i)})),s},i.prototype._parseResponse=function(e,t,n){if(e)return void n(e);if(!t)return n();let r;try{r=JSON.parse(t,this.options.reviver)}catch(i){return n(i)}if(3===n.length){if(Array.isArray(r)){let e=function(e){return typeof e.error<"u"},t=function(t){return!e(t)};return n(null,r.filter(e),r.filter(t))}return n(null,r.error,r.result)}n(null,r)}})),Fc=h((e=>{var t=_s(),n=dn(),r=class extends n.EventEmitter{socket;constructor(e,t,n){super(),this.socket=new window.WebSocket(e,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=e=>this.emit("message",e.data),this.socket.onerror=e=>this.emit("error",e),this.socket.onclose=e=>{this.emit("close",e.code,e.reason)}}send(e,t,n){let r=n||t;try{this.socket.send(e),r()}catch(i){r(i)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,n){this.socket.addEventListener(e,t,n)}};function i(e,t){return new r(e,t)}var o=class{encode(e){return JSON.stringify(e)}decode(e){return JSON.parse(e)}},a=class extends n.EventEmitter{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ws://localhost:8080",{autoconnect:n=!0,reconnect:r=!0,reconnect_interval:i=1e3,max_reconnects:a=5,...s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;super(),this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=n,this.ready=!1,this.reconnect=r,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=a,this.rest_options=s,this.current_reconnects=0,this.generate_request_id=f||(()=>++this.rpc_id),this.dataPack=c||new o,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,n,r){return!r&&"object"==typeof n&&(r=n,n=null),new Promise(((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));let a=this.generate_request_id(e,t),s={jsonrpc:"2.0",method:e,params:t||void 0,id:a};this.socket.send(this.dataPack.encode(s),r,(e=>{if(e)return o(e);this.queue[a]={promise:[i,o]},n&&(this.queue[a].timeout=setTimeout((()=>{delete this.queue[a],o(new Error("reply timeout"))}),n))}))}))}async login(e){let t=await this.call("rpc.login",e);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise(((n,r)=>{if(!this.ready)return r(new Error("socket not ready"));let i={jsonrpc:"2.0",method:e,params:t};this.socket.send(this.dataPack.encode(i),(e=>{if(e)return r(e);n()}))}))}async subscribe(e){"string"==typeof e&&(e=[e]);let t=await this.call("rpc.on",e);if("string"==typeof e&&"ok"!==t[e])throw new Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){"string"==typeof e&&(e=[e]);let t=await this.call("rpc.off",e);if("string"==typeof e&&"ok"!==t[e])throw new Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,n){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,n),this.socket.addEventListener("open",(()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0})),this.socket.addEventListener("message",(e=>{let{data:n}=e;n instanceof ArrayBuffer&&(n=t.Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);let e=[n.notification];if(n.params.constructor===Object)e.push(n.params);else for(let t=0;t<n.params.length;t++)e.push(n.params[t]);return Promise.resolve().then((()=>{this.emit.apply(this,e)}))}if(!this.queue[n.id])return n.method?Promise.resolve().then((()=>{this.emit(n.method,n?.params)})):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]})),this.socket.addEventListener("error",(e=>this.emit("error",e))),this.socket.addEventListener("close",(t=>{let{code:r,reason:i}=t;this.ready&&setTimeout((()=>this.emit("close",r,i)),0),this.ready=!1,this.socket=void 0,1e3!==r&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||0===this.max_reconnects)&&(this.reconnect_timer_id=setTimeout((()=>this._connect(e,n)),this.reconnect_interval)))}))}};e.Client=class extends a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8080",{autoconnect:t=!0,reconnect:n=!0,reconnect_interval:r=1e3,max_reconnects:o=5}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(i,e,{autoconnect:t,reconnect:n,reconnect_interval:r,max_reconnects:o},arguments.length>2?arguments[2]:void 0)}},e.CommonClient=a,e.DefaultDataPack=o,e.WebSocket=i})),zc=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.add5L=e.add5H=e.add4H=e.add4L=e.add3H=e.add3L=e.rotlBL=e.rotlBH=e.rotlSL=e.rotlSH=e.rotr32L=e.rotr32H=e.rotrBL=e.rotrBH=e.rotrSL=e.rotrSH=e.shrSL=e.shrSH=e.toBig=void 0,e.fromBig=r,e.split=i,e.add=m;var t=BigInt(2**32-1),n=BigInt(32);function r(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(e&t),l:Number(e>>n&t)}:{h:0|Number(e>>n&t),l:0|Number(e&t)}}function i(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let o=0;o<e.length;o++){let{h:a,l:s}=r(e[o],t);[n[o],i[o]]=[a,s]}return[n,i]}var o=(e,t)=>BigInt(e>>>0)<<n|BigInt(t>>>0);e.toBig=o;var a=(e,t,n)=>e>>>n;e.shrSH=a;var s=(e,t,n)=>e<<32-n|t>>>n;e.shrSL=s;var f=(e,t,n)=>e>>>n|t<<32-n;e.rotrSH=f;var c=(e,t,n)=>e<<32-n|t>>>n;e.rotrSL=c;var l=(e,t,n)=>e<<64-n|t>>>n-32;e.rotrBH=l;var u=(e,t,n)=>e>>>n-32|t<<64-n;e.rotrBL=u;var d=(e,t)=>t;e.rotr32H=d;var h=(e,t)=>e;e.rotr32L=h;var p=(e,t,n)=>e<<n|t>>>32-n;e.rotlSH=p;var g=(e,t,n)=>t<<n|e>>>32-n;e.rotlSL=g;var b=(e,t,n)=>t<<n-32|e>>>64-n;e.rotlBH=b;var y=(e,t,n)=>e<<n-32|t>>>64-n;function m(e,t,n,r){let i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:0|i}}e.rotlBL=y;var v=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0);e.add3L=v;var w=(e,t,n,r)=>t+n+r+(e/2**32|0)|0;e.add3H=w;var _=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0);e.add4L=_;var E=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0;e.add4H=E;var C=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0);e.add5L=C;var O=(e,t,n,r,i,o)=>t+n+r+i+o+(e/2**32|0)|0;e.add5H=O;var x={fromBig:r,split:i,toBig:o,shrSH:a,shrSL:s,rotrSH:f,rotrSL:c,rotrBH:l,rotrBL:u,rotr32H:d,rotr32L:h,rotlSH:p,rotlSL:g,rotlBH:b,rotlBL:y,add:m,add3L:v,add3H:w,add4L:_,add4H:E,add5H:O,add5L:C};e.default=x})),Jc=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.shake256=e.shake128=e.keccak_512=e.keccak_384=e.keccak_256=e.keccak_224=e.sha3_512=e.sha3_384=e.sha3_256=e.sha3_224=e.Keccak=void 0,e.keccakP=y;var t=Tf(),n=zc(),r=Af(),i=[],o=[],a=[],s=BigInt(0),f=BigInt(1),c=BigInt(2),l=BigInt(7),u=BigInt(256),d=BigInt(113);for(let _=0,E=f,C=1,O=0;_<24;_++){[C,O]=[O,(2*C+3*O)%5],i.push(2*(5*O+C)),o.push((_+1)*(_+2)/2%64);let e=s;for(let t=0;t<7;t++)E=(E<<f^(E>>l)*d)%u,E&c&&(e^=f<<(f<<BigInt(t))-f);a.push(e)}var[h,p]=(0,n.split)(a,!0),g=(e,t,r)=>r>32?(0,n.rotlBH)(e,t,r):(0,n.rotlSH)(e,t,r),b=(e,t,r)=>r>32?(0,n.rotlBL)(e,t,r):(0,n.rotlSL)(e,t,r);function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let r=0;r<10;r++)n[r]=e[r]^e[r+10]^e[r+20]^e[r+30]^e[r+40];for(let r=0;r<10;r+=2){let t=(r+8)%10,i=(r+2)%10,o=n[i],a=n[i+1],s=g(o,a,1)^n[t],f=b(o,a,1)^n[t+1];for(let n=0;n<50;n+=10)e[r+n]^=s,e[r+n+1]^=f}let t=e[2],a=e[3];for(let n=0;n<24;n++){let r=o[n],s=g(t,a,r),f=b(t,a,r),c=i[n];t=e[c],a=e[c+1],e[c]=s,e[c+1]=f}for(let r=0;r<50;r+=10){for(let t=0;t<10;t++)n[t]=e[r+t];for(let t=0;t<10;t++)e[r+t]^=~n[(t+2)%10]&n[(t+4)%10]}e[0]^=h[r],e[1]^=p[r]}n.fill(0)}var m=class e extends r.Hash{constructor(e,n,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:24;if(super(),this.blockLen=e,this.suffix=n,this.outputLen=i,this.enableXOF=o,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,t.anumber)(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,r.u32)(this.state)}keccak(){r.isLE||(0,r.byteSwap32)(this.state32),y(this.state32,this.rounds),r.isLE||(0,r.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(e){(0,t.aexists)(this);let{blockLen:n,state:i}=this,o=(e=(0,r.toBytes)(e)).length;for(let t=0;t<o;){let r=Math.min(n-this.pos,o-t);for(let n=0;n<r;n++)i[this.pos++]^=e[t++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:n,blockLen:r}=this;e[n]^=t,128&t&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){(0,t.aexists)(this,!1),(0,t.abytes)(e),this.finish();let n=this.state,{blockLen:r}=this;for(let t=0,i=e.length;t<i;){this.posOut>=r&&this.keccak();let o=Math.min(r-this.posOut,i-t);e.set(n.subarray(this.posOut,this.posOut+o),t),this.posOut+=o,t+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,t.anumber)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,t.aoutput)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:n,suffix:r,outputLen:i,rounds:o,enableXOF:a}=this;return t||(t=new e(n,r,i,a,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=r,t.outputLen=i,t.enableXOF=a,t.destroyed=this.destroyed,t}};e.Keccak=m;var v=(e,t,n)=>(0,r.wrapConstructor)((()=>new m(t,e,n)));e.sha3_224=v(6,144,28),e.sha3_256=v(6,136,32),e.sha3_384=v(6,104,48),e.sha3_512=v(6,72,64),e.keccak_224=v(1,144,28),e.keccak_256=v(1,136,32),e.keccak_384=v(1,104,48),e.keccak_512=v(1,72,64);var w=(e,t,n)=>(0,r.wrapXOFConstructorWithOpts)((function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new m(t,e,void 0===r.dkLen?n:r.dkLen,!0)}));e.shake128=w(31,168,16),e.shake256=w(31,136,32)})),Vc=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sha224=e.sha256=e.SHA256=void 0;var t=hf(),n=df(),r=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),i=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),o=new Uint32Array(64),a=class extends t.HashMD{constructor(){super(64,32,8,!1),this.A=0|i[0],this.B=0|i[1],this.C=0|i[2],this.D=0|i[3],this.E=0|i[4],this.F=0|i[5],this.G=0|i[6],this.H=0|i[7]}get(){let{A:e,B:t,C:n,D:r,E:i,F:o,G:a,H:s}=this;return[e,t,n,r,i,o,a,s]}set(e,t,n,r,i,o,a,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|a,this.H=0|s}process(e,i){for(let t=0;t<16;t++,i+=4)o[t]=e.getUint32(i,!1);for(let t=16;t<64;t++){let e=o[t-15],r=o[t-2],i=(0,n.rotr)(e,7)^(0,n.rotr)(e,18)^e>>>3,a=(0,n.rotr)(r,17)^(0,n.rotr)(r,19)^r>>>10;o[t]=a+o[t-7]+i+o[t-16]|0}let{A:a,B:s,C:f,D:c,E:l,F:u,G:d,H:h}=this;for(let p=0;p<64;p++){let e=h+((0,n.rotr)(l,6)^(0,n.rotr)(l,11)^(0,n.rotr)(l,25))+(0,t.Chi)(l,u,d)+r[p]+o[p]|0,i=((0,n.rotr)(a,2)^(0,n.rotr)(a,13)^(0,n.rotr)(a,22))+(0,t.Maj)(a,s,f)|0;h=d,d=u,u=l,l=c+e|0,c=f,f=s,s=a,a=e+i|0}a=a+this.A|0,s=s+this.B|0,f=f+this.C|0,c=c+this.D|0,l=l+this.E|0,u=u+this.F|0,d=d+this.G|0,h=h+this.H|0,this.set(a,s,f,c,l,u,d,h)}roundClean(){o.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};e.SHA256=a;var s=class extends a{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};e.sha256=(0,n.wrapConstructor)((()=>new a)),e.sha224=(0,n.wrapConstructor)((()=>new s))})),Gc=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=e.HMAC=void 0;var t=lf(),n=df(),r=class extends n.Hash{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,(0,t.ahash)(e);let i=(0,n.toBytes)(r);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,a=new Uint8Array(o);a.set(i.length>o?e.create().update(i).digest():i);for(let t=0;t<a.length;t++)a[t]^=54;this.iHash.update(a),this.oHash=e.create();for(let t=0;t<a.length;t++)a[t]^=106;this.oHash.update(a),a.fill(0)}update(e){return(0,t.aexists)(this),this.iHash.update(e),this}digestInto(e){(0,t.aexists)(this),(0,t.abytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:a}=this;return e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};e.HMAC=r;e.hmac=(e,t,n)=>new r(e,t).update(n).digest(),e.hmac.create=(e,t)=>new r(e,t)})),Yc=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DER=void 0,e.weierstrassPoints=h,e.weierstrass=function(a){let s=function(e){let n=(0,t.validateBasic)(e);return r.validateObject(n,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...n})}(a),{Fp:l,n:u}=s,d=l.BYTES+1,p=2*l.BYTES+1;function g(e){return n.mod(e,u)}function b(e){return n.invert(e,u)}let{ProjectivePoint:y,normPrivateKeyToScalar:m,weierstrassEquation:v,isWithinCurveOrder:w}=h({...s,toBytes(e,t,n){let o=t.toAffine(),a=l.toBytes(o.x),s=r.concatBytes;return(0,i.abool)("isCompressed",n),n?s(Uint8Array.from([t.hasEvenY()?2:3]),a):s(Uint8Array.from([4]),a,l.toBytes(o.y))},fromBytes(e){let t=e.length,n=e[0],i=e.subarray(1);if(t!==d||2!==n&&3!==n){if(t===p&&4===n){return{x:l.fromBytes(i.subarray(0,l.BYTES)),y:l.fromBytes(i.subarray(l.BYTES,2*l.BYTES))}}throw new Error("invalid Point, expected length of "+d+", or uncompressed "+p+", got "+t)}{let e=r.bytesToNumberBE(i);if(!r.inRange(e,c,l.ORDER))throw new Error("Point is not on curve");let t,a=v(e);try{t=l.sqrt(a)}catch(o){let e=o instanceof Error?": "+o.message:"";throw new Error("Point is not on curve"+e)}return 1===(1&n)!==((t&c)===c)&&(t=l.neg(t)),{x:e,y:t}}}}),_=e=>r.bytesToHex(r.numberToBytesBE(e,s.nByteLength));function E(e){return e>u>>c}let C=(e,t,n)=>r.bytesToNumberBE(e.slice(t,n));class O{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){let t=s.nByteLength;return e=(0,i.ensureBytes)("compactSignature",e,2*t),new O(C(e,0,t),C(e,t,2*t))}static fromDER(t){let{r:n,s:r}=e.DER.toSig((0,i.ensureBytes)("DER",t));return new O(n,r)}assertValidity(){r.aInRange("r",this.r,c,u),r.aInRange("s",this.s,c,u)}addRecoveryBit(e){return new O(this.r,this.s,e)}recoverPublicKey(e){let{r:t,s:n,recovery:r}=this,o=T((0,i.ensureBytes)("msgHash",e));if(null==r||![0,1,2,3].includes(r))throw new Error("recovery id invalid");let a=2===r||3===r?t+s.n:t;if(a>=l.ORDER)throw new Error("recovery id 2 or 3 invalid");let f=1&r?"03":"02",c=y.fromHex(f+_(a)),u=b(a),d=g(-o*u),h=g(n*u),p=y.BASE.multiplyAndAddUnsafe(c,d,h);if(!p)throw new Error("point at infinify");return p.assertValidity(),p}hasHighS(){return E(this.s)}normalizeS(){return this.hasHighS()?new O(this.r,g(-this.s),this.recovery):this}toDERRawBytes(){return r.hexToBytes(this.toDERHex())}toDERHex(){return e.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return r.hexToBytes(this.toCompactHex())}toCompactHex(){return _(this.r)+_(this.s)}}let x={isValidPrivateKey(e){try{return m(e),!0}catch{return!1}},normPrivateKeyToScalar:m,randomPrivateKey:()=>{let e=n.getMinHashLength(s.n);return n.mapHashToField(s.randomBytes(e),s.n)},precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}};function S(e){let t=r.isBytes(e),n="string"==typeof e,i=(t||n)&&e.length;return t?i===d||i===p:n?i===2*d||i===2*p:e instanceof y}let k=s.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");let t=r.bytesToNumberBE(e),n=8*e.length-s.nBitLength;return n>0?t>>BigInt(n):t},T=s.bits2int_modN||function(e){return g(k(e))},R=r.bitMask(s.nBitLength);function A(e){return r.aInRange("num < 2^"+s.nBitLength,e,f,R),r.numberToBytesBE(e,s.nByteLength)}function I(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N;if(["recovered","canonical"].some((e=>e in n)))throw new Error("sign() legacy options not supported");let{hash:a,randomBytes:u}=s,{lowS:d,prehash:h,extraEntropy:p}=n;null==d&&(d=!0),e=(0,i.ensureBytes)("msgHash",e),o(n),h&&(e=(0,i.ensureBytes)("prehashed msgHash",a(e)));let v=T(e),_=m(t),C=[A(_),A(v)];if(null!=p&&!1!==p){let e=!0===p?u(l.BYTES):p;C.push((0,i.ensureBytes)("extraEntropy",e))}let x=r.concatBytes(...C),S=v;return{seed:x,k2sig:function(e){let t=k(e);if(!w(t))return;let n=b(t),r=y.BASE.multiply(t).toAffine(),i=g(r.x);if(i===f)return;let o=g(n*g(S+i*_));if(o===f)return;let a=(r.x===i?0:2)|Number(r.y&c),s=o;return d&&E(o)&&(s=function(e){return E(e)?g(-e):e}(o),a^=1),new O(i,s,a)}}}let N={lowS:s.lowS,prehash:!1},P={lowS:s.lowS,prehash:!1};return y.BASE._setWindowSize(8),{CURVE:s,getPublicKey:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return y.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(S(e))throw new Error("first arg must be private key");if(!S(t))throw new Error("second arg must be public key");return y.fromHex(t).multiply(m(e)).toRawBytes(n)},sign:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N,{seed:i,k2sig:o}=I(e,t,n),a=s;return r.createHmacDrbg(a.hash.outputLen,a.nByteLength,a.hmac)(i,o)},verify:function(t,n,a){let f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:P,c=t;n=(0,i.ensureBytes)("msgHash",n),a=(0,i.ensureBytes)("publicKey",a);let{lowS:l,prehash:u,format:d}=f;if(o(f),"strict"in f)throw new Error("options.strict was renamed to lowS");if(void 0!==d&&"compact"!==d&&"der"!==d)throw new Error("format must be compact or der");let h,p,m="string"==typeof c||r.isBytes(c),v=!m&&!d&&"object"==typeof c&&null!==c&&"bigint"==typeof c.r&&"bigint"==typeof c.s;if(!m&&!v)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(v&&(h=new O(c.r,c.s)),m){try{"compact"!==d&&(h=O.fromDER(c))}catch(R){if(!(R instanceof e.DER.Err))throw R}!h&&"der"!==d&&(h=O.fromCompact(c))}p=y.fromHex(a)}catch{return!1}if(!h||l&&h.hasHighS())return!1;u&&(n=s.hash(n));let{r:w,s:_}=h,E=T(n),C=b(_),x=g(E*C),S=g(w*C),k=y.BASE.multiplyAndAddUnsafe(p,x,S)?.toAffine();return!!k&&g(k.x)===w},ProjectivePoint:y,Signature:O,utils:x}},e.SWUFpSqrtRatio=p,e.mapToCurveSimpleSWU=function(e,t){if(n.validateField(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");let r=p(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,o,a,s,f,c,l,u;i=e.sqr(n),i=e.mul(i,t.Z),o=e.sqr(i),o=e.add(o,i),a=e.add(o,e.ONE),a=e.mul(a,t.B),s=e.cmov(t.Z,e.neg(o),!e.eql(o,e.ZERO)),s=e.mul(s,t.A),o=e.sqr(a),c=e.sqr(s),f=e.mul(c,t.A),o=e.add(o,f),o=e.mul(o,a),c=e.mul(c,s),f=e.mul(c,t.B),o=e.add(o,f),l=e.mul(i,a);let{isValid:d,value:h}=r(o,c);u=e.mul(i,n),u=e.mul(u,h),l=e.cmov(l,a,d),u=e.cmov(u,h,d);let p=e.isOdd(n)===e.isOdd(u);return u=e.cmov(e.neg(u),u,p),l=e.div(l,s),{x:l,y:u}}};var t=mf(),n=yf(),r=bf(),i=bf();function o(e){void 0!==e.lowS&&(0,i.abool)("lowS",e.lowS),void 0!==e.prehash&&(0,i.abool)("prehash",e.prehash)}var{bytesToNumberBE:a,hexToBytes:s}=r;e.DER={Err:class extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},_tlv:{encode:(t,n)=>{let{Err:i}=e.DER;if(t<0||t>256)throw new i("tlv.encode: wrong tag");if(1&n.length)throw new i("tlv.encode: unpadded data");let o=n.length/2,a=r.numberToHexUnpadded(o);if(a.length/2&128)throw new i("tlv.encode: long form length too big");let s=o>127?r.numberToHexUnpadded(a.length/2|128):"";return r.numberToHexUnpadded(t)+s+a+n},decode(t,n){let{Err:r}=e.DER,i=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(n.length<2||n[i++]!==t)throw new r("tlv.decode: wrong tlv");let o=n[i++],a=0;if(!!(128&o)){let e=127&o;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let t=n.subarray(i,i+e);if(t.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===t[0])throw new r("tlv.decode(long): zero leftmost byte");for(let n of t)a=a<<8|n;if(i+=e,a<128)throw new r("tlv.decode(long): not minimal encoding")}else a=o;let s=n.subarray(i,i+a);if(s.length!==a)throw new r("tlv.decode: wrong value length");return{v:s,l:n.subarray(i+a)}}},_int:{encode(t){let{Err:n}=e.DER;if(t<f)throw new n("integer: negative integers are not allowed");let i=r.numberToHexUnpadded(t);if(8&Number.parseInt(i[0],16)&&(i="00"+i),1&i.length)throw new n("unexpected DER parsing assertion: unpadded hex");return i},decode(t){let{Err:n}=e.DER;if(128&t[0])throw new n("invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new n("invalid signature integer: unnecessary leading zero");return a(t)}},toSig(t){let{Err:n,_int:i,_tlv:o}=e.DER,a="string"==typeof t?s(t):t;r.abytes(a);let{v:f,l:c}=o.decode(48,a);if(c.length)throw new n("invalid signature: left bytes after parsing");let{v:l,l:u}=o.decode(2,f),{v:d,l:h}=o.decode(2,u);if(h.length)throw new n("invalid signature: left bytes after parsing");return{r:i.decode(l),s:i.decode(d)}},hexFromSig(t){let{_tlv:n,_int:r}=e.DER,i=n.encode(2,r.encode(t.r))+n.encode(2,r.encode(t.s));return n.encode(48,i)}};var f=BigInt(0),c=BigInt(1),l=BigInt(2),u=BigInt(3),d=BigInt(4);function h(e){let o=function(e){let n=(0,t.validateBasic)(e);r.validateObject(n,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:i,Fp:o,a:a}=n;if(i){if(!o.eql(a,o.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof i||"bigint"!=typeof i.beta||"function"!=typeof i.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...n})}(e),{Fp:a}=o,s=n.Field(o.n,o.nBitLength),l=o.toBytes||((e,t,n)=>{let i=t.toAffine();return r.concatBytes(Uint8Array.from([4]),a.toBytes(i.x),a.toBytes(i.y))}),d=o.fromBytes||(e=>{let t=e.subarray(1);return{x:a.fromBytes(t.subarray(0,a.BYTES)),y:a.fromBytes(t.subarray(a.BYTES,2*a.BYTES))}});function h(e){let{a:t,b:n}=o,r=a.sqr(e),i=a.mul(r,e);return a.add(a.add(i,a.mul(e,t)),n)}if(!a.eql(a.sqr(o.Gy),h(o.Gx)))throw new Error("bad generator point: equation left != right");function p(e){let t,{allowedPrivateKeyLengths:a,nByteLength:s,wrapPrivateKey:f,n:l}=o;if(a&&"bigint"!=typeof e){if(r.isBytes(e)&&(e=r.bytesToHex(e)),"string"!=typeof e||!a.includes(e.length))throw new Error("invalid private key");e=e.padStart(2*s,"0")}try{t="bigint"==typeof e?e:r.bytesToNumberBE((0,i.ensureBytes)("private key",e,s))}catch{throw new Error("invalid private key, expected hex or "+s+" bytes, got "+typeof e)}return f&&(t=n.mod(t,l)),r.aInRange("private key",t,c,l),t}function g(e){if(!(e instanceof m))throw new Error("ProjectivePoint expected")}let b=(0,i.memoized)(((e,t)=>{let{px:n,py:r,pz:i}=e;if(a.eql(i,a.ONE))return{x:n,y:r};let o=e.is0();null==t&&(t=o?a.ONE:a.inv(i));let s=a.mul(n,t),f=a.mul(r,t),c=a.mul(i,t);if(o)return{x:a.ZERO,y:a.ZERO};if(!a.eql(c,a.ONE))throw new Error("invZ was invalid");return{x:s,y:f}})),y=(0,i.memoized)((e=>{if(e.is0()){if(o.allowInfinityPoint&&!a.is0(e.py))return;throw new Error("bad point: ZERO")}let{x:t,y:n}=e.toAffine();if(!a.isValid(t)||!a.isValid(n))throw new Error("bad point: x or y not FE");let r=a.sqr(n),i=h(t);if(!a.eql(r,i))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class m{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!a.isValid(e))throw new Error("x required");if(null==t||!a.isValid(t))throw new Error("y required");if(null==n||!a.isValid(n))throw new Error("z required");Object.freeze(this)}static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!a.isValid(t)||!a.isValid(n))throw new Error("invalid affine point");if(e instanceof m)throw new Error("projective point not allowed");let r=e=>a.eql(e,a.ZERO);return r(t)&&r(n)?m.ZERO:new m(t,n,a.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=a.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(m.fromAffine)}static fromHex(e){let t=m.fromAffine(d((0,i.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return m.BASE.multiply(p(e))}static msm(e,n){return(0,t.pippenger)(m,s,e,n)}_setWindowSize(e){w.setWindowSize(this,e)}assertValidity(){y(this)}hasEvenY(){let{y:e}=this.toAffine();if(a.isOdd)return!a.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){g(e);let{px:t,py:n,pz:r}=this,{px:i,py:o,pz:s}=e,f=a.eql(a.mul(t,s),a.mul(i,r)),c=a.eql(a.mul(n,s),a.mul(o,r));return f&&c}negate(){return new m(this.px,a.neg(this.py),this.pz)}double(){let{a:e,b:t}=o,n=a.mul(t,u),{px:r,py:i,pz:s}=this,f=a.ZERO,c=a.ZERO,l=a.ZERO,d=a.mul(r,r),h=a.mul(i,i),p=a.mul(s,s),g=a.mul(r,i);return g=a.add(g,g),l=a.mul(r,s),l=a.add(l,l),f=a.mul(e,l),c=a.mul(n,p),c=a.add(f,c),f=a.sub(h,c),c=a.add(h,c),c=a.mul(f,c),f=a.mul(g,f),l=a.mul(n,l),p=a.mul(e,p),g=a.sub(d,p),g=a.mul(e,g),g=a.add(g,l),l=a.add(d,d),d=a.add(l,d),d=a.add(d,p),d=a.mul(d,g),c=a.add(c,d),p=a.mul(i,s),p=a.add(p,p),d=a.mul(p,g),f=a.sub(f,d),l=a.mul(p,h),l=a.add(l,l),l=a.add(l,l),new m(f,c,l)}add(e){g(e);let{px:t,py:n,pz:r}=this,{px:i,py:s,pz:f}=e,c=a.ZERO,l=a.ZERO,d=a.ZERO,h=o.a,p=a.mul(o.b,u),b=a.mul(t,i),y=a.mul(n,s),v=a.mul(r,f),w=a.add(t,n),_=a.add(i,s);w=a.mul(w,_),_=a.add(b,y),w=a.sub(w,_),_=a.add(t,r);let E=a.add(i,f);return _=a.mul(_,E),E=a.add(b,v),_=a.sub(_,E),E=a.add(n,r),c=a.add(s,f),E=a.mul(E,c),c=a.add(y,v),E=a.sub(E,c),d=a.mul(h,_),c=a.mul(p,v),d=a.add(c,d),c=a.sub(y,d),d=a.add(y,d),l=a.mul(c,d),y=a.add(b,b),y=a.add(y,b),v=a.mul(h,v),_=a.mul(p,_),y=a.add(y,v),v=a.sub(b,v),v=a.mul(h,v),_=a.add(_,v),b=a.mul(y,_),l=a.add(l,b),b=a.mul(E,_),c=a.mul(w,c),c=a.sub(c,b),b=a.mul(w,y),d=a.mul(E,d),d=a.add(d,b),new m(c,l,d)}subtract(e){return this.add(e.negate())}is0(){return this.equals(m.ZERO)}wNAF(e){return w.wNAFCached(this,e,m.normalizeZ)}multiplyUnsafe(e){let{endo:t,n:n}=o;r.aInRange("scalar",e,f,n);let i=m.ZERO;if(e===f)return i;if(this.is0()||e===c)return this;if(!t||w.hasPrecomputes(this))return w.wNAFCachedUnsafe(this,e,m.normalizeZ);let{k1neg:s,k1:l,k2neg:u,k2:d}=t.splitScalar(e),h=i,p=i,g=this;for(;l>f||d>f;)l&c&&(h=h.add(g)),d&c&&(p=p.add(g)),g=g.double(),l>>=c,d>>=c;return s&&(h=h.negate()),u&&(p=p.negate()),p=new m(a.mul(p.px,t.beta),p.py,p.pz),h.add(p)}multiply(e){let t,n,{endo:i,n:s}=o;if(r.aInRange("scalar",e,c,s),i){let{k1neg:r,k1:o,k2neg:s,k2:f}=i.splitScalar(e),{p:c,f:l}=this.wNAF(o),{p:u,f:d}=this.wNAF(f);c=w.constTimeNegate(r,c),u=w.constTimeNegate(s,u),u=new m(a.mul(u.px,i.beta),u.py,u.pz),t=c.add(u),n=l.add(d)}else{let{p:r,f:i}=this.wNAF(e);t=r,n=i}return m.normalizeZ([t,n])[0]}multiplyAndAddUnsafe(e,t,n){let r=m.BASE,i=(e,t)=>t!==f&&t!==c&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,n));return o.is0()?void 0:o}toAffine(e){return b(this,e)}isTorsionFree(){let{h:e,isTorsionFree:t}=o;if(e===c)return!0;if(t)return t(m,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:t}=o;return e===c?this:t?t(m,this):this.multiplyUnsafe(o.h)}toRawBytes(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,i.abool)("isCompressed",e),this.assertValidity(),l(m,this,e)}toHex(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,i.abool)("isCompressed",e),r.bytesToHex(this.toRawBytes(e))}}m.BASE=new m(o.Gx,o.Gy,a.ONE),m.ZERO=new m(a.ZERO,a.ONE,a.ZERO);let v=o.nBitLength,w=(0,t.wNAF)(m,o.endo?Math.ceil(v/2):v);return{CURVE:o,ProjectivePoint:m,normPrivateKeyToScalar:p,weierstrassEquation:h,isWithinCurveOrder:function(e){return r.inRange(e,c,o.n)}}}function p(e,t){let n=e.ORDER,r=f;for(let u=n-c;u%l===f;u/=l)r+=c;let i=r,o=l<<i-c-c,a=o*l,s=(n-c)/a,h=(s-c)/l,p=a-c,g=o,b=e.pow(t,s),y=e.pow(t,(s+c)/l),m=(t,n)=>{let r=b,o=e.pow(n,p),a=e.sqr(o);a=e.mul(a,n);let s=e.mul(t,a);s=e.pow(s,h),s=e.mul(s,o),o=e.mul(s,n),a=e.mul(s,t);let f=e.mul(a,o);s=e.pow(f,g);let u=e.eql(s,e.ONE);o=e.mul(a,y),s=e.mul(f,r),a=e.cmov(o,a,u),f=e.cmov(s,f,u);for(let d=i;d>c;d--){let t=d-l;t=l<<t-c;let n=e.pow(f,t),i=e.eql(n,e.ONE);o=e.mul(a,r),r=e.mul(r,r),n=e.mul(f,r),a=e.cmov(o,a,i),f=e.cmov(n,f,i)}return{isValid:u,value:a}};if(e.ORDER%d===u){let n=(e.ORDER-u)/d,r=e.sqrt(e.neg(t));m=(t,i)=>{let o=e.sqr(i),a=e.mul(t,i);o=e.mul(o,a);let s=e.pow(o,n);s=e.mul(s,a);let f=e.mul(s,r),c=e.mul(e.sqr(s),i),l=e.eql(c,t);return{isValid:l,value:e.cmov(f,s,l)}}}return m}})),Zc=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getHash=i,e.createCurve=function(e,t){let n=t=>(0,r.weierstrass)({...e,...i(t)});return Object.freeze({...n(t),create:n})};var t=Gc(),n=df(),r=Yc();function i(e){return{hash:e,hmac:function(r){for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return(0,t.hmac)(e,r,(0,n.concatBytes)(...o))},randomBytes:n.randomBytes}}})),Qc=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.encodeToCurve=e.hashToCurve=e.schnorr=e.secp256k1=void 0;var t=Vc(),n=df(),r=Zc(),i=wf(),o=yf(),a=bf(),s=Yc(),f=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),c=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),l=BigInt(1),u=BigInt(2),d=(e,t)=>(e+t/u)/t;function h(e){let t=f,n=BigInt(3),r=BigInt(6),i=BigInt(11),a=BigInt(22),s=BigInt(23),c=BigInt(44),l=BigInt(88),d=e*e*e%t,h=d*d*e%t,g=(0,o.pow2)(h,n,t)*h%t,b=(0,o.pow2)(g,n,t)*h%t,y=(0,o.pow2)(b,u,t)*d%t,m=(0,o.pow2)(y,i,t)*y%t,v=(0,o.pow2)(m,a,t)*m%t,w=(0,o.pow2)(v,c,t)*v%t,_=(0,o.pow2)(w,l,t)*w%t,E=(0,o.pow2)(_,c,t)*v%t,C=(0,o.pow2)(E,n,t)*h%t,O=(0,o.pow2)(C,s,t)*m%t,x=(0,o.pow2)(O,r,t)*d%t,S=(0,o.pow2)(x,u,t);if(!p.eql(p.sqr(S),e))throw new Error("Cannot find square root");return S}var p=(0,o.Field)(f,void 0,void 0,{sqrt:h});e.secp256k1=(0,r.createCurve)({a:BigInt(0),b:BigInt(7),Fp:p,n:c,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=c,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-l*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=n,s=BigInt("0x100000000000000000000000000000000"),f=d(a*e,t),u=d(-r*e,t),h=(0,o.mod)(e-f*n-u*i,t),p=(0,o.mod)(-f*r-u*a,t),g=h>s,b=p>s;if(g&&(h=t-h),b&&(p=t-p),h>s||p>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:g,k1:h,k2neg:b,k2:p}}}},t.sha256);var g=BigInt(0),b={};function y(e){let n=b[e];if(void 0===n){let r=(0,t.sha256)(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=(0,a.concatBytes)(r,r),b[e]=n}for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return(0,t.sha256)((0,a.concatBytes)(n,...i))}var m=e=>e.toRawBytes(!0).slice(1),v=e=>(0,a.numberToBytesBE)(e,32),w=e=>(0,o.mod)(e,f),_=e=>(0,o.mod)(e,c),E=e.secp256k1.ProjectivePoint;function C(t){let n=e.secp256k1.utils.normPrivateKeyToScalar(t),r=E.fromPrivateKey(n);return{scalar:r.hasEvenY()?n:_(-n),bytes:m(r)}}function O(e){(0,a.aInRange)("x",e,l,f);let t=w(e*e),n=h(w(t*e+BigInt(7)));n%u!==g&&(n=w(-n));let r=new E(e,n,l);return r.assertValidity(),r}var x=a.bytesToNumberBE;function S(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _(x(y("BIP0340/challenge",...t)))}function k(e,t,n){let r=(0,a.ensureBytes)("signature",e,64),i=(0,a.ensureBytes)("message",t),o=(0,a.ensureBytes)("publicKey",n,32);try{let e=O(x(o)),t=x(r.subarray(0,32));if(!(0,a.inRange)(t,l,f))return!1;let n=x(r.subarray(32,64));if(!(0,a.inRange)(n,l,c))return!1;let s=S(v(t),m(e),i),u=((e,t,n)=>E.BASE.multiplyAndAddUnsafe(e,t,n))(e,n,_(-s));return!(!u||!u.hasEvenY()||u.toAffine().x!==t)}catch{return!1}}e.schnorr={getPublicKey:function(e){return C(e).bytes},sign:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,n.randomBytes)(32),i=(0,a.ensureBytes)("message",e),{bytes:o,scalar:s}=C(t),f=(0,a.ensureBytes)("auxRand",r,32),c=v(s^x(y("BIP0340/aux",f))),l=y("BIP0340/nonce",c,o,i),u=_(x(l));if(u===g)throw new Error("sign failed: k is zero");let{bytes:d,scalar:h}=C(u),p=S(d,o,i),b=new Uint8Array(64);if(b.set(d,0),b.set(v(_(h+p*s)),32),!k(b,i,o))throw new Error("sign: Invalid signature produced");return b},verify:k,utils:{randomPrivateKey:e.secp256k1.utils.randomPrivateKey,lift_x:O,pointToBytes:m,numberToBytesBE:a.numberToBytesBE,bytesToNumberBE:a.bytesToNumberBE,taggedHash:y,mod:o.mod}};var T=(0,i.isogenyMap)(p,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((e=>e.map((e=>BigInt(e)))))),R=(0,s.mapToCurveSimpleSWU)(p,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:p.create(BigInt("-11"))}),A=(0,i.createHasher)(e.secp256k1.ProjectivePoint,(e=>{let{x:t,y:n}=R(p.create(e[0]));return T(t,n)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:p.ORDER,m:1,k:128,expand:"xmd",hash:t.sha256});e.hashToCurve=A.hashToCurve,e.encodeToCurve=A.encodeToCurve})),el=h((e=>{var t=_s(),n=Ef(),r=Of(),o=kf(),a=Nf(),s=Df(),f=Bf(),c=Mf(),l=Kf(),u=Xc(),d=Fc(),h=Jc(),p=Qc();function g(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var b=g(r),y=g(o),m=function(e){if(e&&"object"==typeof e&&"default"in e)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}(f),v=g(u),w=n.ed25519.utils.randomPrivateKey,_=()=>{let e=n.ed25519.utils.randomPrivateKey(),t=E(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}},E=n.ed25519.getPublicKey;function C(e){try{return n.ed25519.ExtendedPoint.fromHex(e),!0}catch{return!1}}var O,x=(e,t)=>n.ed25519.sign(e,t.slice(0,32)),S=n.ed25519.verify,k=e=>t.Buffer.isBuffer(e)?e:e instanceof Uint8Array?t.Buffer.from(e.buffer,e.byteOffset,e.byteLength):t.Buffer.from(e),T=class{constructor(e){Object.assign(this,e)}encode(){return t.Buffer.from(s.serialize(R,this))}static decode(e){return s.deserialize(R,this,e)}static decodeUnchecked(e){return s.deserializeUnchecked(R,this,e)}},R=new Map,A=32;var I=1,N=class e extends T{constructor(e){if(super({}),this._bn=void 0,function(e){return void 0!==e._bn}(e))this._bn=e._bn;else{if("string"==typeof e){let t=y.default.decode(e);if(t.length!=A)throw new Error("Invalid public key input");this._bn=new b.default(t)}else this._bn=new b.default(e);if(this._bn.byteLength()>A)throw new Error("Invalid public key input")}}static unique(){let t=new e(I);return I+=1,new e(t.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return y.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){let e=this._bn.toArrayLike(t.Buffer);if(e.length===A)return e;let n=t.Buffer.alloc(32);return e.copy(n,32-e.length),n}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(n,r,i){let o=t.Buffer.concat([n.toBuffer(),t.Buffer.from(r),i.toBuffer()]),s=a.sha256(o);return new e(s)}static createProgramAddressSync(n,r){let i=t.Buffer.alloc(0);n.forEach((function(e){if(e.length>32)throw new TypeError("Max seed length exceeded");i=t.Buffer.concat([i,k(e)])})),i=t.Buffer.concat([i,r.toBuffer(),t.Buffer.from("ProgramDerivedAddress")]);let o=a.sha256(i);if(C(o))throw new Error("Invalid seeds, address must fall off the curve");return new e(o)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,n){let r,i=255;for(;0!=i;){try{let o=e.concat(t.Buffer.from([i]));r=this.createProgramAddressSync(o,n)}catch(o){if(o instanceof TypeError)throw o;i--;continue}return[r,i]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(t){return C(new e(t).toBytes())}};O=N,N.default=new O("11111111111111111111111111111111"),R.set(N,{kind:"struct",fields:[["_bn","u256"]]});var P=new N("BPFLoader1111111111111111111111111111111111"),D=1232,B=127,M=class extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}};Object.defineProperty(M.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var K=class extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}};Object.defineProperty(K.prototype,"name",{value:"TransactionExpiredTimeoutError"});var L=class extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}};Object.defineProperty(L.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});var U=class{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){let e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(let t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");let t=new Map;this.keySegments().flat().forEach(((e,n)=>{t.set(e.toBase58(),n)}));let n=e=>{let n=t.get(e.toBase58());if(void 0===n)throw new Error("Encountered an unknown instruction account key during compilation");return n};return e.map((e=>({programIdIndex:n(e.programId),accountKeyIndexes:e.keys.map((e=>n(e.pubkey))),data:e.data})))}},j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey";return m.blob(32,e)},W=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"signature";return m.blob(64,e)},H=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"string",n=m.struct([m.u32("length"),m.u32("lengthPadding"),m.blob(m.offset(m.u32(),-8),"chars")],e),r=n.decode.bind(n),i=n.encode.bind(n),o=n;return o.decode=(e,t)=>r(e,t).chars.toString(),o.encode=(e,n,r)=>{let o={chars:t.Buffer.from(e,"utf8")};return i(o,n,r)},o.alloc=e=>m.u32().span+m.u32().span+t.Buffer.from(e,"utf8").length,o};function $(e,t){let n=e=>{if(e.span>=0)return e.span;if("function"==typeof e.alloc)return e.alloc(t[e.property]);if("count"in e&&"elementLayout"in e){let r=t[e.property];if(Array.isArray(r))return r.length*n(e.elementLayout)}else if("fields"in e)return $({layout:e},t[e.property]);return 0},r=0;return e.layout.fields.forEach((e=>{r+=n(e)})),r}function q(e){let t=0,n=0;for(;;){let r=e.shift();if(t|=(127&r)<<7*n,n+=1,!(128&r))break}return t}function X(e,t){let n=t;for(;;){let t=127&n;if(n>>=7,0==n){e.push(t);break}t|=128,e.push(t)}}function F(e,t){if(!e)throw new Error(t||"Assertion failed")}var z=class e{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(t,n){let r=new Map,i=e=>{let t=e.toBase58(),n=r.get(t);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(t,n)),n},o=i(n);o.isSigner=!0,o.isWritable=!0;for(let e of t){i(e.programId).isInvoked=!0;for(let t of e.keys){let e=i(t.pubkey);e.isSigner||=t.isSigner,e.isWritable||=t.isWritable}}return new e(n,r)}getMessageComponents(){let e=[...this.keyMetaMap.entries()];F(e.length<=256,"Max static account keys length exceeded");let t=e.filter((e=>{let[,t]=e;return t.isSigner&&t.isWritable})),n=e.filter((e=>{let[,t]=e;return t.isSigner&&!t.isWritable})),r=e.filter((e=>{let[,t]=e;return!t.isSigner&&t.isWritable})),i=e.filter((e=>{let[,t]=e;return!t.isSigner&&!t.isWritable})),o={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{F(t.length>0,"Expected at least one writable signer key");let[e]=t[0];F(e===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[o,[...t.map((e=>{let[t]=e;return new N(t)})),...n.map((e=>{let[t]=e;return new N(t)})),...r.map((e=>{let[t]=e;return new N(t)})),...i.map((e=>{let[t]=e;return new N(t)}))]]}extractTableLookup(e){let[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,(e=>!e.isSigner&&!e.isInvoked&&e.isWritable)),[r,i]=this.drainKeysFoundInLookupTable(e.state.addresses,(e=>!e.isSigner&&!e.isInvoked&&!e.isWritable));if(0!==t.length||0!==r.length)return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:r},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(e,t){let n=new Array,r=new Array;for(let[i,o]of this.keyMetaMap.entries())if(t(o)){let t=new N(i),o=e.findIndex((e=>e.equals(t)));o>=0&&(F(o<256,"Max lookup table index exceeded"),n.push(o),r.push(t),this.keyMetaMap.delete(i))}return[n,r]}},J="Reached end of buffer unexpectedly";function V(e){if(0===e.length)throw new Error(J);return e.shift()}function G(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let[i]=n;if(2===n.length?i+(n[1]??0)>e.length:i>=e.length)throw new Error(J);return e.splice(...n)}var Y,Z=class e{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map((e=>new N(e))),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach((e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex])))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map((e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:y.default.decode(e.data)})))}get addressTableLookups(){return[]}getAccountKeys(){return new U(this.staticAccountKeys)}static compile(t){let n=z.compile(t.instructions,t.payerKey),[r,i]=n.getMessageComponents(),o=new U(i).compileInstructions(t.instructions).map((e=>({programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:y.default.encode(e.data)})));return new e({header:r,accountKeys:i,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){return e-t<this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts}return e<t-this.header.numReadonlySignedAccounts}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter(((e,t)=>!this.isProgramId(t)))}serialize(){let e=this.accountKeys.length,n=[];X(n,e);let r=this.instructions.map((e=>{let{accounts:n,programIdIndex:r}=e,i=Array.from(y.default.decode(e.data)),o=[];X(o,n.length);let a=[];return X(a,i.length),{programIdIndex:r,keyIndicesCount:t.Buffer.from(o),keyIndices:n,dataLength:t.Buffer.from(a),data:i}})),i=[];X(i,r.length);let o=t.Buffer.alloc(D);t.Buffer.from(i).copy(o);let a=i.length;r.forEach((e=>{let t=m.struct([m.u8("programIdIndex"),m.blob(e.keyIndicesCount.length,"keyIndicesCount"),m.seq(m.u8("keyIndex"),e.keyIndices.length,"keyIndices"),m.blob(e.dataLength.length,"dataLength"),m.seq(m.u8("userdatum"),e.data.length,"data")]).encode(e,o,a);a+=t})),o=o.slice(0,a);let s=m.struct([m.blob(1,"numRequiredSignatures"),m.blob(1,"numReadonlySignedAccounts"),m.blob(1,"numReadonlyUnsignedAccounts"),m.blob(n.length,"keyCount"),m.seq(j("key"),e,"keys"),j("recentBlockhash")]),f={numRequiredSignatures:t.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:t.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:t.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:t.Buffer.from(n),keys:this.accountKeys.map((e=>k(e.toBytes()))),recentBlockhash:y.default.decode(this.recentBlockhash)},c=t.Buffer.alloc(2048),l=s.encode(f,c);return o.copy(c,l),c.slice(0,l+o.length)}static from(n){let r=[...n],i=V(r);if(i!==(i&B))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let o=V(r),a=V(r),s=q(r),f=[];for(let e=0;e<s;e++){let e=G(r,0,A);f.push(new N(t.Buffer.from(e)))}let c=G(r,0,A),l=q(r),u=[];for(let e=0;e<l;e++){let e=V(r),n=G(r,0,q(r)),i=G(r,0,q(r)),o=y.default.encode(t.Buffer.from(i));u.push({programIdIndex:e,accounts:n,data:o})}let d={header:{numRequiredSignatures:i,numReadonlySignedAccounts:o,numReadonlyUnsignedAccounts:a},recentBlockhash:y.default.encode(t.Buffer.from(c)),accountKeys:f,instructions:u};return new e(d)}},Q=class e{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(let t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new U(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){return e-n<this.addressTableLookups.reduce(((e,t)=>e+t.writableIndexes.length),0)}if(e>=this.header.numRequiredSignatures){return e-t<n-t-this.header.numReadonlyUnsignedAccounts}return e<t-this.header.numReadonlySignedAccounts}resolveAddressTableLookups(e){let t={writable:[],readonly:[]};for(let n of this.addressTableLookups){let r=e.find((e=>e.key.equals(n.accountKey)));if(!r)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(let e of n.writableIndexes){if(!(e<r.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${n.accountKey.toBase58()}`);t.writable.push(r.state.addresses[e])}for(let e of n.readonlyIndexes){if(!(e<r.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${n.accountKey.toBase58()}`);t.readonly.push(r.state.addresses[e])}}return t}static compile(t){let n=z.compile(t.instructions,t.payerKey),r=new Array,i={writable:new Array,readonly:new Array},o=t.addressLookupTableAccounts||[];for(let e of o){let t=n.extractTableLookup(e);if(void 0!==t){let[e,{writable:n,readonly:o}]=t;r.push(e),i.writable.push(...n),i.readonly.push(...o)}}let[a,s]=n.getMessageComponents(),f=new U(s,i).compileInstructions(t.instructions);return new e({header:a,staticAccountKeys:s,recentBlockhash:t.recentBlockhash,compiledInstructions:f,addressTableLookups:r})}serialize(){let e=Array();X(e,this.staticAccountKeys.length);let t=this.serializeInstructions(),n=Array();X(n,this.compiledInstructions.length);let r=this.serializeAddressTableLookups(),i=Array();X(i,this.addressTableLookups.length);let o=m.struct([m.u8("prefix"),m.struct([m.u8("numRequiredSignatures"),m.u8("numReadonlySignedAccounts"),m.u8("numReadonlyUnsignedAccounts")],"header"),m.blob(e.length,"staticAccountKeysLength"),m.seq(j(),this.staticAccountKeys.length,"staticAccountKeys"),j("recentBlockhash"),m.blob(n.length,"instructionsLength"),m.blob(t.length,"serializedInstructions"),m.blob(i.length,"addressTableLookupsLength"),m.blob(r.length,"serializedAddressTableLookups")]),a=new Uint8Array(D),s=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map((e=>e.toBytes())),recentBlockhash:y.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:r},a);return a.slice(0,s)}serializeInstructions(){let e=0,t=new Uint8Array(D);for(let n of this.compiledInstructions){let r=Array();X(r,n.accountKeyIndexes.length);let i=Array();X(i,n.data.length),e+=m.struct([m.u8("programIdIndex"),m.blob(r.length,"encodedAccountKeyIndexesLength"),m.seq(m.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),m.blob(i.length,"encodedDataLength"),m.blob(n.data.length,"data")]).encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(r),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0,t=new Uint8Array(D);for(let n of this.addressTableLookups){let r=Array();X(r,n.writableIndexes.length);let i=Array();X(i,n.readonlyIndexes.length),e+=m.struct([j("accountKey"),m.blob(r.length,"encodedWritableIndexesLength"),m.seq(m.u8(),n.writableIndexes.length,"writableIndexes"),m.blob(i.length,"encodedReadonlyIndexesLength"),m.seq(m.u8(),n.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(r),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(t){let n=[...t],r=V(n),i=r&B;F(r!==i,"Expected versioned message but received legacy message");F(0===i,`Expected versioned message with version 0 but found version ${i}`);let o={numRequiredSignatures:V(n),numReadonlySignedAccounts:V(n),numReadonlyUnsignedAccounts:V(n)},a=[],s=q(n);for(let e=0;e<s;e++)a.push(new N(G(n,0,A)));let f=y.default.encode(G(n,0,A)),c=q(n),l=[];for(let e=0;e<c;e++){let e=V(n),t=G(n,0,q(n)),r=q(n),i=new Uint8Array(G(n,0,r));l.push({programIdIndex:e,accountKeyIndexes:t,data:i})}let u=q(n),d=[];for(let e=0;e<u;e++){let e=new N(G(n,0,A)),t=G(n,0,q(n)),r=G(n,0,q(n));d.push({accountKey:e,writableIndexes:t,readonlyIndexes:r})}return new e({header:o,staticAccountKeys:a,recentBlockhash:f,compiledInstructions:l,addressTableLookups:d})}},ee={deserializeMessageVersion(e){let t=e[0],n=t&B;return n===t?"legacy":n},deserialize:e=>{let t=ee.deserializeMessageVersion(e);if("legacy"===t)return Z.from(e);if(0===t)return Q.deserialize(e);throw new Error(`Transaction message version ${t} deserialization is not supported`)}},te=((Y={})[Y.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",Y[Y.PROCESSED=1]="PROCESSED",Y[Y.TIMED_OUT=2]="TIMED_OUT",Y[Y.NONCE_INVALID=3]="NONCE_INVALID",Y),ne=t.Buffer.alloc(64).fill(0),re=class{constructor(e){this.keys=void 0,this.programId=void 0,this.data=t.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map((e=>{let{pubkey:t,isSigner:n,isWritable:r}=e;return{pubkey:t.toJSON(),isSigner:n,isWritable:r}})),programId:this.programId.toJSON(),data:[...this.data]}}},ie=class e{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){let{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){let{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{let{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map((e=>e.toJSON())),signers:this.signatures.map((e=>{let{publicKey:t}=e;return t.toJSON()}))}}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)throw new Error("No instructions");return t.forEach((e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new re(e))})),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t,n;if(this.nonceInfo?(e=this.nonceInfo.nonce,t=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");if(t.length<1&&i.warn("No instructions provided"),this.feePayer)n=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");n=this.signatures[0].publicKey}for(let i=0;i<t.length;i++)if(void 0===t[i].programId)throw new Error(`Transaction instruction index ${i} has undefined program id`);let r=[],o=[];t.forEach((e=>{e.keys.forEach((e=>{o.push({...e})}));let t=e.programId.toString();r.includes(t)||r.push(t)})),r.forEach((e=>{o.push({pubkey:new N(e),isSigner:!1,isWritable:!1})}));let a=[];o.forEach((e=>{let t=e.pubkey.toString(),n=a.findIndex((e=>e.pubkey.toString()===t));n>-1?(a[n].isWritable=a[n].isWritable||e.isWritable,a[n].isSigner=a[n].isSigner||e.isSigner):a.push(e)})),a.sort((function(e,t){if(e.isSigner!==t.isSigner)return e.isSigner?-1:1;if(e.isWritable!==t.isWritable)return e.isWritable?-1:1;return e.pubkey.toBase58().localeCompare(t.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})}));let s=a.findIndex((e=>e.pubkey.equals(n)));if(s>-1){let[e]=a.splice(s,1);e.isSigner=!0,e.isWritable=!0,a.unshift(e)}else a.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(let g of this.signatures){let e=a.findIndex((e=>e.pubkey.equals(g.publicKey)));if(!(e>-1))throw new Error(`unknown signer: ${g.publicKey.toString()}`);a[e].isSigner||(a[e].isSigner=!0,i.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))}let f=0,c=0,l=0,u=[],d=[];a.forEach((e=>{let{pubkey:t,isSigner:n,isWritable:r}=e;n?(u.push(t.toString()),f+=1,r||(c+=1)):(d.push(t.toString()),r||(l+=1))}));let h=u.concat(d),p=t.map((e=>{let{data:t,programId:n}=e;return{programIdIndex:h.indexOf(n.toString()),accounts:e.keys.map((e=>h.indexOf(e.pubkey.toString()))),data:y.default.encode(t)}}));return p.forEach((e=>{F(e.programIdIndex>=0),e.accounts.forEach((e=>F(e>=0)))})),new Z({header:{numRequiredSignatures:f,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:l},accountKeys:h,recentBlockhash:e,instructions:p})}_compile(){let e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every(((e,n)=>t[n].equals(e.publicKey)))||(this.signatures=t.map((e=>({signature:null,publicKey:e})))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)throw new Error("No signers");let r=new Set;this.signatures=t.filter((e=>{let t=e.toString();return!r.has(t)&&(r.add(t),!0)})).map((e=>({signature:null,publicKey:e})))}sign(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)throw new Error("No signers");let r=new Set,i=[];for(let a of t){let e=a.publicKey.toString();r.has(e)||(r.add(e),i.push(a))}this.signatures=i.map((e=>({signature:null,publicKey:e.publicKey})));let o=this._compile();this._partialSign(o,...i)}partialSign(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)throw new Error("No signers");let r=new Set,i=[];for(let a of t){let e=a.publicKey.toString();r.has(e)||(r.add(e),i.push(a))}let o=this._compile();this._partialSign(o,...i)}_partialSign(e){let t=e.serialize();for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];r.forEach((e=>{let n=x(t,e.secretKey);this._addSignature(e.publicKey,k(n))}))}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,n){F(64===n.length);let r=this.signatures.findIndex((t=>e.equals(t.publicKey)));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=t.Buffer.from(n)}verifySignatures(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){let n={};for(let{signature:r,publicKey:i}of this.signatures)null===r?t&&(n.missing||=[]).push(i):S(r,e,i.toBytes())||(n.invalid||=[]).push(i);return n.invalid||n.missing?n:void 0}serialize(e){let{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),r=this.serializeMessage();if(n){let e=this._getMessageSignednessErrors(r,t);if(e){let t="Signature verification failed.";throw e.invalid&&(t+=`\nInvalid signature for public key${1===e.invalid.length?"":"(s)"} [\`${e.invalid.map((e=>e.toBase58())).join("`, `")}\`].`),e.missing&&(t+=`\nMissing signature for public key${1===e.missing.length?"":"(s)"} [\`${e.missing.map((e=>e.toBase58())).join("`, `")}\`].`),new Error(t)}}return this._serialize(r)}_serialize(e){let{signatures:n}=this,r=[];X(r,n.length);let i=r.length+64*n.length+e.length,o=t.Buffer.alloc(i);return F(n.length<256),t.Buffer.from(r).copy(o,0),n.forEach(((e,n)=>{let{signature:i}=e;null!==i&&(F(64===i.length,"signature has invalid length"),t.Buffer.from(i).copy(o,r.length+64*n))})),e.copy(o,r.length+64*n.length),F(o.length<=D,`Transaction too large: ${o.length} > 1232`),o}get keys(){return F(1===this.instructions.length),this.instructions[0].keys.map((e=>e.pubkey))}get programId(){return F(1===this.instructions.length),this.instructions[0].programId}get data(){return F(1===this.instructions.length),this.instructions[0].data}static from(n){let r=[...n],i=q(r),o=[];for(let e=0;e<i;e++){let e=G(r,0,64);o.push(y.default.encode(t.Buffer.from(e)))}return e.populate(Z.from(r),o)}static populate(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=new e;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),n.forEach(((e,n)=>{let i={signature:e==y.default.encode(ne)?null:y.default.decode(e),publicKey:t.accountKeys[n]};r.signatures.push(i)})),t.instructions.forEach((e=>{let n=e.accounts.map((e=>{let n=t.accountKeys[e];return{pubkey:n,isSigner:r.signatures.some((e=>e.publicKey.toString()===n.toString()))||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}}));r.instructions.push(new re({keys:n,programId:t.accountKeys[e.programIdIndex],data:y.default.decode(e.data)}))})),r._message=t,r._json=r.toJSON(),r}},oe=new N("SysvarC1ock11111111111111111111111111111111"),ae=new N("SysvarEpochSchedu1e111111111111111111111111"),se=new N("Sysvar1nstructions1111111111111111111111111"),fe=new N("SysvarRecentB1ockHashes11111111111111111111"),ce=new N("SysvarRent111111111111111111111111111111111"),le=new N("SysvarRewards111111111111111111111111111111"),ue=new N("SysvarS1otHashes111111111111111111111111111"),de=new N("SysvarS1otHistory11111111111111111111111111"),he=new N("SysvarStakeHistory1111111111111111111111111"),pe=class extends Error{constructor(e){let t,{action:n,signature:r,transactionMessage:i,logs:o}=e,a=o?`Logs: \n${JSON.stringify(o.slice(-10),null,2)}. `:"",s="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";switch(n){case"send":t=`Transaction ${r} resulted in an error. \n${i}. `+a+s;break;case"simulate":t=`Simulation failed. \nMessage: ${i}. \n`+a+s;break;default:t=`Unknown action '${n}'`}super(t),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=r,this.transactionMessage=i,this.transactionLogs=o||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){let e=this.transactionLogs;if(null==e||"object"!=typeof e||!("then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise(((t,n)=>{e.getTransaction(this.signature).then((e=>{if(e&&e.meta&&e.meta.logMessages){let n=e.meta.logMessages;this.transactionLogs=n,t(n)}else n(new Error("Log messages not found"))})).catch(n)}))),await this.transactionLogs}},ge=class extends Error{constructor(e,t){let{code:n,message:r,data:i}=e;super(null!=t?`${t}: ${r}`:r),this.code=void 0,this.data=void 0,this.code=n,this.data=i,this.name="SolanaJSONRPCError"}};async function be(e,t,n,r){let o,a=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},s=await e.sendTransaction(t,n,a);if(null!=t.recentBlockhash&&null!=t.lastValidBlockHeight)o=(await e.confirmTransaction({abortSignal:r?.abortSignal,signature:s,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},r&&r.commitment)).value;else if(null!=t.minNonceContextSlot&&null!=t.nonceInfo){let{nonceInstruction:n}=t.nonceInfo,i=n.keys[0].pubkey;o=(await e.confirmTransaction({abortSignal:r?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:i,nonceValue:t.nonceInfo.nonce,signature:s},r&&r.commitment)).value}else null!=r?.abortSignal&&i.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await e.confirmTransaction(s,r&&r.commitment)).value;if(o.err)throw null!=s?new pe({action:"send",signature:s,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${s} failed (${JSON.stringify(o)})`);return s}function ye(e){return new Promise((t=>setTimeout(t,e)))}function me(e,n){let r=e.layout.span>=0?e.layout.span:$(e,n),i=t.Buffer.alloc(r),o=Object.assign({instruction:e.index},n);return e.layout.encode(o,i),i}function ve(e,t){let n;try{n=e.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(n.instruction!==e.index)throw new Error(`invalid instruction; instruction index mismatch ${n.instruction} != ${e.index}`);return n}var we=m.nu64("lamportsPerSignature"),_e=m.struct([m.u32("version"),m.u32("state"),j("authorizedPubkey"),j("nonce"),m.struct([we],"feeCalculator")]),Ee=_e.span,Ce=class e{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(t){let n=_e.decode(k(t),0);return new e({authorizedPubkey:new N(n.authorizedPubkey),nonce:new N(n.nonce).toString(),feeCalculator:n.feeCalculator})}},Oe=(e=>n=>{let r=f.blob(e,n),{encode:i,decode:o}=(e=>({decode:e.decode.bind(e),encode:e.encode.bind(e)}))(r),a=r;return a.decode=(e,n)=>{let r=o(e,n);return c.toBigIntLE(t.Buffer.from(r))},a.encode=(t,n,r)=>{let o=c.toBufferLE(t,e);return i(o,n,r)},a})(8),xe=Object.freeze({Create:{index:0,layout:m.struct([m.u32("instruction"),m.ns64("lamports"),m.ns64("space"),j("programId")])},Assign:{index:1,layout:m.struct([m.u32("instruction"),j("programId")])},Transfer:{index:2,layout:m.struct([m.u32("instruction"),Oe("lamports")])},CreateWithSeed:{index:3,layout:m.struct([m.u32("instruction"),j("base"),H("seed"),m.ns64("lamports"),m.ns64("space"),j("programId")])},AdvanceNonceAccount:{index:4,layout:m.struct([m.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:m.struct([m.u32("instruction"),m.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:m.struct([m.u32("instruction"),j("authorized")])},AuthorizeNonceAccount:{index:7,layout:m.struct([m.u32("instruction"),j("authorized")])},Allocate:{index:8,layout:m.struct([m.u32("instruction"),m.ns64("space")])},AllocateWithSeed:{index:9,layout:m.struct([m.u32("instruction"),j("base"),H("seed"),m.ns64("space"),j("programId")])},AssignWithSeed:{index:10,layout:m.struct([m.u32("instruction"),j("base"),H("seed"),j("programId")])},TransferWithSeed:{index:11,layout:m.struct([m.u32("instruction"),Oe("lamports"),H("seed"),j("programId")])},UpgradeNonceAccount:{index:12,layout:m.struct([m.u32("instruction")])}}),Se=class e{constructor(){}static createAccount(e){let t=me(xe.Create,{lamports:e.lamports,space:e.space,programId:k(e.programId.toBuffer())});return new re({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}static transfer(e){let t,n;if("basePubkey"in e){t=me(xe.TransferWithSeed,{lamports:BigInt(e.lamports),seed:e.seed,programId:k(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{t=me(xe.Transfer,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new re({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){t=me(xe.AssignWithSeed,{base:k(e.basePubkey.toBuffer()),seed:e.seed,programId:k(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{t=me(xe.Assign,{programId:k(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new re({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){let t=me(xe.CreateWithSeed,{base:k(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:k(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||n.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new re({keys:n,programId:this.programId,data:t})}static createNonceAccount(t){let n=new ie;"basePubkey"in t&&"seed"in t?n.add(e.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Ee,programId:this.programId})):n.add(e.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Ee,programId:this.programId}));let r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return n.add(this.nonceInitialize(r)),n}static nonceInitialize(e){let t=me(xe.InitializeNonceAccount,{authorized:k(e.authorizedPubkey.toBuffer())}),n={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:fe,isSigner:!1,isWritable:!1},{pubkey:ce,isSigner:!1,isWritable:!1}],programId:this.programId,data:t};return new re(n)}static nonceAdvance(e){let t=me(xe.AdvanceNonceAccount),n={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:fe,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t};return new re(n)}static nonceWithdraw(e){let t=me(xe.WithdrawNonceAccount,{lamports:e.lamports});return new re({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:fe,isSigner:!1,isWritable:!1},{pubkey:ce,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static nonceAuthorize(e){let t=me(xe.AuthorizeNonceAccount,{authorized:k(e.newAuthorizedPubkey.toBuffer())});return new re({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static allocate(e){let t,n;if("basePubkey"in e){t=me(xe.AllocateWithSeed,{base:k(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:k(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{t=me(xe.Allocate,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new re({keys:n,programId:this.programId,data:t})}};Se.programId=new N("11111111111111111111111111111111");var ke=class e{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/e.chunkSize)+1+1)}static async load(n,r,o,a,s){{let e=await n.getMinimumBalanceForRentExemption(s.length),t=await n.getAccountInfo(o.publicKey,"confirmed"),f=null;if(null!==t){if(t.executable)return i.error("Program load failed, account is already executable"),!1;t.data.length!==s.length&&(f=f||new ie,f.add(Se.allocate({accountPubkey:o.publicKey,space:s.length}))),t.owner.equals(a)||(f=f||new ie,f.add(Se.assign({accountPubkey:o.publicKey,programId:a}))),t.lamports<e&&(f=f||new ie,f.add(Se.transfer({fromPubkey:r.publicKey,toPubkey:o.publicKey,lamports:e-t.lamports})))}else f=(new ie).add(Se.createAccount({fromPubkey:r.publicKey,newAccountPubkey:o.publicKey,lamports:e>0?e:1,space:s.length,programId:a}));null!==f&&await be(n,f,[r,o],{commitment:"confirmed"})}let f=m.struct([m.u32("instruction"),m.u32("offset"),m.u32("bytesLength"),m.u32("bytesLengthPadding"),m.seq(m.u8("byte"),m.offset(m.u32(),-8),"bytes")]),c=e.chunkSize,l=0,u=s,d=[];for(;u.length>0;){let e=u.slice(0,c),i=t.Buffer.alloc(c+16);f.encode({instruction:0,offset:l,bytes:e,bytesLength:0,bytesLengthPadding:0},i);let s=(new ie).add({keys:[{pubkey:o.publicKey,isSigner:!0,isWritable:!0}],programId:a,data:i});d.push(be(n,s,[r,o],{commitment:"confirmed"})),n._rpcEndpoint.includes("solana.com")&&await ye(250),l+=c,u=u.slice(c)}await Promise.all(d);{let e=m.struct([m.u32("instruction")]),i=t.Buffer.alloc(e.span);e.encode({instruction:1},i);let s=(new ie).add({keys:[{pubkey:o.publicKey,isSigner:!0,isWritable:!0},{pubkey:ce,isSigner:!1,isWritable:!1}],programId:a,data:i}),f="processed",c=await n.sendTransaction(s,[r,o],{preflightCommitment:f}),{context:l,value:u}=await n.confirmTransaction({signature:c,lastValidBlockHeight:s.lastValidBlockHeight,blockhash:s.recentBlockhash},f);if(u.err)throw new Error(`Transaction ${c} failed (${JSON.stringify(u)})`);for(;;){try{if(await n.getSlot({commitment:f})>l.slot)break}catch{}await new Promise((e=>setTimeout(e,Math.round(200))))}}return!0}};ke.chunkSize=932;var Te,Re,Ae=new N("BPFLoader2111111111111111111111111111111111");var Ie=function(){if(Re)return Te;Re=1;var e=Object.prototype.toString,t=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};function n(r,i){var o,a,s,f,c,l,u;if(!0===r)return"true";if(!1===r)return"false";switch(typeof r){case"object":if(null===r)return null;if(r.toJSON&&"function"==typeof r.toJSON)return n(r.toJSON(),i);if("[object Array]"===(u=e.call(r))){for(s="[",a=r.length-1,o=0;o<a;o++)s+=n(r[o],!0)+",";return a>-1&&(s+=n(r[o],!0)),s+"]"}if("[object Object]"===u){for(a=(f=t(r).sort()).length,s="",o=0;o<a;)void 0!==(l=n(r[c=f[o]],!1))&&(s&&(s+=","),s+=JSON.stringify(c)+":"+l),o++;return"{"+s+"}"}return JSON.stringify(r);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return Te=function(e){var t=n(e,!1);if(void 0!==t)return""+t}}(),Ne=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(Ie);function Pe(e){let t=0;for(;e>1;)e/=2,t++;return t}var De=class{constructor(e,t,n,r,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=r,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){let t=Pe(function(e){return 0===e?1:(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,1+(e|=e>>32))}(e+32+1))-Pe(32)-1;return[t,e-(this.getSlotsInEpoch(t)-32)]}{let t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch);return[this.firstNormalEpoch+n,t%this.slotsPerEpoch]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?32*(Math.pow(2,e)-1):(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Pe(32)):this.slotsPerEpoch}},Be=globalThis.fetch,Me=class extends d.CommonClient{constructor(e,t,n){super((e=>{let n=d.WebSocket(e,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return this.underlyingSocket="socket"in n?n.socket:n,n}),e,t,n),this.underlyingSocket=void 0}call(){let e=this.underlyingSocket?.readyState;return 1===e?super.call(...arguments):Promise.reject(new Error("Tried to call a JSON-RPC method `"+(arguments.length<=0?void 0:arguments[0])+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(){let e=this.underlyingSocket?.readyState;return 1===e?super.notify(...arguments):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+(arguments.length<=0?void 0:arguments[0])+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}};var Ke=class{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){let e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){let t=function(e,t){let r;try{r=e.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(r.typeIndex!==e.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${e.index}`);return r}(Le,e),n=e.length-56;F(n>=0,"lookup table is invalid"),F(n%32===0,"lookup table is invalid");let r=n/32,{addresses:i}=m.struct([m.seq(j(),r,"addresses")]).decode(e.slice(56));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:0!==t.authority.length?new N(t.authority[0]):void 0,addresses:i.map((e=>new N(e)))}}},Le={index:1,layout:m.struct([m.u32("typeIndex"),Oe("deactivationSlot"),m.nu64("lastExtendedSlot"),m.u8("lastExtendedStartIndex"),m.u8(),m.seq(j(),m.offset(m.u8(),-1),"authority")])},Ue=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;var je=l.coerce(l.instance(N),l.string(),(e=>new N(e))),We=l.tuple([l.string(),l.literal("base64")]),He=l.coerce(l.instance(t.Buffer),We,(e=>t.Buffer.from(e[0],"base64")));function $e(e){let t,n;if("string"==typeof e)t=e;else if(e){let{commitment:r,...i}=e;t=r,n=i}return{commitment:t,config:n}}function qe(e){return e.map((e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e))}function Xe(e){return l.union([l.type({jsonrpc:l.literal("2.0"),id:l.string(),result:e}),l.type({jsonrpc:l.literal("2.0"),id:l.string(),error:l.type({code:l.unknown(),message:l.string(),data:l.optional(l.any())})})])}var Fe=Xe(l.unknown());function ze(e){return l.coerce(Xe(e),Fe,(t=>"error"in t?t:{...t,result:l.create(t.result,e)}))}function Je(e){return ze(l.type({context:l.type({slot:l.number()}),value:e}))}function Ve(e){return l.type({context:l.type({slot:l.number()}),value:e})}function Ge(e,t){return 0===e?new Q({header:t.header,staticAccountKeys:t.accountKeys.map((e=>new N(e))),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map((e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:y.default.decode(e.data)}))),addressTableLookups:t.addressTableLookups}):new Z(t)}var Ye=l.type({foundation:l.number(),foundationTerm:l.number(),initial:l.number(),taper:l.number(),terminal:l.number()}),Ze=ze(l.array(l.nullable(l.type({epoch:l.number(),effectiveSlot:l.number(),amount:l.number(),postBalance:l.number(),commission:l.optional(l.nullable(l.number()))})))),Qe=l.array(l.type({slot:l.number(),prioritizationFee:l.number()})),et=l.type({total:l.number(),validator:l.number(),foundation:l.number(),epoch:l.number()}),tt=l.type({epoch:l.number(),slotIndex:l.number(),slotsInEpoch:l.number(),absoluteSlot:l.number(),blockHeight:l.optional(l.number()),transactionCount:l.optional(l.number())}),nt=l.type({slotsPerEpoch:l.number(),leaderScheduleSlotOffset:l.number(),warmup:l.boolean(),firstNormalEpoch:l.number(),firstNormalSlot:l.number()}),rt=l.record(l.string(),l.array(l.number())),it=l.nullable(l.union([l.type({}),l.string()])),ot=l.type({err:it}),at=l.literal("receivedSignature"),st=l.type({"solana-core":l.string(),"feature-set":l.optional(l.number())}),ft=l.type({program:l.string(),programId:je,parsed:l.unknown()}),ct=l.type({programId:je,accounts:l.array(je),data:l.string()}),lt=Je(l.type({err:l.nullable(l.union([l.type({}),l.string()])),logs:l.nullable(l.array(l.string())),accounts:l.optional(l.nullable(l.array(l.nullable(l.type({executable:l.boolean(),owner:l.string(),lamports:l.number(),data:l.array(l.string()),rentEpoch:l.optional(l.number())}))))),unitsConsumed:l.optional(l.number()),returnData:l.optional(l.nullable(l.type({programId:l.string(),data:l.tuple([l.string(),l.literal("base64")])}))),innerInstructions:l.optional(l.nullable(l.array(l.type({index:l.number(),instructions:l.array(l.union([ft,ct]))}))))})),ut=Je(l.type({byIdentity:l.record(l.string(),l.array(l.number())),range:l.type({firstSlot:l.number(),lastSlot:l.number()})}));var dt=ze(Ye),ht=ze(et),pt=ze(Qe),gt=ze(tt),bt=ze(nt),yt=ze(rt),mt=ze(l.number()),vt=Je(l.type({total:l.number(),circulating:l.number(),nonCirculating:l.number(),nonCirculatingAccounts:l.array(je)})),wt=l.type({amount:l.string(),uiAmount:l.nullable(l.number()),decimals:l.number(),uiAmountString:l.optional(l.string())}),_t=Je(l.array(l.type({address:je,amount:l.string(),uiAmount:l.nullable(l.number()),decimals:l.number(),uiAmountString:l.optional(l.string())}))),Et=Je(l.array(l.type({pubkey:je,account:l.type({executable:l.boolean(),owner:je,lamports:l.number(),data:He,rentEpoch:l.number()})}))),Ct=l.type({program:l.string(),parsed:l.unknown(),space:l.number()}),Ot=Je(l.array(l.type({pubkey:je,account:l.type({executable:l.boolean(),owner:je,lamports:l.number(),data:Ct,rentEpoch:l.number()})}))),xt=Je(l.array(l.type({lamports:l.number(),address:je}))),St=l.type({executable:l.boolean(),owner:je,lamports:l.number(),data:He,rentEpoch:l.number()}),kt=l.type({pubkey:je,account:St}),Tt=l.coerce(l.union([l.instance(t.Buffer),Ct]),l.union([We,Ct]),(e=>Array.isArray(e)?l.create(e,He):e)),Rt=l.type({executable:l.boolean(),owner:je,lamports:l.number(),data:Tt,rentEpoch:l.number()}),At=l.type({pubkey:je,account:Rt}),It=l.type({state:l.union([l.literal("active"),l.literal("inactive"),l.literal("activating"),l.literal("deactivating")]),active:l.number(),inactive:l.number()}),Nt=ze(l.array(l.type({signature:l.string(),slot:l.number(),err:it,memo:l.nullable(l.string()),blockTime:l.optional(l.nullable(l.number()))}))),Pt=ze(l.array(l.type({signature:l.string(),slot:l.number(),err:it,memo:l.nullable(l.string()),blockTime:l.optional(l.nullable(l.number()))}))),Dt=l.type({subscription:l.number(),result:Ve(St)}),Bt=l.type({pubkey:je,account:St}),Mt=l.type({subscription:l.number(),result:Ve(Bt)}),Kt=l.type({parent:l.number(),slot:l.number(),root:l.number()}),Lt=l.type({subscription:l.number(),result:Kt}),Ut=l.union([l.type({type:l.union([l.literal("firstShredReceived"),l.literal("completed"),l.literal("optimisticConfirmation"),l.literal("root")]),slot:l.number(),timestamp:l.number()}),l.type({type:l.literal("createdBank"),parent:l.number(),slot:l.number(),timestamp:l.number()}),l.type({type:l.literal("frozen"),slot:l.number(),timestamp:l.number(),stats:l.type({numTransactionEntries:l.number(),numSuccessfulTransactions:l.number(),numFailedTransactions:l.number(),maxTransactionsPerEntry:l.number()})}),l.type({type:l.literal("dead"),slot:l.number(),timestamp:l.number(),err:l.string()})]),jt=l.type({subscription:l.number(),result:Ut}),Wt=l.type({subscription:l.number(),result:Ve(l.union([ot,at]))}),Ht=l.type({subscription:l.number(),result:l.number()}),$t=l.type({pubkey:l.string(),gossip:l.nullable(l.string()),tpu:l.nullable(l.string()),rpc:l.nullable(l.string()),version:l.nullable(l.string())}),qt=l.type({votePubkey:l.string(),nodePubkey:l.string(),activatedStake:l.number(),epochVoteAccount:l.boolean(),epochCredits:l.array(l.tuple([l.number(),l.number(),l.number()])),commission:l.number(),lastVote:l.number(),rootSlot:l.nullable(l.number())}),Xt=ze(l.type({current:l.array(qt),delinquent:l.array(qt)})),Ft=l.union([l.literal("processed"),l.literal("confirmed"),l.literal("finalized")]),zt=l.type({slot:l.number(),confirmations:l.nullable(l.number()),err:it,confirmationStatus:l.optional(Ft)}),Jt=Je(l.array(l.nullable(zt))),Vt=ze(l.number()),Gt=l.type({accountKey:je,writableIndexes:l.array(l.number()),readonlyIndexes:l.array(l.number())}),Yt=l.type({signatures:l.array(l.string()),message:l.type({accountKeys:l.array(l.string()),header:l.type({numRequiredSignatures:l.number(),numReadonlySignedAccounts:l.number(),numReadonlyUnsignedAccounts:l.number()}),instructions:l.array(l.type({accounts:l.array(l.number()),data:l.string(),programIdIndex:l.number()})),recentBlockhash:l.string(),addressTableLookups:l.optional(l.array(Gt))})}),Zt=l.type({pubkey:je,signer:l.boolean(),writable:l.boolean(),source:l.optional(l.union([l.literal("transaction"),l.literal("lookupTable")]))}),Qt=l.type({accountKeys:l.array(Zt),signatures:l.array(l.string())}),en=l.type({parsed:l.unknown(),program:l.string(),programId:je}),tn=l.type({accounts:l.array(je),data:l.string(),programId:je}),nn=l.union([tn,en]),rn=l.union([l.type({parsed:l.unknown(),program:l.string(),programId:l.string()}),l.type({accounts:l.array(l.string()),data:l.string(),programId:l.string()})]),on=l.coerce(nn,rn,(e=>"accounts"in e?l.create(e,tn):l.create(e,en))),an=l.type({signatures:l.array(l.string()),message:l.type({accountKeys:l.array(Zt),instructions:l.array(on),recentBlockhash:l.string(),addressTableLookups:l.optional(l.nullable(l.array(Gt)))})}),sn=l.type({accountIndex:l.number(),mint:l.string(),owner:l.optional(l.string()),programId:l.optional(l.string()),uiTokenAmount:wt}),fn=l.type({writable:l.array(je),readonly:l.array(je)}),cn=l.type({err:it,fee:l.number(),innerInstructions:l.optional(l.nullable(l.array(l.type({index:l.number(),instructions:l.array(l.type({accounts:l.array(l.number()),data:l.string(),programIdIndex:l.number()}))})))),preBalances:l.array(l.number()),postBalances:l.array(l.number()),logMessages:l.optional(l.nullable(l.array(l.string()))),preTokenBalances:l.optional(l.nullable(l.array(sn))),postTokenBalances:l.optional(l.nullable(l.array(sn))),loadedAddresses:l.optional(fn),computeUnitsConsumed:l.optional(l.number())}),ln=l.type({err:it,fee:l.number(),innerInstructions:l.optional(l.nullable(l.array(l.type({index:l.number(),instructions:l.array(on)})))),preBalances:l.array(l.number()),postBalances:l.array(l.number()),logMessages:l.optional(l.nullable(l.array(l.string()))),preTokenBalances:l.optional(l.nullable(l.array(sn))),postTokenBalances:l.optional(l.nullable(l.array(sn))),loadedAddresses:l.optional(fn),computeUnitsConsumed:l.optional(l.number())}),un=l.union([l.literal(0),l.literal("legacy")]),dn=l.type({pubkey:l.string(),lamports:l.number(),postBalance:l.nullable(l.number()),rewardType:l.nullable(l.string()),commission:l.optional(l.nullable(l.number()))}),hn=ze(l.nullable(l.type({blockhash:l.string(),previousBlockhash:l.string(),parentSlot:l.number(),transactions:l.array(l.type({transaction:Yt,meta:l.nullable(cn),version:l.optional(un)})),rewards:l.optional(l.array(dn)),blockTime:l.nullable(l.number()),blockHeight:l.nullable(l.number())}))),pn=ze(l.nullable(l.type({blockhash:l.string(),previousBlockhash:l.string(),parentSlot:l.number(),rewards:l.optional(l.array(dn)),blockTime:l.nullable(l.number()),blockHeight:l.nullable(l.number())}))),gn=ze(l.nullable(l.type({blockhash:l.string(),previousBlockhash:l.string(),parentSlot:l.number(),transactions:l.array(l.type({transaction:Qt,meta:l.nullable(cn),version:l.optional(un)})),rewards:l.optional(l.array(dn)),blockTime:l.nullable(l.number()),blockHeight:l.nullable(l.number())}))),bn=ze(l.nullable(l.type({blockhash:l.string(),previousBlockhash:l.string(),parentSlot:l.number(),transactions:l.array(l.type({transaction:an,meta:l.nullable(ln),version:l.optional(un)})),rewards:l.optional(l.array(dn)),blockTime:l.nullable(l.number()),blockHeight:l.nullable(l.number())}))),yn=ze(l.nullable(l.type({blockhash:l.string(),previousBlockhash:l.string(),parentSlot:l.number(),transactions:l.array(l.type({transaction:Qt,meta:l.nullable(ln),version:l.optional(un)})),rewards:l.optional(l.array(dn)),blockTime:l.nullable(l.number()),blockHeight:l.nullable(l.number())}))),mn=ze(l.nullable(l.type({blockhash:l.string(),previousBlockhash:l.string(),parentSlot:l.number(),rewards:l.optional(l.array(dn)),blockTime:l.nullable(l.number()),blockHeight:l.nullable(l.number())}))),vn=ze(l.nullable(l.type({blockhash:l.string(),previousBlockhash:l.string(),parentSlot:l.number(),transactions:l.array(l.type({transaction:Yt,meta:l.nullable(cn)})),rewards:l.optional(l.array(dn)),blockTime:l.nullable(l.number())}))),wn=ze(l.nullable(l.type({blockhash:l.string(),previousBlockhash:l.string(),parentSlot:l.number(),signatures:l.array(l.string()),blockTime:l.nullable(l.number())}))),_n=ze(l.nullable(l.type({slot:l.number(),meta:l.nullable(cn),blockTime:l.optional(l.nullable(l.number())),transaction:Yt,version:l.optional(un)}))),En=ze(l.nullable(l.type({slot:l.number(),transaction:an,meta:l.nullable(ln),blockTime:l.optional(l.nullable(l.number())),version:l.optional(un)}))),Cn=Je(l.type({blockhash:l.string(),feeCalculator:l.type({lamportsPerSignature:l.number()})})),On=Je(l.type({blockhash:l.string(),lastValidBlockHeight:l.number()})),xn=Je(l.boolean()),Sn=l.type({slot:l.number(),numTransactions:l.number(),numSlots:l.number(),samplePeriodSecs:l.number()}),kn=ze(l.array(Sn)),Tn=Je(l.nullable(l.type({feeCalculator:l.type({lamportsPerSignature:l.number()})}))),Rn=ze(l.string()),An=ze(l.string()),In=l.type({err:it,logs:l.array(l.string()),signature:l.string()}),Nn=l.type({result:Ve(In),subscription:l.number()}),Pn={"solana-client":"js/1.0.0-maintenance"},Dn=class e{constructor(e){this._keypair=void 0,this._keypair=e??_()}static generate(){return new e(_())}static fromSecretKey(t,n){if(64!==t.byteLength)throw new Error("bad secret key size");let r=t.slice(32,64);if(!n||!n.skipValidation){let e=t.slice(0,32),n=E(e);for(let t=0;t<32;t++)if(r[t]!==n[t])throw new Error("provided secretKey is invalid")}return new e({publicKey:r,secretKey:t})}static fromSeed(t){let n=E(t),r=new Uint8Array(64);return r.set(t),r.set(n,32),new e({publicKey:n,secretKey:r})}get publicKey(){return new N(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}},Bn=Object.freeze({CreateLookupTable:{index:0,layout:m.struct([m.u32("instruction"),Oe("recentSlot"),m.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:m.struct([m.u32("instruction")])},ExtendLookupTable:{index:2,layout:m.struct([m.u32("instruction"),Oe(),m.seq(j(),m.offset(m.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:m.struct([m.u32("instruction")])},CloseLookupTable:{index:4,layout:m.struct([m.u32("instruction")])}}),Mn=class{constructor(){}static createLookupTable(e){let[t,n]=N.findProgramAddressSync([e.authority.toBuffer(),c.toBufferLE(BigInt(e.recentSlot),8)],this.programId),r=me(Bn.CreateLookupTable,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),i=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Se.programId,isSigner:!1,isWritable:!1}];return[new re({programId:this.programId,keys:i,data:r}),t]}static freezeLookupTable(e){let t=me(Bn.FreezeLookupTable),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new re({programId:this.programId,keys:n,data:t})}static extendLookupTable(e){let t=me(Bn.ExtendLookupTable,{addresses:e.addresses.map((e=>e.toBytes()))}),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&n.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Se.programId,isSigner:!1,isWritable:!1}),new re({programId:this.programId,keys:n,data:t})}static deactivateLookupTable(e){let t=me(Bn.DeactivateLookupTable),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new re({programId:this.programId,keys:n,data:t})}static closeLookupTable(e){let t=me(Bn.CloseLookupTable),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new re({programId:this.programId,keys:n,data:t})}};Mn.programId=new N("AddressLookupTab1e1111111111111111111111111");var Kn=Object.freeze({RequestUnits:{index:0,layout:m.struct([m.u8("instruction"),m.u32("units"),m.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:m.struct([m.u8("instruction"),m.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:m.struct([m.u8("instruction"),m.u32("units")])},SetComputeUnitPrice:{index:3,layout:m.struct([m.u8("instruction"),Oe("microLamports")])}}),Ln=class{constructor(){}static requestUnits(e){let t=me(Kn.RequestUnits,e);return new re({keys:[],programId:this.programId,data:t})}static requestHeapFrame(e){let t=me(Kn.RequestHeapFrame,e);return new re({keys:[],programId:this.programId,data:t})}static setComputeUnitLimit(e){let t=me(Kn.SetComputeUnitLimit,e);return new re({keys:[],programId:this.programId,data:t})}static setComputeUnitPrice(e){let t=me(Kn.SetComputeUnitPrice,{microLamports:BigInt(e.microLamports)});return new re({keys:[],programId:this.programId,data:t})}};Ln.programId=new N("ComputeBudget111111111111111111111111111111");var Un=m.struct([m.u8("numSignatures"),m.u8("padding"),m.u16("signatureOffset"),m.u16("signatureInstructionIndex"),m.u16("publicKeyOffset"),m.u16("publicKeyInstructionIndex"),m.u16("messageDataOffset"),m.u16("messageDataSize"),m.u16("messageInstructionIndex")]),jn=class e{constructor(){}static createInstructionWithPublicKey(n){let{publicKey:r,message:i,signature:o,instructionIndex:a}=n;F(32===r.length,`Public Key must be 32 bytes but received ${r.length} bytes`),F(64===o.length,`Signature must be 64 bytes but received ${o.length} bytes`);let s=Un.span,f=s+r.length,c=f+o.length,l=t.Buffer.alloc(c+i.length),u=a??65535;return Un.encode({numSignatures:1,padding:0,signatureOffset:f,signatureInstructionIndex:u,publicKeyOffset:s,publicKeyInstructionIndex:u,messageDataOffset:c,messageDataSize:i.length,messageInstructionIndex:u},l),l.fill(r,s),l.fill(o,f),l.fill(i,c),new re({keys:[],programId:e.programId,data:l})}static createInstructionWithPrivateKey(e){let{privateKey:t,message:n,instructionIndex:r}=e;F(64===t.length,`Private key must be 64 bytes but received ${t.length} bytes`);try{let e=Dn.fromSecretKey(t),i=e.publicKey.toBytes(),o=x(n,e.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:n,signature:o,instructionIndex:r})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}};jn.programId=new N("Ed25519SigVerify111111111111111111111111111");p.secp256k1.utils.isValidPrivateKey;var Wn=p.secp256k1.getPublicKey,Hn=m.struct([m.u8("numSignatures"),m.u16("signatureOffset"),m.u8("signatureInstructionIndex"),m.u16("ethAddressOffset"),m.u8("ethAddressInstructionIndex"),m.u16("messageDataOffset"),m.u16("messageDataSize"),m.u8("messageInstructionIndex"),m.blob(20,"ethAddress"),m.blob(64,"signature"),m.u8("recoveryId")]),$n=class e{constructor(){}static publicKeyToEthAddress(e){F(64===e.length,`Public key must be 64 bytes but received ${e.length} bytes`);try{return t.Buffer.from(h.keccak_256(k(e))).slice(-20)}catch(n){throw new Error(`Error constructing Ethereum address: ${n}`)}}static createInstructionWithPublicKey(t){let{publicKey:n,message:r,signature:i,recoveryId:o,instructionIndex:a}=t;return e.createInstructionWithEthAddress({ethAddress:e.publicKeyToEthAddress(n),message:r,signature:i,recoveryId:o,instructionIndex:a})}static createInstructionWithEthAddress(n){let r,{ethAddress:i,message:o,signature:a,recoveryId:s,instructionIndex:f=0}=n;r="string"==typeof i?i.startsWith("0x")?t.Buffer.from(i.substr(2),"hex"):t.Buffer.from(i,"hex"):i,F(20===r.length,`Address must be 20 bytes but received ${r.length} bytes`);let c=12+r.length,l=c+a.length+1,u=t.Buffer.alloc(Hn.span+o.length);return Hn.encode({numSignatures:1,signatureOffset:c,signatureInstructionIndex:f,ethAddressOffset:12,ethAddressInstructionIndex:f,messageDataOffset:l,messageDataSize:o.length,messageInstructionIndex:f,signature:k(a),ethAddress:k(r),recoveryId:s},u),u.fill(k(o),Hn.span),new re({keys:[],programId:e.programId,data:u})}static createInstructionWithPrivateKey(e){let{privateKey:n,message:r,instructionIndex:i}=e;F(32===n.length,`Private key must be 32 bytes but received ${n.length} bytes`);try{let e=k(n),o=Wn(e,!1).slice(1),a=t.Buffer.from(h.keccak_256(k(r))),[s,f]=((e,t)=>{let n=p.secp256k1.sign(e,t);return[n.toCompactRawBytes(),n.recovery]})(a,e);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:s,recoveryId:f,instructionIndex:i})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};$n.programId=new N("KeccakSecp256k11111111111111111111111111111");var qn,Xn=new N("StakeConfig11111111111111111111111111111111"),Fn=class{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}},zn=class{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}};qn=zn,zn.default=new qn(0,0,N.default);var Jn=Object.freeze({Initialize:{index:0,layout:m.struct([m.u32("instruction"),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"authorized";return m.struct([j("staker"),j("withdrawer")],e)}(),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"lockup";return m.struct([m.ns64("unixTimestamp"),m.ns64("epoch"),j("custodian")],e)}()])},Authorize:{index:1,layout:m.struct([m.u32("instruction"),j("newAuthorized"),m.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:m.struct([m.u32("instruction")])},Split:{index:3,layout:m.struct([m.u32("instruction"),m.ns64("lamports")])},Withdraw:{index:4,layout:m.struct([m.u32("instruction"),m.ns64("lamports")])},Deactivate:{index:5,layout:m.struct([m.u32("instruction")])},Merge:{index:7,layout:m.struct([m.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:m.struct([m.u32("instruction"),j("newAuthorized"),m.u32("stakeAuthorizationType"),H("authoritySeed"),j("authorityOwner")])}}),Vn=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),Gn=class{constructor(){}static initialize(e){let{stakePubkey:t,authorized:n,lockup:r}=e,i=r||zn.default,o=me(Jn.Initialize,{authorized:{staker:k(n.staker.toBuffer()),withdrawer:k(n.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:k(i.custodian.toBuffer())}}),a={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ce,isSigner:!1,isWritable:!1}],programId:this.programId,data:o};return new re(a)}static createAccountWithSeed(e){let t=new ie;t.add(Se.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:n,authorized:r,lockup:i}=e;return t.add(this.initialize({stakePubkey:n,authorized:r,lockup:i}))}static createAccount(e){let t=new ie;t.add(Se.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:n,authorized:r,lockup:i}=e;return t.add(this.initialize({stakePubkey:n,authorized:r,lockup:i}))}static delegate(e){let{stakePubkey:t,authorizedPubkey:n,votePubkey:r}=e,i=me(Jn.Delegate);return(new ie).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:oe,isSigner:!1,isWritable:!1},{pubkey:he,isSigner:!1,isWritable:!1},{pubkey:Xn,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static authorize(e){let{stakePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:r,stakeAuthorizationType:i,custodianPubkey:o}=e,a=me(Jn.Authorize,{newAuthorized:k(r.toBuffer()),stakeAuthorizationType:i.index}),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:oe,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&s.push({pubkey:o,isSigner:!0,isWritable:!1}),(new ie).add({keys:s,programId:this.programId,data:a})}static authorizeWithSeed(e){let{stakePubkey:t,authorityBase:n,authoritySeed:r,authorityOwner:i,newAuthorizedPubkey:o,stakeAuthorizationType:a,custodianPubkey:s}=e,f=me(Jn.AuthorizeWithSeed,{newAuthorized:k(o.toBuffer()),stakeAuthorizationType:a.index,authoritySeed:r,authorityOwner:k(i.toBuffer())}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:oe,isSigner:!1,isWritable:!1}];return s&&c.push({pubkey:s,isSigner:!0,isWritable:!1}),(new ie).add({keys:c,programId:this.programId,data:f})}static splitInstruction(e){let{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:r,lamports:i}=e,o=me(Jn.Split,{lamports:i});return new re({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static split(e,t){let n=new ie;return n.add(Se.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),n.add(this.splitInstruction(e))}static splitWithSeed(e,t){let{stakePubkey:n,authorizedPubkey:r,splitStakePubkey:i,basePubkey:o,seed:a,lamports:s}=e,f=new ie;return f.add(Se.allocate({accountPubkey:i,basePubkey:o,seed:a,space:this.space,programId:this.programId})),t&&t>0&&f.add(Se.transfer({fromPubkey:e.authorizedPubkey,toPubkey:i,lamports:t})),f.add(this.splitInstruction({stakePubkey:n,authorizedPubkey:r,splitStakePubkey:i,lamports:s}))}static merge(e){let{stakePubkey:t,sourceStakePubKey:n,authorizedPubkey:r}=e,i=me(Jn.Merge);return(new ie).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:oe,isSigner:!1,isWritable:!1},{pubkey:he,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static withdraw(e){let{stakePubkey:t,authorizedPubkey:n,toPubkey:r,lamports:i,custodianPubkey:o}=e,a=me(Jn.Withdraw,{lamports:i}),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:oe,isSigner:!1,isWritable:!1},{pubkey:he,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&s.push({pubkey:o,isSigner:!0,isWritable:!1}),(new ie).add({keys:s,programId:this.programId,data:a})}static deactivate(e){let{stakePubkey:t,authorizedPubkey:n}=e,r=me(Jn.Deactivate);return(new ie).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:oe,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}};Gn.programId=new N("Stake11111111111111111111111111111111111111"),Gn.space=200;var Yn=class{constructor(e,t,n,r){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=n,this.commission=r}},Zn=Object.freeze({InitializeAccount:{index:0,layout:m.struct([m.u32("instruction"),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"voteInit";return m.struct([j("nodePubkey"),j("authorizedVoter"),j("authorizedWithdrawer"),m.u8("commission")],e)}()])},Authorize:{index:1,layout:m.struct([m.u32("instruction"),j("newAuthorized"),m.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:m.struct([m.u32("instruction"),m.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:m.struct([m.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:m.struct([m.u32("instruction"),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"voteAuthorizeWithSeedArgs";return m.struct([m.u32("voteAuthorizationType"),j("currentAuthorityDerivedKeyOwnerPubkey"),H("currentAuthorityDerivedKeySeed"),j("newAuthorized")],e)}()])}}),Qn=Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),er=class e{constructor(){}static initializeAccount(e){let{votePubkey:t,nodePubkey:n,voteInit:r}=e,i=me(Zn.InitializeAccount,{voteInit:{nodePubkey:k(r.nodePubkey.toBuffer()),authorizedVoter:k(r.authorizedVoter.toBuffer()),authorizedWithdrawer:k(r.authorizedWithdrawer.toBuffer()),commission:r.commission}}),o={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ce,isSigner:!1,isWritable:!1},{pubkey:oe,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i};return new re(o)}static createAccount(e){let t=new ie;return t.add(Se.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){let{votePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:r,voteAuthorizationType:i}=e,o=me(Zn.Authorize,{newAuthorized:k(r.toBuffer()),voteAuthorizationType:i.index}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:oe,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return(new ie).add({keys:a,programId:this.programId,data:o})}static authorizeWithSeed(e){let{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:i,voteAuthorizationType:o,votePubkey:a}=e,s=me(Zn.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:k(n.toBuffer()),currentAuthorityDerivedKeySeed:r,newAuthorized:k(i.toBuffer()),voteAuthorizationType:o.index}}),f=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:oe,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return(new ie).add({keys:f,programId:this.programId,data:s})}static withdraw(e){let{votePubkey:t,authorizedWithdrawerPubkey:n,lamports:r,toPubkey:i}=e,o=me(Zn.Withdraw,{lamports:r}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return(new ie).add({keys:a,programId:this.programId,data:o})}static safeWithdraw(t,n,r){if(t.lamports>n-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return e.withdraw(t)}static updateValidatorIdentity(e){let{votePubkey:t,authorizedWithdrawerPubkey:n,nodePubkey:r}=e,i=me(Zn.UpdateValidatorIdentity),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return(new ie).add({keys:o,programId:this.programId,data:i})}};er.programId=new N("Vote111111111111111111111111111111111111111"),er.space=3762;var tr=new N("Va1idator1nfo111111111111111111111111111111"),nr=l.type({name:l.string(),website:l.optional(l.string()),details:l.optional(l.string()),iconUrl:l.optional(l.string()),keybaseUsername:l.optional(l.string())}),rr=new N("Vote111111111111111111111111111111111111111"),ir=m.struct([j("nodePubkey"),j("authorizedWithdrawer"),m.u8("commission"),m.nu64(),m.seq(m.struct([m.nu64("slot"),m.u32("confirmationCount")]),m.offset(m.u32(),-8),"votes"),m.u8("rootSlotValid"),m.nu64("rootSlot"),m.nu64(),m.seq(m.struct([m.nu64("epoch"),j("authorizedVoter")]),m.offset(m.u32(),-8),"authorizedVoters"),m.struct([m.seq(m.struct([j("authorizedPubkey"),m.nu64("epochOfLastAuthorizedSwitch"),m.nu64("targetEpoch")]),32,"buf"),m.nu64("idx"),m.u8("isEmpty")],"priorVoters"),m.nu64(),m.seq(m.struct([m.nu64("epoch"),m.nu64("credits"),m.nu64("prevCredits")]),m.offset(m.u32(),-8),"epochCredits"),m.struct([m.nu64("slot"),m.nu64("timestamp")],"lastTimestamp")]);function or(e){let{authorizedVoter:t,epoch:n}=e;return{epoch:n,authorizedVoter:new N(t)}}function ar(e){let{authorizedPubkey:t,epochOfLastAuthorizedSwitch:n,targetEpoch:r}=e;return{authorizedPubkey:new N(t),epochOfLastAuthorizedSwitch:n,targetEpoch:r}}function sr(e){let{buf:t,idx:n,isEmpty:r}=e;return r?[]:[...t.slice(n+1).map(ar),...t.slice(0,n).map(ar)]}var fr={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};e.Account=class{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){let t=k(e);if(64!==e.length)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=k(w()),this._publicKey=k(E(this._secretKey))}get publicKey(){return new N(this._publicKey)}get secretKey(){return t.Buffer.concat([this._secretKey,this._publicKey],64)}},e.AddressLookupTableAccount=Ke,e.AddressLookupTableInstruction=class{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);let t,n=m.u32("instruction").decode(e.data);for(let[r,i]of Object.entries(Bn))if(i.index==n){t=r;break}if(!t)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return t}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);let{recentSlot:t}=ve(Bn.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);let{addresses:t}=ve(Bn.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map((e=>new N(e)))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Mn.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}},e.AddressLookupTableProgram=Mn,e.Authorized=Fn,e.BLOCKHASH_CACHE_TIMEOUT_MS=3e4,e.BPF_LOADER_DEPRECATED_PROGRAM_ID=P,e.BPF_LOADER_PROGRAM_ID=Ae,e.BpfLoader=class{static getMinNumSignatures(e){return ke.getMinNumSignatures(e)}static load(e,t,n,r,i){return ke.load(e,t,n,i,r)}},e.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS=Kn,e.ComputeBudgetInstruction=class{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);let t,n=m.u8("instruction").decode(e.data);for(let[r,i]of Object.entries(Kn))if(i.index==n){t=r;break}if(!t)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return t}static decodeRequestUnits(e){this.checkProgramId(e.programId);let{units:t,additionalFee:n}=ve(Kn.RequestUnits,e.data);return{units:t,additionalFee:n}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);let{bytes:t}=ve(Kn.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);let{units:t}=ve(Kn.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);let{microLamports:t}=ve(Kn.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(Ln.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}},e.ComputeBudgetProgram=Ln,e.Connection=class{constructor(e,t){let n,r,o,a,s,f;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{let e={};return async t=>{let{commitment:n,config:r}=$e(t),i=this._buildArgs([],n,void 0,r),o=Ne(i);return e[o]=e[o]??(async()=>{try{let e=await this._rpcRequest("getBlockHeight",i),t=l.create(e,ze(l.number()));if("error"in t)throw new ge(t.error,"failed to get block height information");return t.result}finally{delete e[o]}})(),await e[o]}})(),t&&"string"==typeof t?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,r=t.httpHeaders,o=t.fetch,a=t.fetchMiddleware,s=t.disableRetryOnRateLimit,f=t.httpAgent),this._rpcEndpoint=function(e){if(!1===/^https?:/.test(e))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return e}(e),this._rpcWsEndpoint=n||function(e){let t=e.match(Ue);if(null==t)throw TypeError(`Failed to validate endpoint URL \`${e}\``);let[n,r,i,o]=t,a=e.startsWith("https:")?"wss:":"ws:",s=null==i?null:parseInt(i.slice(1),10);return`${a}//${r}${null==s?"":`:${s+1}`}${o}`}(e),this._rpcClient=function(e,t,n,r,o,a){let s,f=n||Be;return null!=a&&i.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),r&&(s=async(e,t)=>{let n=await new Promise(((n,i)=>{try{r(e,t,((e,t)=>n([e,t])))}catch(o){i(o)}}));return await f(...n)}),new v.default((async(n,r)=>{let a={method:"POST",body:n,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},t||{},Pn)};try{let t,n=5,c=500;for(;t=s?await s(e,a):await f(e,a),429===t.status&&!0!==o&&(n-=1,0!==n);)i.error(`Server responded with ${t.status} ${t.statusText}.  Retrying after ${c}ms delay...`),await ye(c),c*=2;let l=await t.text();t.ok?r(null,l):r(new Error(`${t.status} ${t.statusText}: ${l}`))}catch(c){c instanceof Error&&r(c)}}),{})}(e,r,o,a,s,f),this._rpcRequest=function(e){return(t,n)=>new Promise(((r,i)=>{e.request(t,n,((e,t)=>{e?i(e):r(t)}))}))}(this._rpcClient),this._rpcBatchRequest=function(e){return t=>new Promise(((n,r)=>{0===t.length&&n([]);let i=t.map((t=>e.request(t.methodName,t.args)));e.request(i,((e,t)=>{e?r(e):n(t)}))}))}(this._rpcClient),this._rpcWebSocket=new Me(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){let{commitment:n,config:r}=$e(t),i=this._buildArgs([e.toBase58()],n,void 0,r),o=await this._rpcRequest("getBalance",i),a=l.create(o,Je(l.number()));if("error"in a)throw new ge(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then((e=>e.value)).catch((t=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+t)}))}async getBlockTime(e){let t=await this._rpcRequest("getBlockTime",[e]),n=l.create(t,ze(l.nullable(l.number())));if("error"in n)throw new ge(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){let e=await this._rpcRequest("minimumLedgerSlot",[]),t=l.create(e,ze(l.number()));if("error"in t)throw new ge(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){let e=await this._rpcRequest("getFirstAvailableBlock",[]),t=l.create(e,mt);if("error"in t)throw new ge(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};t="string"==typeof e?{commitment:e}:e?{...e,commitment:e&&e.commitment||this.commitment}:{commitment:this.commitment};let n=await this._rpcRequest("getSupply",[t]),r=l.create(n,vt);if("error"in r)throw new ge(r.error,"failed to get supply");return r.result}async getTokenSupply(e,t){let n=this._buildArgs([e.toBase58()],t),r=await this._rpcRequest("getTokenSupply",n),i=l.create(r,Je(wt));if("error"in i)throw new ge(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(e,t){let n=this._buildArgs([e.toBase58()],t),r=await this._rpcRequest("getTokenAccountBalance",n),i=l.create(r,Je(wt));if("error"in i)throw new ge(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(e,t,n){let{commitment:r,config:i}=$e(n),o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});let a=this._buildArgs(o,r,"base64",i),s=await this._rpcRequest("getTokenAccountsByOwner",a),f=l.create(s,Et);if("error"in f)throw new ge(f.error,`failed to get token accounts owned by account ${e.toBase58()}`);return f.result}async getParsedTokenAccountsByOwner(e,t,n){let r=[e.toBase58()];"mint"in t?r.push({mint:t.mint.toBase58()}):r.push({programId:t.programId.toBase58()});let i=this._buildArgs(r,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),a=l.create(o,Ot);if("error"in a)throw new ge(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){let t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],r=await this._rpcRequest("getLargestAccounts",n),i=l.create(r,xt);if("error"in i)throw new ge(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(e,t){let n=this._buildArgs([e.toBase58()],t),r=await this._rpcRequest("getTokenLargestAccounts",n),i=l.create(r,_t);if("error"in i)throw new ge(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(e,t){let{commitment:n,config:r}=$e(t),i=this._buildArgs([e.toBase58()],n,"base64",r),o=await this._rpcRequest("getAccountInfo",i),a=l.create(o,Je(l.nullable(St)));if("error"in a)throw new ge(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,t){let{commitment:n,config:r}=$e(t),i=this._buildArgs([e.toBase58()],n,"jsonParsed",r),o=await this._rpcRequest("getAccountInfo",i),a=l.create(o,Je(l.nullable(Rt)));if("error"in a)throw new ge(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){let{commitment:n,config:r}=$e(t),i=e.map((e=>e.toBase58())),o=this._buildArgs([i],n,"jsonParsed",r),a=await this._rpcRequest("getMultipleAccounts",o),s=l.create(a,Je(l.array(l.nullable(Rt))));if("error"in s)throw new ge(s.error,`failed to get info for accounts ${i}`);return s.result}async getMultipleAccountsInfoAndContext(e,t){let{commitment:n,config:r}=$e(t),i=e.map((e=>e.toBase58())),o=this._buildArgs([i],n,"base64",r),a=await this._rpcRequest("getMultipleAccounts",o),s=l.create(a,Je(l.array(l.nullable(St))));if("error"in s)throw new ge(s.error,`failed to get info for accounts ${i}`);return s.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){let{commitment:r,config:i}=$e(t),o=this._buildArgs([e.toBase58()],r,void 0,{...i,epoch:n??i?.epoch}),a=await this._rpcRequest("getStakeActivation",o),s=l.create(a,ze(It));if("error"in s)throw new ge(s.error,`failed to get Stake Activation ${e.toBase58()}`);return s.result}async getProgramAccounts(e,t){let{commitment:n,config:r}=$e(t),{encoding:i,...o}=r||{},a=this._buildArgs([e.toBase58()],n,i||"base64",{...o,...o.filters?{filters:qe(o.filters)}:null}),s=await this._rpcRequest("getProgramAccounts",a),f=l.array(kt),c=!0===o.withContext?l.create(s,Je(f)):l.create(s,ze(f));if("error"in c)throw new ge(c.error,`failed to get accounts owned by program ${e.toBase58()}`);return c.result}async getParsedProgramAccounts(e,t){let{commitment:n,config:r}=$e(t),i=this._buildArgs([e.toBase58()],n,"jsonParsed",r),o=await this._rpcRequest("getProgramAccounts",i),a=l.create(o,ze(l.array(At)));if("error"in a)throw new ge(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,t){let n,r;if("string"==typeof e)n=e;else{let t=e;if(t.abortSignal?.aborted)return Promise.reject(t.abortSignal.reason);n=t.signature}try{r=y.default.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return F(64===r.length,"signature has invalid length"),"string"==typeof e?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise(((t,n)=>{null!=e&&(e.aborted?n(e.reason):e.addEventListener("abort",(()=>{n(e.reason)})))}))}getTransactionConfirmationPromise(e){let t,n,{commitment:r,signature:i}=e,o=!1;return{abortConfirmation:()=>{n&&(n(),n=void 0),null!=t&&(this.removeSignatureListener(t),t=void 0)},confirmationPromise:new Promise(((e,a)=>{try{t=this.onSignature(i,((n,r)=>{t=void 0;let i={context:r,value:n};e({__type:te.PROCESSED,response:i})}),r);let s=new Promise((e=>{null==t?e():n=this._onSubscriptionStateChange(t,(t=>{"subscribed"===t&&e()}))}));(async()=>{if(await s,o)return;let t=await this.getSignatureStatus(i);if(o||null==t)return;let{context:n,value:f}=t;if(null!=f)if(f?.err)a(f.err);else{switch(r){case"confirmed":case"single":case"singleGossip":if("processed"===f.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===f.confirmationStatus||"confirmed"===f.confirmationStatus)return}o=!0,e({__type:te.PROCESSED,response:{context:n,value:f}})}})()}catch(s){a(s)}}))}}async confirmTransactionUsingBlockHeightExceedanceStrategy(e){let t,{commitment:n,strategy:{abortSignal:r,lastValidBlockHeight:i,signature:o}}=e,a=!1,s=new Promise((e=>{let t=async()=>{try{return await this.getBlockHeight(n)}catch{return-1}};(async()=>{let n=await t();if(!a){for(;n<=i;)if(await ye(1e3),a||(n=await t(),a))return;e({__type:te.BLOCKHEIGHT_EXCEEDED})}})()})),{abortConfirmation:f,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:n,signature:o}),l=this.getCancellationPromise(r);try{let e=await Promise.race([l,c,s]);if(e.__type!==te.PROCESSED)throw new M(o);t=e.response}finally{a=!0,f()}return t}async confirmTransactionUsingDurableNonceStrategy(e){let t,{commitment:n,strategy:{abortSignal:r,minContextSlot:i,nonceAccountPubkey:o,nonceValue:a,signature:s}}=e,f=!1,c=new Promise((e=>{let t=a,r=null,s=async()=>{try{let{context:e,value:t}=await this.getNonceAndContext(o,{commitment:n,minContextSlot:i});return r=e.slot,t?.nonce}catch{return t}};(async()=>{if(t=await s(),!f)for(;;){if(a!==t)return void e({__type:te.NONCE_INVALID,slotInWhichNonceDidAdvance:r});if(await ye(2e3),f||(t=await s(),f))return}})()})),{abortConfirmation:l,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:n,signature:s}),d=this.getCancellationPromise(r);try{let e=await Promise.race([d,u,c]);if(e.__type===te.PROCESSED)t=e.response;else{let r;for(;;){let t=await this.getSignatureStatus(s);if(null==t)break;if(!(t.context.slot<(e.slotInWhichNonceDidAdvance??i))){r=t;break}await ye(400)}if(!r?.value)throw new L(s);{let e=n||"finalized",{confirmationStatus:i}=r.value;switch(e){case"processed":case"recent":if("processed"!==i&&"confirmed"!==i&&"finalized"!==i)throw new L(s);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==i&&"finalized"!==i)throw new L(s);break;case"finalized":case"max":case"root":if("finalized"!==i)throw new L(s)}t={context:r.context,value:{err:r.value.err}}}}}finally{f=!0,l()}return t}async confirmTransactionUsingLegacyTimeoutStrategy(e){let t,n,{commitment:r,signature:i}=e,o=new Promise((e=>{let n=this._confirmTransactionInitialTimeout||6e4;switch(r){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":n=this._confirmTransactionInitialTimeout||3e4}t=setTimeout((()=>e({__type:te.TIMED_OUT,timeoutMs:n})),n)})),{abortConfirmation:a,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:r,signature:i});try{let e=await Promise.race([s,o]);if(e.__type!==te.PROCESSED)throw new K(i,e.timeoutMs/1e3);n=e.response}finally{clearTimeout(t),a()}return n}async getClusterNodes(){let e=await this._rpcRequest("getClusterNodes",[]),t=l.create(e,ze(l.array($t)));if("error"in t)throw new ge(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){let t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),r=l.create(n,Xt);if("error"in r)throw new ge(r.error,"failed to get vote accounts");return r.result}async getSlot(e){let{commitment:t,config:n}=$e(e),r=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getSlot",r),o=l.create(i,ze(l.number()));if("error"in o)throw new ge(o.error,"failed to get slot");return o.result}async getSlotLeader(e){let{commitment:t,config:n}=$e(e),r=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getSlotLeader",r),o=l.create(i,ze(l.string()));if("error"in o)throw new ge(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,t){let n=[e,t],r=await this._rpcRequest("getSlotLeaders",n),i=l.create(r,ze(l.array(je)));if("error"in i)throw new ge(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(e,t){let{context:n,value:r}=await this.getSignatureStatuses([e],t);return F(1===r.length),{context:n,value:r[0]}}async getSignatureStatuses(e,t){let n=[e];t&&n.push(t);let r=await this._rpcRequest("getSignatureStatuses",n),i=l.create(r,Jt);if("error"in i)throw new ge(i.error,"failed to get signature status");return i.result}async getTransactionCount(e){let{commitment:t,config:n}=$e(e),r=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getTransactionCount",r),o=l.create(i,ze(l.number()));if("error"in o)throw new ge(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){let t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),r=l.create(n,dt);if("error"in r)throw new ge(r.error,"failed to get inflation");return r.result}async getInflationReward(e,t,n){let{commitment:r,config:i}=$e(n),o=this._buildArgs([e.map((e=>e.toBase58()))],r,void 0,{...i,epoch:t??i?.epoch}),a=await this._rpcRequest("getInflationReward",o),s=l.create(a,Ze);if("error"in s)throw new ge(s.error,"failed to get inflation reward");return s.result}async getInflationRate(){let e=await this._rpcRequest("getInflationRate",[]),t=l.create(e,ht);if("error"in t)throw new ge(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){let{commitment:t,config:n}=$e(e),r=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getEpochInfo",r),o=l.create(i,gt);if("error"in o)throw new ge(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){let e=await this._rpcRequest("getEpochSchedule",[]),t=l.create(e,bt);if("error"in t)throw new ge(t.error,"failed to get epoch schedule");let n=t.result;return new De(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){let e=await this._rpcRequest("getLeaderSchedule",[]),t=l.create(e,yt);if("error"in t)throw new ge(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){let n=this._buildArgs([e],t),r=await this._rpcRequest("getMinimumBalanceForRentExemption",n),o=l.create(r,Vt);return"error"in o?(i.warn("Unable to fetch minimum balance for rent exemption"),0):o.result}async getRecentBlockhashAndContext(e){let t=this._buildArgs([],e),n=await this._rpcRequest("getRecentBlockhash",t),r=l.create(n,Cn);if("error"in r)throw new ge(r.error,"failed to get recent blockhash");return r.result}async getRecentPerformanceSamples(e){let t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=l.create(t,kn);if("error"in n)throw new ge(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){let n=this._buildArgs([e],t),r=await this._rpcRequest("getFeeCalculatorForBlockhash",n),i=l.create(r,Tn);if("error"in i)throw new ge(i.error,"failed to get fee calculator");let{context:o,value:a}=i.result;return{context:o,value:null!==a?a.feeCalculator:null}}async getFeeForMessage(e,t){let n=k(e.serialize()).toString("base64"),r=this._buildArgs([n],t),i=await this._rpcRequest("getFeeForMessage",r),o=l.create(i,Je(l.nullable(l.number())));if("error"in o)throw new ge(o.error,"failed to get fee for message");if(null===o.result)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){let t=e?.lockedWritableAccounts?.map((e=>e.toBase58())),n=t?.length?[t]:[],r=await this._rpcRequest("getRecentPrioritizationFees",n),i=l.create(r,pt);if("error"in i)throw new ge(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){let{commitment:t,config:n}=$e(e),r=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getLatestBlockhash",r),o=l.create(i,On);if("error"in o)throw new ge(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,t){let{commitment:n,config:r}=$e(t),i=this._buildArgs([e],n,void 0,r),o=await this._rpcRequest("isBlockhashValid",i),a=l.create(o,xn);if("error"in a)throw new ge(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){let e=await this._rpcRequest("getVersion",[]),t=l.create(e,ze(st));if("error"in t)throw new ge(t.error,"failed to get version");return t.result}async getGenesisHash(){let e=await this._rpcRequest("getGenesisHash",[]),t=l.create(e,ze(l.string()));if("error"in t)throw new ge(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){let{commitment:n,config:r}=$e(t),i=this._buildArgsAtLeastConfirmed([e],n,void 0,r),o=await this._rpcRequest("getBlock",i);try{switch(r?.transactionDetails){case"accounts":{let e=l.create(o,gn);if("error"in e)throw e.error;return e.result}case"none":{let e=l.create(o,pn);if("error"in e)throw e.error;return e.result}default:{let e=l.create(o,hn);if("error"in e)throw e.error;let{result:t}=e;return t?{...t,transactions:t.transactions.map((e=>{let{transaction:t,meta:n,version:r}=e;return{meta:n,transaction:{...t,message:Ge(r,t.message)},version:r}}))}:null}}}catch(ol){throw new ge(ol,"failed to get confirmed block")}}async getParsedBlock(e,t){let{commitment:n,config:r}=$e(t),i=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",r),o=await this._rpcRequest("getBlock",i);try{switch(r?.transactionDetails){case"accounts":{let e=l.create(o,yn);if("error"in e)throw e.error;return e.result}case"none":{let e=l.create(o,mn);if("error"in e)throw e.error;return e.result}default:{let e=l.create(o,bn);if("error"in e)throw e.error;return e.result}}}catch(ol){throw new ge(ol,"failed to get block")}}async getBlockProduction(e){let t,n;if("string"==typeof e)n=e;else if(e){let{commitment:r,...i}=e;n=r,t=i}let r=this._buildArgs([],n,"base64",t),i=await this._rpcRequest("getBlockProduction",r),o=l.create(i,ut);if("error"in o)throw new ge(o.error,"failed to get block production information");return o.result}async getTransaction(e,t){let{commitment:n,config:r}=$e(t),i=this._buildArgsAtLeastConfirmed([e],n,void 0,r),o=await this._rpcRequest("getTransaction",i),a=l.create(o,_n);if("error"in a)throw new ge(a.error,"failed to get transaction");let s=a.result;return s&&{...s,transaction:{...s.transaction,message:Ge(s.version,s.transaction.message)}}}async getParsedTransaction(e,t){let{commitment:n,config:r}=$e(t),i=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",r),o=await this._rpcRequest("getTransaction",i),a=l.create(o,En);if("error"in a)throw new ge(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,t){let{commitment:n,config:r}=$e(t),i=e.map((e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",r)})));return(await this._rpcBatchRequest(i)).map((e=>{let t=l.create(e,En);if("error"in t)throw new ge(t.error,"failed to get transactions");return t.result}))}async getTransactions(e,t){let{commitment:n,config:r}=$e(t),i=e.map((e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],n,void 0,r)})));return(await this._rpcBatchRequest(i)).map((e=>{let t=l.create(e,_n);if("error"in t)throw new ge(t.error,"failed to get transactions");let n=t.result;return n&&{...n,transaction:{...n.transaction,message:Ge(n.version,n.transaction.message)}}}))}async getConfirmedBlock(e,t){let n=this._buildArgsAtLeastConfirmed([e],t),r=await this._rpcRequest("getConfirmedBlock",n),i=l.create(r,vn);if("error"in i)throw new ge(i.error,"failed to get confirmed block");let o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");let a={...o,transactions:o.transactions.map((e=>{let{transaction:t,meta:n}=e,r=new Z(t.message);return{meta:n,transaction:{...t,message:r}}}))};return{...a,transactions:a.transactions.map((e=>{let{transaction:t,meta:n}=e;return{meta:n,transaction:ie.populate(t.message,t.signatures)}}))}}async getBlocks(e,t,n){let r=this._buildArgsAtLeastConfirmed(void 0!==t?[e,t]:[e],n),i=await this._rpcRequest("getBlocks",r),o=l.create(i,ze(l.array(l.number())));if("error"in o)throw new ge(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,t){let n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),r=await this._rpcRequest("getBlock",n),i=l.create(r,wn);if("error"in i)throw new ge(i.error,"failed to get block");let o=i.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,t){let n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),r=await this._rpcRequest("getConfirmedBlock",n),i=l.create(r,wn);if("error"in i)throw new ge(i.error,"failed to get confirmed block");let o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,t){let n=this._buildArgsAtLeastConfirmed([e],t),r=await this._rpcRequest("getConfirmedTransaction",n),i=l.create(r,_n);if("error"in i)throw new ge(i.error,"failed to get transaction");let o=i.result;if(!o)return o;let a=new Z(o.transaction.message),s=o.transaction.signatures;return{...o,transaction:ie.populate(a,s)}}async getParsedConfirmedTransaction(e,t){let n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),r=await this._rpcRequest("getConfirmedTransaction",n),i=l.create(r,En);if("error"in i)throw new ge(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(e,t){let n=e.map((e=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([e],t,"jsonParsed")})));return(await this._rpcBatchRequest(n)).map((e=>{let t=l.create(e,En);if("error"in t)throw new ge(t.error,"failed to get confirmed transactions");return t.result}))}async getConfirmedSignaturesForAddress(e,t,n){let r={},i=await this.getFirstAvailableBlock();for(;!("until"in r)&&!(--t<=0||t<i);)try{let e=await this.getConfirmedBlockSignatures(t,"finalized");e.signatures.length>0&&(r.until=e.signatures[e.signatures.length-1].toString())}catch(a){if(a instanceof Error&&a.message.includes("skipped"))continue;throw a}let o=await this.getSlot("finalized");for(;!("before"in r)&&!(++n>o);)try{let e=await this.getConfirmedBlockSignatures(n);e.signatures.length>0&&(r.before=e.signatures[e.signatures.length-1].toString())}catch(a){if(a instanceof Error&&a.message.includes("skipped"))continue;throw a}return(await this.getConfirmedSignaturesForAddress2(e,r)).map((e=>e.signature))}async getConfirmedSignaturesForAddress2(e,t,n){let r=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",r),o=l.create(i,Nt);if("error"in o)throw new ge(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,t,n){let r=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),i=await this._rpcRequest("getSignaturesForAddress",r),o=l.create(i,Pt);if("error"in o)throw new ge(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,t){let{context:n,value:r}=await this.getAccountInfoAndContext(e,t),i=null;return null!==r&&(i=new Ke({key:e,state:Ke.deserialize(r.data)})),{context:n,value:i}}async getNonceAndContext(e,t){let{context:n,value:r}=await this.getAccountInfoAndContext(e,t),i=null;return null!==r&&(i=Ce.fromAccountData(r.data)),{context:n,value:i}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then((e=>e.value)).catch((t=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+t)}))}async requestAirdrop(e,t){let n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),r=l.create(n,Rn);if("error"in r)throw new ge(r.error,`airdrop to ${e.toBase58()} failed`);return r.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await ye(100);let e=Date.now()-this._blockhashInfo.lastFetch>=3e4;if(null!==this._blockhashInfo.latestBlockhash&&!e)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{let e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let r=0;r<50;r++){let e=await this.getLatestBlockhash("finalized");if(n!==e.blockhash)return this._blockhashInfo={latestBlockhash:e,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},e;await ye(200)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){let{commitment:t,config:n}=$e(e),r=this._buildArgs([],t,"base64",n),i=await this._rpcRequest("getStakeMinimumDelegation",r),o=l.create(i,Je(l.number()));if("error"in o)throw new ge(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,n,r){if("message"in e){let i=e.serialize(),o=t.Buffer.from(i).toString("base64");if(Array.isArray(n)||void 0!==r)throw new Error("Invalid arguments");let a=n||{};a.encoding="base64","commitment"in a||(a.commitment=this.commitment),n&&"object"==typeof n&&"innerInstructions"in n&&(a.innerInstructions=n.innerInstructions);let s=[o,a],f=await this._rpcRequest("simulateTransaction",s),c=l.create(f,lt);if("error"in c)throw new Error("failed to simulate transaction: "+c.error.message);return c.result}let o;if(e instanceof ie){let t=e;o=new ie,o.feePayer=t.feePayer,o.instructions=e.instructions,o.nonceInfo=t.nonceInfo,o.signatures=t.signatures}else o=ie.populate(e),o._message=o._json=void 0;if(void 0!==n&&!Array.isArray(n))throw new Error("Invalid arguments");let a=n;if(o.nonceInfo&&a)o.sign(...a);else{let e=this._disableBlockhashCaching;for(;;){let t=await this._blockhashWithExpiryBlockHeight(e);if(o.lastValidBlockHeight=t.lastValidBlockHeight,o.recentBlockhash=t.blockhash,!a)break;if(o.sign(...a),!o.signature)throw new Error("!signature");let n=o.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(n)&&!this._blockhashInfo.transactionSignatures.includes(n)){this._blockhashInfo.simulatedSignatures.push(n);break}e=!0}}let s=o._compile(),f=s.serialize(),c=o._serialize(f).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(r){let e=(Array.isArray(r)?r:s.nonProgramIds()).map((e=>e.toBase58()));u.accounts={encoding:"base64",addresses:e}}a&&(u.sigVerify=!0),n&&"object"==typeof n&&"innerInstructions"in n&&(u.innerInstructions=n.innerInstructions);let d=[c,u],h=await this._rpcRequest("simulateTransaction",d),p=l.create(h,lt);if("error"in p){let e;if("data"in p.error&&(e=p.error.data.logs,e&&Array.isArray(e))){let t="\n    ",n=t+e.join(t);i.error(p.error.message,n)}throw new pe({action:"simulate",signature:"",transactionMessage:p.error.message,logs:e})}return p.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");let n=e.serialize();return await this.sendRawTransaction(n,t)}if(void 0===t||!Array.isArray(t))throw new Error("Invalid arguments");let r=t;if(e.nonceInfo)e.sign(...r);else{let t=this._disableBlockhashCaching;for(;;){let n=await this._blockhashWithExpiryBlockHeight(t);if(e.lastValidBlockHeight=n.lastValidBlockHeight,e.recentBlockhash=n.blockhash,e.sign(...r),!e.signature)throw new Error("!signature");let i=e.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(i)){this._blockhashInfo.transactionSignatures.push(i);break}t=!0}}let i=e.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(e,t){let n=k(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){let n={encoding:"base64"},r=t&&t.skipPreflight,i=!0===r?"processed":t&&t.preflightCommitment||this.commitment;t&&null!=t.maxRetries&&(n.maxRetries=t.maxRetries),t&&null!=t.minContextSlot&&(n.minContextSlot=t.minContextSlot),r&&(n.skipPreflight=r),i&&(n.preflightCommitment=i);let o=[e,n],a=await this._rpcRequest("sendTransaction",o),s=l.create(a,An);if("error"in s){let e;throw"data"in s.error&&(e=s.error.data.logs),new pe({action:r?"send":"simulate",signature:"",transactionMessage:s.error.message,logs:e})}return s.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval((()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()}),5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,i.error("ws error:",e.message)}_wsOnClose(e){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==e?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach((e=>{let[t,n]=e;this._setSubscription(t,{...n,state:"pending"})}))):this._updateSubscriptions()}_setSubscription(e,t){let n=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,n!==t.state){let n=this._subscriptionStateChangeCallbacksByHash[e];n&&n.forEach((e=>{try{e(t.state)}catch{}}))}}_onSubscriptionStateChange(e,t){let n=this._subscriptionHashByClientSubscriptionId[e];if(null==n)return()=>{};let r=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return r.add(t),()=>{r.delete(t),0===r.size&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout((()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(e){e instanceof Error&&i.log(`Error when closing socket connection: ${e.message}`)}}),500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();let e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map((async e=>{let n=this._subscriptionsByHash[e];if(void 0!==n)switch(n.state){case"pending":case"unsubscribed":if(0===n.callbacks.size)return delete this._subscriptionsByHash[e],"unsubscribed"===n.state&&delete this._subscriptionCallbacksByServerSubscriptionId[n.serverSubscriptionId],void await this._updateSubscriptions();await(async()=>{let{args:r,method:o}=n;try{this._setSubscription(e,{...n,state:"subscribing"});let t=await this._rpcWebSocket.call(o,r);this._setSubscription(e,{...n,serverSubscriptionId:t,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[t]=n.callbacks,await this._updateSubscriptions()}catch(ol){if(i.error(`Received ${ol instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:r,error:ol}),!t())return;this._setSubscription(e,{...n,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===n.callbacks.size&&await(async()=>{let{serverSubscriptionId:r,unsubscribeMethod:o}=n;if(this._subscriptionsAutoDisposedByRpc.has(r))this._subscriptionsAutoDisposedByRpc.delete(r);else{this._setSubscription(e,{...n,state:"unsubscribing"}),this._setSubscription(e,{...n,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[r])}catch(ol){if(ol instanceof Error&&i.error(`${o} error:`,ol.message),!t())return;return this._setSubscription(e,{...n,state:"subscribed"}),void await this._updateSubscriptions()}}this._setSubscription(e,{...n,state:"unsubscribed"}),await this._updateSubscriptions()})()}})))}_handleServerNotification(e,t){let n=this._subscriptionCallbacksByServerSubscriptionId[e];void 0!==n&&n.forEach((e=>{try{e(...t)}catch(n){i.error(n)}}))}_wsOnAccountNotification(e){let{result:t,subscription:n}=l.create(e,Dt);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){let n=this._nextClientSubscriptionId++,r=Ne([e.method,t]),i=this._subscriptionsByHash[r];return void 0===i?this._subscriptionsByHash[r]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=r,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];let t=this._subscriptionsByHash[r];F(void 0!==t,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),t.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){let{commitment:r,config:i}=$e(n),o=this._buildArgs([e.toBase58()],r||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){let{result:t,subscription:n}=l.create(e,Mt);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,r){let{commitment:i,config:o}=$e(n),a=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o||(r?{filters:qe(r)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){let r=this._buildArgs(["object"==typeof e?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},r)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){let{result:t,subscription:n}=l.create(e,Nn);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){let{result:t,subscription:n}=l.create(e,Lt);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){let{result:t,subscription:n}=l.create(e,jt);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){let n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():i.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,r){let i=t||this._commitment;if(i||n||r){let t={};n&&(t.encoding=n),i&&(t.commitment=i),r&&(t=Object.assign(t,r)),e.push(t)}return e}_buildArgsAtLeastConfirmed(e,t,n,r){let i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,r)}_wsOnSignatureNotification(e){let{result:t,subscription:n}=l.create(e,Wt);"receivedSignature"!==t.value&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,"receivedSignature"===t.value?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){let r=this._buildArgs([e],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(e,n)=>{if("status"===e.type){t(e.result,n);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},r);return i}onSignatureWithOptions(e,t,n){let{commitment:r,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([e],r,void 0,i),a=this._makeSubscription({callback:(e,n)=>{t(e,n);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){let{result:t,subscription:n}=l.create(e,Ht);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}},e.Ed25519Program=jn,e.Enum=class extends T{constructor(e){if(super(e),this.enum="",1!==Object.keys(e).length)throw new Error("Enum can only take single value");Object.keys(e).map((e=>{this.enum=e}))}},e.EpochSchedule=De,e.FeeCalculatorLayout=we,e.Keypair=Dn,e.LAMPORTS_PER_SOL=1e9,e.LOOKUP_TABLE_INSTRUCTION_LAYOUTS=Bn,e.Loader=ke,e.Lockup=zn,e.MAX_SEED_LENGTH=32,e.Message=Z,e.MessageAccountKeys=U,e.MessageV0=Q,e.NONCE_ACCOUNT_LENGTH=Ee,e.NonceAccount=Ce,e.PACKET_DATA_SIZE=D,e.PUBLIC_KEY_LENGTH=A,e.PublicKey=N,e.SIGNATURE_LENGTH_IN_BYTES=64,e.SOLANA_SCHEMA=R,e.STAKE_CONFIG_ID=Xn,e.STAKE_INSTRUCTION_LAYOUTS=Jn,e.SYSTEM_INSTRUCTION_LAYOUTS=xe,e.SYSVAR_CLOCK_PUBKEY=oe,e.SYSVAR_EPOCH_SCHEDULE_PUBKEY=ae,e.SYSVAR_INSTRUCTIONS_PUBKEY=se,e.SYSVAR_RECENT_BLOCKHASHES_PUBKEY=fe,e.SYSVAR_RENT_PUBKEY=ce,e.SYSVAR_REWARDS_PUBKEY=le,e.SYSVAR_SLOT_HASHES_PUBKEY=ue,e.SYSVAR_SLOT_HISTORY_PUBKEY=de,e.SYSVAR_STAKE_HISTORY_PUBKEY=he,e.Secp256k1Program=$n,e.SendTransactionError=pe,e.SolanaJSONRPCError=ge,e.SolanaJSONRPCErrorCode={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016},e.StakeAuthorizationLayout=Vn,e.StakeInstruction=class{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);let t,n=m.u32("instruction").decode(e.data);for(let[r,i]of Object.entries(Jn))if(i.index==n){t=r;break}if(!t)throw new Error("Instruction type incorrect; not a StakeInstruction");return t}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{authorized:t,lockup:n}=ve(Jn.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new Fn(new N(t.staker),new N(t.withdrawer)),lockup:new zn(n.unixTimestamp,n.epoch,new N(n.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),ve(Jn.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{newAuthorized:t,stakeAuthorizationType:n}=ve(Jn.Authorize,e.data),r={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new N(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(r.custodianPubkey=e.keys[3].pubkey),r}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{newAuthorized:t,stakeAuthorizationType:n,authoritySeed:r,authorityOwner:i}=ve(Jn.AuthorizeWithSeed,e.data),o={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:r,authorityOwner:new N(i),newAuthorizedPubkey:new N(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(o.custodianPubkey=e.keys[3].pubkey),o}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{lamports:t}=ve(Jn.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ve(Jn.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);let{lamports:t}=ve(Jn.Withdraw,e.data),n={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(n.custodianPubkey=e.keys[5].pubkey),n}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ve(Jn.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(Gn.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}},e.StakeProgram=Gn,e.Struct=T,e.SystemInstruction=class{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);let t,n=m.u32("instruction").decode(e.data);for(let[r,i]of Object.entries(xe))if(i.index==n){t=r;break}if(!t)throw new Error("Instruction type incorrect; not a SystemInstruction");return t}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{lamports:t,space:n,programId:r}=ve(xe.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:n,programId:new N(r)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{lamports:t}=ve(xe.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{lamports:t,seed:n,programId:r}=ve(xe.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:n,programId:new N(r)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{space:t}=ve(xe.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{base:t,seed:n,space:r,programId:i}=ve(xe.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new N(t),seed:n,space:r,programId:new N(i)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{programId:t}=ve(xe.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new N(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{base:t,seed:n,programId:r}=ve(xe.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new N(t),seed:n,programId:new N(r)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{base:t,seed:n,lamports:r,space:i,programId:o}=ve(xe.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new N(t),seed:n,lamports:r,space:i,programId:new N(o)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{authorized:t}=ve(xe.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new N(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ve(xe.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);let{lamports:t}=ve(xe.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{authorized:t}=ve(xe.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new N(t)}}static checkProgramId(e){if(!e.equals(Se.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}},e.SystemProgram=Se,e.Transaction=ie,e.TransactionExpiredBlockheightExceededError=M,e.TransactionExpiredNonceInvalidError=L,e.TransactionExpiredTimeoutError=K,e.TransactionInstruction=re,e.TransactionMessage=class e{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(t,n){let{header:r,compiledInstructions:i,recentBlockhash:o}=t,{numRequiredSignatures:a,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:f}=r,c=a-s;F(c>0,"Message header is invalid");let l=t.staticAccountKeys.length-a-f;F(l>=0,"Message header is invalid");let u=t.getAccountKeys(n),d=u.get(0);if(void 0===d)throw new Error("Failed to decompile message because no account keys were found");let h=[];for(let e of i){let t=[];for(let i of e.accountKeyIndexes){let e,n=u.get(i);if(void 0===n)throw new Error(`Failed to find key for account key index ${i}`);e=i<a?i<c:i<u.staticAccountKeys.length?i-a<l:i-u.staticAccountKeys.length<u.accountKeysFromLookups.writable.length,t.push({pubkey:n,isSigner:i<r.numRequiredSignatures,isWritable:e})}let n=u.get(e.programIdIndex);if(void 0===n)throw new Error(`Failed to find program id for program id index ${e.programIdIndex}`);h.push(new re({programId:n,data:k(e.data),keys:t}))}return new e({payerKey:d,instructions:h,recentBlockhash:o})}compileToLegacyMessage(){return Z.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return Q.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}},e.TransactionStatus=te,e.VALIDATOR_INFO_KEY=tr,e.VERSION_PREFIX_MASK=B,e.VOTE_PROGRAM_ID=rr,e.ValidatorInfo=class e{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(n){let r=[...n];if(2!==q(r))return null;let i=[];for(let e=0;e<2;e++){let e=new N(G(r,0,A)),t=1===V(r);i.push({publicKey:e,isSigner:t})}if(i[0].publicKey.equals(tr)&&i[1].isSigner){let n=H().decode(t.Buffer.from(r)),o=JSON.parse(n);return l.assert(o,nr),new e(i[1].publicKey,o)}return null}},e.VersionedMessage=ee,e.VersionedTransaction=class e{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,void 0!==t)F(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{let t=[];for(let n=0;n<e.header.numRequiredSignatures;n++)t.push(new Uint8Array(64));this.signatures=t}this.message=e}serialize(){let e=this.message.serialize(),t=Array();X(t,this.signatures.length);let n=m.struct([m.blob(t.length,"encodedSignaturesLength"),m.seq(W(),this.signatures.length,"signatures"),m.blob(e.length,"serializedMessage")]),r=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},r);return r.slice(0,i)}static deserialize(t){let n=[...t],r=[],i=q(n);for(let e=0;e<i;e++)r.push(new Uint8Array(G(n,0,64)));let o=ee.deserialize(new Uint8Array(n));return new e(o,r)}sign(e){let t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(let r of e){let e=n.findIndex((e=>e.equals(r.publicKey)));F(e>=0,`Cannot sign with non signer key ${r.publicKey.toBase58()}`),this.signatures[e]=x(t,r.secretKey)}}addSignature(e,t){F(64===t.byteLength,"Signature must be 64 bytes long");let n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex((t=>t.equals(e)));F(n>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[n]=t}},e.VoteAccount=class e{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(t){let n=ir.decode(k(t),4),r=n.rootSlot;return n.rootSlotValid||(r=null),new e({nodePubkey:new N(n.nodePubkey),authorizedWithdrawer:new N(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:r,authorizedVoters:n.authorizedVoters.map(or),priorVoters:sr(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}},e.VoteAuthorizationLayout=Qn,e.VoteInit=Yn,e.VoteInstruction=class{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);let t,n=m.u32("instruction").decode(e.data);for(let[r,i]of Object.entries(Zn))if(i.index==n){t=r;break}if(!t)throw new Error("Instruction type incorrect; not a VoteInstruction");return t}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);let{voteInit:t}=ve(Zn.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new Yn(new N(t.nodePubkey),new N(t.authorizedVoter),new N(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{newAuthorized:t,voteAuthorizationType:n}=ve(Zn.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new N(t),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:n,newAuthorized:r,voteAuthorizationType:i}}=ve(Zn.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new N(t),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new N(r),voteAuthorizationType:{index:i},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{lamports:t}=ve(Zn.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(er.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}},e.VoteProgram=er,e.clusterApiUrl=function(e,t){let n=!1===t?"http":"https";if(!e)return fr[n].devnet;let r=fr[n][e];if(!r)throw new Error(`Unknown ${n} cluster: ${e}`);return r},e.sendAndConfirmRawTransaction=async function(e,t,n,r){let i,o;n&&Object.prototype.hasOwnProperty.call(n,"lastValidBlockHeight")||n&&Object.prototype.hasOwnProperty.call(n,"nonceValue")?(i=n,o=r):o=n;let a=o&&{skipPreflight:o.skipPreflight,preflightCommitment:o.preflightCommitment||o.commitment,minContextSlot:o.minContextSlot},s=await e.sendRawTransaction(t,a),f=o&&o.commitment,c=(await(i?e.confirmTransaction(i,f):e.confirmTransaction(s,f))).value;if(c.err)throw null!=s?new pe({action:a?.skipPreflight?"send":"simulate",signature:s,transactionMessage:`Status: (${JSON.stringify(c)})`}):new Error(`Raw transaction ${s} failed (${JSON.stringify(c)})`);return s},e.sendAndConfirmTransaction=be})),tl=h((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))},n=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.OKXSolanaProvider=void 0;var r=el(),o=n(ha()),a=sf(),s=class{getRealChainId(e){if(null==e){if(1==this.chainsSet.size){let e="",t=this.defaultChainMap;if(this.chainsSet.forEach((function(n){t.has(n)&&(e=t.get(n))})),""==e)throw new Error("unsupported chainId");return e}throw new Error("connected to multiple solana chains,chainId can not be null")}if(e.startsWith("svm"))return e;if(this.caip.includes(e))return e;throw new Error("wrong chainId")}getConnectedNamespace(){var e,t,n;null===(n=null===(t=null===(e=this.provider.session)||void 0===e?void 0:e.namespaces)||void 0===t?void 0:t.solana)||void 0===n||n.chains.forEach((e=>{this.chainsSet.add(e.split(":")[0])}))}constructor(e){this.chainsSet=new Set,this.caip=["solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","sonic:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","sonic:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"],this.defaultChainMap=new Map,this.provider=e,this.defaultChainMap.set("solana","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp"),this.defaultChainMap.set("sonic","sonic:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"),this.getConnectedNamespace()}signMessage(e,n){return t(this,void 0,void 0,(function*(){var t,r,s;let f=e;f="OKX Wallet"==(null===(r=null===(t=this.provider.session)||void 0===t?void 0:t.wallet)||void 0===r?void 0:r.appName)?o.default.encode((new TextEncoder).encode(e)):e,n=this.getRealChainId(n);try{let e={chainId:n,method:"solana_signMessage",params:{message:f,pubkey:null===(s=this.getAccount(n))||void 0===s?void 0:s.address}},t=yield this.provider.request(e,n);if((0,a.logDebug)("signMessage111",t),"result"in t){let e=t.result;return new Promise(((t,r)=>{var i;t({signature:o.default.decode(e),publicKey:null===(i=this.getAccount(n))||void 0===i?void 0:i.address})}))}return(0,a.logDebug)("signMessage111",t),new Promise(((e,n)=>{e(t.error)}))}catch(ol){return i.error("\u65b9\u6cd5\u6570\u636e\u56de\u8c03\u5931\u8d25 --Error--",ol),new Promise(((t,n)=>{t(ol)}))}}))}getAccount(e){var t,n,i,o;let s=null===(n=null===(t=this.provider.session)||void 0===t?void 0:t.namespaces.solana)||void 0===n?void 0:n.accounts[0];if(null!=e&&(s=null===(o=null===(i=this.provider.session)||void 0===i?void 0:i.namespaces.solana)||void 0===o?void 0:o.accounts.filter((function(t){return t.startsWith(e)}))[0]),(0,a.logDebug)("getAccount",s),!s)return;let f=s.split(":")[2];return f?{address:f,publicKey:new r.PublicKey(f)}:void 0}signTransaction(e,t){var n,r;(0,a.logDebug)("OKXSolanaProvider",typeof e),t=this.getRealChainId(t);try{let r=e.serialize({requireAllSignatures:!1,verifySignatures:!1}),i={data:o.default.encode(r),from:null===(n=this.getAccount(t))||void 0===n?void 0:n.address};return this.getSignedTransaction("solana_signTransaction",i,t)}catch{let n=e.serialize(),i={data:o.default.encode(n),from:null===(r=this.getAccount(t))||void 0===r?void 0:r.address};return this.getSignedTransaction("solana_signTransaction",i,t)}}signAllTransactions(e,n){return t(this,void 0,void 0,(function*(){n=this.getRealChainId(n);try{var t=e.map((e=>{var t,i;return i=e instanceof r.VersionedTransaction?e.serialize():e.serialize({requireAllSignatures:!1,verifySignatures:!1}),{data:o.default.encode(i),from:null===(t=this.getAccount(n))||void 0===t?void 0:t.address}}));let i=yield this.provider.request({method:"solana_signAllTransactions",params:{transactions:t}},n);if("result"in i){let e=i.result,t=JSON.parse(e).map((e=>{let t=o.default.decode(e);try{let e=r.Transaction.from(t);return(0,a.logDebug)("verifySignatures",e.verifySignatures()),e}catch{return r.VersionedTransaction.deserialize(t)}}));return new Promise(((e,n)=>{e(t)}))}return new Promise(((e,t)=>{e(i)}))}catch(i){return(0,a.logDebug)("getSignedTransaction",i),new Promise(((e,t)=>{e(i)}))}}))}signAndSendTransaction(e,n){return t(this,void 0,void 0,(function*(){var t,r;n=this.getRealChainId(n);try{let i={};try{let r=e.serialize({requireAllSignatures:!1,verifySignatures:!1});i={data:o.default.encode(r),from:null===(t=this.getAccount(n))||void 0===t?void 0:t.address}}catch{let t=e.serialize();i={data:o.default.encode(t),from:null===(r=this.getAccount(n))||void 0===r?void 0:r.address}}let a=yield this.provider.request({method:"solana_signAndSendTransaction",params:i},n);if("result"in a){let e=a.result;return new Promise(((t,n)=>{t(e)}))}return new Promise(((e,t)=>{e(a)}))}catch(i){return(0,a.logDebug)("getSignedTransaction",i),new Promise(((e,t)=>{e(i)}))}}))}getSignedTransaction(e,n,i){return t(this,void 0,void 0,(function*(){try{let t=yield this.provider.request({method:e,params:n},i);if("result"in t){let e,n=t.result,i=o.default.decode(n);try{e=r.Transaction.from(i)}catch{e=r.VersionedTransaction.deserialize(i)}return e instanceof r.VersionedTransaction||(0,a.logDebug)("verifySignatures",e.verifySignatures()),new Promise(((t,n)=>{t(e)}))}return new Promise(((e,n)=>{n(t)}))}catch(t){return(0,a.logDebug)("getSignedTransaction",t),new Promise(((e,n)=>{e(t)}))}}))}};e.OKXSolanaProvider=s,e.default=s})),nl=h((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OKXSolanaProvider=void 0;var t=tl();Object.defineProperty(e,"OKXSolanaProvider",{enumerable:!0,get:function(){return t.OKXSolanaProvider}})})),rl=((Hc=rl||{}).CONNECT="connect",Hc.DISPLAY_URI="display_uri",Hc.SHORT_DISPLAY_URI="short_display_uri",Hc.SESSION_CONNECTING="session_connecting",Hc.SESSION_UPDATE="session_update",Hc.SESSION_DELETE="session_delete",Hc.DEFAULT_CHAIN_CHANGED="default_chain_changed",Hc.OKX_ENGINE_CONNECT_PARAMS="okx_engine_connect_params",Hc.UPDATE_NAMESPACES="update_name_spaces",Hc),il={icon:"https://static.okx.com/cdn/assets/imgs/2411/12DD872FB560732B.png",uuid:"dfc7efd3-2d67-482d-a8d8-d1fbae467cae",name:"OKX Mini Wallet"};var ol,al,sl=((ol=sl||{}).ETHEREUM="ethereum",ol.SOLANA="solana",ol.BITCOIN="bitcoin",ol.TON="ton",ol.APTOS="aptos",ol.SUI="sui",ol.COSMOS="cosmos",ol),fl=[{appBaseChain:"ethereum",chain:"mainnet",chainName:"Ethereum",rpcUrl:"https://www.okx.com/fullnode/eth/discover/rpc",chainId:1,networkId:"1",symbol:"ETH",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"optimism",chainName:"Optimism",rpcUrl:"https://www.okx.com/fullnode/op/discover/rpc",chainId:10,networkId:"10",symbol:"OP_ETH",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"gnosis",chainName:"Gnosis",rpcUrl:"https://www.okx.com/priapi/v1/wallet/rpc/send?chainId=100",chainId:100,networkId:"100",symbol:"XDAI",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"ethw",chainName:"EthereumPoW",rpcUrl:"https://www.okx.com/priapi/v1/wallet/rpc/send?chainId=10001",chainId:10001,networkId:"10001",symbol:"ETHW",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"CFX",chainName:"Conflux",rpcUrl:"https://www.okx.com/priapi/v1/wallet/rpc/send?chainId=1030",chainId:1030,networkId:"1030",symbol:"CFX",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"metis",chainName:"Metis",rpcUrl:"https://www.okx.com/priapi/v1/wallet/rpc/send?chainId=1088",chainId:1088,networkId:"1088",symbol:"METIS",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"DYM",chainName:"Dymension",rpcUrl:"https://www.okx.com/fullnode/dym/discover/rpc",chainId:1100,networkId:"1100",symbol:"DYM",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"POLYGON_ETH",chainName:"Polygon zkEVM",rpcUrl:"https://www.okx.com/fullnode/zkevm/discover/rpc",chainId:1101,networkId:"1101",symbol:"POLYGON_ETH",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"WEMIX",chainName:"Wemix 3.0",rpcUrl:"https://www.okx.com/fullnode/wemix/discover/rpc",chainId:1111,networkId:"1111",symbol:"WEMIX",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"SEPOLIA_ETH",chainName:"Sepolia",rpcUrl:"https://www.okx.com/priapi/v1/wallet/rpc/send?chainId=11155111",chainId:11155111,networkId:"11155111",symbol:"SEPOLIA_ETH",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"core",chainName:"Core",rpcUrl:"https://www.okx.com/fullnode/core/discover/rpc",chainId:1116,networkId:"1116",symbol:"CORE",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"ISLM",chainName:"HAQQ Network",rpcUrl:"https://www.okx.com/priapi/v1/wallet/rpc/send?chainId=11235",chainId:11235,networkId:"11235",symbol:"ISLM",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"moonbeam",chainName:"Moonbeam",rpcUrl:"https://www.okx.com/fullnode/moonbeam/discover/rpc",chainId:1284,networkId:"1284",symbol:"GLMR",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"moonriver",chainName:"Moonriver",rpcUrl:"https://www.okx.com/priapi/v1/wallet/rpc/send?chainId=1285",chainId:1285,networkId:"1285",symbol:"MOVR",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"AURORA_ETH",chainName:"Aurora",rpcUrl:"https://www.okx.com/priapi/v1/wallet/rpc/send?chainId=1313161554",chainId:1313161554,networkId:"1313161554",symbol:"AURORA_ETH",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"EVM_SEI",chainName:"Sei EVM",rpcUrl:"https://www.okx.com/fullnode/seievm/discover/rpc",chainId:1329,networkId:"1329",symbol:"EVM_SEI",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"IMX",chainName:"Immutable zkEVM",rpcUrl:"https://www.okx.com/fullnode/imxzkevm/discover/rpc",chainId:13371,networkId:"13371",symbol:"IMX",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"polygon",chainName:"Polygon",rpcUrl:"https://www.okx.com/fullnode/poly/discover/rpc",chainId:137,networkId:"137",symbol:"POL",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"flare",chainName:"Flare",rpcUrl:"https://www.okx.com/priapi/v1/wallet/rpc/send?chainId=14",chainId:14,networkId:"14",symbol:"FLR",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"IP",chainName:"Story Odyssey Testnet",rpcUrl:"https://www.okx.com/fullnode/story/testnet/discover/rpc",chainId:1516,networkId:"1516",symbol:"IP",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"G",chainName:"Gravity Alpha",rpcUrl:"https://www.okx.com/fullnode/gravity/discover/rpc",chainId:1625,networkId:"1625",symbol:"G",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"TAIKO_ETH",chainName:"Taiko Mainnet",rpcUrl:"https://www.okx.com/fullnode/taiko/discover/rpc",chainId:167e3,networkId:"167000",symbol:"TAIKO_ETH",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"MANTA_ETH",chainName:"Manta Pacific",rpcUrl:"https://www.okx.com/priapi/v1/wallet/rpc/send?chainId=169",chainId:169,networkId:"169",symbol:"MANTA_ETH",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"OKB",chainName:"X Layer",rpcUrl:"https://www.okx.com/fullnode/xlayer/discover/rpc/ro",chainId:196,networkId:"196",symbol:"OKB",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"Bitlayer_BTC",chainName:"Bitlayer",rpcUrl:"https://www.okx.com/fullnode/bitlayer/discover/rpc",chainId:200901,networkId:"200901",symbol:"Bitlayer_BTC",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"RPG",chainName:"Rangers",rpcUrl:"https://www.okx.com/fullnode/ranger/discover/rpc/api/jsonrpc",chainId:2025,networkId:"2025",symbol:"RPG",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"OP_BNB",chainName:"opBNB",rpcUrl:"https://www.okx.com/fullnode/opbnb/discover/rpc",chainId:204,networkId:"204",symbol:"OP_BNB",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"EVM_KAVA",chainName:"Kava EVM",rpcUrl:"https://www.okx.com/priapi/v1/wallet/rpc/send?chainId=2222",chainId:2222,networkId:"2222",symbol:"EVM_KAVA",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"B2_BTC",chainName:"B\xb2 Network",rpcUrl:"https://www.okx.com/fullnode/b2evm/discover/rpc",chainId:223,networkId:"223",symbol:"B2_BTC",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"cronos",chainName:"Cronos",rpcUrl:"https://www.okx.com/priapi/v1/wallet/rpc/send?chainId=25",chainId:25,networkId:"25",symbol:"CRO",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"ftm",chainName:"Fantom",rpcUrl:"https://www.okx.com/fullnode/ftm/discover/rpc",chainId:250,networkId:"250",symbol:"FTM",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"KROMA_ETH",chainName:"Kroma",rpcUrl:"https://www.okx.com/fullnode/kroma/discover/rpc",chainId:255,networkId:"255",symbol:"KROMA_ETH",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"ONCHAIN_ETH",chainName:"Onchain Mainnet",rpcUrl:"https://www.okx.com/fullnode/onchain/discover/rpc",chainId:27563,networkId:"27563",symbol:"ONCHAIN_ETH",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"boba",chainName:"Boba",rpcUrl:"https://www.okx.com/priapi/v1/wallet/rpc/send?chainId=288",chainId:288,networkId:"288",symbol:"BOBA_ETH",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"RBTC",chainName:"Rootstock",rpcUrl:"https://www.okx.com/fullnode/rootstock/discover/rpc",chainId:30,networkId:"30",symbol:"RBTC",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"FIL",chainName:"Filecoin",rpcUrl:"https://www.okx.com/fullnode/fil/discover/rpc/rpc/v1",chainId:314,networkId:"314",symbol:"FIL",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"kcc",chainName:"KCC",rpcUrl:"https://www.okx.com/priapi/v1/wallet/rpc/send?chainId=321",chainId:321,networkId:"321",symbol:"KCS",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"ERA_ETH",chainName:"zkSync Era",rpcUrl:"https://www.okx.com/fullnode/zkera/discover/rpc",chainId:324,networkId:"324",symbol:"ERA_ETH",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"APE",chainName:"ApeChain",rpcUrl:"https://www.okx.com/fullnode/ape/fork/discover/rpc",chainId:33139,networkId:"33139",symbol:"APE",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"MODE_ETH",chainName:"Mode Network",rpcUrl:"https://www.okx.com/fullnode/mode/discover/rpc",chainId:34443,networkId:"34443",symbol:"MODE_ETH",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"PLS",chainName:"PulseChain",rpcUrl:"https://www.okx.com/priapi/v1/wallet/rpc/send?chainId=369",chainId:369,networkId:"369",symbol:"PLS",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"OMN",chainName:"Omega Network",rpcUrl:"https://www.okx.com/priapi/v1/wallet/rpc/send?chainId=408",chainId:408,networkId:"408",symbol:"OMN",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"MERLIN_BTC",chainName:"Merlin Chain",rpcUrl:"https://www.okx.com/fullnode/merlin/discover/rpc",chainId:4200,networkId:"4200",symbol:"MERLIN_BTC",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"arbitrum",chainName:"Arbitrum One",rpcUrl:"https://www.okx.com/fullnode/arbitrumnitro/discover/rpc",chainId:42161,networkId:"42161",symbol:"ARB_ETH",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"ARBSEPOLIA_ETH",chainName:"Arbitrum Sepolia",rpcUrl:"https://www.okx.com/fullnode/arbitrumsepolia/discover/rpc",chainId:421614,networkId:"421614",symbol:"ARBSEPOLIA_ETH",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"Nova",chainName:"Arbitrum Nova",rpcUrl:"https://www.okx.com/priapi/v1/wallet/rpc/send?chainId=42170",chainId:42170,networkId:"42170",symbol:"NOVA_ETH",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"celo",chainName:"Celo",rpcUrl:"https://www.okx.com/priapi/v1/wallet/rpc/send?chainId=42220",chainId:42220,networkId:"42220",symbol:"CELO",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"avax",chainName:"Avalanche C",rpcUrl:"https://www.okx.com/fullnode/avaxc/discover/rpc/ext/C/rpc",chainId:43114,networkId:"43114",symbol:"AVAX",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"IOTX",chainName:"IoTeX Network",rpcUrl:"https://www.okx.com/fullnode/iotx/discover/rpc",chainId:4689,networkId:"4689",symbol:"IOTX",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"MNT",chainName:"Mantle",rpcUrl:"https://www.okx.com/priapi/v1/wallet/rpc/send?chainId=5000",chainId:5e3,networkId:"5000",symbol:"MNT",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"ethf",chainName:"DIS CHAIN",rpcUrl:"https://www.okx.com/priapi/v1/wallet/rpc/send?chainId=513100",chainId:513100,networkId:"513100",symbol:"DIS",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"SCROLL_ETH",chainName:"Scroll",rpcUrl:"https://www.okx.com/fullnode/scroll/discover/rpc",chainId:534352,networkId:"534352",symbol:"SCROLL_ETH",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"bsc",chainName:"BNB Chain",rpcUrl:"https://www.okx.com/fullnode/bsc/discover/rpc",chainId:56,networkId:"56",symbol:"BNB",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"LINEA_ETH",chainName:"Linea",rpcUrl:"https://www.okx.com/fullnode/linea/discover/rpc",chainId:59144,networkId:"59144",symbol:"LINEA_ETH",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"BOB_ETH",chainName:"BOB Mainnet",rpcUrl:"https://www.okx.com/fullnode/bob/discover/rpc",chainId:60808,networkId:"60808",symbol:"BOB_ETH",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"ACE",chainName:"Endurance",rpcUrl:"https://www.okx.com/priapi/v1/wallet/rpc/send?chainId=648",chainId:648,networkId:"648",symbol:"ACE",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"okexchain",chainName:"OKTC",rpcUrl:"https://www.okx.com/priapi/v1/wallet/rpc/send?chainId=66",chainId:66,networkId:"66",symbol:"OKT",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"MAT",chainName:"Matchain",rpcUrl:"https://www.okx.com/fullnode/matchain/discover/rpc",chainId:698,networkId:"698",symbol:"MAT",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"ZETA",chainName:"ZetaChain Mainnet",rpcUrl:"https://www.okx.com/fullnode/zetamainnetevm/discover/rpc",chainId:7e3,networkId:"7000",symbol:"ZETA",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"ZORA_ETH",chainName:"Zora",rpcUrl:"https://www.okx.com/fullnode/zora/discover/rpc",chainId:7777777,networkId:"7777777",symbol:"ZORA_ETH",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"ZKLINK_ETH",chainName:"zkLink Nova",rpcUrl:"https://www.okx.com/fullnode/zklink/discover/rpc",chainId:810180,networkId:"810180",symbol:"ZKLINK_ETH",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"BLAST_ETH",chainName:"Blast",rpcUrl:"https://www.okx.com/fullnode/blast/discover/rpc",chainId:81457,networkId:"81457",symbol:"BLAST_ETH",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"Kaia Network",chainName:"Kaia Network",rpcUrl:"https://www.okx.com/priapi/v1/wallet/rpc/send?chainId=8217",chainId:8217,networkId:"8217",symbol:"KAIA",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"BASE_ETH",chainName:"Base",rpcUrl:"https://www.okx.com/fullnode/base/discover/rpc",chainId:8453,networkId:"8453",symbol:"BASE_ETH",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"CHZ",chainName:"Chiliz Chain",rpcUrl:"https://www.okx.com/fullnode/chz/discover/rpc",chainId:88888,networkId:"88888",symbol:"CHZ",baseChain:"mainnet"},{appBaseChain:"ethereum",chain:"LUMI_ETH",chainName:"Lumi Layer3",rpcUrl:"https://www.okx.com/fullnode/lumi/discover/rpc",chainId:94168,networkId:"94168",symbol:"LUMI_ETH",baseChain:"mainnet"}].reduce(((e,t)=>({...e,[t.symbol]:t})),{}),cl={ethereum:"eip155",solana:"solana",bitcoin:"btc",aptos:"aptos",sui:"sui",cosmos:"cosmos",ton:"ton"},ll={ethereum:fl,bitcoin:["btc:mainnet","fractal:mainnet"],solana:["solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp"],sui:["sui:mainnet"],aptos:["aptos:mainnet"],cosmos:["cosmos:cosmoshub-4"],ton:["ton:-239"]},ul=((al=ul||{}).ETH="ETH",al.OP_ETH="OP_ETH",al.XDAI="XDAI",al.ETHW="ETHW",al.CFX="CFX",al.METIS="METIS",al.DYM="DYM",al.POLYGON_ETH="POLYGON_ETH",al.WEMIX="WEMIX",al.SEPOLIA_ETH="SEPOLIA_ETH",al.CORE="CORE",al.ISLM="ISLM",al.GLMR="GLMR",al.MOVR="MOVR",al.AURORA_ETH="AURORA_ETH",al.EVM_SEI="EVM_SEI",al.IMX="IMX",al.POL="POL",al.FLR="FLR",al.IP="IP",al.G="G",al.ONE="ONE",al.TAIKO_ETH="TAIKO_ETH",al.MANTA_ETH="MANTA_ETH",al.OKB="OKB",al.Bitlayer_BTC="Bitlayer_BTC",al.RON="RON",al.RPG="RPG",al.OP_BNB="OP_BNB",al.EVM_KAVA="EVM_KAVA",al.B2_BTC="B2_BTC",al.CRO="CRO",al.FTM="FTM",al.KROMA_ETH="KROMA_ETH",al.ONCHAIN_ETH="ONCHAIN_ETH",al.BOBA_ETH="BOBA_ETH",al.RBTC="RBTC",al.FIL="FIL",al.KCS="KCS",al.ERA_ETH="ERA_ETH",al.APE="APE",al.MODE_ETH="MODE_ETH",al.PLS="PLS",al.OMN="OMN",al.MERLIN_BTC="MERLIN_BTC",al.ARB_ETH="ARB_ETH",al.ARBSEPOLIA_ETH="ARBSEPOLIA_ETH",al.NOVA_ETH="NOVA_ETH",al.CELO="CELO",al.AVAX="AVAX",al.IOTX="IOTX",al.MNT="MNT",al.DIS="DIS",al.SCROLL_ETH="SCROLL_ETH",al.BNB="BNB",al.LINEA_ETH="LINEA_ETH",al.BOB_ETH="BOB_ETH",al.ACE="ACE",al.OKT="OKT",al.MAT="MAT",al.ZETA="ZETA",al.ZORA_ETH="ZORA_ETH",al.ZKLINK_ETH="ZKLINK_ETH",al.BLAST_ETH="BLAST_ETH",al.KAIA="KAIA",al.BASE_ETH="BASE_ETH",al.CHZ="CHZ",al.LUMI_ETH="LUMI_ETH",al),dl=e=>{switch(e){case"ethereum":return(()=>{let e=[],t={},n=ll.ethereum;return Object.keys(n).forEach((r=>{let i=n[r];e.push(`eip155:${i.networkId}`),t[i.chainId]=i.rpcUrl})),{[cl.ethereum]:{chains:e,rpcMap:t,defaultChain:"1"}}})();case"solana":return{[cl.solana]:{chains:ll.solana}};case"bitcoin":return{[cl.bitcoin]:{chains:ll.bitcoin}};case"sui":return{[cl.sui]:{chains:ll.sui}};case"aptos":return{[cl.aptos]:{chains:ll.aptos}};case"cosmos":return{[cl.cosmos]:{chains:ll.cosmos}};default:return{}}},hl=e=>{let t=(e=>{let t={};if(e?.networks)for(let n of e.networks)t={...t,...dl(n)};return e||(t={...t,...dl("ethereum"),...dl("solana"),...dl("bitcoin"),...dl("sui"),...dl("aptos")}),i.log("getNamespaceChains - requiredNamespaces: ",t),t})(e);return t?{namespaces:t}:{}},pl=b(ms()),gl=class e{static instance=null;level;constructor(){this.level=2}static getInstance(){return e.instance||(e.instance=new e),e.instance}static setLevel(t){e.getInstance().level=t}log(e,t,n){if(e>=this.level){let s=t?`[${t}] ${n}`:n;for(var r=arguments.length,o=new Array(r>3?r-3:0),a=3;a<r;a++)o[a-3]=arguments[a];switch(e){case 0:case 1:i.info(s,...o);break;case 2:i.warn(s,...o);break;case 3:i.error(s,...o)}}}createScopedLogger(e){var t=this;return{debug:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.log(0,e,n,...i)},info:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.log(1,e,n,...i)},warn:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.log(2,e,n,...i)},error:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.log(3,e,n,...i)}}}debug(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log(0,void 0,e,...n)}info(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log(1,void 0,e,...n)}warn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log(2,void 0,e,...n)}error(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log(3,void 0,e,...n)}};gl.getInstance();var bl=(e,t)=>{let n=((e,t)=>{if(!e?.namespaces)return null;let n=null;return Object.keys(e?.namespaces).forEach((r=>{r===cl[t]&&(n=e.namespaces[r])})),n})(e,t);if(n){let e=function(e){let t={};for(let n=0;n<e.length;n++){let r=e[n]?.split(":"),i=r?.[0],o=r?.[1],a=r?.[2],s=`${i}:${o}`;t[s]||(t[s]=[]),a&&t[s].push(a)}return t}(n.accounts),t=n.chains?.[0]?e[n.chains[0]]:[];return{chains:n.chains,accounts:t??[],methods:n.methods,defaultChain:n.defaultChain}}return null},yl={useMini:!0,openUniversalUrl:!0,tmaReturnUrl:"back"},ml=class e{static provider;static initialized=!1;options;sessionConfig=(()=>yl)();isClientReady=!1;client;session;logger;triggerEventToAdapter;constructor(){this.logger=this.initializeLogger()}static init(){return this.initialized||(this.provider=new e,e.initialized=!0),this.provider}async setupClient(e){this.isClientReady||(this.setupOptions(e),this.client=await pl.OKXUniversalProvider.init({dappMetaData:{name:"OKX WalletConnect UI Demo",icon:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png"}}),this.client.connected()&&(this.session=this.client.session),this.isClientReady=!0,this.logger.info("setupClient - completed: ",this.client))}setupOptions(e){let t={...hl(e)};this.options=t}getSessionConfig(){return this.sessionConfig}setSessionConfig(e){this.sessionConfig={...this.sessionConfig,...e}}getClient(){return this.client}isConnected(){return this.client?.connected()}getDefaultChainId(e){if(this.session)return this.session.namespaces[ll[e]]?.chains[0]}async getUri(){return new Promise(((e,t)=>{if(!this.client)return t("Client not initialized");this.client.on("short_display_uri",(t=>{this.logger.info("SHORT_DISPLAY_URI event triggered",t),e(t)})),this.sessionConfig.useMini=!1,this.sessionConfig.openUniversalUrl=!1,this.sessionConfig.tmaReturnUrl="none",this.connect().catch((e=>(this.triggerEventToAdapter&&this.triggerEventToAdapter("connect_error",e),t(e))))}))}async connectApp(){return this.sessionConfig.useMini=!1,this.sessionConfig.openUniversalUrl=!0,this.sessionConfig.tmaReturnUrl="back",await this.connect()}async connectTG(){return this.sessionConfig.useMini=!0,this.sessionConfig.openUniversalUrl=!0,this.sessionConfig.tmaReturnUrl="back",await this.connect()}async connect(){return this.client&&this.sessionConfig?await this.client.connect({...this.options,sessionConfig:this.sessionConfig}):void 0}async request(e,t){if(!this.client||!this.session)return;let n=bl(this.session,t??"ethereum"),r=this.getDefaultChainId(t??"ethereum");return n?.chains&&n.chains?.length>0&&(r=n?.chains[0]),this.client.request(e,r)}async disconnect(){this.client&&(this.logger.info("disconnecting: ",this.client),await this.client.disconnect(),this.session=void 0)}subscribe(e){this.client&&Object.keys(rl).forEach((t=>{let n=rl[t];this.client?.on(n,(t=>{if("short_display_uri"!==n){switch(this.logger.info(`${n} event triggered`),n){case"connect":this.session=t.session;break;case"session_update":this.session=t;break;case"session_delete":this.session=void 0}e&&(this.triggerEventToAdapter=e,e(n,t))}}))}))}initializeLogger(){let e=gl.getInstance();return gl.setLevel(0),e.createScopedLogger(this.constructor.name)}},vl=b(cf()),wl=class e{static provider;client;static initialized=!1;logger;constructor(){this.logger=this.initializeLogger()}static init(t){return this.initialized||(this.provider=new e,this.provider.setupClient(t),e.initialized=!0),this.provider}setupClient(e){this.client?this.logger.info("client already initialized"):this.client=new vl.OKXAptosProvider(e)}getAccount(e){if(this.client)return this.client.getAccount(e);this.logger.error("client not initialized")}async signMessage(e,t){if(this.client)return await this.client.signMessage(e,t);this.logger.error("client not initialized")}async signTransaction(e,t){if(this.client)return await this.client.signTransaction(e,t);this.logger.error("client not initialized")}async signAndSubmitTransaction(e,t){if(this.client)return await this.client.signAndSubmitTransaction(e,t);this.logger.error("client not initialized")}initializeLogger(){let e=gl.getInstance();return gl.setLevel(0),e.createScopedLogger(this.constructor.name)}},_l=b(dn(),1).default,El=class extends _l{logger;constructor(){super(),this.logger=this.initializeLogger(),this.logger.debug("Adapter initialized")}static createProxy(){throw new Error("createProxy method not implemented")}getLogger(){return this.logger}initializeLogger(){let e=gl.getInstance();return gl.setLevel(0),e.createScopedLogger(this.constructor.name)}},Cl={ETH_SEND_TRANSACTION:"eth_sendTransaction",PERSONAL_SIGN:"personal_sign",ETH_SIGN_TYPED_DATA_V4:"eth_signTypedData_v4",WALLET_ADD_ETHEREUM_CHAIN:"wallet_addEthereumChain",WALLET_SWITCH_ETHEREUM_CHAIN:"wallet_switchEthereumChain",WALLET_WATCH_ASSET:"wallet_watchAsset",ETH_ACCOUNTS:"eth_accounts",ETH_REQUEST_ACCOUNTS:"eth_requestAccounts",ETH_CHAIN_ID:"eth_chainId"},Ol=["eth_blockNumber","eth_call","eth_chainId","eth_coinbase","eth_decrypt","eth_estimateGas","eth_gasPrice","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getEncryptionPublicKey","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleByBlockHashAndIndex","eth_getUncleByBlockNumberAndIndex","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_getWork","eth_hashrate","eth_mining","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_protocolVersion","eth_sendRawTransaction","eth_sendTransaction","eth_sign","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4","eth_submitHashrate","eth_submitWork","eth_syncing","eth_uninstallFilter","wallet_getProviderState","metamask_watchAsset","net_listening","net_peerCount","net_version","personal_ecRecover","personal_sign","wallet_watchAsset","web3_clientVersion","web3_sha3","eth_feeHistory"],xl="connect",Sl=()=>({get:(e,t)=>"__target__"===t?e:Reflect.get(e,t),set:(e,t,n)=>Reflect.set(e,t,n),deleteProperty:(e,t)=>Reflect.deleteProperty(e,t)}),kl=(e,t)=>!(!e||!t||e.length!==t.length)&&e.every(((e,n)=>e===t[n])),Tl=class e extends El{static eip6963ProviderInfo;provider;lastSession=null;constructor(t){super(),e.setupEip6963ProviderInfo(il),this.provider=t}static setupEip6963ProviderInfo(e){this.eip6963ProviderInfo=e}createProxy(){let e=new Proxy(this,Sl());return this.addEip6963Support(e),e}async request(e){if(![...Ol,...Object.values(Cl)].includes(e.method))return this.logger.info(`Method ${e.method} not supported`),Promise.reject(`Method ${e.method} not supported`);let{method:t,params:n}=e,r=n?{method:t,params:n}:{method:t};switch(t){case Cl.ETH_REQUEST_ACCOUNTS:return await this.handleRequestAccounts();case Cl.PERSONAL_SIGN:r={method:Cl.PERSONAL_SIGN,params:[n[0],n[1]]};break;case Cl.ETH_SIGN_TYPED_DATA_V4:r={method:Cl.ETH_SIGN_TYPED_DATA_V4,params:[n[0],JSON.parse(n[1])]}}try{let e=await this.provider.request(r,"ethereum");return this.getLogger().debug("Requesting accounts result: ",t,e),Promise.resolve(e)}catch(i){return this.getLogger().error(`Requesting accounts error: ${i.message}`),Promise.reject(i)}}isConnected(){return this.provider.isConnected()}async disconnect(){await this.provider.disconnect(),this.logger.info("disconnect: ",this.lastSession)}providerCallback(e,t){switch(i.log("providerCallback",e,t),e){case"connect":case"session_update":this.sessionUpdateCallback(t);break;case"session_delete":this.sessionDeleteCallback(t);break;default:this.getLogger().warn(`provider callback not implemented: ${e}`)}}async handleRequestAccounts(){if(!this.provider?.getClient())return Promise.reject("client not setup");try{if(this.logger.debug("handleRequestAccounts: ",this.provider,this.provider.isConnected()),!this.provider.isConnected()){let e=await this.provider.connect();this.handleSessionConnected(e)}let e=await this.provider.request({method:"eth_accounts"},"ethereum");return this.getLogger().debug("Requesting accounts result: ",e),Promise.resolve(e)}catch(e){return this.getLogger().error(`Requesting accounts error: ${e.message}`),Promise.reject(e)}}handleSessionConnected(e){if(e){let t=bl(e,"ethereum");this.emit("connect",{chainId:t?.chains[0]}),this.emit("accountsChanged",t?.accounts),this.emit("chainChanged",t?.chains[0]),this.lastSession=t}}addEip6963Support(t){let n=new CustomEvent("eip6963:announceProvider",{detail:Object.freeze({info:e.eip6963ProviderInfo,provider:t})});this.logger.debug("announceProviderEvent",n),window.dispatchEvent(n),window.addEventListener("eip6963:requestProvider",(()=>{window.dispatchEvent(n)}))}sessionUpdateCallback(e){!this.lastSession&&e&&this.emit("connect",{chainId:e?.chains[0]}),this.lastSession?.chains[0]!==e?.chains[0]&&this.emit("chainChanged",e?.chains[0]),kl(this.lastSession?.accounts,e?.accounts)||this.emit("accountsChanged",e?.accounts),this.lastSession=e}sessionDeleteCallback(e){this.lastSession=null;let t={code:4900,message:"Session deleted",data:{topic:e}};this.emit("disconnect",t),this.emit("accountsChanged",[]),this.emit("chainChanged","")}},Rl={ethereum:"universal",bitcoin:"universal",solana:"solana",sui:"sui",aptos:"aptos",cosmos:"universal",ton:"ton"},Al=class extends El{provider;lastSession=null;constructor(e){super(),this.provider=e}createProxy(){return new Proxy(this,Sl())}async connect(){}async disconnect(){}async getAccount(){}async getNetwork(){}async signTransaction(){}async signMessage(){}async signAndSubmitTransaction(){}providerCallback(e,t){switch(e){case"connect":case"session_update":this.sessionUpdateCallback(t);break;case"session_delete":this.sessionDeleteCallback(t);break;default:this.getLogger().warn(`provider callback not implemented: ${e}`)}}sessionUpdateCallback(e){this.lastSession}sessionDeleteCallback(e){}},Il=class extends El{solanaProvider;lastSession=null;constructor(e){super(),this.solanaProvider=e}get publicKey(){return this.solanaProvider.getAccount()?.publicKey}get address(){return this.solanaProvider.getAccount()?.address}createProxy(){return new Proxy(this,Sl())}async request(e){let{method:t}=e;if(t===xl)return this.handleSessionConnected();try{let n=await this.solanaProvider.request(e);return this.getLogger().debug(`Requesting ${t} result: `,n),Promise.resolve(n)}catch(n){return this.getLogger().error(`Requesting ${t} error: ${n.message}`),Promise.reject(n)}}async connect(){return this.handleSessionConnected()}async disconnect(){await this.solanaProvider.disconnect(),this.logger.info("disconnect: ",this.lastSession)}async signMessage(e){let t=await this.solanaProvider.signMessage(e);if(t instanceof Error)throw t;return t}getAccount(){return this.solanaProvider.getAccount()}async signTransaction(e){let t=await this.solanaProvider.signTransaction(e);if(t instanceof Error)throw t;return t}async signAllTransactions(e){let t=await this.solanaProvider.signAllTransactions(e);if(t instanceof Error)throw t;return t}async signAndSendTransaction(e){let t=await this.solanaProvider.signAndSendTransaction(e);if(t instanceof Error)throw t;return t}isConnected(){return this.solanaProvider?.isConnected()||!1}async handleSessionConnected(){try{this.logger.debug("handleSolanaConnect: ",this.solanaProvider.isConnected()),this.solanaProvider.isConnected()||await this.solanaProvider.connect();let e=this.publicKey;return this.getLogger().debug("handleSolanaConnect result: ",e),Promise.resolve({publicKey:e})}catch(e){return this.getLogger().error(`Requesting accounts error: ${e.message}`),Promise.reject(e)}}providerCallback(e,t){switch(i.log("providerCallback",e,t),e){case"connect":this.handleConnectedEvent(t);break;case"session_update":this.sessionUpdateCallback(t);break;case"session_delete":this.sessionDeleteCallback();break;default:this.getLogger().warn(`provider callback not implemented: ${e}`)}}handleConnectedEvent(e){e&&(i.log("sessionInfo",e),this.emit("connect",this.publicKey),this.emit("accountsChanged",this.publicKey),this.emit("chainChanged",e?.chains[0]),this.lastSession=e)}sessionUpdateCallback(e){!this.lastSession&&e&&this.emit("connect",this.publicKey),this.lastSession?.chains[0]!==e?.chains[0]&&this.emit("chainChanged",e?.chains[0]),kl(this.lastSession?.accounts,e?.accounts)||this.emit("accountsChanged",this.publicKey),this.lastSession=e}sessionDeleteCallback(){this.lastSession=null,this.emit("disconnect",null),this.emit("accountsChanged",null),this.emit("chainChanged",null)}},Nl=b(nl()),Pl=class e{static provider;client;static initialized=!1;universalProvider;logger;constructor(){this.logger=this.initializeLogger()}static init(t){return this.initialized||(this.provider=new e,this.provider.setupClient(t),e.initialized=!0),this.provider}get defaultChainId(){return this.universalProvider?.getDefaultChainId("solana")}setupClient(e){this.client?this.logger.info("client already initialized"):(this.client=new Nl.OKXSolanaProvider(e.getClient()),this.universalProvider=e)}async request(e){return this.universalProvider?.request(e,"solana")}async connect(){return await this.universalProvider.connect()}async disconnect(){this.universalProvider.disconnect()}async signMessage(e){if(this.client)return this.client.signMessage(e,this.defaultChainId);this.logger.error("client not initialized")}getAccount(){if(this.client)return this.client.getAccount(this.defaultChainId);this.logger.error("client not initialized")}async signTransaction(e){if(this.client)return this.client.signTransaction(e,this.defaultChainId);this.logger.error("client not initialized")}async signAllTransactions(e){if(this.client)return this.client.signAllTransactions(e,this.defaultChainId);this.logger.error("client not initialized")}async signAndSendTransaction(e){if(this.client)return this.client.signAndSendTransaction(e,this.defaultChainId);this.logger.error("client not initialized")}isConnected(){return this.universalProvider.isConnected()||!1}initializeLogger(){let e=gl.getInstance();return gl.setLevel(0),e.createScopedLogger(this.constructor.name)}},Dl={canInjectProxies:!0,namespaces:{networks:["ethereum","solana"]},useMini:!0},Bl=class e extends _l{static sdk;static initialized=!1;static options=(()=>Dl)();universalProvider;connectProvider=(()=>new Map)();providers=(()=>new Map)();adapters={};logger;constructor(){super(),this.logger=this.initializeLogger(),this.triggerToAdapter=this.triggerToAdapter.bind(this)}static async init(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dl;return this.initialized||(this.options={...Dl,...t},this.sdk=new e,await this.sdk.initialize(this.options)),this.sdk}getSessionConfig(){if(this.universalProvider)return this.universalProvider.getSessionConfig();this.logger.error("OKX Universal Provider not initialized")}setSessionConfig(e){this.universalProvider?this.universalProvider.setSessionConfig(e):this.logger.error("OKX Universal Provider not initialized")}getProxyProviderByNetwork(e){return this.providers.get(e)}async getUri(){if(this.universalProvider)return this.universalProvider.isConnected()&&await this.universalProvider.disconnect(),e.options.canInjectProxies&&this.injectProxyProvider(),await this.universalProvider.getUri();this.logger.error("Universal provider is not initialized")}async connectApp(){this.universalProvider?(this.universalProvider.isConnected()&&await this.universalProvider.disconnect(),e.options.canInjectProxies&&this.injectProxyProvider(),await this.universalProvider.connectApp()):this.logger.error("Universal provider is not initialized")}async connectTG(){this.universalProvider?(this.universalProvider.isConnected()&&await this.universalProvider.disconnect(),e.options.canInjectProxies&&this.injectProxyProvider(),this.logger.info("Connecting to OKX TG Mini Wallet"),await this.universalProvider.connectTG()):this.logger.error("Universal provider is not initialized")}async connect(){this.universalProvider?(this.universalProvider.isConnected()&&await this.universalProvider.disconnect(),e.options.canInjectProxies&&this.injectProxyProvider(),await this.universalProvider.connect()):this.logger.error("Universal provider is not initialized")}async disconnect(){this.universalProvider?(await this.universalProvider.disconnect(),this.removeInjectedProxies()):this.logger.error("OKX Connect SDK not initialized")}removeInjectedProxies(){let e=!1;return this.providers.forEach(((t,n)=>{window[n]&&window[n]===t&&(delete window[n],e=!0)})),e}getLogger(){return this.logger}async initialize(t){this.logger.info("Initializing OKX Connect SDK");try{await this.setupClient(t),this.setupConnectProvider(t.namespaces?.networks),this.initAdapters(t),this.createProxyProviders(),e.options.canInjectProxies&&this.injectProxyProvider(),e.initialized=!0,this.logger.info("OKX Connect SDK initialized")}catch(n){throw this.logger.error(`Failed to initialize OKX Connect SDK: ${n}`),n}}async setupClient(e){this.universalProvider?this.logger.error("SDK already initialized"):(this.universalProvider=ml.init(),await this.universalProvider.setupClient(e.namespaces),await this.universalProvider.subscribe(this.triggerToAdapter))}setupConnectProvider(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!this.universalProvider)return void this.logger.error("OKX Universal Provider not initialized");let t=this.universalProvider.getClient();for(let n of e){let e;switch(Rl[n]){case"universal":e=this.universalProvider;break;case"solana":if(!t)return void this.logger.error("OKX Universal Provider not initialized");e=Pl.init(this.universalProvider);break;case"sui":case"ton":break;case"aptos":if(!t)return void this.logger.error("OKX Universal Provider not initialized");e=wl.init(t)}this.connectProvider.set(n,e)}}triggerToAdapter(e,t){this.logger.debug(`Triggering to adapter: ${e}: `,t),"connect_error"!==e?"session_connecting"!==e?("connect"===e&&this.emit("connect"),Object.keys(this.adapters).forEach((n=>{let r=this.adapters[n];r&&r.providerCallback&&("connect"===e?r.providerCallback(e,bl(t.session,n)):"session_update"===e?r.providerCallback(e,bl(t,n)):r.providerCallback(e,t))}))):this.emit("session_connecting"):this.emit("connect_error",t)}initAdapters(t){if(e.initialized)this.logger.error("OKX Connect SDK already initialized");else for(let e of t.namespaces?.networks||[])switch(e){case"ethereum":this.adapters.ethereum=new Tl(this.connectProvider.get("ethereum"));break;case"solana":this.adapters.solana=new Il(this.connectProvider.get("solana"));break;case"bitcoin":this.adapters.bitcoin=null;break;case"sui":this.adapters.sui=null;break;case"aptos":this.adapters.aptos=new Al(this.connectProvider.get("aptos"));break;case"ton":this.adapters.ton=null;break;default:this.logger.error(`Unsupported network: ${e}`)}}createProxyProviders(){Object.keys(this.adapters).forEach((e=>{let t=this.adapters[e].createProxy();t&&this.providers.set(e,t)}))}injectProxyProvider(){this.providers.forEach(((e,t)=>{if(e){if(window[t])return void this.logger.error(`Provider already exists for network: ${t}`);Object.defineProperty(window,t,{value:e,writable:!1,configurable:!0})}}))}initializeLogger(){let e=gl.getInstance();return gl.setLevel(0),e.createScopedLogger("OKXConnectSdk")}},Ml=null,Kl=async e=>(e=e||Dl,(Ml=await Bl.init(e)).setSessionConfig({useMini:!!e.useMini}),Ml),Ll=async()=>{if(Ml)return await Ml.getUri();i.error("OKX Connect SDK not initialized")},Ul=()=>{Ml?Ml.connectApp():i.error("OKX Connect SDK not initialized")},jl=()=>{Ml?Ml.connectTG():i.error("OKX Connect SDK not initialized")},Wl=()=>{Ml?Ml.connect():i.error("OKX Connect SDK not initialized")},Hl=async()=>{Ml?await Ml.disconnect():i.error("OKX Connect SDK not initialized")},$l=()=>Ml,ql=e=>{if(Ml)return Ml.getProxyProviderByNetwork(e);i.error("OKX Connect SDK not initialized")}},70420:()=>{},11714:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=11714,e.exports=t},81798:()=>{},72193:()=>{},39322:()=>{},44507:()=>{},97283:()=>{},99603:()=>{},87679:()=>{},33541:()=>{},76429:()=>{},70844:()=>{},94355:()=>{}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.amdO={},(()=>{var e="function"===typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"===typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"===typeof Symbol?Symbol("webpack error"):"__webpack_error__",i=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))};n.a=(n,o,a)=>{var s;a&&((s=[]).d=-1);var f,c,l,u=new Set,d=n.exports,h=new Promise(((e,t)=>{l=t,c=e}));h[t]=d,h[e]=e=>(s&&e(s),u.forEach(e),h.catch((e=>{}))),n.exports=h,o((n=>{var o;f=(n=>n.map((n=>{if(null!==n&&"object"===typeof n){if(n[e])return n;if(n.then){var o=[];o.d=0,n.then((e=>{a[t]=e,i(o)}),(e=>{a[r]=e,i(o)}));var a={};return a[e]=e=>e(o),a}}var s={};return s[e]=e=>{},s[t]=n,s})))(n);var a=()=>f.map((e=>{if(e[r])throw e[r];return e[t]})),c=new Promise((t=>{(o=()=>t(a)).r=0;var n=e=>e!==s&&!u.has(e)&&(u.add(e),e&&!e.d&&(o.r++,e.push(o)));f.map((t=>t[e](n)))}));return o.r?c:a()}),(e=>(e?l(h[r]=e):c(d),i(s)))),s&&s.d<0&&(s.d=0)}})(),(()=>{var e=[];n.O=(t,r,i,o)=>{if(!r){var a=1/0;for(l=0;l<e.length;l++){r=e[l][0],i=e[l][1],o=e[l][2];for(var s=!0,f=0;f<r.length;f++)(!1&o||a>=o)&&Object.keys(n.O).every((e=>n.O[e](r[f])))?r.splice(f--,1):(s=!1,o<a&&(a=o));if(s){e.splice(l--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[r,i,o]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(o,a),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.e=()=>Promise.resolve(),n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/dapp-demo/",(()=>{var e={792:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var i,o,a=r[0],s=r[1],f=r[2],c=0;if(a.some((t=>0!==e[t]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(f)var l=f(n)}for(t&&t(r);c<a.length;c++)o=a[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(l)},r=self.webpackChunk_repo_dapp_demo=self.webpackChunk_repo_dapp_demo||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.nc=void 0;var r=n.O(void 0,[96,738],(()=>n(78438)));r=n.O(r)})();